(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[5962],{85962:function(e,t,n){"use strict";n.d(t,{Z:function(){return T}});var r=n(21914),i=n(15882),o=n(92972),c=n.n(o),a=n(14507),s=n.n(a),l=n(92137),u=n(96156),d=n(87757),m=n.n(d),p=n(46619),b=n(98651),f=n(94414),w=n(43386),y=n(28454),P=n(27651),C=n(68075),h=n(4964),v=n(45532);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=new f.UZ("no visitor cookie");var g="horizontal",_="We\u2019re experimenting with a new recommendation system that will offer a better way to browse and discover content that interests you.",D=n(28481),A=function(e){var t=(0,r.useState)(!1),n=(0,D.Z)(t,2),i=n[0],o=n[1],c=e.disclaimer?e.disclaimer:"";return r.createElement("div",{className:"disclaimer-container"},r.createElement("div",{className:"disclaimer","data-status":i,id:"disclaimer-info"},c),r.createElement("button",{className:"question-mark sclt-questionmark","aria-describedby":"disclaimer-info","aria-label":"More Information",onClick:function(){o(!i)}},i?"X":"?"))},x=n(50305),N=n(34325),B=n(46314),j=n(94481),Z=n(46670),k=n(26574),R=function(e){var t=(0,i.useDispatch)(),n=function(){return t(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=(0,C.$i)("cbc_plus")||(0,C.$i)("cbc_visitor"),n={"Content-Type":"application/json"},r="";return t?(n=O(O({},n),{},{"X-Client-ID":"".concat(t.name,":").concat(t.value)}),function(){var t=(0,l.Z)(m().mark((function t(i){var o,c,a,s,l;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,w.WY)(h.o,{method:"POST",headers:n,body:JSON.stringify({query:v.FX,variables:{lineupSlug:"recommended",pageSize:e}})});case 3:return o=t.sent,r=o.headers.get("X-Recommendation-Type"),t.next=7,o.json();case 7:c=t.sent,a=c.data,s=(0,p.fromJS)((0,b.H9)(a.allContentItems.nodes)),l=s.filterNot((function(e){return"sponsoredcontent"===e.get("itemType")})),i((0,P.RZ)(l,r)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),y.Z.error(new f.UZ(t.t0));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()):(y.Z.error(S),function(){})}(e.itemCount))};(0,r.useEffect)((function(){return e.shouldFetch&&(window&&window.CBC&&window.CBC.APP&&window.CBC.APP.PubSub&&window.CBC.APP.PubSub.subscribe&&window.CBC.APP.PubSub.subscribe("READ",n),n()),function(){window&&window.CBC&&window.CBC.APP&&window.CBC.APP.PubSub&&window.CBC.APP.PubSub.unsubscribe&&window.CBC.APP.PubSub.unsubscribe("READ",n)}}),[]);var o=(0,i.useSelector)((function(e){return e.nbox.items})),c=(0,i.useSelector)((function(e){return e.nbox.type}));return o&&o.size?function(){var t="Recommended for you",n={items:o,id:"__nbox_".concat(c,"__"),fetchSection:!1,headline:t,itemCount:e.itemCount,className:"recommended",displayPolicy:e.displayPolicy,customTitleBar:e.expandedDisclaimer?r.createElement("div",{className:"nboxExplainerTitle"},r.createElement("h2",{className:"title"},"Recommended"),r.createElement("div",null,r.createElement("p",null,r.createElement(k.C,{url:"".concat("https://cbchelp.cbc.ca/hc/en-us/articles/115004993533-New-CBC-Recommendations-on-search-page"),external:!0},r.createElement("span",{className:"question-mark","aria-hidden":"true"},"?"),"How does this work?")),r.createElement("p",{className:"revealer"},_))):null,title:e.title,section:"recommended",loadMore:!1,trackingSection:"contentlist-recommended",forcedImageAspectRatio:"16x9",cardClickHandler:null},i=s()("recommendations",e.className,e.layout),a=e.layout===g?r.createElement(Z.X.H2,null,t):null,l=e.expandedDisclaimer?null:r.createElement(A,{disclaimer:_}),u=e.layout===g?r.createElement(x.Z,n):r.createElement(j.Z,n);return r.createElement("div",{className:i},l,a,u)}():null};R.propTypes={layout:c().string,itemCount:c().number,shouldFetch:c().bool,expandedDisclaimer:c().bool,title:c().string,displayPolicy:c().instanceOf(N.Z)},R.defaultProps={layout:g,itemCount:5,shouldFetch:!0,expandedDisclaimer:!1,title:"",displayPolicy:new B.Z};var T=R}}]);