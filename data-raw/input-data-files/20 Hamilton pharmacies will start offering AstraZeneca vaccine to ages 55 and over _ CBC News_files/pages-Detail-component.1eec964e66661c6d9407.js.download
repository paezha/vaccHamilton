/*! For license information please see pages-Detail-component.1eec964e66661c6d9407.js.LICENSE.txt */
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[827],{79508:function(e,t,n){"use strict";var r=n(21914),a=n(92972),i=n.n(a),o=n(14507),s=n.n(o),c=n(65999),l=n(97180),u=n(39588),p=function(e){var t=s()({mediaEmbed:!0,mediaIsLead:e.isLead,"sclt-mediaIsLead":e.isLead}),n=e.description?e.description:e.title,a=null;e.showcaption&&(a=r.createElement("span",{className:"media-caption"},n," ",(0,u.Ud)(e.runtime)));var i={mediaItem:{showName:"(not specified)"!==e.showName&&void 0!==e.showName?e.showName:e.categories&&e.categories[0]&&"string"===typeof e.categories[0]?e.categories[0].split("/").pop():"",id:e.clipID,duration:e.runtime,title:e.title,description:e.description,thumbnail:e.thumbnail,airDate:e.airDate,captions:e.captions,isVideo:!e.mediatype||"audio"!==e.mediatype,isLive:!e.liveondemand||"On-Demand"!==e.liveondemand,source:e.source},config:{autoPlay:e.autoPlay||!1,routeUpdate:!1,forcePersistence:e.forcePersistence||!1},featureAttribution:{name:"media-embed"}},o=e.forceVideo?l.Z:null;return r.createElement("span",{className:t},r.createElement(c.Z,i,o),a)};p.propTypes={clipID:i().oneOfType([i().string,i().number]),runtime:i().number,description:i().string,title:i().string,thumbnail:i().string,airDate:i().number,captions:i().object,categories:i().array,mediatype:i().string,liveondemand:i().string,source:i().string,showcaption:i().bool,isLead:i().bool,autoPlay:i().bool,forceVideo:i().bool,forcePersistence:i().bool},p.defaultProps={clipID:"",autoPlay:!1,forceVideo:!1,description:"",runtime:0,showcaption:!0,isLead:!1},t.Z=p},43074:function(e,t,n){"use strict";n.d(t,{Z:function(){return D}});var r=n(92137),a=n(96156),i=n(28481),o=n(87757),s=n.n(o),c=n(21914),l=n(92972),u=n.n(l),p=n(14507),d=n.n(p),f=n(93849),m=n(46397),h=n(44718),y=n(79532),v=n(43386),g={DEFAULT_URL:f.KF("Client.detailApi.baseURL"),CONFIG_KEY:"Client.detailApi.baseURL",CONFIG_TEMPLATE:"Client.detailApi.uriTemplate"},b=n(23588),E=[300,460,620,780,1180],k=n(2902),Z=function(e){var t=e.imageURL,n=e.imgRatio;return c.createElement("div",{className:"images"},c.createElement("div",null,c.createElement(k.Z,{sizes:E,sizesRatio:n,url:t,key:(0,b.Z)()})))};Z.propTypes={imageURL:u().string.isRequired,imgRatio:u().oneOf(["16x9","4x3","square"]).isRequired};var x=Z;function C(e){var t=e.imgIndex,n=e.totalImg,r=e.clickNextHandler,a=e.clickPrevHandler,i=t+1,o=i+1,s=1===i?"At the beginning of image gallery":"Show previous image (".concat(i-1," of ").concat(n,")"),l=o>n?"At the end of the image stream":"Show next image (".concat(o," of ").concat(n,")"),u=d()("nav","next","no-select",{disabled:t===n-1}),p=d()("nav","prev","no-select",{disabled:0===t});return c.createElement("span",{className:"photoGalleryNavigation"},c.createElement("button",{onClick:a,className:p},c.createElement(h.Z,{type:"chevron",role:"presentation"}),c.createElement("span",{className:"a11y"},s)),c.createElement("button",{onClick:r,className:u},c.createElement(h.Z,{type:"chevron",role:"presentation"}),c.createElement("span",{className:"a11y"},l)))}C.propTypes={clickPrevHandler:u().func.isRequired,clickNextHandler:u().func.isRequired,imgIndex:u().number.isRequired,totalImg:u().number.isRequired};var R=C,w=function(e){var t=e.captionsVisible,n=e.imageDescription,r=e.imageCredit,a=d()({captions:!0,on:t});return c.createElement("div",{className:"photoGalleryOverlayCaption"},c.createElement("div",{className:a},c.createElement("figcaption",null,n?"".concat(n," ").concat(r):"No description available")))};w.propTypes={captionsVisible:u().bool.isRequired,imageDescription:u().string,imageCredit:u().string},w.defaultProps={imageDescription:"",imageCredit:""};var N=w,S=function(e){var t=d()({chevron:!0,showIcon:!e.captionsVisible});return c.createElement("div",{className:"photoGalleryCaption"},c.createElement("button",{className:"captions",onClick:e.clickHandler},e.captionsVisible?"Hide caption":"Show caption",c.createElement("span",{className:t},c.createElement(h.Z,{type:"chevron",role:"presentation"}))))};S.propTypes={clickHandler:u().func.isRequired,captionsVisible:u().bool.isRequired};var I=S,T=function(e){return c.createElement("button",{onClick:e.clickHandler,className:"icon"},c.createElement("svg",{version:"1.1",baseProfile:"tiny",focusable:"false",className:"fullscreen",x:"0px",y:"0px",width:"45px",height:"32px",viewBox:"0 0 45 32",space:"preserve",role:"presentation"},c.createElement("g",null,c.createElement("path",{fill:"#fff",d:"M37.4,32H0V7.8h37.4C37.4,7.8,37.4,32,37.4,32z M2.7,29.3h31.9V10.5H2.7V29.3z"}),c.createElement("polygon",{fill:"#fff",points:"42.3,0 27.3,0 27.3,2.7 42.3,2.7 42.3,13.3 45,13.3 45,2.7 45,0 "}))),c.createElement("span",{className:"a11y"},"Toggle Fullscreen"))};T.propTypes={clickHandler:u().func.isRequired};var P=T,O=function(e){return c.createElement("span",{className:"photoGalleryCounter"},c.createElement("span",{className:"counter"},"".concat(e.imgIndex+1," of ").concat(e.totalImg)))};O.propTypes={imgIndex:u().number.isRequired,totalImg:u().number.isRequired};var B=O,L=function(e){var t,n=(0,c.useState)(),o=(0,i.Z)(n,2),l=o[0],u=o[1],p=(0,c.useState)(0),b=(0,i.Z)(p,2),E=b[0],k=b[1],Z=(0,c.useState)("16x9"),C=(0,i.Z)(Z,2),w=C[0],S=C[1],T=(0,c.useState)(0),O=(0,i.Z)(T,2),L=O[0],D=O[1],F=(0,c.useState)(!1),A=(0,i.Z)(F,2),j=A[0],_=A[1],M=(0,c.useState)(!0),H=(0,i.Z)(M,2),q=H[0],U=H[1],V=d()((t={PhotoGallery:!0},(0,a.Z)(t,"embeddable-pg_".concat(w),!j),(0,a.Z)(t,"leadmedia",!!e.leadmedia),(0,a.Z)(t,"sclt-leadmedia",!!e.leadmedia),t)),z=d()((0,a.Z)({"embeddable-item":!0,cbcfgfullscreen:j},"fs_".concat(w),j)),K=d()({scrollFreeze:j}),W=function(){_(!j)},G=(0,c.useMemo)((function(){if(l){var e=(0,m.Z)(l,"galleryImages[".concat(E,"].imageFiles"),[]),t=e?e[e.length-1].file:"";return c.createElement(x,{imageURL:t,imgRatio:w})}}),[l,E,w]),J=function(e){u(e),S(e.galleryAspectRatio),D(e.galleryImages.length)};return(0,c.useEffect)((function(){y.ZP.updateBodyScrollState(K)}),[j]),(0,c.useEffect)((function(){var t=function(){var t=(0,r.Z)(s().mark((function t(){var n,r,a,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={baseURL:f.KF(g.CONFIG_KEY,g.DEFAULT_URL),id:e.photogalleryID},r=decodeURIComponent(f.Ax(g.CONFIG_TEMPLATE,n)),t.next=5,(0,v.WY)(r);case 5:return a=t.sent,t.next=8,a.json();case 8:i=t.sent,J(i),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error("fetch photogallery failed for ".concat(e.photogalleryID,": ").concat(t.t0));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}();e.content?J(e.content):t()}),[e.photogalleryID]),c.createElement("div",{className:V},c.createElement("div",{className:z},j&&c.createElement("button",{"aria-label":"close",className:"cbcfgfullscreen-close",onClick:function(){return W()}},c.createElement(h.Z,{type:"close"})),c.createElement("div",{className:"cbcfg"},l&&c.createElement(c.Fragment,null,c.createElement("figure",null,G,c.createElement("div",{className:"overlays"},c.createElement(N,{imageDescription:l.galleryImages[E].imageDescription,imageCredit:l.galleryImages[E].imageCredit,captionsVisible:q}))),c.createElement(R,{clickNextHandler:function(){l.galleryImages&&E!==l.galleryImages.length-1&&k(E+1)},clickPrevHandler:function(){0!==E&&k(E-1)},imgIndex:E,totalImg:L}),c.createElement("div",{className:"tools"},c.createElement(I,{clickHandler:function(){U(!q)},captionsVisible:q}),c.createElement(P,{clickHandler:W}),c.createElement(B,{imgIndex:E,totalImg:L}))))))};L.propTypes={photogalleryID:u().string.isRequired,leadmedia:u().oneOfType([u().object,u().bool]),content:u().object},L.defaultProps={leadmedia:!1,content:null};var D=L},47709:function(e,t,n){"use strict";n.d(t,{Z:function(){return Le}});var r=n(6610),a=n(5991),i=n(10379),o=n(46070),s=n(77608),c=n(22122),l=n(96156),u=(n(69329),n(21914)),p=n(92972),d=n.n(p),f=n(23588),m=n(79508),h=n(2902),y=n(43074),v=n(15882),g=function(e,t,n,r){var a=document.createElement("script");a.type="text/javascript",n&&(a.async=!0),void 0!==r&&(a.id=r),a.readyState?a.onreadystatechange=function(){"loaded"!==a.readyState&&"complete"!==a.readyState||(a.onreadystatechange=null,t&&t())}:a.onload=function(){t&&t()},a.src=e,document.getElementsByTagName("head")[0].appendChild(a)},b={"data-cards":"hidden"},E={"data-conversation":"none"};function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var a=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var Z=function(e){(0,i.Z)(n,e);var t=k(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){n.scriptLoaded?"undefined"!==typeof window.twttr&&window.twttr.widgets.load():(g("//platform.twitter.com/widgets.js"),n.scriptLoaded=!0)}},{key:"render",value:function(){if(this.props.body){var e=this.getLink(),t=e?"&mdash;":null;return u.createElement("blockquote",(0,c.Z)({className:"twitter-tweet"},this.getAttr()),u.createElement("p",null,this.props.body),t,e)}return null}},{key:"getAttr",value:function(){var e={lang:"en"};return this.props.includemedia||(e=Object.assign(e,b)),this.props.includeparenttweet||(e=Object.assign(e,E)),e}},{key:"getLink",value:function(){return this.props.url&&this.props.user?u.createElement("a",{href:this.props.url},this.props.user):null}}]),n}(u.Component);Z.propTypes={user:d().string,body:d().string,includemedia:d().bool,includeparenttweet:d().bool,url:d().string},Z.defaultProps={user:"",body:"",includemedia:!0,includeparenttweet:!0,url:""},Z.scriptLoaded=!1;var x=Z,C=n(93849).KF("Client.instagramApi.baseURL"),R=n(43386),w=n(73766),N=n(21188);function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var a=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var I=function(e){(0,i.Z)(n,e);var t=S(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).state={instagramEmbed:""},a}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this.fetchInstagram()}},{key:"fetchInstagram",value:function(){var e=this,t=this.getInstagramToken(this.props.url);(0,R.WY)("".concat(C).concat(t)).then((function(e){if((0,N.fQ)(e))return e.json();throw new Error(e.status)})).then((function(t){e.setState({instagramEmbed:t.html})})).catch((function(e){console.log("Instagram rendering (".concat(C).concat(t,") failed [Error: ").concat(e,"]"))}))}},{key:"getInstagramToken",value:function(e){var t=e.split("/");return t[t.length-2]}},{key:"render",value:function(){return u.createElement("div",{className:"instagram"},u.createElement(w.Z,{html:this.state.instagramEmbed,targetParent:!0}))}}]),n}(u.Component);I.propTypes={url:d().string.isRequired},I.defaultProps={url:""};var T=n(91133);function P(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var a=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var O=function(e){(0,i.Z)(n,e);var t=P(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).scriptLoaded=!1,a}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this.scriptLoaded||(g("//embed.scribblelive.com/widgets/embed.js",null,null,"scrbbl-js"),this.scriptLoaded=!0)}},{key:"render",value:function(){var e="/event/".concat(this.props.eventid,"/").concat(this.props.themeid),t="accessibilitySkipLinks".concat(this.props.eventid);return u.createElement(u.Fragment,null,u.createElement(T.Z,{linkText:"Skip Scribble",linkHref:"#".concat(t)}),u.createElement("div",{className:"scribble scrbbl-embed","data-src":e}),u.createElement("span",{id:t}))}}]),n}(u.Component);O.propTypes={eventid:d().string.isRequired,themeid:d().string.isRequired},O.defaultProps={eventid:"0",themeid:"0"};var B=O,L=function(e){var t="https://assets.documentcloud.org/documents/".concat(e.documentnumber,"/").concat(e.documentstub),n="".concat(t,".pdf"),r="".concat(t,".txt");return u.createElement("span",{className:"documentCloud"},u.createElement("span",{className:"heading"},e.documenttitle),u.createElement("iframe",{src:"https://embed.documentcloud.org/documents/".concat(e.documentnumber,"-").concat(e.documentstub,"/?embed=1"),title:"".concat(e.documenttitle," (Hosted by DocumentCloud)"),style:{border:"1px solid #aaa",width:"100%"},height:"700",sandbox:"allow-scripts allow-same-origin allow-popups allow-forms"}),u.createElement("span",{className:"external"},u.createElement("a",{href:n},"Mobile users: View the document"),u.createElement("br",null),u.createElement("a",{href:n},e.documenttitle," (PDF ",e.documentfilesize,"KB)"),u.createElement("br",null),u.createElement("a",{href:r},e.documenttitle," (Text ",e.documentfilesize,"KB)")),u.createElement("span",{className:"disclaimer"},"CBC is not responsible for 3rd party content"))};L.propTypes={documenttitle:d().string,documenturl:d().string,documentid:d().string,documentnumber:d().string,documentstub:d().string,documentfilesize:d().string},L.defaultProps={};var D=L;function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var a=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var A=function(e){(0,i.Z)(n,e);var t=F(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){return u.createElement("span",{className:"storify"},u.createElement("iframe",{className:"storifyIframe",title:"Storify Content",src:this.props.iframesrc,allowTransparency:!0}))}}]),n}(u.Component);A.propTypes={iframesrc:d().string.isRequired,scriptsrc:d().string,storyhref:d().string,storytitle:d().string},A.defaultProps={iframesrc:""};var j=A,_=n(90484),M=n(63349);function H(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var a=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var q=function(e){(0,i.Z)(n,e);var t=H(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).state={embedHeight:300},a.updateEmbedHeight=a.updateEmbedHeight.bind((0,M.Z)(a)),a}return(0,a.Z)(n,[{key:"updateEmbedHeight",value:function(e){var t=this.props.url.match(/^https?:\/\/.+cbc\.ca/);if(t&&e.origin&&e.origin.match(t)){var n=e.data;"object"===(0,_.Z)(n)&&n.embedHeight>0&&this.state.embedHeight!==n.embedHeight&&this.setState({embedHeight:n.embedHeight})}}},{key:"componentDidMount",value:function(){"undefined"!==typeof window&&window.addEventListener("message",this.updateEmbedHeight)}},{key:"componentWillUnmount",value:function(){"undefined"!==typeof window&&window.removeEventListener("message",this.updateEmbedHeight)}},{key:"render",value:function(){var e=this.props,t=e.url,n=e.introtext,r=this.state.embedHeight;return u.createElement("div",{className:"storyCardCarousel"},u.createElement("iframe",{className:"storyCardCarouselIframe",title:n+" - Information Carousel.",src:t,style:{height:r+"px"}}))}}]),n}(u.Component);function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var a=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}q.propTypes={introtext:d().string,url:d().string},q.defaultProps={introtext:"",url:""};var V=function(e){(0,i.Z)(n,e);var t=U(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){n.scriptLoaded||(g("//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3"),n.scriptLoaded=!0)}},{key:"render",value:function(){return u.createElement("div",{className:"facebook"},u.createElement("div",{className:"fb-post","data-href":this.props.url,"data-width":"500"}))}}]),n}(u.Component);V.propTypes={introtext:d().string,url:d().string,width:d().string},V.defaultProps={introtext:"",url:"",width:"500"},V.scriptLoaded=!1;var z=V,K=n(53873),W=n(26574);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var J=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({external:e.external,url:e.href,"data-contentid":""},e);return u.createElement("ul",{className:"similarLinks"},u.createElement("li",{className:"similarListItem"},u.createElement(W.C,(0,c.Z)({},t,{className:"similarLink"}),u.createElement(K._,{flag:e.flag,external:e.external}),u.createElement("span",{className:"similarLinkText"},e.text))))};J.propTypes={external:d().bool,href:d().string,text:d().string},J.defaultProps={external:!0,href:"",text:""};var Y=J;function $(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var a=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var X=function(e){(0,i.Z)(n,e);var t=$(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).state={},a}return(0,a.Z)(n,[{key:"render",value:function(){var e="https://www.youtube.com/embed/".concat(this.props.id);return u.createElement("span",{className:"youtube"},u.createElement("iframe",{src:e,frameBorder:"no",title:"YouTube content",allowFullScreen:!0}))}}]),n}(u.Component);X.propTypes={},X.defaultProps={};var Q=X,ee=n(35517);function te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var a=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var ne=function(e){(0,i.Z)(n,e);var t=te(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){return u.createElement("div",{className:"fb-video facebookVideo","data-href":this.props.url,"data-show-text":"false"})}}]),n}(z);function re(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var a=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var ae=function(e){(0,i.Z)(n,e);var t=re(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).state={},a}return(0,a.Z)(n,[{key:"processNode",value:function(e){if(!e)return[];var t=e.children,n="",r="",a=new ee.Z;return t.map((function(e){"span"===e.name||"p"===e.name?n=a._getNodeText(e):"text"===e.type&&""!==e.content.trim()&&(n=e.content.trim()),n='"'===(n=n.replace(/^'(.*)'$/,"$1")).charAt(0)?n.replace(/^"(.*)"$/,"$1"):n,"cite"===e.name&&(r=a._getNodeText(e))})),[n,r]}},{key:"render",value:function(){var e=u.createElement("svg",{className:"pullquote-quotation-open",version:"1.1",focusable:"false",x:"0px",y:"0px",width:"30px",height:"25px",viewBox:"0 0 52.157 39.117",enableBackground:"new 0 0 52.157 39.117",space:"preserve"},u.createElement("g",null,u.createElement("g",null,u.createElement("path",{fill:"000000",d:"M22.692,10.113c-5.199,1.4-8.398,4.4-8.398,8.801c0,2.4,2,3,3.6,4.199c2.2,1.602,3.4,3.4,3.4,6.602   c0,3.799-3.4,6.799-7.4,6.799c-4.6,0-8.8-3.199-8.8-10.6c0-13.6,7-20,17.599-21.799V10.113z M45.692,10.113   c-5.199,1.4-8.399,4.4-8.399,8.801c0,2.4,2,3,3.601,4.199c2.2,1.602,3.399,3.4,3.399,6.602c0,3.799-3.399,6.799-7.399,6.799   c-4.601,0-8.8-3.199-8.8-10.6c0-13.6,7-20,17.599-21.799V10.113z"}))),u.createElement("g",{display:"none"},u.createElement("g",{display:"inline"}," ",u.createElement("path",{fill:"000000",d:"M6.648,29.759c5.199-1.4,8.398-4.4,8.398-8.801c0-2.398-2-3-3.599-4.199c-2.2-1.6-3.399-3.4-3.399-6.6   c0-3.801,3.399-6.801,7.399-6.801c4.599,0,8.8,3.201,8.8,10.6c0,13.6-7,20-17.6,21.801V29.759z M29.648,29.759   c5.199-1.4,8.398-4.4,8.398-8.801c0-2.398-2-3-3.599-4.199c-2.2-1.6-3.401-3.4-3.401-6.6c0-3.801,3.401-6.801,7.401-6.801   c4.599,0,8.8,3.201,8.8,10.6c0,13.6-7,20-17.6,21.801V29.759z"})))),t=u.createElement("svg",{className:"pullquote-quotation-close",focusable:"false",x:"0px",y:"0px",width:"23px",height:"22px",viewBox:"0 0 52.157 39.117",enableBackground:"new 0 0 52.157 39.117",space:"preserve"},u.createElement("g",{display:"none"},u.createElement("g",{display:"inline"},u.createElement("path",{fill:"000000",d:"M22.692,10.113c-5.199,1.4-8.398,4.4-8.398,8.801c0,2.4,2,3,3.6,4.199c2.2,1.602,3.4,3.4,3.4,6.602   c0,3.799-3.4,6.799-7.4,6.799c-4.6,0-8.8-3.199-8.8-10.6c0-13.6,7-20,17.599-21.799V10.113z M45.692,10.113   c-5.199,1.4-8.399,4.4-8.399,8.801c0,2.4,2,3,3.601,4.199c2.2,1.602,3.399,3.4,3.399,6.602c0,3.799-3.399,6.799-7.399,6.799   c-4.601,0-8.8-3.199-8.8-10.6c0-13.6,7-20,17.599-21.799V10.113z"}))),u.createElement("g",null,u.createElement("g",null,u.createElement("path",{fill:"000000",d:"M6.648,29.759c5.199-1.4,8.398-4.4,8.398-8.801c0-2.398-2-3-3.599-4.199c-2.2-1.6-3.399-3.4-3.399-6.6   c0-3.801,3.399-6.801,7.399-6.801c4.599,0,8.8,3.201,8.8,10.6c0,13.6-7,20-17.6,21.801V29.759z M29.648,29.759   c5.199-1.4,8.398-4.4,8.398-8.801c0-2.398-2-3-3.599-4.199c-2.2-1.6-3.401-3.4-3.401-6.6c0-3.801,3.401-6.801,7.401-6.801   c4.599,0,8.8,3.201,8.8,10.6c0,13.6-7,20-17.6,21.801V29.759z"})))),n=this.processNode(this.props.node),r=n[0]?u.createElement("span",{className:"pullquote-quotation"},e,n[0],t):null,a=n[1]?u.createElement("cite",{className:"pullquote-source"},n[1]):null;return null!==r||null!==a?u.createElement("blockquote",{className:"pullquote"},u.createElement("span",{className:"text-items"},r,a)):null}}]),n}(u.Component);ae.propTypes={},ae.defaultProps={};var ie=ae,oe=n(28481),se="https:",ce=function(e){return 0===e.search(se)?e:se+e},le=function(e){var t=e.id,n=e.title,r=e.url,a=t.split("datawrapper-chart-")[1],i=(0,u.useState)(400),o=(0,oe.Z)(i,2),s=o[0],c=o[1],l=(0,u.useCallback)((function(e){var t=e.data,n=void 0===t?{}:t;if("string"!==typeof n){var r=n["datawrapper-height"]&&n["datawrapper-height"][a];r&&r!==s&&c(r)}}),[a,c]);return(0,u.useEffect)((function(){return window.addEventListener("message",l),function(){return window.removeEventListener("message",l)}}),[a,s,c,l]),u.createElement("div",{className:"dataWrapperEmbed"},u.createElement("iframe",{id:t,scrolling:"no",frameBorder:"0",title:n,src:ce(r),style:{height:s+"px",width:"100%",border:"none"},"aria-label":"".concat(e["aria-label"],": ").concat(n)}))};le.propTypes={url:d().string.isRequired,title:d().string.isRequired,id:d().string.isRequired,"aria-label":d().string.isRequired};var ue=le,pe=n(98651),de=n(41718),fe=n(60612),me=[300,460,620,780,1180];function he(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var a=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge=0,be=0,Ee=0,ke=0,Ze=0,xe=0,Ce=0,Re={twitter:x,instagram:I,scribblelive:B,documentcloud:D,storify:j,facebookpost:z,facebookvideo:ne,customhtml:w.Z,youtube:Q,cardcarousel:q,datawrapper:ue},we=function(e){var t=e.photogalleries;return t instanceof Array&&(t=t[Ze++])?u.createElement(y.Z,{leadmedia:!1,photogalleryID:t.id,key:(0,f.Z)()}):null},Ne=function(e){return e?u.createElement(ie,{node:e,key:(0,f.Z)()}):null},Se=function(e,t,n){if(e&&t){if(!(n instanceof Array))return null;if(!n[Ce])return null;var r="in-read";0===Ce&&(r="bigbox-double");var a={type:r,key:(0,f.Z)(),lazy:0!==Ce,targeting:Object.assign({type:"ocelot",contentId:t.contentId,rmtype:"bigbox",plc:0===Ce?"read":"read".concat(Ce+1)},t.targeting),responsive:!0,exclusions:t.exclusions};return Ce++,u.createElement(fe.Z,a)}return null},Ie=function(e){var t=e.customcontent;if(t instanceof Array){var n=t[xe++];if(n)return u.createElement(w.Z,(0,c.Z)({},n,{key:(0,f.Z)()}))}return null},Te=function(e){var t=e.embeddedcontent;try{if(t instanceof Array&&(t=t[Ee])&&(Ee++,Re[t.type]))return t.key=(0,f.Z)(),u.createElement(Re[t.type],t)}catch(n){de.Z.error("Story - Failed to createEmbed ".concat(t,", error: ").concat(n))}return null},Pe=function(e){var t=e.similarlinks instanceof Array?e.similarlinks:null;t||(t=e.intlinks instanceof Array?e.intlinks:null);var n=t?t[ke]:null;return n?Oe(n):null},Oe=function(e){var t=(0,pe.nZ)(e);return ke++,u.createElement(Y,{flag:e.flag,external:!0,href:e.url,text:t,key:(0,f.Z)()})},Be=function(e){(0,i.Z)(n,e);var t=he(n);function n(e){var a;(0,r.Z)(this,n);return(a=t.call(this,e)).tokens={"[IMAGE]":function(e){return function(e){var t=e.storyimages;if(t instanceof Array){var n=t[be++];if(n){if(n.derivatives){var r=n.derivatives.original_620;n.url=r.fileurl?r.fileurl.replace("_620","_780"):"";var a=r.w||1,i=r.h||1;n.aspectRatio=(i/a*100).toFixed(2),n.sizes=me,n.sizesRatio="original"}return n.useoriginalimage&&(n.url=n.originalimageurl),u.createElement(h.Z,(0,c.Z)({},n,{key:(0,f.Z)(),mass:n.size}))}}return null}(e)},"[PHOTOGALLERY]":we,"[MEDIA]":function(e){return function(e){var t=e.media;try{if(e.media instanceof Array&&(t=t[ge++])){var n=ve(ve({},t),{},{isLead:!1,description:""!==t.description?t.description:t.title});return u.createElement(m.Z,(0,c.Z)({},n,{key:(0,f.Z)()}))}}catch(r){de.Z.error("Story - Failed to embed media object ".concat(t,", error: ").concat(r))}return null}(e)},"[EMBED]":Te,"[CUSTOM]":Ie,"[SIMILAR]":function(e){return Pe(e)},blockquote:Ne},void 0!==e&&"adProps"in e&&(a.tokens["[AD]"]=function(t){return Se(t,e.adProps,e.adIndexArray)}),a}return(0,a.Z)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.adProps.contentId!==e.adProps.contentId&&(this.tokens["[AD]"]=function(t){return Se(t,e.adProps,e.adIndexArray)},!0)}},{key:"getMarkup",value:function(){ge=0,be=0,Ee=0,ke=0,Ze=0,xe=0,Ce=0;var e=new ee.Z,t=!1,n=!1,r=!1;return this.props.json.leadmedia&&(t="media"===this.props.json.leadmedia.type,n="image"===this.props.json.leadmedia.type,r="photogallery"===this.props.json.leadmedia.type),ge=t?1:0,be=n?1:0,Ze=r?1:0,ke=0,this.tokens.json=this.props.json,this.tokens.createSimilar=Pe,this.tokens.isFutureToken=this.isFutureToken,e.getParsedDOM(this.props.body,this.tokens,this.props.adIndexArray)}},{key:"isFutureToken",value:function(e){return Boolean(e.match(/\s*(\[CBC_[A-Z]+\]+)\s*/gm))}},{key:"render",value:function(){var e=this.getMarkup();return u.createElement("div",{className:"story"},e)}}]),n}(u.Component);Be.defaultProps={body:"",json:{},adProps:{}},Be.propTypes={body:d().string,json:d().object,adProps:d().object};var Le=(0,v.connect)((function(e){return{json:e.detail.content}}))(Be)},7197:function(e,t,n){"use strict";n.r(t),n.d(t,{Detail:function(){return Mt},DetailNoDate:function(){return zt},default:function(){return Vt},displayName:function(){return qt}});var r=n(22122),a=n(6610),i=n(5991),o=n(10379),s=n(46070),c=n(77608),l=n(21914),u=n(15882),p=n(92972),d=n.n(p),f=n(14507),m=n.n(f),h=n(46484),y=n(41550),v=n(79532),g=n(18458),b=n(47709),E=n(59754),k=n(35964),Z=n(23346),x=n(88873),C=n(61724),R=n(27023),w=n(26574),N=n(3657),S=function(e){return e.authorList&&e.authorList.length?l.createElement("span",{className:"authorText"},l.Children.toArray(e.authorList.map((function(t,n){var r,a=n+1!==e.authorList.length&&", ";return t.url&&"string"===typeof t.url&&(r=(r=(0,N.wP)(t.url))||"/"),l.createElement(l.Fragment,null,r?l.createElement(w.C,{url:r,external:!!(0,N.sD)(r)},t.name):t.name,a)})))):null};function I(){return l.createElement("span",{className:"bullet"}," \xb7 ")}I.propTypes={},I.defaultProps={};var T=I,P=n(46397);function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var B=function(e){(0,o.Z)(n,e);var t=O(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"getByline",value:function(){return this.props.text?l.createElement(l.Fragment,null,this.props.text," ",l.createElement(T,null)):null}},{key:"getAuthorImage",value:function(){var e="bioandphoto"===this.props.authorDisplay||"photo"===this.props.authorDisplay,t=(0,P.Z)(this.props.authorList[0],"photoDerivatives.square_140.fileurl","");return e&&t?l.createElement(R.Z,{src:t}):null}},{key:"getTimeStamp",value:function(){return this.props.publishedAt?l.createElement(C.ZP,{updated:this.props.updatedAt,published:this.props.publishedAt,publishedAtVerbal:this.props.publishedAtVerbal}):null}},{key:"getAuthorText",value:function(){return this.props.authorList.length?l.createElement(l.Fragment,null,l.createElement(S,{authorList:this.props.authorList})," ",l.createElement(T,null)):null}},{key:"render",value:function(){var e=this.getAuthorText(),t=this.getByline(),n=this.getTimeStamp();return e||t||n?l.createElement("div",{className:"byline"},this.getAuthorImage(),l.createElement("div",{className:"bylineDetails"},e,t,n)):null}}]),n}(l.Component);B.propTypes={updatedAt:d().number,publishedAt:d().number,text:d().string,authorDisplay:d().string,authorList:d().array},B.defaultProps={updatedAt:0,publishedAt:0,text:"",authorDisplay:"",authorList:[]};var L=B,D=n(69019),F=(n(69329),n(86045));function A(e){var t=l.createElement("svg",{viewBox:"0 0 32 32",focusable:"false"},l.createElement("path",{d:"M20.95,17H11a1,1,0,0,0,0,2h10a1,1,0,0,0,0-2Zm2-6H9a1,1,0,0,0,0,2h14a1,1,0,0,0,0-2ZM16,0C7.14,0,0,6.26,0,14a12.55,12.55,0,0,0,6,10.9v7.07l7-4.25a18.71,18.71,0,0,0,3,.25c8.82,0,16-6.25,16-14S24.78,0,16,0Zm0,25.95a16.29,16.29,0,0,1-3.37-.37l-4.7,2.82.06-4.63A11.56,11.56,0,0,1,2,14C2,7.36,8.24,2,16,2s14,5.36,14,12-6.26,12-14,12Zm0,0"})),n=e.storyId.replace(".","");return l.createElement("div",{className:"commentCount"},l.createElement("button",{className:"commentCount-link",onClick:function(e){return(0,F.X5)("comments-".concat(n),e,"textarea.vf-content")}},l.createElement("div",{className:"commentCount-text-container"},l.createElement("div",{className:"viafoura"},l.createElement("span",{className:"vf-counter vf-widget","data-widget":"counter","data-path":e.url})),l.createElement("div",{className:"commentCount-text"},l.createElement("span",null," comments")))),l.createElement("span",{className:"commentCount-icon"},t))}A.propTypes={url:d().string,storyId:d().string},A.defaultProps={url:"",storyId:""};var j=n(2902),_=n(46670),M={className:"comments",external:!0,url:"https://www.cbc.ca/aboutcbc/discover/submissions.html"},H=n(68555),q=n(93849),U=(0,q.KF)("Client.environment.domain"),V=n(31417),z=n(92659),K=n(30091),W=n(44718);function G(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var J=function(e){(0,o.Z)(n,e);var t=G(n);function n(){var e;return(0,a.Z)(this,n),(e=t.call(this)).state={authenticated:!1,viafouraLoaded:!1},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=this;K.Z.addOnReadyCallback((function(){e.setState({viafouraLoaded:!0}),K.Z.getUserContext().then((function(t){return e.updateAuthState(t)})),K.Z.subscribeUserInfo((function(t){return e.updateAuthState(t)}))}))}},{key:"updateAuthState",value:function(e){var t=K.Z.isUserAuthenticated(e);t!==this.state.authenticated&&this.setState({authenticated:t})}},{key:"render",value:function(){return this.state.viafouraLoaded?this.state.authenticated?null:l.createElement("button",{className:"viafouraLogin",type:"button",onClick:function(e){return K.Z.openProfile(e)}},l.createElement(W.Z,{type:"profile",width:"25px",height:"25px"}),l.createElement("span",{className:"viafouraLogin-text"},this.props.text)):null}}]),n}(l.Component);J.propTypes={text:d().string},J.defaultProps={text:"LOG IN"};var Y=J;function $(e){var t=function(){var e=(0,u.useSelector)((function(e){return e.app.path})),t="https://".concat(U,"/"),n="https://".concat(U,"/account/signup?referrer=");return"homepage"===e?n+t:n+t+e}(),n=(0,V.Z)(),r=l.createElement("span",null,l.createElement("span",{className:"vf-counter vf-widget","data-widget":"counter","data-path":e.url}),l.createElement("span",null," Comments")),a=e.storyId.replace(".","");return l.createElement("div",{className:"comments cbc-vf",id:"comments-".concat(a)},l.createElement(H.W_,{name:"comments-".concat(a)},l.createElement(_.X.H2,null,r),l.createElement("p",{className:"commentIntro"},"To encourage thoughtful and respectful conversations, first and last names will appear with each submission to CBC/Radio-Canada's online communities (except in children and youth-oriented communities). Pseudonyms will no longer be permitted."),l.createElement("p",{className:"commentIntro"},"By submitting a comment, you accept that CBC has the right to reproduce and publish that comment in whole or in part, in any manner CBC chooses. Please note that CBC does not endorse the opinions expressed in comments. Comments on this story are moderated according to our"," ",l.createElement(w.C,M,"Submission Guidelines"),". Comments are welcome while open. We reserve the right to close comments at any time.")),!1===n.isLoggedIn&&l.createElement(z.Z,{text:"Become a CBC Member",description:"Join the conversation",level:"h3",linkText:"Create account",linkUrl:t,external:!0,extraContent:l.createElement("div",{className:"onPageCTA-existingAccount"},l.createElement("p",{className:"onPageCTA-existingAccount-prompt"},"Already have an account?",l.createElement(Y,{text:"Log in"}),l.createElement(W.Z,{type:"chevron",width:"9px",height:"9px",className:m()("horizontal","onPageCTA-existingAccount-icon")})))}),l.createElement("div",{className:"viafoura"},l.createElement("div",{className:"vf-comments vf-widget","data-widget":"comments","data-has-notification-bell":"true","data-path":e.url,"data-limit":e.limit})))}$.propTypes={url:d().string,storyId:d().string,limit:d().number},$.defaultProps={url:"",storyId:"",limit:10};var X=n(88584),Q=n(79508),ee=n(43074),te=n(23588);function ne(e){var t=function(e){if(void 0!==e.list&&e.list.length)return e.list.map((function(e){return l.createElement("li",{className:"highlightListItem",key:(0,te.Z)()},l.createElement("span",null,e))}))}(e);return l.createElement("div",{className:"highlights sclt-highlights"},l.createElement(_.X.H2,{key:(0,te.Z)()},l.createElement("span",null,e.heading)),l.createElement("ul",{className:"highlightList",key:(0,te.Z)()},t))}ne.propTypes={list:d().array,heading:d().string},ne.defaultProps={heading:"Latest"};var re=ne,ae=n(88529);function ie(e){return e.sourceInfo?l.createElement("div",{className:"source"},l.createElement("p",null,e.sourceInfo)):null}ie.propTypes={},ie.defaultProps={};var oe=ie;function se(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var ce=function(e){(0,o.Z)(n,e);var t=se(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"processCorrections",value:function(){if(void 0!==this.props.json&&this.props.json.length){var e=this.props.json,t=[];return e.forEach((function(e){t.push(l.createElement("li",{className:"correction-item",key:(0,te.Z)()},l.createElement("div",{className:"correction-text"},e.correction),l.createElement("div",{className:"correction-date"},e.date)))})),t}return null}},{key:"render",value:function(){var e=this.processCorrections();return e?l.createElement("div",{className:"corrections"},l.createElement("h3",null,"Corrections"),l.createElement("ul",{className:"corrections-list"},e)):null}}]),n}(l.Component);function le(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var ue=function(e){(0,o.Z)(n,e);var t=le(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"processClarifications",value:function(){if(void 0!==this.props.json&&this.props.json.length){var e=this.props.json,t=[];return e.forEach((function(e){t.push(l.createElement("li",{className:"clarification-item",key:(0,te.Z)()},l.createElement("div",{className:"clarification-text"},e.clarification),l.createElement("div",{className:"clarification-date"},e.date)))})),t}return null}},{key:"render",value:function(){var e=this.processClarifications();return e?l.createElement("div",{className:"clarifications"},l.createElement("h3",null,"Clarifications"),l.createElement("ul",{className:"clarifications-list"},e)):null}}]),n}(l.Component),pe=n(63349),de=n(9733);function fe(e,t){var n={};return void 0!==e&&(n.formName=e),void 0!==t&&(n.referringButtonId=t),{type:de.N,payload:n}}function me(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var he=function(e){(0,o.Z)(n,e);var t=me(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e)).state={buttonId:""},r.handleClick=r.handleClick.bind((0,pe.Z)(r)),r}return(0,i.Z)(n,[{key:"handleClick",value:function(){var e=this.props,t=e.formName;(0,e.updateZendeskForm)(t,this.state.buttonId)}},{key:"componentDidMount",value:function(){this.setState({buttonId:"feedbackButton-"+Math.floor(1e4*Math.random())})}},{key:"render",value:function(){var e=this.props,t=e.buttonText,n=e.classNames,r=this.state.buttonId;return l.createElement("button",{className:n+" feedbackButton",onClick:this.handleClick,id:r},t)}}]),n}(l.Component);he.defaultProps={classNames:"",buttonText:""};var ye={updateZendeskForm:fe},ve=(0,u.connect)(null,ye)(he),ge=n(97767);function be(e){var t=ge.SA[e.baseSection],n=t?t.contentFeedbackLink:null,r=t?t.connectUrl:null,a=t?t.journalistStandards:null,i=t?t.trustProject:null,o=a&&i?l.createElement("span",{className:"separator"},"|"):null;if(!n&&!r&&!a&&!i)return null;var s=m()({bottomSeparator:n||r});return l.createElement("div",{className:"contentFeedback"},l.createElement("div",{className:s},function(e){if(e)return l.createElement(w.C,{className:"journalistLink",url:e,external:!0},"CBC's Journalistic Standards and Practices");return null}(a),o,function(e,t){if(e){var n=t&&ge.SA[t]?(0,N.fm)(t):"";if(n)return l.createElement(w.C,{className:"trustProjectLink",url:e,external:!0},"About CBC ",n)}return null}(i,e.baseSection)),l.createElement(ve,{formName:"typoForm",classNames:"reportIssue",buttonText:"Report Typo or Error"}))}be.propTypes={baseSection:d().string,headline:d().string},be.defaultProps={baseSection:"",headline:""};var Ee=n(96156),ke=n(28481),Ze=n(90484),xe=n(43386),Ce=q.KF("Client.zendeskApi.requestsURL");function Re(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return(0,xe.WY)(Ce,t).then((function(e){return e}))}var we=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;var Ne={typoForm:{id:360001354433,header:"Report Typo or Error",formTags:["typo-form"],formSpecificFields:[360022771214,360022772193,360028518814],description:{display:!1,defaultText:"A typo report."},subject:{display:!1,defaultText:"Typo report submitted by a user from the CBC website.",appendPageTitle:!0}}},Se={id:360022791294,type:"text",title:"Website URL",required:!0,labelText:"Website URL"},Ie={id:30217537,type:"description",required:!1,labelText:"Description"},Te={id:30217527,type:"subject",required:!1,labelText:"Subject"},Pe={id:360028575073,type:"numeric",required:!1,labelText:"Content Id"},Oe={360022771214:{id:360022771214,type:"text",required:!0,maxChars:200,labelText:"Enter typo or error as found on page",emptyInputText:"Please enter the typo or error."},360022772193:{id:360022772193,type:"text",required:!0,maxChars:200,labelText:"Enter correction",emptyInputText:"Please enter the correction."},360028518814:{id:360028518814,type:"text",required:!1,maxChars:250,labelText:"Email (optional)",emptyInputText:"Please enter your email.",validation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"string"===typeof e&&Boolean(e.match(we))},invalidInputText:"Please enter valid email."},33727647:{id:33727647,type:"text",required:!1,labelText:"Please leave this input empty.",ariaHidden:!0}};function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){(0,Ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var Fe=33727647,Ae=function(e){(0,o.Z)(n,e);var t=De(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e)).initialState={slideUp:!1,filledFields:{},inputErrorMessage:null,submittedMsg:!1},r.state=r.initialState,r.createTicket=Re,r.formSubmit=r.formSubmit.bind((0,pe.Z)(r)),r.formClose=r.formClose.bind((0,pe.Z)(r)),r.onChangeHandler=r.onChangeHandler.bind((0,pe.Z)(r)),r.honeyCheck=r.honeyCheck.bind((0,pe.Z)(r)),r.validateFields=r.validateFields.bind((0,pe.Z)(r)),r.processTicketData=r.processTicketData.bind((0,pe.Z)(r)),r.showSubmittedMsg=r.showSubmittedMsg.bind((0,pe.Z)(r)),r}return(0,i.Z)(n,[{key:"isRendered",value:function(e,t){return null!==e.formData&&null!==t.inputErrorMessage}},{key:"formClose",value:function(e,t){"object"===(0,Ze.Z)(e)&&e.preventDefault&&e.preventDefault();var n=this.props,r=n.updateZendeskForm,a=n.referringButtonId;a&&!0!==t&&F.SO.shiftFocusSafely("#"+a),r(null,""),this.setState(this.initialState)}},{key:"honeyCheck",value:function(){if(this.state.filledFields[Fe])return this.setState({filledFields:{},submittedMsg:!0}),"_BREAK_"}},{key:"validateInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(e=e.trim(),t.required&&!e)return"empty";if(e&&t.hasOwnProperty("validation")&&"function"===typeof t.validation){var n=t.validation(e);return n?"valid":"invalid"}return"valid"}},{key:"validateFields",value:function(){var e=this,t=this.props.renderFields,n=this.state.filledFields,r=!0,a={},i=null;if(t.forEach((function(t){var o=e.validateInput(n[t.id],t);"valid"===o?a[t.id]=!1:(r=!1,a[t.id]=o,i=null===i?t.id:i)})),!r)return this.setState({inputErrorMessage:a}),F.SO.shiftFocusSafely("#field_"+i),"_BREAK_"}},{key:"processTicketData",value:function(e){var t=this.props,n=t.formData,r=t.path,a=t.pageTitle,i=t.polopolyId,o=t.department,s=this.state.filledFields,c=Te.id,l=Ie.id,u=Object.entries(s).filter((function(e){var t=(0,ke.Z)(e,1)[0];return![c,l].includes(t)})).map((function(e){var t=(0,ke.Z)(e,2);return{id:t[0],value:t[1]}})),p=s[c]?s[c]:n.subject.defaultText;!0===n.subject.appendPageTitle&&(p+=" "+a);var d=[];return n.formTags&&(d=d.concat(n.formTags)),o&&d.push("department_"+o),{request:{requester:{name:"Anonymous Web User"},subject:p,comment:{body:Object.keys(s).length>0?function(){var e="".concat(String(Se.title),": www.cbc.ca/").concat(r," \n\n");return Object.entries(s).map((function(t){var n=(0,ke.Z)(t,2),r=n[0],a=n[1];e="".concat(e).concat(Oe[r]?Oe[r].labelText:r,": ").concat(a," \n\n")})),i&&(e="".concat(e).concat(String(Pe.labelText),": ").concat(i)),e}():n.subject.defaultText},tags:d,custom_fields:u,ticket_form_id:n.id}}}},{key:"showSubmittedMsg",value:function(){this.setState({filledFields:{},submittedMsg:!0})}},{key:"formSubmit",value:function(e){var t=this.honeyCheck,n=this.validateFields,r=this.processTicketData,a=this.showSubmittedMsg,i=this.createTicket;e.preventDefault();for(var o,s=[t,n,r,i,a],c=0;c<s.length;c++){if("_BREAK_"===(o=(0,s[c])(o)))break}}},{key:"onChangeHandler",value:function(e,t){var n=this.state.filledFields,r=e.target.value,a="maxChars"in t?t.maxChars:1/0;r.length<=a?this.setState({filledFields:Le(Le({},n),{},(0,Ee.Z)({},t.id,r))}):e.target.value=n[t.id]}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.path,r=this.state.submittedMsg,a=this.isRendered;if(!1===a(e,t)&&!0===a(this.props,this.state)&&(F.SO.shiftFocusSafely(".feedbackFormField:not(.a11y) .feedbackFormDataEntry"),this.setState({slideUp:!0})),!1===t.submittedMsg&&!0===r&&F.SO.shiftFocusSafely(".feedbackFormSubmitted p"),e.path!==n&&this.formClose(void 0,!0),e.renderFields!==this.props.renderFields){var i={};this.props.renderFields.forEach((function(e){e.id!==Fe&&e.required&&(i[e.id]=!1)})),this.setState({inputErrorMessage:i})}}},{key:"componentWillUnmount",value:function(){this.formClose(void 0,!0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.renderFields,r=t.formData,a=t.pageTypeClass,i=this.state,o=i.submittedMsg,s=i.inputErrorMessage,c=i.slideUp,u=this.formClose,p=this.formSubmit;return(0,this.isRendered)(this.props,this.state)?l.createElement("div",{className:"feedbackForm  ".concat(a," ").concat(c&&"slideUp"),role:"dialog","aria-labelledby":"feedbackFormHeader",onKeyDown:function(e){"Escape"===e.key&&u(e)}},l.createElement("h2",{id:"feedbackFormHeader",className:"feedbackFormHeader"},r.header,!1===o&&l.createElement("button",{className:"feedbackFormClose","aria-label":"Close form without submitting.",onClick:u,onKeyDown:function(e){"Tab"===e.key&&!0===e.shiftKey&&(e.preventDefault(),F.SO.shiftFocusSafely(".feedbackFormSubmit"))}},l.createElement(W.Z,{type:"close"}))),!1===o?l.createElement("form",null,n.map((function(t){var n=t.id in s&&s[t.id];return l.createElement(l.Fragment,{key:String(t.id)},l.createElement("label",{key:"label"+t.id,htmlFor:"field_"+t.id,id:"feedbackFormLabel"+t.id,className:t.ariaHidden?"a11y":null,"aria-hidden":t.ariaHidden?"true":null,tabIndex:t.ariaHidden?"-1":null},t.labelText),l.createElement("div",{className:"feedbackFormField ".concat(t.ariaHidden?"a11y":""),"aria-hidden":t.ariaHidden?"true":null,tabIndex:t.ariaHidden?"-1":null},l.createElement("input",{key:"input"+t.id,id:"field_"+t.id,type:"text",className:"feedbackFormDataEntry".concat("  ",n?"feedbackFormInputError":""," "),"aria-hidden":t.ariaHidden?"true":null,tabIndex:t.ariaHidden?"-1":null,"aria-labelledby":n?"feedbackFormInputErrorMsg"+t.id:null,onKeyDown:function(e){"Escape"===e.key&&u(e)},onChange:function(n){e.onChangeHandler(n,t)}}),n&&l.createElement(W.Z,{type:"exclamation"})),n&&l.createElement("p",{id:"feedbackFormInputErrorMsg"+t.id,className:"feedbackFormInputErrorMsg"},l.createElement("span",{className:"a11y"},"Error:"," "),"empty"===n?t.emptyInputText:t.invalidInputText))})),l.createElement("button",{className:"feedbackFormBtn1  feedbackFormSubmit",onClick:p,onKeyDown:function(e){"Escape"===e.key&&u(e),"Tab"===e.key&&!1===e.shiftKey&&(e.preventDefault(),F.SO.shiftFocusSafely(".feedbackFormClose"))}},"Submit")):l.createElement("div",{className:"feedbackFormSubmitted"},l.createElement("p",{tabIndex:-1},"Thank you for your feedback."),l.createElement("button",{className:"feedbackFormSubmittedClose feedbackFormBtn1","aria-label":"Close and return to page.",onClick:u,onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),F.SO.shiftFocusSafely(".feedbackFormSubmitted"))}},"Close"))):null}}]),n}(l.Component);Ae.propTypes={},Ae.defaultProps={department:"",pageTitle:"",pageTypeClass:"",path:"",polopolyId:"",referringButtonId:"",formData:null,renderFields:[]};var je={updateZendeskForm:fe};Ae.displayName="FeedbackForm";var _e=(0,u.connect)((function(e){var t=e.feedback,n=t.formName,r=t.referringButtonId,a=null,i=[];Ne[n]&&(i=function(e){var t=e.formSpecificFields.map((function(e){return Oe[e]}));return!0===e.description.display&&t.push(Ie),!0===e.subject.display&&t.unshift(Te),t.unshift(Oe[Fe]),t}(a=Ne[n]));var o=e.app.path,s=e.app.pageType,c=e.app.title,l="",u="";return e.detail&&e.detail.content&&Array.isArray(e.detail.content.departments)&&(u=e.detail.content.departments.map((function(e){return e.name})).join("-")),e.app.contentId&&(l=e.app.contentId),s&&(s=s[0].toUpperCase()+s.slice(1)),{formData:a,referringButtonId:r,renderFields:i,path:o,pageTypeClass:"feedbackForm"+s,pageTitle:c,department:u,polopolyId:l}}),je)(Ae),Me="viewportLarge",He=function(e){return l.createElement("div",{className:"share"},l.createElement("div",{className:"viafoura"},l.createElement("h2",{className:"a11y"},"Social Sharing"),l.createElement("div",{className:"vf-widget vf-share-bar-horizontal","data-widget":"sharebar","data-button-view":e.viewport===Me&&e.buttonView,"data-url":e.path,"data-show-labels":"true","data-show-counters":"false","data-show-total":"false"})))};He.propTypes={viewport:d().string,path:d().string,buttonView:d().bool},He.defaultProps={viewport:Me,path:"",buttonView:!1};var qe=He,Ue=n(1772),Ve=n(40383),ze=n(60612),Ke=n(67530),We=n(91167),Ge=n(46924),Je=n(46619),Ye=n.n(Je),$e=n(25442),Xe=n(28454);function Qe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var et=function(e){(0,o.Z)(n,e);var t=Qe(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return n}((0,n(45366).Z)(Error)),tt=new et("Failed to trackEvent READ"),nt=new et("Failed to turn on ReadJS"),rt=new et("Failed to turn off ReadJS"),at={cms:"polopoly"},it={el:".story",spa:!0,strict:!1,thresholds:{domNode:100,domPolling:100,maxTimeInView:20,minTimeInView:3,readingPoint:400,scrollDepth:30,viewport:15},activity:{scrollDepth:30,increment:100,averageReadSpeed:5},debug:{overlay:!1,console:!1},timeInterval:1.5},ot=function(e,t){return window.readJSConfig=Object.assign({cb:function(){!function(e){e=Object.assign({},at,e);try{window.CBC.APP.SC.EventTracker.trackEvent("READ",{content:e})}catch(t){Xe.Z.send(tt)}}(e),"function"===typeof t&&t()}},it),n.e(7111).then(n.t.bind(n,17111,23)).then((function(){if(!window.readJS.turnOn())throw nt}))};function st(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var ct=function(e){(0,o.Z)(n,e);var t=st(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e,t,n,r,a;ot((e=this.props.url,t=this.props.type,n=this.props.id,r=this.props.headline,a=this.props.pubdate,{url:e,type:t,id:n,title:r,pubdate:a}),this.props.onRead).catch((function(e){return Xe.Z.send(nt)}))}},{key:"componentWillUnmount",value:function(){!function(){try{window.readJS.turnOff()}catch(e){Xe.Z.send(rt)}}()}},{key:"render",value:function(){return this.props.children}}]),n}(l.PureComponent),lt=n(3663);function ut(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var pt=new Je.Map({live:!0,"live blog":!0,"live chat":!0,"coming up":!0}),dt=function(e){return String(pt.has(e.toLowerCase()))},ft=function(e){if("breaking"===e.toLowerCase())return String(!0)},mt=function(e){return!!e&&("sponsored content"===e.toLowerCase()||"sponsor content"===e.toLowerCase()?String(!0):void 0)},ht=function(e){(0,o.Z)(n,e);var t=ut(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e,t=mt(this.props.label),n=t?lt.wF:(e=this.props.departments)&&0===e.length?"":"/".concat(e.map((function(e){return encodeURIComponent((0,P.Z)(e,"name"))})).join("/")),r=this.props.departments&&this.props.departments.length>0?(0,P.Z)(this.props.departments[this.props.departments.length-1],"label"):"";return l.createElement("span",{className:"detail-link-label sclt-storySectionLink"},t?l.createElement("a",{href:lt.wF,title:lt.Sq},l.createElement("span",{className:"sponsored-content"},lt.gQ)):null,l.createElement(w.C,{url:n,external:!!t},l.createElement("span",{title:t?lt.Sq:""},t?lt.gQ:r)),function(e,t){return!t||mt(t)||e.toLowerCase()===t.toLowerCase()?null:l.createElement("span",null,l.createElement("span",null,"\xb7"),l.createElement("span",{"data-live":dt(t),"data-breaking":ft(t)},t))}(r,this.props.label))}}]),n}(l.PureComponent),yt=n(85240),vt=n(85962),gt=q.RK("Client.contentApi.contentList.tagged"),bt=function(e){var t=Object.keys(gt).find((function(t){return e.find((function(e){return e.name.includes(t)}))}));return{slug:gt[t],tag:t}},Et=n(50305),kt=n(80361),Zt=n(20496),xt=n(61851),Ct=n(41718);function Rt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var wt=(0,Je.List)(),Nt=function(e){(0,o.Z)(n,e);var t=Rt(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"fetch",value:function(){try{var e=bt(this.props.subject),t=e.slug,r=e.tag;t&&r&&this.props.dispatch((0,Zt.SL)(t,n.SECTION_IDENTIFIER,4))}catch(a){Ct.Z.error("TaggedStories: Failed to fetch_sectional_content_identifier with error: ".concat(a))}}},{key:"componentDidMount",value:function(){this.fetch()}},{key:"componentDidUpdate",value:function(e){this.props.subject&&JSON.stringify(this.props.subject)!==JSON.stringify(e.subject)&&this.fetch()}},{key:"render",value:function(){return!this.props.tag||!this.props.contentList.length>0?null:l.createElement("div",{className:n.SECTION_IDENTIFIER},l.createElement(_.X.H2,null,this.props.tag),l.createElement(Et.Z,{items:this.props.contentList,displayPolicy:new kt.Z,trackingSection:n.SECTION_IDENTIFIER,loadMore:!1,displayType:xt.a.DISPLAY_FOUR_RIGHT_BORDER,contentListClasses:"hideContentBottom"}))}}]),n}(l.PureComponent);(0,Ee.Z)(Nt,"defaultProps",{subject:[],contentList:wt,tag:"",dispatch:function(){}}),(0,Ee.Z)(Nt,"SECTION_IDENTIFIER","taggedStories");var St=(0,u.connect)((function(e,t){var n="",r=wt;try{n=bt(t.subject),r=e.sectionalContent[Nt.SECTION_IDENTIFIER]&&e.sectionalContent[Nt.SECTION_IDENTIFIER].sectionList||wt}catch(a){Ct.Z.error("TaggedStories: Failed to mapStateToProps with error: ".concat(a))}return{contentList:r,tag:n.tag}}))(Nt),It=n(90955),Tt=n(1122),Pt=n(6211),Ot=n(69422),Bt=n(66623),Lt=n(87166),Dt=n(50503);function Ft(e){var t=l.createElement("span",{className:"sponsorAboutLogo"},l.createElement("img",{src:e.logo,alt:e.name}));t=e.enableLink?l.createElement(w.C,{url:e.url,external:e.external,className:"sponsorLink",target:"_blank"},t):t;var n=l.createElement("p",null);return!e.description||e.description.isEmpty&&e.description.isEmpty()?null:(n=l.createElement("p",null,e.description),l.createElement("div",{className:"sponsorAboutBox"},t,l.createElement("h2",null,"About the Advertiser"),l.createElement("div",null,n)))}Ft.propTypes={external:d().bool.isRequired,name:d().string,description:d().string,url:d().string.isRequired,logo:d().string.isRequired,enableLink:d().bool},Ft.defaultProps={external:!1,name:"A Sponsor",description:"",url:"",logo:"",enableLink:!1};var At=Ft,jt=n(59025);function _t(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var Mt=function(e){(0,o.Z)(n,e);var t=_t(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e)).metaTagList=[],r.uniqueId="",r.hasBanner=!1,r}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){v.ZP.initPageLoad(this.props.baseSection),this.props.match.params.contentId!==this.props.contentId&&this.props.fetchData(this.props.match.url,this.props.match.params),this.props.meta&&this.props.meta.get("vf:unique_id")&&K.Z.reset()}},{key:"componentDidUpdate",value:function(e){v.ZP.initPageLoad(this.props.baseSection),(0,Pt.PX)(e.match.params,this.props.match.params)&&this.props.fetchData(this.props.match.url,this.props.match.params);var t=e.meta&&e.meta.get("vf:unique_id"),n=this.props.meta&&this.props.meta.get("vf:unique_id");n&&t!==n&&K.Z.reset()}},{key:"image",value:function(){var e=this.props.image;return""!==e.url?l.createElement(j.Z,e):null}},{key:"gallery",value:function(){var e=this.props.gallery;return e.id?l.createElement(ee.Z,{leadmedia:e.leadmedia,photogalleryID:e.id,content:e.content}):null}},{key:"video",value:function(){var e=this.props.media;if(""!==e.clipID){var t="media"===this.props.content.type?this.commentCount():null;return l.createElement("span",null,l.createElement(Q.Z,e),t)}return null}},{key:"media",value:function(){try{var e=this.video()||this.gallery()||this.image();return e||null}catch(t){Ct.Z.error("Detail - Failed to embed media in ".concat(this.props.match.url," with error: ").concat(t))}return null}},{key:"audio",value:function(){try{var e=this.props.audio;if(""!==e.mediaID)return l.createElement(Q.Z,(0,r.Z)({},e,{autoPlay:!1,forcePersistence:!0,showcaption:!1}))}catch(t){Ct.Z.error("Detail - Failed to embed MediaEmbed in ".concat(this.props.match.url," with error: ").concat(t))}}},{key:"commentCount",value:function(){if(this.props.content.displayComments)return l.createElement(A,{url:this.props.content.url,storyId:this.props.content.id})}},{key:"storyHighlight",value:function(){var e=this.props.content.highlights;if(e&&e.highlight&&e.highlight.length>0)return l.createElement(re,{list:e.highlight})}},{key:"getRelatedSegments",value:function(){var e=void 0!==this.props.content.segments&&this.props.content.segments.length?this.props.content.segments:null;if(e)return l.createElement(ae.Z,{intlinks:e,eplinks:this.relatedEpisode(),heading:"More from this episode"})}},{key:"relatedEpisode",value:function(){if("segment"===this.props.content.type){var e=this.props.content.episode;if(e){var t=Object.assign({},e);return t.title="FULL EPISODE: "+t.title,[t]}}}},{key:"getRelatedExternalLinks",value:function(){var e=void 0!==this.props.content.extlinks&&this.props.content.extlinks.length?this.props.content.extlinks:null;if(e)return l.createElement(ae.Z,{extlinks:e,heading:"External Links"})}},{key:"getAuthorProfile",value:function(){var e=void 0!==this.props.content.authorList&&this.props.content.authorList[0];if(e&&"bioandphoto"===this.props.content.authorDisplay)return l.createElement(Ve.Z,{json:e})}},{key:"getBigbox",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return l.createElement(ze.Z,{type:"bigbox-fixed",targeting:{type:"ocelot",contentId:e,rmtype:"bigboxfixed",subject:(0,h.ks)(this.props.content.subject),gs_categories:this.props.content.gs_categories,gs_keywords:this.props.content.gs_keywords,plc:t},responsive:!0,lazy:n,exclusions:this.props.content.adExclusions})}},{key:"getBody",value:function(){var e,t,n=this.props.content,r=n,a={pageType:this.props.pageType,pagePath:this.props.path,pageSection:this.props.baseSection,contentId:this.props.contentId,exclusions:this.props.content.adExclusions,viewport:this.props.viewport,targeting:{subject:(0,h.ks)(this.props.content.subject),gs_categories:this.props.content.gs_categories,gs_keywords:this.props.content.gs_keywords}};return e=l.createElement(b.Z,{body:r.body,adProps:a,adIndexArray:"undefined"!==typeof window&&((0,jt.s2)()||window.innerWidth<=1100)?Ke.A$:null}),l.createElement(ct,{url:n.url,type:n.type,id:n.id,headline:n.headline,pubdate:n.publishedAt,onRead:t},e)}},{key:"story",value:function(){var e=this.props.content;return Ke.wF.includes(e.type)?l.createElement("div",{className:"storyWrapper"},this.media(),this.commentCount(),this.audio(),this.storyHighlight(),this.getBody()):null}},{key:"getNewsletterWidget",value:function(){if(this.props.content.newsletters&&"false"!==this.props.content.newsletters)return l.createElement(X.Z,{promotenewsletter:this.props.content.newsletters})}},{key:"blankPage",value:function(){return l.createElement("div",null,l.createElement("span",null,"This is a blank page"))}},{key:"getSharing",value:function(){if(!this.props.content.isPreview&&!this.props.fixed.isWebView)return l.createElement(qe,{viewport:this.props.viewport,path:this.props.meta.canonical,key:this.props.content.id})}},{key:"getTrendingList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isSidebar:!1},t=null;return!this.props.content.isPreview&&ge.SA[this.props.baseSection]?(t=e.isSidebar?l.createElement(g.VM,{section:this.props.baseSection}):l.createElement(g.Te,{section:this.props.baseSection}),l.createElement($e.Z,null,t)):t}},{key:"isSponsoredContent",value:function(){return"sponsoredcontent"===this.props.content.type}},{key:"getRelatedLinks",value:function(){if(this.props.content.intlinks.length>0){var e={intlinks:this.props.content.intlinks};return l.createElement(ae.Z,e)}}},{key:"getSponsorBio",value:function(){if(this.props.content.sponsorBio&&Object.keys(this.props.content.sponsorBio).length>0){var e={external:!0,name:this.props.content.sponsorBio.name,url:this.props.content.sponsorBio.link,label:(0,Ge.z)(this.props.content.sponsorBio.label),logo:this.props.content.sponsorBio.logo&&this.props.content.sponsorBio.logo.derivatives.original_300.fileurl,enableLink:Boolean(this.props.content.sponsorBio.link)};return l.createElement(D.Z,e)}}},{key:"getSponsorAbout",value:function(){if(this.props.content.sponsorBio){var e={external:!0,name:this.props.content.sponsorBio.name,description:this.props.content.sponsorBio.description,url:this.props.content.sponsorBio.link,logo:this.props.content.sponsorBio.logo&&this.props.content.sponsorBio.logo.derivatives.original_620.fileurl,enableLink:Boolean(this.props.content.sponsorBio.link)};return l.createElement(At,e)}}},{key:"getByline",value:function(){var e=this.props.content,t=e.sponsorBio,n=e.byline,r=e.updatedAt,a=e.publishedAt,i=e.publishedAtVerbal;return(0,Ge.ek)(t.label)?null:l.createElement(L,{text:n,updatedAt:r,publishedAt:a,publishedAtVerbal:i,authorDisplay:this.props.content.authorDisplay,authorList:this.props.content.authorList})}},{key:"getMetaLabel",value:function(){return(0,Ge.Hv)(this.props.content.sponsorBio)?this.getSponsorBio():l.createElement(ht,{departments:this.props.content.departments,label:this.props.content.flag})}},{key:"getCommentsAndAd",value:function(){var e=this.props.content,t=this.props.contentId;return e&&e.displayComments?l.createElement("div",{className:"commentsWrapper"},l.createElement("div",{className:"detailMainCol"},this.getComments()),l.createElement("div",{className:"detailSideRail"},l.createElement("div",{className:"stickyContainer stickyRailAd"},this.getBigbox(t,"comments",!0)))):null}},{key:"getComments",value:function(){var e=this.props.content;return l.createElement($,{url:e.url,storyId:e.id,limit:3})}},{key:"getRecommendations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isSidebar:!1},t={title:"Recommended for you"};return e.isSidebar&&(t.layout="vertical"),l.createElement($e.Z,null,l.createElement(vt.Z,t))}},{key:"getMoreStoriesFromCBC",value:function(){return l.createElement($e.Z,null,l.createElement(E.Wn,null))}},{key:"getDiscoveryComponents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke.N3,t={trending:this.getTrendingList({isSidebar:!0}),recommendations:this.getRecommendations(),comments:this.getCommentsAndAd(),discoverMore:this.getMoreStoriesFromCBC()};if(!e||!e.length)return null;var n=[];return e.forEach((function(e){var r=t[e];r&&n.push(r)})),l.createElement("div",{className:"detailDiscovery"},l.Children.toArray(n))}},{key:"render",value:function(){var e=this.props.content,t=this.props.contentId,n=void 0!==e.source?l.createElement(oe,{sourceInfo:e.source}):null,a=e.corrections.length>0?l.createElement(ce,{json:e.corrections}):null,i=e.clarifications.length>0?l.createElement(ue,{json:e.clarifications}):null,o=this.props.baseSection?ge.SA[this.props.baseSection]:null,s=o&&o.defaultNotifications?o.defaultNotifications:null,c={notificationList:s=new(Ye().List)(s),path:this.props.path,viewport:this.props.viewport,pageType:this.props.pageType,baseSection:this.props.baseSection,subSection:this.props.subSection},u=s&&s.size?l.createElement(Ue.Z,c):null,p=m()("detail","detailBody",It.Oo,{hasBanner:this.hasBanner,hasNotification:u},this.props.abtest>0?"sclt-abtest-a-gJcfH7vrco":""),d={__html:JSON.stringify({"@context":"http://schema.org/","@type":"WebPage",speakable:{"@type":"SpeakableSpecification",cssSelector:[".detailHeadline",".detailSummary"]}})},f=(0,We.fm)(this.props),h=(0,Bt.GS)(this.props),y=this.props.abtest>0?{onClick:(0,yt.D_)(".moreStories a, .trendingListItem a")}:{};return l.createElement(Lt.Z,{statusCode:this.props.statusCode},l.createElement("div",(0,r.Z)({className:p},y),f,l.createElement("div",{ref:this.props.section}),u,l.createElement("div",{className:"detailBodyContainer"},l.createElement("div",{className:"detailMainCol sclt-storycontent"},this.getMetaLabel(),l.createElement(k.Z,{text:e.headline,lang:this.props.content.language}),l.createElement(Z.Z,{text:e.summary}),this.getSharing(),l.createElement(x.Z,{text:e.deck,lang:this.props.content.language}),this.getByline(),!(0,Ge.Hv)(this.props.content.sponsorBio)&&this.getSponsorBio(),this.story()||this.media(),this.getRelatedSegments(),i,a,this.getAuthorProfile(),n,l.createElement(be,{headline:e.headline,baseSection:this.props.baseSection}),this.getRelatedLinks(),this.getRelatedExternalLinks(),this.getNewsletterWidget(),this.getSponsorAbout()),l.createElement("div",{className:"detailSideRail"},l.createElement("div",{className:"stickyContainer stickyRailAd"},this.getBigbox(t,"right")),l.createElement("div",{className:"stickyContainer"},this.getDiscoveryComponents(Ke.QY))),l.createElement($e.Z,null,l.createElement(St,{subject:e.subject})),this.getDiscoveryComponents(Ke.N3),l.createElement("script",{type:"application/ld+json",dangerouslySetInnerHTML:d})),l.createElement(_e,null),l.createElement(Ot.Z,{dtmData:h,type:Dt.D5})))}}]),n}(l.Component);Mt.defaultProps={content:y.oC,media:y.s7,image:y.UF,gallery:y.bt,audio:y.$b,baseSection:"",section:"",dispatch:function(){},meta:null,fixed:{}},Mt.propTypes={content:d().object,media:d().object,image:d().object,gallery:d().object,audio:d().object,baseSection:d().string,section:d().string,dispatch:d().func,pageType:d().string,path:d().string,meta:d().object,fixed:d().object};var Ht=function(e){return{statusCode:e.app.statusCode,content:e.detail.content,media:e.detail.media,image:e.detail.image,gallery:e.detail.gallery,audio:e.detail.audio,baseSection:e.app.baseSection,subSection:e.app.subSection,section:e.app.section,contentId:e.app.contentId,pageType:e.app.pageType,path:e.app.path,rightrail:e.rightRail,fixed:e.fixed,meta:e.app.meta,analytics:e.tracking}},qt=Mt.displayName="DETAIL",Ut=function(e){return{fetchData:function(t,n){return e((0,Tt.n)(t,n))}}},Vt=(0,u.connect)(Ht,Ut)(Mt),zt=(0,u.connect)((function(e){var t=Ht(e);return t.content.publishedAt=0,t}),Ut)(Mt);[Vt,Mt,zt].map((function(e){return e.displayName=Mt.displayName}))},35964:function(e,t,n){"use strict";var r=n(21914),a=n(92972),i=n.n(a);function o(e){return r.createElement("h1",{className:"detailHeadline",lang:e.lang},e.text)}o.propTypes={text:i().string.isRequired,lang:i().string},t.Z=o},23346:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(21914),a=n(92972),i=n.n(a);function o(e){return r.createElement("div",{className:"detailSummary"},e.text)}o.propTypes={text:i().string.isRequired}}}]);