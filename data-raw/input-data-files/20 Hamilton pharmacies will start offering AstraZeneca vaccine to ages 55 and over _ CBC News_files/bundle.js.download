!function(modules){function webpackJsonpCallback(data){for(var moduleId,chunkId,chunkIds=data[0],moreModules=data[1],i=0,resolves=[];i<chunkIds.length;i++)chunkId=chunkIds[i],Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]&&resolves.push(installedChunks[chunkId][0]),installedChunks[chunkId]=0;for(moduleId in moreModules)Object.prototype.hasOwnProperty.call(moreModules,moduleId)&&(modules[moduleId]=moreModules[moduleId]);for(parentJsonpFunction&&parentJsonpFunction(data);resolves.length;)resolves.shift()()}var installedModules={},installedCssChunks={5:0},installedChunks={5:0};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.e=function(chunkId){var promises=[];installedCssChunks[chunkId]?promises.push(installedCssChunks[chunkId]):0!==installedCssChunks[chunkId]&&{0:1,1:1,2:1,4:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1}[chunkId]&&promises.push(installedCssChunks[chunkId]=new Promise((function(resolve,reject){for(var href=chunkId+".bundle.css",fullhref=__webpack_require__.p+href,existingLinkTags=document.getElementsByTagName("link"),i=0;i<existingLinkTags.length;i++){var dataHref=(tag=existingLinkTags[i]).getAttribute("data-href")||tag.getAttribute("href");if("stylesheet"===tag.rel&&(dataHref===href||dataHref===fullhref))return resolve()}var existingStyleTags=document.getElementsByTagName("style");for(i=0;i<existingStyleTags.length;i++){var tag;if((dataHref=(tag=existingStyleTags[i]).getAttribute("data-href"))===href||dataHref===fullhref)return resolve()}var linkTag=document.createElement("link");linkTag.rel="stylesheet",linkTag.type="text/css",linkTag.onload=resolve,linkTag.onerror=function(event){var request=event&&event.target&&event.target.src||fullhref,err=new Error("Loading CSS chunk "+chunkId+" failed.\n("+request+")");err.code="CSS_CHUNK_LOAD_FAILED",err.request=request,delete installedCssChunks[chunkId],linkTag.parentNode.removeChild(linkTag),reject(err)},linkTag.href=fullhref,document.getElementsByTagName("head")[0].appendChild(linkTag)})).then((function(){installedCssChunks[chunkId]=0})));var installedChunkData=installedChunks[chunkId];if(0!==installedChunkData)if(installedChunkData)promises.push(installedChunkData[2]);else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var onScriptComplete,script=document.createElement("script");script.charset="utf-8",script.timeout=120,__webpack_require__.nc&&script.setAttribute("nonce",__webpack_require__.nc),script.src=function(chunkId){return __webpack_require__.p+""+({}[chunkId]||chunkId)+"."+chunkId+".js"}(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null,clearTimeout(timeout);var chunk=installedChunks[chunkId];if(0!==chunk){if(chunk){var errorType=event&&("load"===event.type?"missing":event.type),realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")",error.name="ChunkLoadError",error.type=errorType,error.request=realSrc,chunk[1](error)}installedChunks[chunkId]=void 0}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete,document.head.appendChild(script)}return Promise.all(promises)},__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="/",__webpack_require__.oe=function(err){throw console.error(err),err};var jsonpArray=window.webpackJsonp=window.webpackJsonp||[],oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback,jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;__webpack_require__(__webpack_require__.s=64)}([function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function noop(){}__webpack_require__.d(__webpack_exports__,"a",(function(){return HtmlTag})),__webpack_require__.d(__webpack_exports__,"b",(function(){return SvelteComponent})),__webpack_require__.d(__webpack_exports__,"c",(function(){return action_destroyer})),__webpack_require__.d(__webpack_exports__,"d",(function(){return add_flush_callback})),__webpack_require__.d(__webpack_exports__,"e",(function(){return add_render_callback})),__webpack_require__.d(__webpack_exports__,"f",(function(){return add_resize_listener})),__webpack_require__.d(__webpack_exports__,"g",(function(){return append})),__webpack_require__.d(__webpack_exports__,"h",(function(){return assign})),__webpack_require__.d(__webpack_exports__,"i",(function(){return attr})),__webpack_require__.d(__webpack_exports__,"j",(function(){return beforeUpdate})),__webpack_require__.d(__webpack_exports__,"k",(function(){return bind})),__webpack_require__.d(__webpack_exports__,"l",(function(){return binding_callbacks})),__webpack_require__.d(__webpack_exports__,"m",(function(){return bubble})),__webpack_require__.d(__webpack_exports__,"n",(function(){return check_outros})),__webpack_require__.d(__webpack_exports__,"o",(function(){return component_subscribe})),__webpack_require__.d(__webpack_exports__,"p",(function(){return createEventDispatcher})),__webpack_require__.d(__webpack_exports__,"q",(function(){return create_animation})),__webpack_require__.d(__webpack_exports__,"r",(function(){return create_component})),__webpack_require__.d(__webpack_exports__,"s",(function(){return create_slot})),__webpack_require__.d(__webpack_exports__,"t",(function(){return destroy_component})),__webpack_require__.d(__webpack_exports__,"u",(function(){return destroy_each})),__webpack_require__.d(__webpack_exports__,"v",(function(){return detach})),__webpack_require__.d(__webpack_exports__,"w",(function(){return element})),__webpack_require__.d(__webpack_exports__,"x",(function(){return empty})),__webpack_require__.d(__webpack_exports__,"y",(function(){return fix_and_outro_and_destroy_block})),__webpack_require__.d(__webpack_exports__,"z",(function(){return fix_position})),__webpack_require__.d(__webpack_exports__,"A",(function(){return get_spread_object})),__webpack_require__.d(__webpack_exports__,"B",(function(){return get_spread_update})),__webpack_require__.d(__webpack_exports__,"C",(function(){return get_store_value})),__webpack_require__.d(__webpack_exports__,"D",(function(){return globals})),__webpack_require__.d(__webpack_exports__,"E",(function(){return group_outros})),__webpack_require__.d(__webpack_exports__,"F",(function(){return identity})),__webpack_require__.d(__webpack_exports__,"G",(function(){return init})),__webpack_require__.d(__webpack_exports__,"H",(function(){return insert})),__webpack_require__.d(__webpack_exports__,"I",(function(){return is_function})),__webpack_require__.d(__webpack_exports__,"J",(function(){return listen})),__webpack_require__.d(__webpack_exports__,"K",(function(){return loop})),__webpack_require__.d(__webpack_exports__,"L",(function(){return mount_component})),__webpack_require__.d(__webpack_exports__,"M",(function(){return noop})),__webpack_require__.d(__webpack_exports__,"N",(function(){return now})),__webpack_require__.d(__webpack_exports__,"O",(function(){return onDestroy})),__webpack_require__.d(__webpack_exports__,"P",(function(){return onMount})),__webpack_require__.d(__webpack_exports__,"Q",(function(){return outro_and_destroy_block})),__webpack_require__.d(__webpack_exports__,"R",(function(){return prevent_default})),__webpack_require__.d(__webpack_exports__,"S",(function(){return run_all})),__webpack_require__.d(__webpack_exports__,"T",(function(){return safe_not_equal})),__webpack_require__.d(__webpack_exports__,"U",(function(){return select_option})),__webpack_require__.d(__webpack_exports__,"V",(function(){return select_value})),__webpack_require__.d(__webpack_exports__,"W",(function(){return set_data})),__webpack_require__.d(__webpack_exports__,"X",(function(){return set_input_value})),__webpack_require__.d(__webpack_exports__,"Y",(function(){return set_store_value})),__webpack_require__.d(__webpack_exports__,"Z",(function(){return set_style})),__webpack_require__.d(__webpack_exports__,"ab",(function(){return space})),__webpack_require__.d(__webpack_exports__,"bb",(function(){return stop_propagation})),__webpack_require__.d(__webpack_exports__,"cb",(function(){return subscribe})),__webpack_require__.d(__webpack_exports__,"db",(function(){return text})),__webpack_require__.d(__webpack_exports__,"eb",(function(){return tick})),__webpack_require__.d(__webpack_exports__,"fb",(function(){return to_number})),__webpack_require__.d(__webpack_exports__,"gb",(function(){return toggle_class})),__webpack_require__.d(__webpack_exports__,"hb",(function(){return transition_in})),__webpack_require__.d(__webpack_exports__,"ib",(function(){return transition_out})),__webpack_require__.d(__webpack_exports__,"jb",(function(){return update_keyed_each})),__webpack_require__.d(__webpack_exports__,"kb",(function(){return update_slot}));const identity=x=>x;function assign(tar,src){for(const k in src)tar[k]=src[k];return tar}function run(fn){return fn()}function blank_object(){return Object.create(null)}function run_all(fns){fns.forEach(run)}function is_function(thing){return"function"==typeof thing}function safe_not_equal(a,b){return a!=a?b==b:a!==b||a&&"object"==typeof a||"function"==typeof a}function is_empty(obj){return 0===Object.keys(obj).length}function subscribe(store,...callbacks){if(null==store)return noop;const unsub=store.subscribe(...callbacks);return unsub.unsubscribe?()=>unsub.unsubscribe():unsub}function get_store_value(store){let value;return subscribe(store,_=>value=_)(),value}function component_subscribe(component,store,callback){component.$$.on_destroy.push(subscribe(store,callback))}function create_slot(definition,ctx,$$scope,fn){if(definition){const slot_ctx=get_slot_context(definition,ctx,$$scope,fn);return definition[0](slot_ctx)}}function get_slot_context(definition,ctx,$$scope,fn){return definition[1]&&fn?assign($$scope.ctx.slice(),definition[1](fn(ctx))):$$scope.ctx}function get_slot_changes(definition,$$scope,dirty,fn){if(definition[2]&&fn){const lets=definition[2](fn(dirty));if(void 0===$$scope.dirty)return lets;if("object"==typeof lets){const merged=[],len=Math.max($$scope.dirty.length,lets.length);for(let i=0;i<len;i+=1)merged[i]=$$scope.dirty[i]|lets[i];return merged}return $$scope.dirty|lets}return $$scope.dirty}function update_slot(slot,slot_definition,ctx,$$scope,dirty,get_slot_changes_fn,get_slot_context_fn){const slot_changes=get_slot_changes(slot_definition,$$scope,dirty,get_slot_changes_fn);if(slot_changes){const slot_context=get_slot_context(slot_definition,ctx,$$scope,get_slot_context_fn);slot.p(slot_context,slot_changes)}}function set_store_value(store,ret,value=ret){return store.set(value),ret}function action_destroyer(action_result){return action_result&&is_function(action_result.destroy)?action_result.destroy:noop}const is_client="undefined"!=typeof window;let now=is_client?()=>window.performance.now():()=>Date.now(),raf=is_client?cb=>requestAnimationFrame(cb):noop;const tasks=new Set;function run_tasks(now){tasks.forEach(task=>{task.c(now)||(tasks.delete(task),task.f())}),0!==tasks.size&&raf(run_tasks)}function loop(callback){let task;return 0===tasks.size&&raf(run_tasks),{promise:new Promise(fulfill=>{tasks.add(task={c:callback,f:fulfill})}),abort(){tasks.delete(task)}}}function append(target,node){target.appendChild(node)}function insert(target,node,anchor){target.insertBefore(node,anchor||null)}function detach(node){node.parentNode.removeChild(node)}function destroy_each(iterations,detaching){for(let i=0;i<iterations.length;i+=1)iterations[i]&&iterations[i].d(detaching)}function element(name){return document.createElement(name)}function text(data){return document.createTextNode(data)}function space(){return text(" ")}function empty(){return text("")}function listen(node,event,handler,options){return node.addEventListener(event,handler,options),()=>node.removeEventListener(event,handler,options)}function prevent_default(fn){return function(event){return event.preventDefault(),fn.call(this,event)}}function stop_propagation(fn){return function(event){return event.stopPropagation(),fn.call(this,event)}}function attr(node,attribute,value){null==value?node.removeAttribute(attribute):node.getAttribute(attribute)!==value&&node.setAttribute(attribute,value)}function to_number(value){return""===value?null:+value}function set_data(text,data){data=""+data,text.wholeText!==data&&(text.data=data)}function set_input_value(input,value){input.value=null==value?"":value}function set_style(node,key,value,important){node.style.setProperty(key,value,important?"important":"")}function select_option(select,value){for(let i=0;i<select.options.length;i+=1){const option=select.options[i];if(option.__value===value)return void(option.selected=!0)}}function select_value(select){const selected_option=select.querySelector(":checked")||select.options[0];return selected_option&&selected_option.__value}let crossorigin;function is_crossorigin(){if(void 0===crossorigin){crossorigin=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(error){crossorigin=!0}}return crossorigin}function add_resize_listener(node,fn){"static"===getComputedStyle(node).position&&(node.style.position="relative");const iframe=element("iframe");iframe.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),iframe.setAttribute("aria-hidden","true"),iframe.tabIndex=-1;const crossorigin=is_crossorigin();let unsubscribe;return crossorigin?(iframe.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",unsubscribe=listen(window,"message",event=>{event.source===iframe.contentWindow&&fn()})):(iframe.src="about:blank",iframe.onload=()=>{unsubscribe=listen(iframe.contentWindow,"resize",fn)}),append(node,iframe),()=>{(crossorigin||unsubscribe&&iframe.contentWindow)&&unsubscribe(),detach(iframe)}}function toggle_class(element,name,toggle){element.classList[toggle?"add":"remove"](name)}function custom_event(type,detail){const e=document.createEvent("CustomEvent");return e.initCustomEvent(type,!1,!1,detail),e}class HtmlTag{constructor(anchor=null){this.a=anchor,this.e=this.n=null}m(html,target,anchor=null){this.e||(this.e=element(target.nodeName),this.t=target,this.h(html)),this.i(anchor)}h(html){this.e.innerHTML=html,this.n=Array.from(this.e.childNodes)}i(anchor){for(let i=0;i<this.n.length;i+=1)insert(this.t,this.n[i],anchor)}p(html){this.d(),this.h(html),this.i(this.a)}d(){this.n.forEach(detach)}}const active_docs=new Set;let current_component,active=0;function create_rule(node,a,b,duration,delay,ease,fn,uid=0){const step=16.666/duration;let keyframes="{\n";for(let p=0;p<=1;p+=step){const t=a+(b-a)*ease(p);keyframes+=100*p+`%{${fn(t,1-t)}}\n`}const rule=keyframes+`100% {${fn(b,1-b)}}\n}`,name=`__svelte_${function(str){let hash=5381,i=str.length;for(;i--;)hash=(hash<<5)-hash^str.charCodeAt(i);return hash>>>0}(rule)}_${uid}`,doc=node.ownerDocument;active_docs.add(doc);const stylesheet=doc.__svelte_stylesheet||(doc.__svelte_stylesheet=doc.head.appendChild(element("style")).sheet),current_rules=doc.__svelte_rules||(doc.__svelte_rules={});current_rules[name]||(current_rules[name]=!0,stylesheet.insertRule(`@keyframes ${name} ${rule}`,stylesheet.cssRules.length));const animation=node.style.animation||"";return node.style.animation=`${animation?animation+", ":""}${name} ${duration}ms linear ${delay}ms 1 both`,active+=1,name}function delete_rule(node,name){const previous=(node.style.animation||"").split(", "),next=previous.filter(name?anim=>anim.indexOf(name)<0:anim=>-1===anim.indexOf("__svelte")),deleted=previous.length-next.length;deleted&&(node.style.animation=next.join(", "),active-=deleted,active||raf(()=>{active||(active_docs.forEach(doc=>{const stylesheet=doc.__svelte_stylesheet;let i=stylesheet.cssRules.length;for(;i--;)stylesheet.deleteRule(i);doc.__svelte_rules={}}),active_docs.clear())}))}function create_animation(node,from,fn,params){if(!from)return noop;const to=node.getBoundingClientRect();if(from.left===to.left&&from.right===to.right&&from.top===to.top&&from.bottom===to.bottom)return noop;const{delay:delay=0,duration:duration=300,easing:easing=identity,start:start_time=now()+delay,end:end=start_time+duration,tick:tick=noop,css:css}=fn(node,{from:from,to:to},params);let name,running=!0,started=!1;function stop(){css&&delete_rule(node,name),running=!1}return loop(now=>{if(!started&&now>=start_time&&(started=!0),started&&now>=end&&(tick(1,0),stop()),!running)return!1;if(started){const t=0+1*easing((now-start_time)/duration);tick(t,1-t)}return!0}),css&&(name=create_rule(node,0,1,duration,delay,easing,css)),delay||(started=!0),tick(0,1),stop}function fix_position(node){const style=getComputedStyle(node);if("absolute"!==style.position&&"fixed"!==style.position){const{width:width,height:height}=style,a=node.getBoundingClientRect();node.style.position="absolute",node.style.width=width,node.style.height=height,function(node,a){const b=node.getBoundingClientRect();if(a.left!==b.left||a.top!==b.top){const style=getComputedStyle(node),transform="none"===style.transform?"":style.transform;node.style.transform=`${transform} translate(${a.left-b.left}px, ${a.top-b.top}px)`}}(node,a)}}function set_current_component(component){current_component=component}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function beforeUpdate(fn){get_current_component().$$.before_update.push(fn)}function onMount(fn){get_current_component().$$.on_mount.push(fn)}function onDestroy(fn){get_current_component().$$.on_destroy.push(fn)}function createEventDispatcher(){const component=get_current_component();return(type,detail)=>{const callbacks=component.$$.callbacks[type];if(callbacks){const event=custom_event(type,detail);callbacks.slice().forEach(fn=>{fn.call(component,event)})}}}function bubble(component,event){const callbacks=component.$$.callbacks[event.type];callbacks&&callbacks.slice().forEach(fn=>fn(event))}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function tick(){return schedule_update(),resolved_promise}function add_render_callback(fn){render_callbacks.push(fn)}function add_flush_callback(fn){flush_callbacks.push(fn)}let flushing=!1;const seen_callbacks=new Set;function flush(){if(!flushing){flushing=!0;do{for(let i=0;i<dirty_components.length;i+=1){const component=dirty_components[i];set_current_component(component),update(component.$$)}for(set_current_component(null),dirty_components.length=0;binding_callbacks.length;)binding_callbacks.pop()();for(let i=0;i<render_callbacks.length;i+=1){const callback=render_callbacks[i];seen_callbacks.has(callback)||(seen_callbacks.add(callback),callback())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,flushing=!1,seen_callbacks.clear()}}function update($$){if(null!==$$.fragment){$$.update(),run_all($$.before_update);const dirty=$$.dirty;$$.dirty=[-1],$$.fragment&&$$.fragment.p($$.ctx,dirty),$$.after_update.forEach(add_render_callback)}}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(block,local){block&&block.i&&(outroing.delete(block),block.i(local))}function transition_out(block,local,detach,callback){if(block&&block.o){if(outroing.has(block))return;outroing.add(block),outros.c.push(()=>{outroing.delete(block),callback&&(detach&&block.d(1),callback())}),block.o(local)}}const globals="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function outro_and_destroy_block(block,lookup){transition_out(block,1,1,()=>{lookup.delete(block.key)})}function fix_and_outro_and_destroy_block(block,lookup){block.f(),outro_and_destroy_block(block,lookup)}function update_keyed_each(old_blocks,dirty,get_key,dynamic,ctx,list,lookup,node,destroy,create_each_block,next,get_context){let o=old_blocks.length,n=list.length,i=o;const old_indexes={};for(;i--;)old_indexes[old_blocks[i].key]=i;const new_blocks=[],new_lookup=new Map,deltas=new Map;for(i=n;i--;){const child_ctx=get_context(ctx,list,i),key=get_key(child_ctx);let block=lookup.get(key);block?dynamic&&block.p(child_ctx,dirty):(block=create_each_block(key,child_ctx),block.c()),new_lookup.set(key,new_blocks[i]=block),key in old_indexes&&deltas.set(key,Math.abs(i-old_indexes[key]))}const will_move=new Set,did_move=new Set;function insert(block){transition_in(block,1),block.m(node,next),lookup.set(block.key,block),next=block.first,n--}for(;o&&n;){const new_block=new_blocks[n-1],old_block=old_blocks[o-1],new_key=new_block.key,old_key=old_block.key;new_block===old_block?(next=new_block.first,o--,n--):new_lookup.has(old_key)?!lookup.has(new_key)||will_move.has(new_key)?insert(new_block):did_move.has(old_key)?o--:deltas.get(new_key)>deltas.get(old_key)?(did_move.add(new_key),insert(new_block)):(will_move.add(old_key),o--):(destroy(old_block,lookup),o--)}for(;o--;){const old_block=old_blocks[o];new_lookup.has(old_block.key)||destroy(old_block,lookup)}for(;n;)insert(new_blocks[n-1]);return new_blocks}function get_spread_update(levels,updates){const update={},to_null_out={},accounted_for={$$scope:1};let i=levels.length;for(;i--;){const o=levels[i],n=updates[i];if(n){for(const key in o)key in n||(to_null_out[key]=1);for(const key in n)accounted_for[key]||(update[key]=n[key],accounted_for[key]=1);levels[i]=n}else for(const key in o)accounted_for[key]=1}for(const key in to_null_out)key in update||(update[key]=void 0);return update}function get_spread_object(spread_props){return"object"==typeof spread_props&&null!==spread_props?spread_props:{}}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);let SvelteElement;function bind(component,name,callback){const index=component.$$.props[name];void 0!==index&&(component.$$.bound[index]=callback,callback(component.$$.ctx[index]))}function create_component(block){block&&block.c()}function mount_component(component,target,anchor){const{fragment:fragment,on_mount:on_mount,on_destroy:on_destroy,after_update:after_update}=component.$$;fragment&&fragment.m(target,anchor),add_render_callback(()=>{const new_on_destroy=on_mount.map(run).filter(is_function);on_destroy?on_destroy.push(...new_on_destroy):run_all(new_on_destroy),component.$$.on_mount=[]}),after_update.forEach(add_render_callback)}function destroy_component(component,detaching){const $$=component.$$;null!==$$.fragment&&(run_all($$.on_destroy),$$.fragment&&$$.fragment.d(detaching),$$.on_destroy=$$.fragment=null,$$.ctx=[])}function init(component,options,instance,create_fragment,not_equal,props,dirty=[-1]){const parent_component=current_component;set_current_component(component);const prop_values=options.props||{},$$=component.$$={fragment:null,ctx:null,props:props,update:noop,not_equal:not_equal,bound:blank_object(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(parent_component?parent_component.$$.context:[]),callbacks:blank_object(),dirty:dirty,skip_bound:!1};let ready=!1;if($$.ctx=instance?instance(component,prop_values,(i,ret,...rest)=>{const value=rest.length?rest[0]:ret;return $$.ctx&&not_equal($$.ctx[i],$$.ctx[i]=value)&&(!$$.skip_bound&&$$.bound[i]&&$$.bound[i](value),ready&&function(component,i){-1===component.$$.dirty[0]&&(dirty_components.push(component),schedule_update(),component.$$.dirty.fill(0)),component.$$.dirty[i/31|0]|=1<<i%31}(component,i)),ret}):[],$$.update(),ready=!0,run_all($$.before_update),$$.fragment=!!create_fragment&&create_fragment($$.ctx),options.target){if(options.hydrate){const nodes=function(element){return Array.from(element.childNodes)}(options.target);$$.fragment&&$$.fragment.l(nodes),nodes.forEach(detach)}else $$.fragment&&$$.fragment.c();options.intro&&transition_in(component.$$.fragment),mount_component(component,options.target,options.anchor),flush()}set_current_component(parent_component)}"function"==typeof HTMLElement&&(SvelteElement=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const key in this.$$.slotted)this.appendChild(this.$$.slotted[key])}attributeChangedCallback(attr,_oldValue,newValue){this[attr]=newValue}$destroy(){destroy_component(this,1),this.$destroy=noop}$on(type,callback){const callbacks=this.$$.callbacks[type]||(this.$$.callbacks[type]=[]);return callbacks.push(callback),()=>{const index=callbacks.indexOf(callback);-1!==index&&callbacks.splice(index,1)}}$set($$props){this.$$set&&!is_empty($$props)&&(this.$$.skip_bound=!0,this.$$set($$props),this.$$.skip_bound=!1)}});class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(type,callback){const callbacks=this.$$.callbacks[type]||(this.$$.callbacks[type]=[]);return callbacks.push(callback),()=>{const index=callbacks.indexOf(callback);-1!==index&&callbacks.splice(index,1)}}$set($$props){this.$$set&&!is_empty($$props)&&(this.$$.skip_bound=!0,this.$$set($$props),this.$$.skip_bound=!1)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";function urlParts(url){const qIndex=url.indexOf("?");return-1==qIndex?[url,null]:[url.substr(0,qIndex),url.substr(qIndex+1)]}function urlJoin(...parts){return parts.reduce((a,b)=>(a.endsWith("/")&&(a=a.substr(0,a.length-1)),b.startsWith("/")&&(b=b.substr(1)),""==a?b:""==b?a:[a,b].join("/")),"")}function getQueryStringParamsFromQuery(query){return null==query?{}:query.split("&").reduce((params,param)=>{let[key,value]=param.split("=");return params[key]=value?decodeURIComponent(value.replace(/\+/g," ")):"",params},{})}function getQueryStringParams(url){const[_,query]=urlParts(url);return getQueryStringParamsFromQuery(query)}function urlsEqual(url1,url2){const[base1,query1]=urlParts(url1),[base2,query2]=urlParts(url2);if(base1!=base2)return!1;const qp1=getQueryStringParamsFromQuery(query1),qp2=getQueryStringParamsFromQuery(query2),keys1=Object.keys(qp1),keys2=Object.keys(qp2);if(keys1.length!=keys2.length)return!1;keys1.sort(),keys2.sort();for(let i=0;i<keys1.length;i++){const k1=keys1[i],k2=keys2[i];if(k1!=k2)return!1;if(qp1[k1]!=qp2[k2])return!1}return!0}function currentUrl(){return window.location.pathname+window.location.search}function queryBuilder(baseUrl,params,cleanSlate=!1){null==baseUrl&&(baseUrl=currentUrl());const[url,query]=urlParts(baseUrl),oldParams=cleanSlate?{}:getQueryStringParamsFromQuery(query);for(const prop in params)params.hasOwnProperty(prop)&&(oldParams[prop]=params[prop]);let result="",prefix="?";for(const prop in oldParams)if(oldParams.hasOwnProperty(prop)){const key=prop,value=oldParams[key];if(null==value)continue;result+=`${prefix}${key}=${encodeURIComponent(value)}`,prefix="&"}return`${url}${result}`}function truthyParamValue(value){if(null==value)return!1;const normalized=value.trim().toLowerCase();return"1"==normalized||"true"==normalized||"yes"==normalized}function falsyParamValue(value){if(null==value)return!1;const normalized=value.trim().toLowerCase();return"0"==normalized||"false"==normalized||"no"==normalized}__webpack_require__.d(__webpack_exports__,"f",(function(){return urlJoin})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getQueryStringParams})),__webpack_require__.d(__webpack_exports__,"g",(function(){return urlsEqual})),__webpack_require__.d(__webpack_exports__,"a",(function(){return currentUrl})),__webpack_require__.d(__webpack_exports__,"d",(function(){return queryBuilder})),__webpack_require__.d(__webpack_exports__,"e",(function(){return truthyParamValue})),__webpack_require__.d(__webpack_exports__,"b",(function(){return falsyParamValue}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return cookiesEnabled}));var axios__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(31),axios__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__),axios_retry__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(40),axios_retry__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(axios_retry__WEBPACK_IMPORTED_MODULE_1__);axios_retry__WEBPACK_IMPORTED_MODULE_1___default()(axios__WEBPACK_IMPORTED_MODULE_0___default.a,{retries:3,retryDelay:axios_retry__WEBPACK_IMPORTED_MODULE_1___default.a.exponentialDelay});let cookiesEnabled=!1;try{document.cookie,cookiesEnabled=!0}catch(e){}const session=axios__WEBPACK_IMPORTED_MODULE_0___default.a.create({xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken",withCredentials:cookiesEnabled});session.interceptors.response.use(response=>response,error=>error.response&&error.response.data?Promise.reject({errorData:error.response.data,status:error.response.status}):Promise.reject(error));const sessionCache=new class{constructor(){this.cached=[],this.cachedByUrl={}}trimCache(){for(;this.cached.length>50;){const{url:url}=this.cached.shift();delete this.cachedByUrl[url]}}cache(url,contents){this.cached.push({url:url,contents:contents}),this.cachedByUrl[url]=contents,this.trimCache()}has(url){return this.cachedByUrl.hasOwnProperty(url)}lookup(url){return this.has(url)?this.cachedByUrl[url]:null}};session.getStatic=async function(url){if(sessionCache.has(url))return sessionCache.lookup(url);if(url.startsWith("https://api.www.documentcloud.org")){const redirectUrl=(await session.get(url)).data.location,result=(await axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(redirectUrl)).data;return sessionCache.cache(url,result),result}{const result=(await axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(url)).data;return sessionCache.cache(url,result),result}},__webpack_exports__.b=session},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return apiUrl}));function apiUrl(url){return"https://api.www.documentcloud.org/api/"+url}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Svue}));var svelte_store__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(19);const STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,ARGUMENT_NAMES=/([^\s,]+)/g,QUICK_ARROW=/^\s*([a-zA-Z0-9$_]+)\s*=>/;function getParamNames(func){const fnStr=func.toString().replace(STRIP_COMMENTS,""),quickMatch=fnStr.match(QUICK_ARROW);if(null!=quickMatch)return[quickMatch[1]];const result=fnStr.slice(fnStr.indexOf("(")+1,fnStr.indexOf(")")).match(ARGUMENT_NAMES);if(null===result)return[];const arrowIdx=result.indexOf("=>");return-1!=arrowIdx?result.slice(0,arrowIdx):result}class Svue{constructor(structure){this.data={},this.writables={},this.subscribeId=0,this.subscribers={},null!=structure.data&&this.initData(structure.data),null!=structure.computed&&this.initComputed(structure.computed),null!=structure.watch&&this.initWatch(structure.watch)}subscribe(fn){fn(this);const subscribeId=this.subscribeId++;return this.subscribers[subscribeId]=fn,()=>{delete this.subscribers[subscribeId]}}pingSubscriptions(){Object.keys(this.subscribers).forEach(subscriber=>{this.subscribers[subscriber](this)})}initData(data){const destructured=data();Object.keys(destructured).forEach(key=>{let w=destructured[key];null!=w&&w.set&&w.subscribe||(w=Object(svelte_store__WEBPACK_IMPORTED_MODULE_0__.c)(w)),this.writables[key]=w,Object.defineProperty(this,key,{get:()=>Object(svelte_store__WEBPACK_IMPORTED_MODULE_0__.b)(w),set(newValue){w.set(newValue)}}),w.subscribe(()=>this.pingSubscriptions())})}initComputed(computed){const keys=Object.keys(computed);for(;0!=keys.length;){let matched=!1;for(let i=0;i<keys.length;i++){const key=keys[i],args=getParamNames(computed[key]);if(!args.every(arg=>null!=this.writables[arg]))continue;matched=!0;const d=Object(svelte_store__WEBPACK_IMPORTED_MODULE_0__.a)(args.map(a=>this.writables[a]),(args,setFn)=>{const result=computed[key].bind(this)(...args);result&&"function"==typeof result.then?result.then(x=>setFn(x)):setFn(result)});this.writables[key]=d,Object.defineProperty(this,key,{get:()=>Object(svelte_store__WEBPACK_IMPORTED_MODULE_0__.b)(d)}),d.subscribe(()=>this.pingSubscriptions()),keys.splice(i,1),i--}if(!matched)throw new Error("INVALID COMPUTED")}}initWatch(watch){Object.keys(watch).forEach(key=>{key.split(".").reduce((x,k)=>x.writables[k],this).subscribe(watch[key].bind(this))})}set(key,value){if(!(key instanceof Svue)){if(null==this.writables[key])throw new Error("Invalid key: "+key);this.writables[key].set(value)}}update(fn){let key=getParamNames(fn);if(key.length>1)throw new Error("Only specify one arg for update");if(key=key[0],null==this.writables[key])throw new Error("Invalid key: "+key);this.writables[key].update(fn)}get(key){return Object(svelte_store__WEBPACK_IMPORTED_MODULE_0__.b)(this.writables[key])}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return router})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getPath})),__webpack_require__.d(__webpack_exports__,"d",(function(){return pushUrl})),__webpack_require__.d(__webpack_exports__,"b",(function(){return goBack})),__webpack_require__.d(__webpack_exports__,"c",(function(){return nav}));var rlite_router__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(61),rlite_router__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(rlite_router__WEBPACK_IMPORTED_MODULE_0__),svue__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4),_pages_home_Empty_svelte__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(14),_util_lazyComponent__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(15);const endings=[".html",".html"];class Router extends svue__WEBPACK_IMPORTED_MODULE_1__.a{constructor(notFound){super({data:()=>({notFound:notFound,routeFunc:()=>{},pastUrl:null,backNav:!1,currentUrl:null,lazyComponent:_util_lazyComponent__WEBPACK_IMPORTED_MODULE_3__.a}),computed:{routes:(routeFunc,lazyComponent)=>routeFunc(lazyComponent),mapping(routes){const mapping={};for(const name in routes)if(routes.hasOwnProperty(name)){const route=routes[name];null!=route.path&&(mapping[route.path]=props=>({name:name,props:props,component:route.component,get:route.get}))}return mapping},router:(mapping,notFound)=>rlite_router__WEBPACK_IMPORTED_MODULE_0___default()(()=>({component:notFound}),mapping),resolvedRoute(currentUrl,router,lazyComponent){if(null==currentUrl||null==router||null==lazyComponent)return null;const resolved=this.resolve(currentUrl);return null==resolved.component&&null!=resolved.get&&resolved.get(),resolved}}})}lookup(name){return this.routes[name].path}resolve(path){path=path.split("#")[0];for(let i=0;i<endings.length;i++){const ending=endings[i];if(path.endsWith(ending)){path=path.substr(0,path.length-ending.length);break}}return this.router(path)}}const router=new Router(_pages_home_Empty_svelte__WEBPACK_IMPORTED_MODULE_2__.default);function getPath(to,params=null){let path=router.lookup(to);if(null!=params)for(const param in params)params.hasOwnProperty(param)&&(path=path.replace(":"+param,params[param]),path=path.replace("*"+param,params[param]));return path}function pushUrl(url){router.backNav=!1,router.pastUrl=router.currentUrl,router.currentUrl=url,window.history.pushState({path:url,dc:!0},"",window.location.origin+url)}function goBack(fallback="/app"){null!=router.pastUrl?window.history.back():(router.currentUrl=fallback,window.history.replaceState({path:fallback},"",window.location.origin+fallback))}function nav(to,params=null){pushUrl(getPath(to,params))}window.addEventListener("popstate",e=>{const isDc=(e.state||{dc:!1}).dc;router.backNav=1==isDc})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return DEFAULT_ORDERING})),__webpack_require__.d(__webpack_exports__,"d",(function(){return USER_EXPAND})),__webpack_require__.d(__webpack_exports__,"c",(function(){return ORG_EXPAND})),__webpack_require__.d(__webpack_exports__,"a",(function(){return DEFAULT_EXPAND}));const DEFAULT_ORDERING="-created_at",USER_EXPAND="user",ORG_EXPAND="organization",DEFAULT_EXPAND=[USER_EXPAND,ORG_EXPAND].join(",")},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){__webpack_require__.d(__webpack_exports__,"m",(function(){return searchDocuments})),__webpack_require__.d(__webpack_exports__,"l",(function(){return searchDocument})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getDocument})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getDocumentsWithIds})),__webpack_require__.d(__webpack_exports__,"d",(function(){return deleteDocument})),__webpack_require__.d(__webpack_exports__,"e",(function(){return editMetadata})),__webpack_require__.d(__webpack_exports__,"c",(function(){return changeAccess})),__webpack_require__.d(__webpack_exports__,"k",(function(){return reprocessDocument})),__webpack_require__.d(__webpack_exports__,"b",(function(){return cancelProcessing})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getPendingProgress})),__webpack_require__.d(__webpack_exports__,"i",(function(){return redactDocument})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addData})),__webpack_require__.d(__webpack_exports__,"j",(function(){return removeData})),__webpack_require__.d(__webpack_exports__,"n",(function(){return uploadDocuments}));var _session__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_base__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_util_url__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(35),__webpack_require__(1)),_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6),_structure_results__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(25),_util_batchDelay__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(32),axios__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(31),axios__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_7__),_structure_document__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(9);process.env.POLL_TIMEOUT;const GET_BATCH=parseInt("25"),GET_BATCH_DELAY=parseInt("1000"),UPLOAD_BATCH=parseInt("25"),UPLOAD_BATCH_DELAY=parseInt("1000");async function searchDocuments(query,page=0,expand=_common__WEBPACK_IMPORTED_MODULE_4__.a){const url=Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_util_url__WEBPACK_IMPORTED_MODULE_3__.d)("documents/search/",{q:query,expand:expand,page:page+1})),{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.b.get(url);return data.results=data.results.map(doc=>new _structure_document__WEBPACK_IMPORTED_MODULE_8__.a(doc)),new _structure_results__WEBPACK_IMPORTED_MODULE_5__.a(url,data)}async function searchDocument(query,docId){const url=Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_util_url__WEBPACK_IMPORTED_MODULE_3__.d)(`documents/${docId}/search/`,{q:query})),{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.b.get(url);return Object(_structure_document__WEBPACK_IMPORTED_MODULE_8__.d)(data,"<em>","</em>",!0)}async function getDocument(id,expand=_common__WEBPACK_IMPORTED_MODULE_4__.a){const{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.b.get(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_util_url__WEBPACK_IMPORTED_MODULE_3__.d)(`documents/${id}/`,{expand:expand})));return new _structure_document__WEBPACK_IMPORTED_MODULE_8__.a(data)}async function getDocumentsWithIds(ids,remaining=!1,expand=_common__WEBPACK_IMPORTED_MODULE_4__.a){return await Object(_util_batchDelay__WEBPACK_IMPORTED_MODULE_6__.a)(ids,GET_BATCH,GET_BATCH_DELAY,async subIds=>{if(0==subIds.length)return[];const params={expand:expand,id__in:subIds};remaining&&(params.remaining=!0);const{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.b.get(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_util_url__WEBPACK_IMPORTED_MODULE_3__.d)("documents/",params))),docs=data.results.map(document=>new _structure_document__WEBPACK_IMPORTED_MODULE_8__.a(document)),orderedDocs=[];for(let i=0;i<subIds.length;i++){const matching=docs.filter(doc=>doc.id==subIds[i]);0!=matching.length&&orderedDocs.push(matching[0])}return orderedDocs},e=>console.error("error getting documents with ids",e))}async function deleteDocument(ids){await _session__WEBPACK_IMPORTED_MODULE_0__.b.delete(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_util_url__WEBPACK_IMPORTED_MODULE_3__.d)("documents/",{id__in:ids})))}async function editMetadata(ids,metadata){await _session__WEBPACK_IMPORTED_MODULE_0__.b.patch(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)("documents/"),ids.map(id=>({...metadata,id:id})))}async function changeAccess(ids,access){await _session__WEBPACK_IMPORTED_MODULE_0__.b.patch(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)("documents/"),ids.map(id=>({id:id,access:access})))}async function reprocessDocument(ids){await _session__WEBPACK_IMPORTED_MODULE_0__.b.post(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)("documents/process/"),ids.map(id=>({id:id})))}async function cancelProcessing(id){const{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.b.delete(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)(`documents/${id}/process/`));return data}async function getPendingProgress(){const{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.b.get(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)("documents/pending/"));return data}async function redactDocument(id,redactions){await _session__WEBPACK_IMPORTED_MODULE_0__.b.post(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)(`documents/${id}/redactions/`),redactions.map(redaction=>redaction.note))}async function addData(id,key,value){await _session__WEBPACK_IMPORTED_MODULE_0__.b.patch(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)(`documents/${id}/data/${key}/`),{values:[value]})}async function removeData(id,key,value){await _session__WEBPACK_IMPORTED_MODULE_0__.b.patch(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)(`documents/${id}/data/${key}/`),{remove:[value]})}async function uploadDocuments(docs,access,language,forceOcr,projects,createProgressFn,progressFn,processProgressFn,allCompleteFn,errorFn){const progresses=[],toComplete=[];for(let i=0;i<docs.length;i++)progresses.push({progress:0}),toComplete.push(i);const projectIds=projects.map(p=>p.id);let newDocuments;try{const getExtension=file=>{if(null==file.name)return"";const parts=file.name.split(".");return parts.length<=1?"":parts[parts.length-1].toLowerCase()};let createCount=0;const data=await Object(_util_batchDelay__WEBPACK_IMPORTED_MODULE_6__.a)(docs,UPLOAD_BATCH,UPLOAD_BATCH_DELAY,async subDocs=>{const{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.b.post(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)("documents/"),subDocs.map(doc=>({title:doc.name,access:access,language:language,original_extension:getExtension(doc.file),projects:projectIds})));return createCount+=subDocs.length,createProgressFn(createCount/docs.length),data},e=>console.error("error creating some docs",e));newDocuments=data}catch(e){return console.error(e),errorFn("failed to create the document",e)}const badDocs={};try{await Promise.all(docs.map((doc,i)=>{const url=newDocuments[i].presigned_url,id=newDocuments[i].id,file=doc.file;return new Promise(resolve=>{axios__WEBPACK_IMPORTED_MODULE_7___default.a.put(url,file,{headers:{"Content-Type":file.type||"application/octet-stream"},onUploadProgress:progressEvent=>{const progress=progressEvent.loaded/progressEvent.total;progresses[i].progress=progress,progressFn(i,progress)}}).then(results=>resolve(results)).catch(e=>{console.error("doc upload failed",e),progresses[i].progress=1,progressFn(i,1),badDocs[id]=!0,resolve()})})}))}catch(e){return console.error(e),errorFn("failed to upload the document",e)}const goodDocuments=newDocuments.filter(doc=>!badDocs[doc.id]),ids=goodDocuments.map(doc=>doc.id);let count=0;try{await Object(_util_batchDelay__WEBPACK_IMPORTED_MODULE_6__.a)(ids,UPLOAD_BATCH,UPLOAD_BATCH_DELAY,async subIds=>{await _session__WEBPACK_IMPORTED_MODULE_0__.b.post(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)("documents/process/"),subIds.map(id=>({id:id,force_ocr:forceOcr}))),count+=subIds.length,processProgressFn(count/ids.length)},e=>console.error("error processing some docs",e))}catch(e){return console.error(e),errorFn("failed to start processing the document",e)}allCompleteFn(goodDocuments.map(x=>new _structure_document__WEBPACK_IMPORTED_MODULE_8__.a(x)))}}).call(this,__webpack_require__(52))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"o",(function(){return layout})),__webpack_require__.d(__webpack_exports__,"r",(function(){return selectionProcessing})),__webpack_require__.d(__webpack_exports__,"u",(function(){return unselectDocument})),__webpack_require__.d(__webpack_exports__,"i",(function(){return hideDocumentInfo})),__webpack_require__.d(__webpack_exports__,"j",(function(){return hideMeta})),__webpack_require__.d(__webpack_exports__,"q",(function(){return openAccess})),__webpack_require__.d(__webpack_exports__,"e",(function(){return hideAccess})),__webpack_require__.d(__webpack_exports__,"a",(function(){return editData})),__webpack_require__.d(__webpack_exports__,"g",(function(){return hideData})),__webpack_require__.d(__webpack_exports__,"p",(function(){return newProject})),__webpack_require__.d(__webpack_exports__,"d",(function(){return embedProject})),__webpack_require__.d(__webpack_exports__,"m",(function(){return hideProjectEmbed})),__webpack_require__.d(__webpack_exports__,"b",(function(){return editProject})),__webpack_require__.d(__webpack_exports__,"k",(function(){return hideProject})),__webpack_require__.d(__webpack_exports__,"s",(function(){return showCollaborators})),__webpack_require__.d(__webpack_exports__,"f",(function(){return hideCollaborators})),__webpack_require__.d(__webpack_exports__,"v",(function(){return updateProjectEdit})),__webpack_require__.d(__webpack_exports__,"c",(function(){return editProjectCollaboratorAccess})),__webpack_require__.d(__webpack_exports__,"l",(function(){return hideProjectCollaboratorAccess})),__webpack_require__.d(__webpack_exports__,"t",(function(){return showSearchTips})),__webpack_require__.d(__webpack_exports__,"n",(function(){return hideSearchTips})),__webpack_require__.d(__webpack_exports__,"h",(function(){return hideDiagnostics}));var svue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_router_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_util_url__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1);const ACCESS_LEVELS={public:2,organization:1,private:0},layout=new svue__WEBPACK_IMPORTED_MODULE_0__.a({data:()=>({router:_router_router__WEBPACK_IMPORTED_MODULE_1__.e,sidebarExpanded:!1,loading:!0,error:!1,uploading:!1,selectedMap:{},metaOpen:null,documentInfoOpen:!1,projectEdit:null,projectOpen:!1,projectEmbed:!1,projectCollaboratorsOpen:!1,projectEditUser:null,searchTipsOpen:!1,diagnosticsOpen:!1,dataDocuments:[],dataOpen:!1,accessEditDocuments:[]}),watch:{"router.resolvedRoute"(){this.sidebarExpanded=!1}},computed:{selected:selectedMap=>Object.values(selectedMap),numSelected:selected=>selected.length,hasSelection:selected=>selected.length>0,selectionEditable:selected=>0==selected.filter(doc=>!doc.editAccess).length,accessOpen:accessEditDocuments=>accessEditDocuments.length>0,numAccessSelected:accessEditDocuments=>accessEditDocuments.length,defaultAccess(accessEditDocuments){let minAccess=null,minAccessRank=null;for(let i=0;i<accessEditDocuments.length;i++){const newAccess=accessEditDocuments[i].access,newRank=ACCESS_LEVELS[newAccess];(null==minAccessRank||newRank<minAccessRank)&&(minAccessRank=newRank,minAccess=newAccess)}return minAccess},sameAccess:sameProp=>sameProp("access"),samePublishAt:sameProp=>sameProp("publishAt"),sameProp:accessEditDocuments=>function(prop){let value=null;for(let i=0;i<accessEditDocuments.length;i++){const doc=accessEditDocuments[i];if(0==i)value=doc[prop];else if(doc[prop]!=value)return null}return value},projectCollaboratorAccessOpen:projectEditUser=>null!=projectEditUser,projectEmbedTitle(router){const route=router.resolvedRoute;return null==route||"project"!=route.name||null==route.props?null:route.props.title},projectEmbedSearchBar(router){const route=router.resolvedRoute;return null==route||("project"!=route.name||(null==route.props||Object(_util_url__WEBPACK_IMPORTED_MODULE_2__.e)(route.props.searchbar)))}}});function selectionProcessing(){return[someProcessing(...layout.selected),allProcessing(...layout.selected)]}function unselectDocument(document){delete layout.selectedMap[document.id],layout.selectedMap=layout.selectedMap}function hideDocumentInfo(){layout.documentInfoOpen=!1}function hideMeta(){layout.metaOpen=null}function canEdit(...documents){return 0==documents.filter(doc=>!doc.editAccess).length}function someProcessing(...documents){return documents.filter(doc=>doc.processing).length>0}function allProcessing(...documents){return 0==documents.filter(doc=>!doc.processing).length}function openAccess(documents){0!=documents.length&&canEdit(...documents)&&!someProcessing(...documents)&&(layout.accessEditDocuments=documents)}function hideAccess(){layout.accessEditDocuments=[]}function editData(documents){0!=documents.length&&canEdit(...documents)&&(layout.dataDocuments=documents,layout.dataOpen=!0)}function hideData(){layout.dataOpen=!1}function newProject(){layout.projectEdit=null,layout.projectOpen=!0}function embedProject(){hideProject(),layout.projectEmbed=!0}function hideProjectEmbed(){layout.projectEmbed=!1}function editProject(project){project.editAccess&&(layout.projectEdit=project,layout.projectOpen=!0)}function hideProject(){layout.projectOpen=!1}function showCollaborators(){layout.projectCollaboratorsOpen=!0,layout.projectOpen=!1}function hideCollaborators(){layout.projectCollaboratorsOpen=!1}function updateProjectEdit(){layout.projectEdit=layout.projectEdit}function editProjectCollaboratorAccess(collaborator){layout.projectEditUser=collaborator}function hideProjectCollaboratorAccess(){layout.projectEditUser=null}function showSearchTips(){layout.searchTipsOpen=!0}function hideSearchTips(){layout.searchTipsOpen=!1}function hideDiagnostics(){layout.diagnosticsOpen=!1}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return document_Document})),__webpack_require__.d(__webpack_exports__,"c",(function(){return docEquals})),__webpack_require__.d(__webpack_exports__,"b",(function(){return copyDoc})),__webpack_require__.d(__webpack_exports__,"d",(function(){return transformHighlights}));var svue=__webpack_require__(4),string=__webpack_require__(12),array=__webpack_require__(24);var structure_note=__webpack_require__(17),structure_section=__webpack_require__(57),fast_deep_equal=__webpack_require__(38),fast_deep_equal_default=__webpack_require__.n(fast_deep_equal),fast_copy=__webpack_require__(62),fast_copy_default=__webpack_require__.n(fast_copy);const PAGE_NO_RE=/^page_no_(\d+)$/;class document_Document extends svue.a{constructor(rawDocument,structure={}){super({data(){const data=null==structure.data?{}:structure.data();return data.doc=rawDocument,data.lastProgress=null,data.lastImagesProcessed=null,data.lastTextsProcessed=null,data.highlightStart="<em>",data.highlightEnd="</em>",data},computed:{...null==structure.computed?{}:structure.computed,id:doc=>doc.id,slug:doc=>doc.slug,slugId:(id,slug)=>[id,slug].join("-"),canonicalUrl:slugId=>"https://www.documentcloud.org/documents/"+slugId,pageHashUrl:()=>page=>"#document/p"+page,noteHashUrl:pageHashUrl=>note=>`${pageHashUrl(note.page+1)}/a${note.id}`,pageUrl:(canonicalUrl,pageHashUrl)=>page=>`${canonicalUrl}${pageHashUrl(page)}`,canonicalPageUrl:canonicalUrl=>page=>`${canonicalUrl}/pages/${page}`,relativeCanonicalUrl:slugId=>"/documents/"+slugId,relativePageUrl:(relativeCanonicalUrl,pageHashUrl)=>page=>`${relativeCanonicalUrl}${pageHashUrl(page)}`,noteUrl:pageUrl=>note=>`${pageUrl(note.page+1)}/a${note.id}`,fakeNoteUrl:canonicalUrl=>note=>`${canonicalUrl}/annotations/${note.id}`,canonicalNoteUrl:fakeNoteUrl=>fakeNoteUrl,title:doc=>doc.title,description:doc=>doc.description,source:doc=>doc.source,relatedArticleUrl:doc=>doc.related_article,publishedUrl:doc=>doc.published_url,pageCount:doc=>doc.page_count,publishAt:doc=>doc.publish_at,userName:doc=>doc.user.name,userId:doc=>doc.user.id,rawOrganization:doc=>doc.organization,orgId:rawOrganization=>rawOrganization.id,individualOrg:rawOrganization=>rawOrganization.individual,organizationName:rawOrganization=>rawOrganization.name,assetUrl:doc=>doc.asset_url,pdf:(assetUrl,id,slug)=>`${assetUrl}documents/${id}/${slug}.pdf`,thumbnail:(assetUrl,id,slug,updatedAtTimestamp)=>`${assetUrl}documents/${id}/pages/${slug}-p1-small.gif?ts=${updatedAtTimestamp}`,rawCreatedAt:doc=>doc.created_at,createdAt:rawCreatedAt=>new Date(Date.parse(rawCreatedAt)),rawUpdatedAt:doc=>doc.updated_at,updatedAtTimestamp:rawUpdatedAt=>Date.parse(rawUpdatedAt),updatedAt:updatedAtTimestamp=>new Date(updatedAtTimestamp),pageSpec:doc=>doc.page_spec,pageSizes:pageSpec=>null==pageSpec?null:function(pageSpec){if(0==pageSpec.trim().length)return[];const parts=pageSpec.split(";"),sizes=[];for(let i=0;i<parts.length;i++){const part=parts[i],[size,range]=part.split(":"),[width,height]=size.split("x").map(parseFloat),aspect=height/width,rangeParts=range.split(",");for(let j=0;j<rangeParts.length;j++){const rangePart=rangeParts[j];if(-1!=rangePart.indexOf("-")){const[start,end]=rangePart.split("-").map(x=>parseInt(x,10));for(let page=start;page<=end;page++)sizes[page]=aspect}else{sizes[parseInt(rangePart,10)]=aspect}}}return sizes}(pageSpec),access:doc=>doc.access,privateAccess:access=>"private"==access,publicAccess:access=>"public"==access,organizationAccess:access=>"organization"==access,editAccess:doc=>null!=doc.edit_access&&doc.edit_access,status:doc=>doc.status,success:status=>"success"==status,readable:status=>"readable"==status,pending:status=>"pending"==status,deleted:status=>"deleted"==status,error:status=>"error"==status,nofile:status=>"nofile"==status,processing:(pending,readable)=>pending||readable,viewable:(success,readable,editAccess)=>success||readable&&editAccess,nonPending:pending=>!pending,rawRemaining:doc=>doc.remaining,hasRemaining:rawRemaining=>null!=rawRemaining,imagesRemaining:(rawRemaining,hasRemaining)=>hasRemaining?rawRemaining.images:null,textsRemaining:(rawRemaining,hasRemaining)=>hasRemaining?rawRemaining.texts:null,imagesProcessed(pageCount,imagesRemaining){return null==imagesRemaining||(this.lastImagesProcessed=0==pageCount?0:pageCount-imagesRemaining),this.lastImagesProcessed},textsProcessed(pageCount,textsRemaining){return null==textsRemaining||(this.lastTextsProcessed=0==pageCount?0:pageCount-textsRemaining),this.lastTextsProcessed},imageProgress:(hasRemaining,imagesProcessed,pageCount)=>hasRemaining?0==pageCount?0:imagesProcessed/pageCount:null,textProgress:(hasRemaining,textsProcessed,pageCount)=>hasRemaining?0==pageCount?0:textsProcessed/pageCount:null,processingProgress:(hasRemaining,imageProgress,textProgress)=>hasRemaining?(imageProgress+textProgress)/2:null,realProgress(processingProgress){return null==processingProgress?this.lastProgress:(this.lastProgress=processingProgress,processingProgress)},projectIds:doc=>null==doc.projects?[]:doc.projects,notes:doc=>null==doc.notes?[]:doc.notes.map(note=>new structure_note.a(note)),sections:doc=>null==doc.sections?[]:doc.sections.map(section=>new structure_section.a(section)),rawData:doc=>doc.data,dataPoints(rawData){const results=[];for(const key in rawData)if(rawData.hasOwnProperty(key)){const values=Object(array.e)(rawData[key],x=>x);for(let i=0;i<values.length;i++)results.push({key:key,value:values[i]})}return results.sort((a,b)=>{const aKey="_tag"==a.key?a.value:a.key,bKey="_tag"==b.key?b.value:b.key,aValue=a.value,bValue=b.value,keyCompare=aKey.localeCompare(bKey);return 0!=keyCompare?keyCompare:aValue.localeCompare(bValue)}),results},rawHighlights:doc=>doc.highlights,highlights:(rawHighlights,highlightStart,highlightEnd)=>null==rawHighlights?null:transformHighlights(rawHighlights,highlightStart,highlightEnd),userOrgString:(individualOrg,userName,organizationName)=>null==userName?"":individualOrg||null==organizationName?userName:`${userName} (${organizationName})`,orgString:(individualOrg,userName,organizationName)=>individualOrg||null==organizationName?userName:organizationName,pageCountString:pageCount=>0==pageCount?"":Object(string.d)(pageCount,"page",!0),createdAtString:createdAt=>createdAt.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}),sourceString:source=>null==source||0==source.trim().length?"":"Source: "+source,summary:(pageCountString,sourceString,userOrgString,createdAtString)=>[pageCountString,sourceString,userOrgString,createdAtString].filter(x=>x.length>0).join(" - ")}})}}function docEquals(doc1,doc2){return fast_deep_equal_default()(doc1.doc,doc2.doc)}function copyDoc(doc){return new document_Document(fast_copy_default()(doc.doc))}function transformPassage(passage,highlightStart,highlightEnd){const chunks=[],advance=numChars=>{passage=passage.substr(numChars)},pushRaw=numChars=>{null==numChars&&(numChars=passage.length),0!=numChars&&(chunks.push({text:passage.substr(0,numChars),type:"normal"}),advance(numChars))};for(;passage.length>0;){let foundHighlight=!1,idxStart=passage.indexOf(highlightStart);if(-1!=idxStart){let idxEnd=passage.indexOf(highlightEnd,idxStart+highlightStart.length);-1!=idxEnd&&(pushRaw(idxStart),advance(highlightStart.length),0!=(numChars=idxEnd-idxStart-highlightStart.length)&&(chunks.push({text:passage.substr(0,numChars),type:"highlight"}),advance(numChars)),advance(highlightEnd.length),foundHighlight=!0)}if(!foundHighlight)break}var numChars;return pushRaw(),chunks}function transformHighlights(rawHighlights,highlightStart,highlightEnd,returnDict=!1){const highlights=returnDict?{}:[],pages=[];for(const pageKey in rawHighlights)if(rawHighlights.hasOwnProperty(pageKey)){const match=pageKey.match(PAGE_NO_RE);if(null==match)continue;const page=parseInt(match[1])-1,highlight={page:page,passages:[]},passages=rawHighlights[pageKey];for(let i=0;i<passages.length;i++){const passage=passages[i];highlight.passages.push(transformPassage(passage,highlightStart,highlightEnd))}returnDict?(null==highlights[page]&&pages.push({page:page,count:highlight.passages.length}),highlights[page]=highlight.passages):highlights.push(highlight)}return returnDict?(pages.sort((a,b)=>a.page-b.page),{highlights:highlights,pages:pages}):(highlights.sort((a,b)=>a.page-b.page),highlights)}},function(module,__webpack_exports__,__webpack_require__){"use strict";async function wrapLoadSeparate(loadWritable,errorStore,fn){loadWritable.set(!0);try{return await fn()}catch(e){console.error(e),errorStore.error=e}finally{loadWritable.set(!1)}}async function wrapSeparate(loadStore,errorStore,fn){null!=loadStore&&(loadStore.loading=!0);try{return await fn()}catch(e){console.error(e),errorStore.error=e}finally{null!=loadStore&&(loadStore.loading=!1)}}async function wrapLoad(store,fn){return await wrapSeparate(store,store,fn)}async function wrapMultipleSeparate(loadStore,errorStore,...fns){return await wrapSeparate(loadStore,errorStore,()=>Promise.all(fns.map(fn=>fn())))}__webpack_require__.d(__webpack_exports__,"b",(function(){return wrapLoadSeparate})),__webpack_require__.d(__webpack_exports__,"d",(function(){return wrapSeparate})),__webpack_require__.d(__webpack_exports__,"a",(function(){return wrapLoad})),__webpack_require__.d(__webpack_exports__,"c",(function(){return wrapMultipleSeparate}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"g",(function(){return newProject})),__webpack_require__.d(__webpack_exports__,"c",(function(){return deleteProject})),__webpack_require__.d(__webpack_exports__,"j",(function(){return updateProject})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addDocumentsToProject})),__webpack_require__.d(__webpack_exports__,"h",(function(){return removeDocumentsFromProject})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getProjects})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getProjectUsers})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getProjectDocuments})),__webpack_require__.d(__webpack_exports__,"b",(function(){return addUserToProject})),__webpack_require__.d(__webpack_exports__,"k",(function(){return updateUserAccess})),__webpack_require__.d(__webpack_exports__,"i",(function(){return removeUser}));var session=__webpack_require__(2),base=__webpack_require__(3),svue=__webpack_require__(4),array=__webpack_require__(24);class project_Project extends svue.a{constructor(rawProject,structure={}){super({data(){const data=null==structure.data?{}:structure.data();return data.project=rawProject,data.usersAndAccesses=[],data},computed:{...null==structure.computed?{}:structure.computed,id:project=>project.id,slug:project=>project.slug,slugId:(id,slug)=>[slug,id].join("-"),title:project=>project.title,description:project=>project.description,editAccess:project=>null!=project.edit_access&&project.edit_access,embedUrl:slugId=>`https://www.documentcloud.org/projects/${slugId}/`}})}addUser(user,access){this.usersAndAccesses=Object(array.e)([...this.usersAndAccesses,{user:user,access:access}],x=>x.user.id)}removeUser(user){this.usersAndAccesses=this.usersAndAccesses.filter(x=>x.user.id!=user.id)}changeAccess(user,access){this.usersAndAccesses=this.usersAndAccesses.map(x=>(x.user.id==user.id&&(x.access=access),x))}}var paginate=__webpack_require__(20),common=__webpack_require__(6),util_url=__webpack_require__(1),results=__webpack_require__(25),structure_document=__webpack_require__(9);async function newProject(title,description){const{data:data}=await session.b.post(Object(base.a)("projects/"),{title:title,description:description});return new project_Project(data)}async function deleteProject(projectId){await session.b.delete(Object(base.a)(`projects/${projectId}/`))}async function updateProject(projectId,title,description){const{data:data}=await session.b.patch(Object(base.a)(`projects/${projectId}/`),{title:title,description:description});return new project_Project(data)}async function addDocumentsToProject(projectId,docIds){await session.b.post(Object(base.a)(`projects/${projectId}/documents/`),docIds.map(id=>({document:id})))}async function removeDocumentsFromProject(projectId,docIds){await session.b.delete(Object(base.a)(`projects/${projectId}/documents/?document_id__in=${docIds.map(x=>""+x).join(",")}`))}async function getProjects(userId,expand=common.a){return(await Object(paginate.a)(Object(util_url.d)(Object(base.a)("projects/"),{user:userId,expand:expand}))).map(project=>new project_Project(project))}async function getProjectUsers(projectId,expand=common.a){return await Object(paginate.a)(Object(base.a)(Object(util_url.d)(`projects/${projectId}/users/`,{expand:expand})))}async function getProjectDocuments(projectId,page=0,extraParams={},ordering=common.b,expand=common.a+",document"){const params={...extraParams,ordering:ordering,expand:expand,page:page+1},url=Object(base.a)(Object(util_url.d)(`projects/${projectId}/documents/`,params)),{data:data}=await session.b.get(url);return data.results=data.results.map(document=>new structure_document.a(document.document)),new results.a(url,data)}async function addUserToProject(projectId,email,access,expand=common.a){const{data:user}=await session.b.post(Object(base.a)(`projects/${projectId}/users/`),{email:email,access:access}),{data:data}=await session.b.get(Object(base.a)(Object(util_url.d)(`projects/${projectId}/users/${user.user}/`,{expand:expand})));return data}async function updateUserAccess(projectId,userId,access){await session.b.patch(Object(base.a)(`projects/${projectId}/users/${userId}/`),{access:access})}async function removeUser(projectId,userId){await session.b.delete(Object(base.a)(`projects/${projectId}/users/${userId}/`))}},function(module,__webpack_exports__,__webpack_require__){"use strict";function handlePlural(value,str,allowZero=!1){return allowZero||0!=value?`${value} ${simplePlural(value,str)}`:""}function simplePlural(value,string){return string+(1!=value?"s":"")}function nameSingularNumberPlural(value,string){return`${1==value?"":value+" "}${simplePlural(value,string)}`}function formatBytes(bytes,decimals=0){if(0===bytes)return"0 Bytes";const dm=decimals<0?0:decimals,i=Math.floor(Math.log(bytes)/Math.log(1024));return parseFloat((bytes/Math.pow(1024,i)).toFixed(dm))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i]}function stripExtension(filename){const parts=filename.split(".");return parts.slice(0,parts.length-1).join(".")}function slugify(str,id=null,maxLength=25){const slug=str.substring(0,maxLength).toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");return null!=id?`${slug}-${id}`:slug}function extractSlugId(str){if(!/^[a-z0-9-]+$/.test(str))return null;const parts=str.split("-");return 0==parts.length?null:parts[parts.length-1]}function titlecase(str){return str.charAt(0).toUpperCase()+str.substr(1)}function allIndices(text,query){const results=[];let pos=0;for(;;){const idx=text.indexOf(query,pos);if(-1==idx)return results;results.push(idx),pos=idx+1}}function isNumber(s){return Number.isFinite(parseFloat(s))}function lpad(s,length,fill="0"){for(;s.length<length;)s=`${fill}${s}`;return s}__webpack_require__.d(__webpack_exports__,"d",(function(){return handlePlural})),__webpack_require__.d(__webpack_exports__,"h",(function(){return simplePlural})),__webpack_require__.d(__webpack_exports__,"g",(function(){return nameSingularNumberPlural})),__webpack_require__.d(__webpack_exports__,"c",(function(){return formatBytes})),__webpack_require__.d(__webpack_exports__,"j",(function(){return stripExtension})),__webpack_require__.d(__webpack_exports__,"i",(function(){return slugify})),__webpack_require__.d(__webpack_exports__,"b",(function(){return extractSlugId})),__webpack_require__.d(__webpack_exports__,"k",(function(){return titlecase})),__webpack_require__.d(__webpack_exports__,"a",(function(){return allIndices})),__webpack_require__.d(__webpack_exports__,"e",(function(){return isNumber})),__webpack_require__.d(__webpack_exports__,"f",(function(){return lpad}))},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(48),toString=Object.prototype.toString;function isArray(val){return"[object Array]"===toString.call(val)}function isUndefined(val){return void 0===val}function isObject(val){return null!==val&&"object"==typeof val}function isFunction(val){return"[object Function]"===toString.call(val)}function forEach(obj,fn){if(null!=obj)if("object"!=typeof obj&&(obj=[obj]),isArray(obj))for(var i=0,l=obj.length;i<l;i++)fn.call(null,obj[i],i,obj);else for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&fn.call(null,obj[key],key,obj)}module.exports={isArray:isArray,isArrayBuffer:function(val){return"[object ArrayBuffer]"===toString.call(val)},isBuffer:function(val){return null!==val&&!isUndefined(val)&&null!==val.constructor&&!isUndefined(val.constructor)&&"function"==typeof val.constructor.isBuffer&&val.constructor.isBuffer(val)},isFormData:function(val){return"undefined"!=typeof FormData&&val instanceof FormData},isArrayBufferView:function(val){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(val):val&&val.buffer&&val.buffer instanceof ArrayBuffer},isString:function(val){return"string"==typeof val},isNumber:function(val){return"number"==typeof val},isObject:isObject,isUndefined:isUndefined,isDate:function(val){return"[object Date]"===toString.call(val)},isFile:function(val){return"[object File]"===toString.call(val)},isBlob:function(val){return"[object Blob]"===toString.call(val)},isFunction:isFunction,isStream:function(val){return isObject(val)&&isFunction(val.pipe)},isURLSearchParams:function(val){return"undefined"!=typeof URLSearchParams&&val instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:forEach,merge:function merge(){var result={};function assignValue(val,key){"object"==typeof result[key]&&"object"==typeof val?result[key]=merge(result[key],val):result[key]=val}for(var i=0,l=arguments.length;i<l;i++)forEach(arguments[i],assignValue);return result},deepMerge:function deepMerge(){var result={};function assignValue(val,key){"object"==typeof result[key]&&"object"==typeof val?result[key]=deepMerge(result[key],val):result[key]="object"==typeof val?deepMerge({},val):val}for(var i=0,l=arguments.length;i<l;i++)forEach(arguments[i],assignValue);return result},extend:function(a,b,thisArg){return forEach(b,(function(val,key){a[key]=thisArg&&"function"==typeof val?bind(val,thisArg):val})),a},trim:function(str){return str.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var svelte_internal__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);class Empty extends svelte_internal__WEBPACK_IMPORTED_MODULE_0__.b{constructor(options){super(),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.G)(this,options,null,null,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.T,{})}}__webpack_exports__.default=Empty},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return lazyComponent})),__webpack_require__.d(__webpack_exports__,"c",(function(){return loadDefault})),__webpack_require__.d(__webpack_exports__,"d",(function(){return loadHome})),__webpack_require__.d(__webpack_exports__,"b",(function(){return loadApp})),__webpack_require__.d(__webpack_exports__,"i",(function(){return loadViewer})),__webpack_require__.d(__webpack_exports__,"f",(function(){return loadNote})),__webpack_require__.d(__webpack_exports__,"g",(function(){return loadPage})),__webpack_require__.d(__webpack_exports__,"h",(function(){return loadProject})),__webpack_require__.d(__webpack_exports__,"e",(function(){return loadLegacyRedirect}));const lazyComponent=new(__webpack_require__(4).a)({data:()=>({default:null,home:null,app:null,viewer:null,note:null,page:null,project:null,legacyRedirect:null})});function loadDefault(){null==lazyComponent.default&&Promise.resolve().then(__webpack_require__.bind(null,14)).then(module=>{lazyComponent.default=module.default})}function loadHome(){null==lazyComponent.home&&__webpack_require__.e(9).then(__webpack_require__.bind(null,104)).then(module=>{lazyComponent.home=module.default})}function loadApp(){null==lazyComponent.app&&Promise.all([__webpack_require__.e(0),__webpack_require__.e(1),__webpack_require__.e(2),__webpack_require__.e(4),__webpack_require__.e(15)]).then(__webpack_require__.bind(null,102)).then(module=>{lazyComponent.app=module.default})}function loadViewer(){null==lazyComponent.viewer&&Promise.all([__webpack_require__.e(16),__webpack_require__.e(0),__webpack_require__.e(6)]).then(__webpack_require__.bind(null,100)).then(module=>{lazyComponent.viewer=module.default})}function loadNote(){null==lazyComponent.note&&Promise.all([__webpack_require__.e(3),__webpack_require__.e(13)]).then(__webpack_require__.bind(null,97)).then(module=>{lazyComponent.note=module.default})}function loadPage(){null==lazyComponent.page&&Promise.all([__webpack_require__.e(3),__webpack_require__.e(11)]).then(__webpack_require__.bind(null,103)).then(module=>{lazyComponent.page=module.default})}function loadProject(){null==lazyComponent.project&&Promise.all([__webpack_require__.e(0),__webpack_require__.e(1),__webpack_require__.e(2),__webpack_require__.e(4),__webpack_require__.e(17)]).then(__webpack_require__.bind(null,98)).then(module=>{lazyComponent.project=module.default})}function loadLegacyRedirect(){null==lazyComponent.legacyRedirect&&__webpack_require__.e(18).then(__webpack_require__.bind(null,99)).then(module=>{lazyComponent.legacyRedirect=module.default})}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"h",(function(){return search})),__webpack_require__.d(__webpack_exports__,"i",(function(){return setDocuments})),__webpack_require__.d(__webpack_exports__,"d",(function(){return handleUpload})),__webpack_require__.d(__webpack_exports__,"a",(function(){return allDocumentsUrl})),__webpack_require__.d(__webpack_exports__,"g",(function(){return projectUrl})),__webpack_require__.d(__webpack_exports__,"f",(function(){return projectIdUrl})),__webpack_require__.d(__webpack_exports__,"j",(function(){return userUrl})),__webpack_require__.d(__webpack_exports__,"b",(function(){return dataUrl})),__webpack_require__.d(__webpack_exports__,"e",(function(){return orgUrl})),__webpack_require__.d(__webpack_exports__,"c",(function(){return handleSearch}));var svue=__webpack_require__(4),router=__webpack_require__(5),wrapLoad=__webpack_require__(10),layout=__webpack_require__(8),api_document=__webpack_require__(7),common=__webpack_require__(6),api_project=__webpack_require__(11),fast_deep_equal=__webpack_require__(38),fast_deep_equal_default=__webpack_require__.n(fast_deep_equal);function findFromCache(cache,args){for(let i=0;i<cache.length;i++){const cacheEntry=cache[i];if(fast_deep_equal_default()(cacheEntry[0],args))return[!0,cacheEntry[1]]}return[!1]}var parse=__webpack_require__(58);const searchDocumentsCached=function(fn,cacheSize=20){const cache=[];return async(...args)=>{const cacheResult=findFromCache(cache,args);if(cacheResult[0])return cacheResult[1];const result=await fn(...args);for(cache.push([args,result]);cache.length>cacheSize;)cache.shift();return result}}(api_document.m),PROJECT_EMBED_SORTS={title:"title",created_at:"created_at",source:"source",page_count:"page_count"},GET_DOCUMENT_FIELDS={"project:":{idType:!0},"projects:":{transform:"project",idType:!0},"user:":{idType:!0},"account:":{transform:"user",idType:!0},"organization:":{idType:!0},"group:":{transform:"organization",idType:!0},"document:":{idType:!0},"id:":{transform:"document",idType:!0},"access:":{accept:["public","organization","private"]},"status:":{accept:["success","readable","pending","error","nofile"]}};function extractId(slugId){const parts=slugId.split("-");if(0==parts.length)return null;const lastPart=parts[parts.length-1];return/^[0-9]+$/.test(lastPart)?parseInt(lastPart):null}class searchParams_SearchParams extends svue.a{constructor(rawParams,structure={}){super({data(){const data=null==structure.data?{}:structure.data();return data.params=rawParams,data},computed:{...null==structure.computed?{}:structure.computed,page:params=>(null==params.page?1:parseInt(params.page))-1,projectEmbedId(params){const projectEmbedId=params.projectEmbedId;return null==projectEmbedId||0==projectEmbedId.trim().length?null:extractId(projectEmbedId)},perPage:params=>params.perpage||12,projectEmbedOrder:params=>params.order,query(params,projectEmbedId){if(null!=projectEmbedId)return null;return null==params.q?null:params.q},parsedQuery:query=>null==query?null:Object(parse.a)(query),getDocumentParams(parsedQuery){const params={};if(null!=parsedQuery)for(let i=0;i<parsedQuery.length;i++){const highlight=parsedQuery[i];if("raw"==highlight.type&&0!=highlight.text.trim().length)return null;if("field"==highlight.type){const getDocumentField=GET_DOCUMENT_FIELDS[highlight.field];if(null==getDocumentField)return null;let normalizedValue=null;if(getDocumentField.idType)normalizedValue=extractId(highlight.value);else{if(!getDocumentField.accept.includes(highlight.value))return null;normalizedValue=highlight.value}const normalizedField=null!=getDocumentField.transform?getDocumentField.transform:highlight.field.substr(0,highlight.field.length-1);null==params[normalizedField]?params[normalizedField]=[normalizedValue]:params[normalizedField].push(normalizedValue)}}return params},oneUserSearch:getDocumentParams=>null==getDocumentParams||null!=getDocumentParams.project||null!=getDocumentParams.organization||null==getDocumentParams.user||1!=getDocumentParams.user.length?null:getDocumentParams.user[0],oneOrgSearch:getDocumentParams=>null==getDocumentParams||null!=getDocumentParams.project||null!=getDocumentParams.user||null==getDocumentParams.organization||1!=getDocumentParams.organization.length?null:getDocumentParams.organization[0],oneProjectSearch:getDocumentParams=>null==getDocumentParams||null!=getDocumentParams.user||null!=getDocumentParams.organization||null==getDocumentParams.project||1!=getDocumentParams.project.length?null:getDocumentParams.project[0],oneAccessSearch:getDocumentParams=>null==getDocumentParams||null==getDocumentParams.access||1!=getDocumentParams.access.length?null:getDocumentParams.access[0],noStatus:getDocumentParams=>null==getDocumentParams||null==getDocumentParams.status,noAccess:getDocumentParams=>null==getDocumentParams||null==getDocumentParams.access,oneOrZeroAccesses:getDocumentParams=>null==getDocumentParams||null==getDocumentParams.access||getDocumentParams.access.length<=1,isAllSearch:getDocumentParams=>null!=getDocumentParams&&(null==getDocumentParams.user&&null==getDocumentParams.organization&&null==getDocumentParams.project),getMethod(query,projectEmbedId,page,perPage,projectEmbedOrder,oneUserSearch,oneProjectSearch,oneAccessSearch,noStatus,oneOrZeroAccesses){if(null!=projectEmbedId){const extraProps={};let ordering=common.b;if(null!=perPage&&(extraProps.per_page=perPage),null!=projectEmbedOrder){const sort=PROJECT_EMBED_SORTS[projectEmbedOrder];null!=sort&&(ordering=sort)}return[()=>Object(api_project.d)(projectEmbedId,page,{per_page:perPage},ordering),null]}if(null==query)return null;if(0==page&&noStatus&&oneOrZeroAccesses){const cachedFn=()=>searchDocumentsCached(query,page),accessCondition=doc=>null==oneAccessSearch||doc.access==oneAccessSearch;if(null!=oneUserSearch)return[cachedFn,doc=>accessCondition(doc)&&doc.userId==oneUserSearch];if(null!=oneProjectSearch)return[cachedFn,doc=>accessCondition(doc)&&doc.projectIds.includes(oneProjectSearch)]}return[()=>Object(api_document.m)(query,page),null]}}})}}var url=__webpack_require__(1),string=__webpack_require__(12),modifications=__webpack_require__(33),structure_results=__webpack_require__(25);const search=new svue.a({data:()=>({router:router.e,params:null,results:null}),watch:{"router.resolvedRoute"(){const route=router.e.resolvedRoute;null==route||"app"!=route.name&&"project"!=route.name||1==router.e.backNav||async function(params){if(search.params=new searchParams_SearchParams(params),null!=search.params.getMethod){const results=await Object(wrapLoad.d)(layout.o,search,search.params.getMethod[0]);search.results=results;const filter=search.params.getMethod[1];null!=filter?(modifications.a.applyModifications(),function(filter){setDocuments(search.documents.filter(filter))}(filter)):search.results=search.results}}(route.props)}},computed:{documents:(hasResults,results)=>hasResults?results.results:[],hasResults:results=>null!=results&&null!=results.results}});function setDocuments(documents){const results=null==search.results?new structure_results.a("",{count:0,results:[]}):search.results;results.rawResults={...null==results.rawResults?{}:results.rawResults,results:documents},search.results=results}function handleUpload(newDocs){setDocuments([...newDocs,...search.documents])}function allDocumentsUrl(){return searchUrl("")}function projectUrl(project){return searchUrl(`project:${Object(string.i)(project.title,project.id)} `)}function projectIdUrl(projectId){return searchUrl(`project:${projectId} `)}function userOrgUrl(obj,key,publicAccessOnly=!1){const access=publicAccessOnly?"access:public ":"";return searchUrl(`${key}:${Object(string.i)(obj.name,obj.id)} ${access}`)}function userUrl(user,publicAccessOnly=!1){return userOrgUrl(user,"user",publicAccessOnly)}function dataUrl(key,value){return searchUrl(`${"_tag"==key?"tag":"data_"+key}:${function(value){return`"${value.replace('"','\\"')}"`}(value)}`)}function orgUrl(organization){return userOrgUrl(organization,"organization")}function searchUrl(query){return Object(url.d)(Object(router.a)("app"),{q:query,page:null})}function handleSearch(query){Object(router.d)(searchUrl(query))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Note}));var svue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_util_bounds__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(29);function getDefault(obj,defaultValue=""){return null==obj?defaultValue:obj}class Note extends svue__WEBPACK_IMPORTED_MODULE_0__.a{constructor(rawNote,structure={}){super({data(){const data=null==structure.data?{}:structure.data();return data.note=rawNote,data},computed:{...null==structure.computed?{}:structure.computed,id:note=>note.id,title:note=>getDefault(note.title),content:note=>getDefault(note.content),access:note=>getDefault(note.access,"private"),page:note=>note.page_number,isPageNote:note=>null==note.x1,x1:note=>Object(_util_bounds__WEBPACK_IMPORTED_MODULE_1__.a)(Math.min(note.x1,note.x2)),x2:note=>Object(_util_bounds__WEBPACK_IMPORTED_MODULE_1__.a)(Math.max(note.x1,note.x2)),y1:note=>Object(_util_bounds__WEBPACK_IMPORTED_MODULE_1__.a)(Math.min(note.y1,note.y2)),y2:note=>Object(_util_bounds__WEBPACK_IMPORTED_MODULE_1__.a)(Math.max(note.y2,note.y2)),width:(x1,x2)=>x2-x1,height:(y1,y2)=>y2-y1,username:note=>getDefault(note.user,{name:""}).name,organization(note){const org=getDefault(note.organization,{});return org.individual?null:org.name}}})}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return viewer})),__webpack_require__.d(__webpack_exports__,"c",(function(){return updateNote})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addNote})),__webpack_require__.d(__webpack_exports__,"b",(function(){return removeNote}));var svue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_api_document__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7),_api_orgAndUser__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(26),_router_router__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5),_api_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6),_util_iframe__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(30),_pages_viewer_viewerEditDialogs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(59);function collectNotes(orderedNotes,predicate){if(null==orderedNotes)return{};const index={};return orderedNotes.forEach(note=>{if(!predicate(note))return;const existing=index.hasOwnProperty(note.page)?index[note.page]:[];index[note.page]=[...existing,note]}),index}let viewerInitCache={};const viewer=new svue__WEBPACK_IMPORTED_MODULE_0__.a({data:()=>({router:_router_router__WEBPACK_IMPORTED_MODULE_3__.e,notes:null,sections:null,document:null,embed:Object(_util_iframe__WEBPACK_IMPORTED_MODULE_5__.a)(),id:null,me:null,loadedMe:!1,error:null,show404:!1,showPending:!1}),watch:{"router.resolvedRoute"(){const route=_router_router__WEBPACK_IMPORTED_MODULE_3__.e.resolvedRoute;if(null!=route&&"viewer"==route.name&&null!=route.props)return this.id=(idSlug=route.props.id,parseInt(idSlug.split("-")[0])),"1"==route.props.embed?this.embed=!0:this.embed=Object(_util_iframe__WEBPACK_IMPORTED_MODULE_5__.a)(),void(null==viewerInitCache[this.id]&&(id=this.id,Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.f)(id,[_api_common__WEBPACK_IMPORTED_MODULE_4__.a,"notes","sections","notes.organization","notes.user"].join(",")).then(doc=>{doc.viewable||(viewer.showPending=!0),viewer.document=doc,viewer.notes=doc.notes,viewer.sections=doc.sections}).catch(e=>{null!=e.status&&""+e.status=="404"?viewer.show404=!0:viewer.error=e}),viewer.embed?(viewer.me=null,viewer.loadedMe=!0):Object(_api_orgAndUser__WEBPACK_IMPORTED_MODULE_2__.d)().then(me=>{viewer.me=me,viewer.loadedMe=!0}).catch(()=>{viewer.me=null,viewer.loadedMe=!0}),viewerInitCache[this.id]=!0));var id,idSlug;null!=route&&"viewer"!=route.name&&(viewerInitCache={},this.document=null)},document(){null!=this.document&&this.document.editAccess&&Object(_pages_viewer_viewerEditDialogs__WEBPACK_IMPORTED_MODULE_6__.a)()}},computed:{orderedSections:sections=>null==sections?null:sections.sort((a,b)=>a.page-b.page),orderedSectionsAndNotes(orderedSections,orderedNotes){if(null==orderedSections||null==orderedNotes)return null;let sectionIdx=0,noteIdx=0;const results=[];for(;sectionIdx<orderedSections.length||noteIdx<orderedNotes.length;){const currentSection=orderedSections[sectionIdx],currentNote=orderedNotes[noteIdx];null!=currentSection&&(null==currentNote||currentSection.page<=currentNote.page)?(results.push({type:"section",value:currentSection}),sectionIdx++):(results.push({type:"note",value:currentNote}),noteIdx++)}return results},sectionsAndNotes(orderedSectionsAndNotes){if(null==orderedSectionsAndNotes)return null;let currentSection=null;const results=[];for(let i=0;i<orderedSectionsAndNotes.length;i++){const chunk=orderedSectionsAndNotes[i];"section"==chunk.type?(currentSection={type:"section",section:chunk.value,children:[]},results.push(currentSection)):null==currentSection?results.push({type:"note",note:chunk.value}):currentSection.children.push({type:"note",note:chunk.value})}return results},loaded:(document,pageAspects,notes,sections,loadedMe)=>null!=document&&null!=pageAspects&&null!=notes&&null!=sections&&loadedMe,orderedNotes:notes=>null==notes?null:(notes.sort((note1,note2)=>note1.page!=note2.page?note1.page-note2.page:note1.y1!=note2.y1?note1.y1-note2.y1:note1.x1!=note2.x1?note1.x1-note2.x1:0),notes),notesByPage:orderedNotes=>collectNotes(orderedNotes,note=>!note.isPageNote),pageNotesByPage:orderedNotes=>collectNotes(orderedNotes,note=>note.isPageNote),pageAspects:document=>null==document?null:document.pageSizes}});function updateNote(note){viewer.notes=viewer.notes.map(oldNote=>oldNote.id==note.id?note:oldNote)}function addNote(note){viewer.notes=[...viewer.notes,note]}function removeNote(note){viewer.notes=viewer.notes.filter(oldNote=>oldNote.id!=note.id)}},function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return derived})),__webpack_require__.d(__webpack_exports__,"c",(function(){return writable}));var _internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);__webpack_require__.d(__webpack_exports__,"b",(function(){return _internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.C}));const subscriber_queue=[];function writable(value,start=_internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.M){let stop;const subscribers=[];function set(new_value){if(Object(_internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.T)(value,new_value)&&(value=new_value,stop)){const run_queue=!subscriber_queue.length;for(let i=0;i<subscribers.length;i+=1){const s=subscribers[i];s[1](),subscriber_queue.push(s,value)}if(run_queue){for(let i=0;i<subscriber_queue.length;i+=2)subscriber_queue[i][0](subscriber_queue[i+1]);subscriber_queue.length=0}}}return{set:set,update:function(fn){set(fn(value))},subscribe:function(run,invalidate=_internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.M){const subscriber=[run,invalidate];return subscribers.push(subscriber),1===subscribers.length&&(stop=start(set)||_internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.M),run(value),()=>{const index=subscribers.indexOf(subscriber);-1!==index&&subscribers.splice(index,1),0===subscribers.length&&(stop(),stop=null)}}}}function derived(stores,fn,initial_value){const single=!Array.isArray(stores),stores_array=single?[stores]:stores,auto=fn.length<2;return{subscribe:writable(initial_value,set=>{let inited=!1;const values=[];let pending=0,cleanup=_internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.M;const sync=()=>{if(pending)return;cleanup();const result=fn(single?values[0]:values,set);auto?set(result):cleanup=Object(_internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.I)(result)?result:_internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.M},unsubscribers=stores_array.map((store,i)=>Object(_internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.cb)(store,value=>{values[i]=value,pending&=~(1<<i),inited&&sync()},()=>{pending|=1<<i}));return inited=!0,sync(),function(){Object(_internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.S)(unsubscribers),cleanup()}}).subscribe}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return grabAllPages}));var _api_session__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_url__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);const MAX_PER_PAGE=parseInt("100");async function grabAllPages(url,perPage=MAX_PER_PAGE){null!=perPage&&(url=Object(_url__WEBPACK_IMPORTED_MODULE_1__.d)(url,{per_page:perPage}));const{data:data}=await _api_session__WEBPACK_IMPORTED_MODULE_0__.b.get(url),results=data.results;if(null!=data.next){const next=await grabAllPages(data.next);return results.concat(next)}return results}},function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return cubicInOut})),__webpack_require__.d(__webpack_exports__,"b",(function(){return cubicOut}));var _internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);function cubicInOut(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function cubicOut(t){const f=t-1;return f*f*f+1}__webpack_require__.d(__webpack_exports__,"c",(function(){return _internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.F}))},function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";var _internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);__webpack_require__.d(__webpack_exports__,"a",(function(){return _internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.j})),__webpack_require__.d(__webpack_exports__,"b",(function(){return _internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.p})),__webpack_require__.d(__webpack_exports__,"c",(function(){return _internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.O})),__webpack_require__.d(__webpack_exports__,"d",(function(){return _internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.P})),__webpack_require__.d(__webpack_exports__,"e",(function(){return _internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.eb}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return documents})),__webpack_require__.d(__webpack_exports__,"q",(function(){return updateInCollection})),__webpack_require__.d(__webpack_exports__,"l",(function(){return removeDocuments})),__webpack_require__.d(__webpack_exports__,"h",(function(){return markAsDirty})),__webpack_require__.d(__webpack_exports__,"n",(function(){return reprocessDocuments})),__webpack_require__.d(__webpack_exports__,"c",(function(){return cancelProcessDocuments})),__webpack_require__.d(__webpack_exports__,"d",(function(){return changeAccessForDocuments})),__webpack_require__.d(__webpack_exports__,"j",(function(){return removeDocument})),__webpack_require__.d(__webpack_exports__,"f",(function(){return editSelectedDocumentInfo})),__webpack_require__.d(__webpack_exports__,"b",(function(){return addDocumentData})),__webpack_require__.d(__webpack_exports__,"m",(function(){return replaceDocumentData})),__webpack_require__.d(__webpack_exports__,"k",(function(){return removeDocumentData})),__webpack_require__.d(__webpack_exports__,"g",(function(){return handleNewDocuments})),__webpack_require__.d(__webpack_exports__,"o",(function(){return selectDocument})),__webpack_require__.d(__webpack_exports__,"p",(function(){return unselectAll})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addDocsToProject})),__webpack_require__.d(__webpack_exports__,"i",(function(){return removeDocsFromProject}));var svue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_api_document__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7),_api_project__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(11),_layout__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util_wrapLoad__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(10),_confirmDialog__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(28),_router_router__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5),_search_search__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(16),_toast__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(34),_util_string__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(12),_util_array__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(24),_modifications__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(33),_structure_document__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(9),_util_url__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(1);let lastSelected=null;function mapReduce(l,id,fn){const results={};for(let i=0;i<l.length;i++){const x=l[i];results[x[id]]=fn(x)}return results}const documents=new svue__WEBPACK_IMPORTED_MODULE_0__.a({data:()=>({router:_router_router__WEBPACK_IMPORTED_MODULE_6__.e,search:_search_search__WEBPACK_IMPORTED_MODULE_7__.h,hasInited:!1,processingChangeTimeout:null,doneProcessing:!0,pending:[]}),watch:{"router.resolvedRoute"(){const route=_router_router__WEBPACK_IMPORTED_MODULE_6__.e.resolvedRoute;unselectAll(),null==route||"app"!=route.name&&"project"!=route.name||this.hasInited||(!async function(){Object(_search_search__WEBPACK_IMPORTED_MODULE_7__.i)([..._search_search__WEBPACK_IMPORTED_MODULE_7__.h.documents]),updatePending()}(),this.hasInited=!0)},rawDoneProcessing(){null!=this.processingChangeTimeout&&(clearTimeout(this.processingChangeTimeout),this.processingChangeTimeout=null),this.processingChangeTimeout=setTimeout(()=>{this.doneProcessing=this.rawDoneProcessing,this.processingChangeTimeout=null},500)}},computed:{staticMode(router){const route=router.resolvedRoute;return null==route||("project"==route.name||!(null==route.props||!Object(_util_url__WEBPACK_IMPORTED_MODULE_13__.e)(route.props.embed)))},allDocuments:search=>search.documents.filter(doc=>!doc.deleted),error:search=>search.error,docsById(allDocuments){const results={};return allDocuments.forEach(doc=>results[doc.id]=doc),results},documents:allDocuments=>allDocuments,pendingExisting:(docsById,pending)=>pending.filter(x=>{const id=x.doc_id;return null!=docsById[id]}),pendingMap:pending=>mapReduce(pending,"doc_id",x=>x),imagesProcessedMap:pending=>mapReduce(pending,"doc_id",x=>null==x.images||null==x.pages?null:x.pages-x.images),textsProcessedMap:pending=>mapReduce(pending,"doc_id",x=>null==x.texts||null==x.pages?null:x.pages-x.texts),pageCountMap:pending=>mapReduce(pending,"doc_id",x=>null==x.pages?null:x.pages),realProgressMap:pending=>mapReduce(pending,"doc_id",x=>{if(null==x.images||null==x.texts||null==x.pages)return null;return(x.pages-x.images+(x.pages-x.texts))/2/x.pages}),processingDocuments:allDocuments=>getDocumentsByCondition(doc=>doc.pending,allDocuments),updatingDocuments:documents=>getDocumentsByCondition(doc=>doc.readable,documents),numProcessing:pending=>pending.length,rawDoneProcessing:numProcessing=>0==numProcessing,processingProgress(pending){if(0==pending.length)return 1;let totalPages=0,totalImagesProcessed=0,totalTextsProcessed=0;for(let i=0;i<pending.length;i++){const p=pending[i];null!=p.images&&null!=p.texts&&null!=p.pages&&(totalPages+=p.pages,totalImagesProcessed+=p.pages-p.images,totalTextsProcessed+=p.pages-p.texts)}if(0==totalPages)return 0;return(totalImagesProcessed+totalTextsProcessed)/2/totalPages},pollDocuments:(processingDocuments,updatingDocuments)=>[...processingDocuments,...updatingDocuments],pollEvents(pollDocuments,processingDocuments,numProcessing){const grabPending=processingDocuments.length>0||numProcessing>0?[async()=>{try{await updatePending()}catch(e){console.error("error fetching pending",e)}}]:[],pollEvent=pollDocuments.length>0?[async()=>{try{(await Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.g)(pollDocuments.map(doc=>doc.id))).forEach(doc=>replaceInCollection(doc))}catch(e){console.error("failed to get update info",docs)}}]:[];return grabPending.concat(pollEvent)}}});function getDocumentsByCondition(condition,documents){return documents.filter(condition)}const collectionModifiers={addToCollection:addToCollection,removeFromCollection:removeFromCollection,updateInCollection:updateInCollection};function removeFromCollection(docId,modify=!0){modify&&_modifications__WEBPACK_IMPORTED_MODULE_11__.a.remove(collectionModifiers,docId);const newDocuments=documents.allDocuments.filter(doc=>doc.id!=docId);Object(_search_search__WEBPACK_IMPORTED_MODULE_7__.i)(newDocuments),null!=documents.pendingMap[docId]&&(documents.pending=documents.pending.filter(x=>x.doc_id!=docId)),0==newDocuments.length&&window.location.reload()}function updateInCollection(document,docFn,modify=!0){let modified=!1,oldDoc=null,newDoc=null;const newDocuments=documents.allDocuments.map(doc=>(doc.id==document.id&&(oldDoc=Object(_structure_document__WEBPACK_IMPORTED_MODULE_12__.b)(doc),docFn(doc),modified=!0,newDoc=Object(_structure_document__WEBPACK_IMPORTED_MODULE_12__.b)(doc)),doc));return modify&&modified?Object(_structure_document__WEBPACK_IMPORTED_MODULE_12__.c)(oldDoc,newDoc)||_modifications__WEBPACK_IMPORTED_MODULE_11__.a.modify(collectionModifiers,oldDoc,docFn):(oldDoc=Object(_structure_document__WEBPACK_IMPORTED_MODULE_12__.b)(document),docFn(document),newDoc=Object(_structure_document__WEBPACK_IMPORTED_MODULE_12__.b)(document)),Object(_search_search__WEBPACK_IMPORTED_MODULE_7__.i)(newDocuments),[modified,newDoc]}function replaceInCollection(document){updateInCollection(document,doc=>{doc.doc=document.doc})}function addToCollection(newDocs,modify=!0){const docsToAdd=Math.max(50-documents.allDocuments.length,0);newDocs=newDocs.slice(0,docsToAdd),modify&&_modifications__WEBPACK_IMPORTED_MODULE_11__.a.add(collectionModifiers,newDocs.map(x=>Object(_structure_document__WEBPACK_IMPORTED_MODULE_12__.b)(x)));const remainingDocs=[];newDocs.forEach(newDoc=>{!function(documents,id){for(let i=0;i<documents.length;i++)if(documents[i].id==id)return!0;return!1}(documents.allDocuments,newDoc.id)?remainingDocs.push(newDoc):replaceInCollection(newDoc)}),Object(_search_search__WEBPACK_IMPORTED_MODULE_7__.d)(remainingDocs)}function getIndex(document){for(let i=0;i<documents.documents.length;i++)if(documents.documents[i]==document)return i;return null}function removeDocuments(documents){0!=documents.length&&Object(_confirmDialog__WEBPACK_IMPORTED_MODULE_5__.d)("Confirm delete",`Proceeding will permanently delete the ${1==documents.length?"selected document":documents.length+" selected documents"}. Do you wish to continue?`,"Delete",async()=>{await Object(_util_wrapLoad__WEBPACK_IMPORTED_MODULE_4__.a)(_layout__WEBPACK_IMPORTED_MODULE_3__.o,async()=>{await Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.d)(documents.map(doc=>doc.id)),documents.map(doc=>removeFromCollection(doc.id))}),unselectAll()})}async function markAsDirty(docIds){try{(await Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.g)(docIds)).map(doc=>replaceInCollection(doc))}catch(e){console.error("unexpected error marking docs dirty",docIds)}}function reprocessDocuments(documents){0!=documents.length&&Object(_confirmDialog__WEBPACK_IMPORTED_MODULE_5__.d)("Confirm reprocess",`Proceeding will force the ${1==documents.length?"selected document":documents.length+" selected documents"} to reprocess page and image text. Do you wish to continue?`,"Reprocess",async()=>{await Object(_util_wrapLoad__WEBPACK_IMPORTED_MODULE_4__.a)(_layout__WEBPACK_IMPORTED_MODULE_3__.o,async()=>{const ids=documents.map(doc=>doc.id);await Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.k)(ids),await markAsDirty(ids)}),unselectAll()})}function cancelProcessDocuments(documents){0!=documents.length&&Object(_confirmDialog__WEBPACK_IMPORTED_MODULE_5__.d)("Cancel processing",`Proceeding will force the ${1==documents.length?"selected document":documents.length+" selected documents"} to stop processing. After processing has been stopped, an error will show after which you can Force Reprocess or delete the ${1==documents.length?"document":"documents"} using the Edit menu. Do you wish to continue?`,"Continue",async()=>{await Object(_util_wrapLoad__WEBPACK_IMPORTED_MODULE_4__.a)(_layout__WEBPACK_IMPORTED_MODULE_3__.o,async()=>{for(let i=0;i<documents.length;i++){const id=documents[i].id;await Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.b)(id)}}),await markAsDirty(documents.map(doc=>doc.id)),unselectAll()})}async function changeAccessForDocuments(documents,access,publishAt,layout){await Object(_util_wrapLoad__WEBPACK_IMPORTED_MODULE_4__.a)(layout,async()=>{await Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.e)(documents.map(doc=>doc.id),{access:access,publish_at:publishAt}),documents.forEach(doc=>updateInCollection(doc,d=>d.doc={...d.doc,status:"readable",publish_at:publishAt}))}),Object(_layout__WEBPACK_IMPORTED_MODULE_3__.e)()}function removeDocument(document){return removeDocuments([document])}async function editSelectedDocumentInfo(info,layout,selected,viewerUpdate=(()=>{})){await Object(_util_wrapLoad__WEBPACK_IMPORTED_MODULE_4__.a)(layout,async()=>{await Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.e)(selected.map(doc=>doc.id),info),selected.forEach(doc=>updateInCollection(doc,d=>d.doc={...d.doc,...info})),viewerUpdate()}),unselectAll()}async function addDocumentData(documents,key,value){for(let i=0;i<documents.length;i++){const document=documents[i];await Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.a)(document.id,key,value),null==document.doc.data[key]?document.doc.data[key]=[value]:document.doc.data[key].push(value),document.doc=document.doc,replaceInCollection(document)}}async function replaceDocumentData(documents,originalKey,originalValue,newKey,newValue){await removeDocumentData(documents,originalKey,originalValue),await addDocumentData(documents,newKey,newValue)}async function removeDocumentData(documents,key,value){for(let i=0;i<documents.length;i++){const document=documents[i];await Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.j)(document.id,key,value),null!=document.doc.data[key]&&(document.doc.data[key]=document.doc.data[key].filter(x=>x!=value),document.doc=document.doc,replaceInCollection(document))}}async function handleNewDocuments(newDocs){addToCollection(newDocs=newDocs.map(d=>(d.doc={...d.doc,status:"pending"},d)))}function selectDocument(document,shiftKey=!0){if(_layout__WEBPACK_IMPORTED_MODULE_3__.o.selectedMap={..._layout__WEBPACK_IMPORTED_MODULE_3__.o.selectedMap,[document.id]:document},shiftKey&&null!=lastSelected){const lastSelectedIndex=getIndex(lastSelected);if(null!=lastSelectedIndex){const toIndex=getIndex(document);if(null!=toIndex)for(let i=Math.min(lastSelectedIndex,toIndex)+1;i<Math.max(lastSelectedIndex,toIndex);i++)selectDocument(documents.documents[i],!1)}}lastSelected=document}function unselectAll(){_layout__WEBPACK_IMPORTED_MODULE_3__.o.selectedMap={},lastSelected=null}async function updatePending(){if(documents.staticMode)return;const pending=await Object(_util_wrapLoad__WEBPACK_IMPORTED_MODULE_4__.d)(null,_layout__WEBPACK_IMPORTED_MODULE_3__.o,()=>Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.h)());for(let i=0;i<pending.length;i++){const pendingDoc=pending[i],existingDoc=documents.pendingMap[pendingDoc.doc_id];null!=existingDoc&&(pendingDoc.images=null==pendingDoc.images?existingDoc.images:pendingDoc.images,pendingDoc.texts=null==pendingDoc.texts?existingDoc.texts:pendingDoc.texts,pendingDoc.pages=null==pendingDoc.pages?existingDoc.pages:pendingDoc.pages)}documents.pending=pending}async function addDocsToProject(project,documents,showToast=!0){0!=(documents=documents.filter(doc=>!doc.projectIds.includes(project.id))).length&&(await Object(_util_wrapLoad__WEBPACK_IMPORTED_MODULE_4__.a)(_layout__WEBPACK_IMPORTED_MODULE_3__.o,async()=>{await Object(_api_project__WEBPACK_IMPORTED_MODULE_2__.a)(project.id,documents.map(doc=>doc.id)),documents.forEach(doc=>updateInCollection(doc,d=>d.doc={...d.doc,projects:Object(_util_array__WEBPACK_IMPORTED_MODULE_10__.a)(d.projectIds,project.id)}))}),!_layout__WEBPACK_IMPORTED_MODULE_3__.o.error&&showToast&&Object(_toast__WEBPACK_IMPORTED_MODULE_8__.b)(`Successfully added ${Object(_util_string__WEBPACK_IMPORTED_MODULE_9__.d)(documents.length,"document",!0)} to ${project.title}.`))}async function removeDocsFromProject(project,documents,showToast=!0){0!=(documents=documents.filter(doc=>doc.projectIds.includes(project.id))).length&&(await Object(_util_wrapLoad__WEBPACK_IMPORTED_MODULE_4__.a)(_layout__WEBPACK_IMPORTED_MODULE_3__.o,async()=>{await Object(_api_project__WEBPACK_IMPORTED_MODULE_2__.h)(project.id,documents.map(doc=>doc.id)),documents.forEach(doc=>updateInCollection(doc,d=>d.doc={...d.doc,projects:Object(_util_array__WEBPACK_IMPORTED_MODULE_10__.d)(d.projectIds,project.id)}))}),!_layout__WEBPACK_IMPORTED_MODULE_3__.o.error&&showToast&&Object(_toast__WEBPACK_IMPORTED_MODULE_8__.b)(`Successfully removed ${Object(_util_string__WEBPACK_IMPORTED_MODULE_9__.d)(documents.length,"document",!0)} from project (${project.title}).`))}},function(module,__webpack_exports__,__webpack_require__){"use strict";function removeFromArray(array,elem){const idx=array.indexOf(elem);return-1!=idx&&array.splice(idx,1),array}function uniquify(array,fieldAccess=(x=>x.id)){let unique={};const results=[];for(let i=array.length-1;i>=0;i--){const obj=array[i],field=fieldAccess(obj);null==unique[field]&&(results.push(obj),unique[field]=!0)}return results}function includes(array,elem,eq=((a,b)=>a==b)){for(let i=0;i<array.length;i++)if(eq(array[i],elem))return!0;return!1}function intersection(arrays,eq=((a,b)=>a==b)){return 0==arrays.length?[]:arrays.reduce((a,b)=>a.filter(elem=>includes(b,elem,eq)))}function addToArrayIfUnique(array,newElem,eq=((a,b)=>a==b)){for(let i=0;i<array.length;i++)if(eq(array[i],newElem))return array;return[...array,newElem]}__webpack_require__.d(__webpack_exports__,"d",(function(){return removeFromArray})),__webpack_require__.d(__webpack_exports__,"e",(function(){return uniquify})),__webpack_require__.d(__webpack_exports__,"b",(function(){return includes})),__webpack_require__.d(__webpack_exports__,"c",(function(){return intersection})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addToArrayIfUnique}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Results}));var svue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_util_url__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);const pageRe=/([&\?]page=)([0-9]+)/;class Results extends svue__WEBPACK_IMPORTED_MODULE_0__.a{constructor(url,rawResults,structure={}){super({data(){const data=null==structure.data?{}:structure.data();return data.rawResults=rawResults,data.url=url,data},computed:{...null==structure.computed?{}:structure.computed,count:rawResults=>rawResults.count,results:rawResults=>rawResults.results,length:results=>results.length,page(hasNext,hasPrev,nextUrl,prevUrl){if(!hasNext&&!hasPrev)return 0;if(hasNext){const match=nextUrl.match(pageRe);if(null==match)throw new Error("This should not happen");return parseInt(match[2])-1-1}if(hasPrev){const match=prevUrl.match(pageRe);if(null==match)return 1;return parseInt(match[2])-1+1}},numPages:(count,length,page,hasNext)=>hasNext?Math.ceil(count/length):page+1,perPage:(count,length,page,numPages)=>1==numPages?count:page<numPages-1?length:(count-length)/(numPages-1),nextUrl:rawResults=>rawResults.next,prevUrl:rawResults=>rawResults.previous,hasNext:nextUrl=>null!=nextUrl,hasPrev:prevUrl=>null!=prevUrl,nextPage:(hasNext,page)=>hasNext?page+1:null,prevPage:(hasPrev,page)=>hasPrev?page-1:null,onlyPage:(hasPrev,hasNext)=>!hasPrev&&!hasNext,start:(page,perPage)=>page*perPage,end:(page,perPage,length)=>page*perPage+length}})}getUrl(page){return null==this.url.match(pageRe)?Object(_util_url__WEBPACK_IMPORTED_MODULE_1__.d)(this.url,{page:page+1}):this.url.replace(pageRe,"$1"+(page+1))}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return getMe})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getUser})),__webpack_require__.d(__webpack_exports__,"c",(function(){return changeActiveOrg})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getOrganization})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getOrganizationsByIds})),__webpack_require__.d(__webpack_exports__,"a",(function(){return autocompleteOrganizations})),__webpack_require__.d(__webpack_exports__,"b",(function(){return autocompleteUsers}));var _session__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6),_util_url__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_util_paginate__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(20),_base__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3);const hasCsrfToken=/(^|;\s*)csrftoken=[a-zA-Z0-9]+/;async function getMe(expand=_common__WEBPACK_IMPORTED_MODULE_1__.a){if(_session__WEBPACK_IMPORTED_MODULE_0__.a&&!hasCsrfToken.test(document.cookie))return null;try{const{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.b.get(Object(_util_url__WEBPACK_IMPORTED_MODULE_2__.d)(Object(_base__WEBPACK_IMPORTED_MODULE_4__.a)("users/me/"),{expand:expand}));return data}catch(e){return null}}async function getUser(id,expand=_common__WEBPACK_IMPORTED_MODULE_1__.a){const{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.b.get(Object(_util_url__WEBPACK_IMPORTED_MODULE_2__.d)(Object(_base__WEBPACK_IMPORTED_MODULE_4__.a)(`users/${id}/`),{expand:expand}));return data}async function changeActiveOrg(orgId){await _session__WEBPACK_IMPORTED_MODULE_0__.b.patch(Object(_base__WEBPACK_IMPORTED_MODULE_4__.a)("users/me/"),{organization:orgId})}async function getOrganization(id,expand=_common__WEBPACK_IMPORTED_MODULE_1__.c){const{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.b.get(Object(_util_url__WEBPACK_IMPORTED_MODULE_2__.d)(Object(_base__WEBPACK_IMPORTED_MODULE_4__.a)(`organizations/${id}/`),{expand:expand}));return data}async function getOrganizationsByIds(ids,expand=_common__WEBPACK_IMPORTED_MODULE_1__.c){return await Object(_util_paginate__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_util_url__WEBPACK_IMPORTED_MODULE_2__.d)(Object(_base__WEBPACK_IMPORTED_MODULE_4__.a)("organizations/"),{id__in:ids,expand:expand}))}async function autocompleteOrganizations(prefix="",individual=!1){const{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.b.get(Object(_util_url__WEBPACK_IMPORTED_MODULE_2__.d)(Object(_base__WEBPACK_IMPORTED_MODULE_4__.a)("organizations/"),{name__istartswith:prefix,individual:individual}));return data.results}async function autocompleteUsers(prefix=""){const{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.b.get(Object(_util_url__WEBPACK_IMPORTED_MODULE_2__.d)(Object(_base__WEBPACK_IMPORTED_MODULE_4__.a)("users/"),{name__istartswith:prefix}));return data.results}},function(module,__webpack_exports__,__webpack_require__){"use strict";var svelte_internal__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_router_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_util_url__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),svue__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4);__webpack_require__(65);function create_else_block_1(ctx){let span,span_href_value,current,mounted,dispose;const default_slot_template=ctx[12].default,default_slot=Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.s)(default_slot_template,ctx,ctx[11],null);return{c(){span=Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.w)("span"),default_slot&&default_slot.c(),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.i)(span,"href",span_href_value=ctx[4].toPath),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.i)(span,"class","svelte-166z6y0"),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)(span,"color",ctx[3]),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)(span,"ib",ctx[2]),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)(span,"active",ctx[4].active)},m(target,anchor){Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.H)(target,span,anchor),default_slot&&default_slot.m(span,null),current=!0,mounted||(dispose=Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.J)(span,"click",ctx[6]),mounted=!0)},p(ctx,dirty){default_slot&&default_slot.p&&2048&dirty&&Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.kb)(default_slot,default_slot_template,ctx,ctx[11],dirty,null,null),(!current||16&dirty&&span_href_value!==(span_href_value=ctx[4].toPath))&&Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.i)(span,"href",span_href_value),8&dirty&&Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)(span,"color",ctx[3]),4&dirty&&Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)(span,"ib",ctx[2]),16&dirty&&Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)(span,"active",ctx[4].active)},i(local){current||(Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.hb)(default_slot,local),current=!0)},o(local){Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ib)(default_slot,local),current=!1},d(detaching){detaching&&Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.v)(span),default_slot&&default_slot.d(detaching),mounted=!1,dispose()}}}function create_if_block(ctx){let current_block_type_index,if_block,if_block_anchor,current;const if_block_creators=[create_if_block_1,create_else_block],if_blocks=[];function select_block_type_1(ctx,dirty){return ctx[1]?0:1}return current_block_type_index=select_block_type_1(ctx),if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),{c(){if_block.c(),if_block_anchor=Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.x)()},m(target,anchor){if_blocks[current_block_type_index].m(target,anchor),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.H)(target,if_block_anchor,anchor),current=!0},p(ctx,dirty){let previous_block_index=current_block_type_index;current_block_type_index=select_block_type_1(ctx),current_block_type_index===previous_block_index?if_blocks[current_block_type_index].p(ctx,dirty):(Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.E)(),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ib)(if_blocks[previous_block_index],1,1,()=>{if_blocks[previous_block_index]=null}),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.n)(),if_block=if_blocks[current_block_type_index],if_block?if_block.p(ctx,dirty):(if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),if_block.c()),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.hb)(if_block,1),if_block.m(if_block_anchor.parentNode,if_block_anchor))},i(local){current||(Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.hb)(if_block),current=!0)},o(local){Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ib)(if_block),current=!1},d(detaching){if_blocks[current_block_type_index].d(detaching),detaching&&Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.v)(if_block_anchor)}}}function create_else_block(ctx){let a,a_href_value,current,mounted,dispose;const default_slot_template=ctx[12].default,default_slot=Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.s)(default_slot_template,ctx,ctx[11],null);return{c(){a=Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.w)("a"),default_slot&&default_slot.c(),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.i)(a,"href",a_href_value=ctx[4].toPath),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.i)(a,"class","svelte-166z6y0"),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)(a,"color",ctx[3]),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)(a,"ib",ctx[2]),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)(a,"active",ctx[4].active)},m(target,anchor){Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.H)(target,a,anchor),default_slot&&default_slot.m(a,null),current=!0,mounted||(dispose=Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.J)(a,"click",ctx[6]),mounted=!0)},p(ctx,dirty){default_slot&&default_slot.p&&2048&dirty&&Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.kb)(default_slot,default_slot_template,ctx,ctx[11],dirty,null,null),(!current||16&dirty&&a_href_value!==(a_href_value=ctx[4].toPath))&&Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.i)(a,"href",a_href_value),8&dirty&&Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)(a,"color",ctx[3]),4&dirty&&Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)(a,"ib",ctx[2]),16&dirty&&Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)(a,"active",ctx[4].active)},i(local){current||(Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.hb)(default_slot,local),current=!0)},o(local){Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ib)(default_slot,local),current=!1},d(detaching){detaching&&Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.v)(a),default_slot&&default_slot.d(detaching),mounted=!1,dispose()}}}function create_if_block_1(ctx){let a,a_href_value,current;const default_slot_template=ctx[12].default,default_slot=Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.s)(default_slot_template,ctx,ctx[11],null);return{c(){a=Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.w)("a"),default_slot&&default_slot.c(),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.i)(a,"href",a_href_value=ctx[4].toPath),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.i)(a,"target","_blank"),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.i)(a,"class","svelte-166z6y0"),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)(a,"color",ctx[3]),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)(a,"ib",ctx[2]),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)(a,"active",ctx[4].active)},m(target,anchor){Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.H)(target,a,anchor),default_slot&&default_slot.m(a,null),current=!0},p(ctx,dirty){default_slot&&default_slot.p&&2048&dirty&&Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.kb)(default_slot,default_slot_template,ctx,ctx[11],dirty,null,null),(!current||16&dirty&&a_href_value!==(a_href_value=ctx[4].toPath))&&Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.i)(a,"href",a_href_value),8&dirty&&Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)(a,"color",ctx[3]),4&dirty&&Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)(a,"ib",ctx[2]),16&dirty&&Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)(a,"active",ctx[4].active)},i(local){current||(Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.hb)(default_slot,local),current=!0)},o(local){Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ib)(default_slot,local),current=!1},d(detaching){detaching&&Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.v)(a),default_slot&&default_slot.d(detaching)}}}function create_fragment(ctx){let current_block_type_index,if_block,if_block_anchor,current;const if_block_creators=[create_if_block,create_else_block_1],if_blocks=[];function select_block_type(ctx,dirty){return ctx[0]?1:0}return current_block_type_index=select_block_type(ctx),if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),{c(){if_block.c(),if_block_anchor=Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.x)()},m(target,anchor){if_blocks[current_block_type_index].m(target,anchor),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.H)(target,if_block_anchor,anchor),current=!0},p(ctx,[dirty]){let previous_block_index=current_block_type_index;current_block_type_index=select_block_type(ctx),current_block_type_index===previous_block_index?if_blocks[current_block_type_index].p(ctx,dirty):(Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.E)(),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ib)(if_blocks[previous_block_index],1,1,()=>{if_blocks[previous_block_index]=null}),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.n)(),if_block=if_blocks[current_block_type_index],if_block?if_block.p(ctx,dirty):(if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),if_block.c()),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.hb)(if_block,1),if_block.m(if_block_anchor.parentNode,if_block_anchor))},i(local){current||(Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.hb)(if_block),current=!0)},o(local){Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ib)(if_block),current=!1},d(detaching){if_blocks[current_block_type_index].d(detaching),detaching&&Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.v)(if_block_anchor)}}}function instance($$self,$$props,$$invalidate){let $link,{$$slots:slots={},$$scope:$$scope}=$$props,{to:to=null}=$$props,{toUrl:toUrl=null}=$$props,{back:back=!1}=$$props,{params:params=null}=$$props,{newPage:newPage=!1}=$$props,{forceClick:forceClick=!1}=$$props,{inlineBlock:inlineBlock=!1}=$$props,{color:color=!1}=$$props;const link=new svue__WEBPACK_IMPORTED_MODULE_3__.a({data:()=>({router:_router_router__WEBPACK_IMPORTED_MODULE_1__.e}),computed:{toPath:router=>null!=toUrl?toUrl:null==router.routes||back?null:Object(_router_router__WEBPACK_IMPORTED_MODULE_1__.a)(to,params),active:router=>null!=router.routes&&(null!=toUrl?Object(_util_url__WEBPACK_IMPORTED_MODULE_2__.g)(router.currentUrl,toUrl):router.resolvedRoute.name==to)}});return Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.o)($$self,link,value=>$$invalidate(4,$link=value)),$$self.$$set=$$props=>{"to"in $$props&&$$invalidate(7,to=$$props.to),"toUrl"in $$props&&$$invalidate(8,toUrl=$$props.toUrl),"back"in $$props&&$$invalidate(0,back=$$props.back),"params"in $$props&&$$invalidate(9,params=$$props.params),"newPage"in $$props&&$$invalidate(1,newPage=$$props.newPage),"forceClick"in $$props&&$$invalidate(10,forceClick=$$props.forceClick),"inlineBlock"in $$props&&$$invalidate(2,inlineBlock=$$props.inlineBlock),"color"in $$props&&$$invalidate(3,color=$$props.color),"$$scope"in $$props&&$$invalidate(11,$$scope=$$props.$$scope)},[back,newPage,inlineBlock,color,$link,link,function(e){back&&Object(_router_router__WEBPACK_IMPORTED_MODULE_1__.b)(),null==link.toPath||forceClick||e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||(e.preventDefault(),Object(_router_router__WEBPACK_IMPORTED_MODULE_1__.d)(link.toPath))},to,toUrl,params,forceClick,$$scope,slots]}class Link extends svelte_internal__WEBPACK_IMPORTED_MODULE_0__.b{constructor(options){super(),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.G)(this,options,instance,create_fragment,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.T,{to:7,toUrl:8,back:0,params:9,newPage:1,forceClick:10,inlineBlock:2,color:3})}}__webpack_exports__.a=Link},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return confirmDialog})),__webpack_require__.d(__webpack_exports__,"d",(function(){return showConfirm})),__webpack_require__.d(__webpack_exports__,"c",(function(){return runConfirm})),__webpack_require__.d(__webpack_exports__,"b",(function(){return hideConfirm}));const confirmDialog=new(__webpack_require__(4).a)({data:()=>({open:!1,title:"",body:"",buttonText:"",confirmFn:null})});function showConfirm(title,body,buttonText,confirmFn){confirmDialog.title=title,confirmDialog.body=body,confirmDialog.buttonText=buttonText,confirmDialog.confirmFn=confirmFn,confirmDialog.open=!0}function runConfirm(){null!=confirmDialog.confirmFn&&confirmDialog.confirmFn(),hideConfirm()}function hideConfirm(){confirmDialog.confirmFn=null,confirmDialog.open=!1}},function(module,__webpack_exports__,__webpack_require__){"use strict";function ensureBounds(x,min=0,max=1){return Math.max(Math.min(x,max),min)}__webpack_require__.d(__webpack_exports__,"a",(function(){return ensureBounds}))},function(module,__webpack_exports__,__webpack_require__){"use strict";function inIframe(){try{return window.self!==window.top}catch(e){return!0}}__webpack_require__.d(__webpack_exports__,"a",(function(){return inIframe}))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(67)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return batchDelay}));var _util_timeout__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(35);async function batchDelay(collection,batchSize,delay,fn,errorFn=(e=>console.error("unexpected error",e))){const results={},promises=[];for(let i=0;i<collection.length;i+=batchSize){const subCollection=collection.slice(i,i+batchSize);promises.push(new Promise(async resolve=>{try{results[i]=await fn(subCollection)}catch(e){errorFn(e)}resolve()})),await Object(_util_timeout__WEBPACK_IMPORTED_MODULE_0__.a)(delay)}await Promise.all(promises);const orderedResults=[];for(const key in results)results.hasOwnProperty(key)&&orderedResults.push([key,results[key]]);orderedResults.sort((a,b)=>a[0]-b[0]);const allResults=[];for(let i=0;i<orderedResults.length;i++){const subResult=orderedResults[i][1];if(null!=subResult)for(let j=0;j<subResult.length;j++)allResults.push(orderedResults[i][1][j])}return allResults}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return modifications}));let modifications=new class{constructor(){this.clearModifications()}clearModifications(){this.adds=[],this.modifies=[],this.removes=[]}add(modifiers,documents){this.adds.push([modifiers,documents])}modify(modifiers,document,fn){this.modifies.push([modifiers,document,fn])}remove(modifiers,docId){this.removes.push([modifiers,docId])}applyModifications(){this.adds.forEach(([modifiers,adds])=>{const unmodified=adds.filter(doc=>0==this.modifies.filter(modifier=>modifier[1].id==doc.id).length);modifiers.addToCollection(unmodified,!1)}),this.modifies.forEach(([modifiers,document,fn])=>{const[modified,newDoc]=modifiers.updateInCollection(document,fn,!1);modified||modifiers.addToCollection([newDoc],!1)}),this.removes.forEach(([modifiers,docId])=>{modifiers.removeFromCollection(docId,!1)})}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return toasts})),__webpack_require__.d(__webpack_exports__,"b",(function(){return pushToast})),__webpack_require__.d(__webpack_exports__,"a",(function(){return dismiss}));var svue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);let globalToastIdx=0;const toasts=new svue__WEBPACK_IMPORTED_MODULE_0__.a({data:()=>({toasts:[]})});function pushToast(content){toasts.toasts=[...toasts.toasts,{idx:globalToastIdx++,content:content}]}function dismiss(toastIdx){toasts.toasts.splice(toastIdx,1),toasts.toasts=toasts.toasts}},function(module,__webpack_exports__,__webpack_require__){"use strict";function timeout(ms){return new Promise(resolve=>setTimeout(resolve,ms))}__webpack_require__.d(__webpack_exports__,"a",(function(){return timeout}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"h",(function(){return projects})),__webpack_require__.d(__webpack_exports__,"g",(function(){return initProjects})),__webpack_require__.d(__webpack_exports__,"d",(function(){return createNewProject})),__webpack_require__.d(__webpack_exports__,"e",(function(){return editProject})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addSelectedDocsToProject})),__webpack_require__.d(__webpack_exports__,"j",(function(){return removeSelectedDocsFromProject})),__webpack_require__.d(__webpack_exports__,"l",(function(){return selectedDocsInProject})),__webpack_require__.d(__webpack_exports__,"i",(function(){return removeProject})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getProjUsers})),__webpack_require__.d(__webpack_exports__,"b",(function(){return addUser})),__webpack_require__.d(__webpack_exports__,"c",(function(){return changeUserAccess})),__webpack_require__.d(__webpack_exports__,"k",(function(){return removeUserFromProject}));var svue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_api_project__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(11),_layout__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(26),__webpack_require__(8)),_manager_documents__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(23),_util_array__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(24);const projects=new svue__WEBPACK_IMPORTED_MODULE_0__.a({data:()=>({projects:[],projectUsers:[]}),computed:{projectsById(projects){const results={};for(let i=0;i<projects.length;i++){const project=projects[i];results[project.id]=project}return results},editableProjects:projects=>projects.filter(project=>project.editAccess)}});function addUsers(...users){const allUsers=projects.projectUsers.concat(users);projects.projectUsers=Object(_util_array__WEBPACK_IMPORTED_MODULE_5__.e)(allUsers)}async function initProjects(me){const newProjects=await Object(_api_project__WEBPACK_IMPORTED_MODULE_1__.f)(me.id);projects.projects=newProjects}async function createNewProject(title,description){const project=await Object(_api_project__WEBPACK_IMPORTED_MODULE_1__.g)(title,description);projects.projects=[...projects.projects,project]}async function editProject(project,title,description){const updatedProject=await Object(_api_project__WEBPACK_IMPORTED_MODULE_1__.j)(project.id,title,description);projects.projects=projects.projects.map(oldProject=>project.id==oldProject.id?updatedProject:oldProject)}async function addSelectedDocsToProject(project){await Object(_manager_documents__WEBPACK_IMPORTED_MODULE_4__.a)(project,_layout__WEBPACK_IMPORTED_MODULE_3__.o.selected)}async function removeSelectedDocsFromProject(project){await Object(_manager_documents__WEBPACK_IMPORTED_MODULE_4__.i)(project,_layout__WEBPACK_IMPORTED_MODULE_3__.o.selected)}function selectedDocsInProject(project){if(null==project)return"none";const docs=_layout__WEBPACK_IMPORTED_MODULE_3__.o.selected;if(0==docs.length)return"none";let atLeastOneDocInProject=!1,atLeastOneDocOutsideProject=!1;for(let i=0;i<docs.length;i++){if(docs[i].projectIds.includes(project.id)){if(atLeastOneDocInProject=!0,atLeastOneDocOutsideProject)return"partially"}else if(atLeastOneDocOutsideProject=!0,atLeastOneDocInProject)return"partially"}return atLeastOneDocOutsideProject?atLeastOneDocInProject?"partially":"none":"fully"}async function removeProject(project){await Object(_api_project__WEBPACK_IMPORTED_MODULE_1__.c)(project.id),projects.projects=projects.projects.filter(oldProject=>oldProject.id!=project.id)}async function getProjUsers(project){const userAccesses=await Object(_api_project__WEBPACK_IMPORTED_MODULE_1__.e)(project.id);return userAccesses.forEach(userAccess=>project.addUser(userAccess.user,userAccess.access)),addUsers(...userAccesses.map(userAccess=>userAccess.user)),userAccesses}async function addUser(project,email,access){const userAccess=await Object(_api_project__WEBPACK_IMPORTED_MODULE_1__.b)(project.id,email,access);return project.addUser(userAccess.user,userAccess.access),addUsers(userAccess.user),userAccess}async function changeUserAccess(project,user,access){await Object(_api_project__WEBPACK_IMPORTED_MODULE_1__.k)(project.id,user.id,access),project.changeAccess(user,access)}async function removeUserFromProject(project,user){await Object(_api_project__WEBPACK_IMPORTED_MODULE_1__.i)(project.id,user.id),project.removeUser(user)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createAnnotation})),__webpack_require__.d(__webpack_exports__,"e",(function(){return updateAnnotation})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getAnnotations})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getAnnotation})),__webpack_require__.d(__webpack_exports__,"b",(function(){return deleteAnnotation}));var session=__webpack_require__(2),note=__webpack_require__(17),base=__webpack_require__(3);function injectMe(data,me){return data.user=me,data.organization=me.organization,data}var url=__webpack_require__(1),paginate=__webpack_require__(20),common=__webpack_require__(6);async function createAnnotation(id,page_number,title,content,access,x1,x2,y1,y2,me){const{data:data}=await session.b.post(Object(base.a)(`documents/${id}/notes/`),{page_number:page_number,title:title,content:content,x1:x1,x2:x2,y1:y1,y2:y2,access:access});return new note.a(injectMe(data,me))}async function updateAnnotation(noteId,docId,page_number,title,content,access,x1,x2,y1,y2,me){const{data:data}=await session.b.put(Object(base.a)(`documents/${docId}/notes/${noteId}/`),{page_number:page_number,title:title,content:content,x1:x1,x2:x2,y1:y1,y2:y2,access:access});return new note.a(injectMe(data,me))}async function getAnnotations(id,expand=common.a){return(await Object(paginate.a)(Object(base.a)(Object(url.d)(`documents/${id}/notes/`,{expand:expand})))).map(result=>new note.a(result))}async function getAnnotation(docId,noteId){const{data:data}=await session.b.get(Object(base.a)(`documents/${docId}/notes/${noteId}/`));return new note.a(data)}async function deleteAnnotation(docId,noteId){await session.b.delete(Object(base.a)(`documents/${docId}/notes/${noteId}/`))}},function(module,exports,__webpack_require__){"use strict";module.exports=function equal(a,b){if(a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==typeof b){if(a.constructor!==b.constructor)return!1;var length,i,keys;if(Array.isArray(a)){if((length=a.length)!=b.length)return!1;for(i=length;0!=i--;)if(!equal(a[i],b[i]))return!1;return!0}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();if((length=(keys=Object.keys(a)).length)!==Object.keys(b).length)return!1;for(i=length;0!=i--;)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return!1;for(i=length;0!=i--;){var key=keys[i];if(!equal(a[key],b[key]))return!1}return!0}return a!=a&&b!=b}},function(module,exports){module.exports='<svg class="mastlogo" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 330 99" width="330" height="99"><path d="M9.5 35.8H4.7v16.6h4.8c5.2 0 8.5-3.4 8.5-8.2a8 8 0 00-8.5-8.4zm0 20.6h-9V31.9h9c7.7 0 13 5.3 13 12.2 0 7-5.3 12.3-13 12.3zM36 41.2c-3.4 0-5.5 2.7-5.5 6 0 3.2 2.3 5.9 5.6 5.9 3.4 0 5.6-2.6 5.6-5.9 0-3.3-2.4-6-5.7-6zm0 15.6a9.6 9.6 0 110-19.2c5.7 0 9.9 4.2 9.9 9.5s-4.2 9.7-9.9 9.7m22.7 0a9.4 9.4 0 01-9.5-9.6c0-5.3 4-9.7 9.5-9.7 3.5 0 5.7 1.3 7.4 3.2l-2.6 2.8c-1.3-1.3-2.7-2.3-4.8-2.3-3 0-5.3 2.7-5.3 6s2.3 5.9 5.5 5.9c2 0 3.5-1 4.8-2.3l2.5 2.5c-1.8 2-4 3.5-7.5 3.5M82.2 38h4.2v18.4h-4.2v-3a6.6 6.6 0 01-5.7 3.3c-4.2 0-6.6-2.8-6.6-7V37.8H74v10.5c0 2.9 1.4 4.5 4 4.5 2.4 0 4.1-1.7 4.1-4.6V38m31.2-.5c4 0 6.5 2.6 6.5 7v11.9h-4.3V45.9c0-3-1.3-4.5-3.7-4.5-2.3 0-4 1.6-4 4.5v10.5h-4.2V45.8c0-2.8-1.4-4.4-3.7-4.4-2.3 0-4 1.7-4 4.6v10.4h-4.2V37.9H96v2.8c1.2-1.6 2.8-3.2 5.6-3.2 2.6 0 4.5 1.3 5.5 3.3 1.5-2 3.4-3.3 6.2-3.3zm24.2 8.3c-.2-2.7-1.9-4.8-4.6-4.8-2.6 0-4.4 2-4.8 4.8h9.4zm-4 7.5c2 0 3.4-.8 5-2.2l2.4 2.2a9.3 9.3 0 01-7.6 3.5 9.2 9.2 0 01-9.4-9.6c0-5.3 3.7-9.7 9-9.7 5.9 0 8.8 4.6 8.8 10v1.1H128c.5 3 2.6 4.7 5.3 4.7m16.9 3.1H146V37.9h4.2v2.9a6.6 6.6 0 015.8-3.3c4.1 0 6.5 2.8 6.5 7.1v11.8h-4.2V45.9c0-2.9-1.4-4.5-4-4.5-2.4 0-4.1 1.7-4.1 4.5v10.5m22.5-5.8c0 1.6.9 2.3 2.3 2.3 1 0 1.8-.2 2.6-.6v3.4c-1 .6-2.2 1-3.8 1-3.1 0-5.3-1.4-5.3-5.4v-9.7h-2.3v-3.7h2.3v-5h4.2v5h5v3.7h-5v9m21.1 6.2c-7.2 0-12.5-5.6-12.5-12.6s5.2-12.7 12.6-12.7c4.5 0 7.3 1.6 9.6 3.8l-2.8 3.2c-2-1.8-4-3-6.8-3-4.7 0-8 3.8-8 8.6s3.3 8.7 8 8.7c3 0 5-1.2 7-3.2l2.8 2.8a12.6 12.6 0 01-10 4.4m14.3-.4V30.9h4.2v25.5h-4.3zm18.4-15.2c-3.4 0-5.5 2.7-5.5 6 0 3.2 2.3 5.9 5.6 5.9 3.4 0 5.6-2.6 5.6-5.9 0-3.3-2.4-6-5.7-6zm0 15.6a9.5 9.5 0 01-9.7-9.6c0-5.3 4.1-9.7 9.8-9.7 5.7 0 9.8 4.3 9.8 9.6s-4.2 9.7-9.9 9.7M252.7 38h4.2v18.4h-4.2v-3a6.6 6.6 0 01-5.7 3.3c-4.2 0-6.6-2.8-6.6-7V37.8h4.2v10.5c0 2.9 1.4 4.5 4 4.5 2.4 0 4.1-1.7 4.1-4.6V38m18.2 3.2c-3 0-5.3 2.2-5.3 6 0 3.6 2.4 5.9 5.3 5.9 2.8 0 5.3-2.4 5.3-6s-2.5-5.9-5.3-5.9zm5.2 15.2v-3.1a7.4 7.4 0 01-6.2 3.4c-4.4 0-8.6-3.4-8.6-9.6 0-6.1 4.2-9.6 8.6-9.6 3 0 5 1.6 6.2 3.3v-10h4.3v25.6H276" fill="#222222"></path><path d="M287.6 6.7a36.2 36.2 0 00-9.7-1.2 23 23 0 00-15.7 5.2 16 16 0 00-4.2 5.4l-1.5 3.8-2.7-3v-.1l-.3-.3a31 31 0 00-4.7-4 28.7 28.7 0 00-16-5.8c-8.6 0-13.1 5-13.5 5.4l-1.7 2-2-1.8-.2-.2a21.3 21.3 0 00-4.4-3A25.5 25.5 0 00198 6c-2.7 0-4.8.6-6.4 1.3l-2-4.6a21.8 21.8 0 019.3-1.8c8.7 0 15.2 4 18.3 6.2a24 24 0 0115.6-5.4c1.4 0 2.8 0 4.3.3a36 36 0 0118 9 23 23 0 013.5-3.8A28 28 0 01277.9.5a41.8 41.8 0 0111 1.3c.2 0 12.4 3 19.5 13a25.8 25.8 0 014.4 20.2c3.5 1.7 10.4 6 14.3 14.4 1.3 3 2 5.8 2 8.3l-5 .2c0-1.8-.5-3.9-1.6-6.4a26.7 26.7 0 00-13.7-12.8l-2.5-.9 1-2.5h.1l.1-.3.3-1c.3-1 .5-2.4.5-4.2 0-3.2-.8-7.4-4-12a33.7 33.7 0 00-16.7-11.1z" fill="#4294F0"></path><path d="M4.7 91h1.7V79.2h3.9V78H.8v1.3h4V91zm6.7-3.6c0 2.5.9 3.8 3 3.8 1.2 0 2.2-.7 3-1.8h.1l.2 1.5H19v-9.6h-1.6v6.8c-1 1.2-1.6 1.7-2.6 1.7-1.3 0-1.8-.8-1.8-2.6v-5.9h-1.6v6.1zM22.3 91h1.6v-6.1c.6-1.7 1.6-2.3 2.4-2.3l1 .2.3-1.4c-.4-.2-.7-.2-1-.2-1.2 0-2.1.8-2.8 2l-.2-1.8h-1.3V91zm6.8 0h1.6v-7c1-.9 1.7-1.4 2.7-1.4 1.2 0 1.8.8 1.8 2.6V91h1.6v-6c0-2.5-.9-3.8-3-3.8-1.2 0-2.2.7-3.1 1.6h-.1l-.1-1.4H29V91zm14.1-4.8c0 3.2 1.6 5 4 5 1.1 0 2.2-.6 3-1.3l.1 1.1h1.3V77H50v5.2c-.8-.7-1.5-1.1-2.6-1.1-2.2 0-4.2 2-4.2 5zm1.7 0c0-2.2 1.2-3.6 2.8-3.6a3 3 0 012.3 1v5c-.8.9-1.6 1.3-2.4 1.3-1.7 0-2.7-1.4-2.7-3.7zm9.3 0c0 3.2 2 5 4.4 5 2.4 0 4.5-1.8 4.5-5s-2.1-5-4.5-5c-2.3 0-4.4 1.8-4.4 5zm1.7 0c0-2.2 1-3.7 2.7-3.7 1.7 0 2.8 1.5 2.8 3.7s-1.1 3.7-2.8 3.7c-1.6 0-2.7-1.5-2.7-3.7zm9 0c0 3.2 2 5 4.5 5 1.1 0 2.2-.4 3.1-1.2l-.7-1c-.6.5-1.4 1-2.3 1-1.7 0-3-1.6-3-3.8 0-2.2 1.3-3.7 3-3.7.8 0 1.4.4 2 .9l.8-1a4 4 0 00-2.8-1.2C67 81 65 82.9 65 86zm9.6 1.3c0 2.5.9 3.8 3 3.8 1.2 0 2.2-.7 3-1.8h.1l.2 1.5H82v-9.6h-1.6v6.8c-1 1.2-1.6 1.7-2.6 1.7-1.3 0-1.8-.8-1.8-2.6v-5.9h-1.6v6.1zM85.4 91H87v-7c.9-1 1.7-1.4 2.4-1.4 1.2 0 1.8.8 1.8 2.6V91h1.6v-7c.9-1 1.7-1.4 2.4-1.4 1.2 0 1.8.8 1.8 2.6V91h1.6v-6c0-2.5-1-3.8-2.9-3.8-1.2 0-2.2.7-3.2 1.8-.4-1.1-1.1-1.8-2.6-1.8-1.2 0-2.2.7-3 1.6l-.2-1.4h-1.3V91zm15.6-4.8c0 3.2 2 5 4.6 5 1.3 0 2.4-.4 3.2-1l-.6-1a4 4 0 01-2.4.8c-1.8 0-3-1.3-3.2-3.4h6.5v-1c0-2.7-1.3-4.4-3.8-4.4-2.1 0-4.3 1.9-4.3 5zm1.6-.7c.2-2 1.4-3 2.8-3 1.5 0 2.4 1 2.4 3h-5.2zm9 5.5h1.6v-7c1-.9 1.6-1.4 2.6-1.4 1.3 0 1.8.8 1.8 2.6V91h1.6v-6c0-2.5-.9-3.8-2.9-3.8-1.3 0-2.3.7-3.2 1.6l-.2-1.4h-1.3V91zm11-3c0 2 .7 3.3 2.8 3.3a6 6 0 001.8-.4l-.4-1.2-1 .2c-1.1 0-1.5-.6-1.5-1.8v-5.4h2.6v-1.3h-2.6v-2.7h-1.4l-.2 2.7-1.5.1v1.2h1.4V88zm5.4 2a6 6 0 003.6 1.3c2.2 0 3.5-1.3 3.5-2.9 0-1.8-1.6-2.4-3-2.9-1-.4-2-.8-2-1.7 0-.7.5-1.3 1.7-1.3.8 0 1.5.3 2.2.8l.7-1a4.5 4.5 0 00-3-1.1c-2 0-3.3 1.2-3.3 2.7 0 1.6 1.5 2.3 3 2.8 1 .4 2.1.8 2.1 1.8 0 .8-.6 1.5-1.9 1.5-1.1 0-2-.5-2.8-1.1l-.8 1zm14-10.8c.7 0 1.2-.4 1.2-1s-.5-1-1.2-1c-.6 0-1 .4-1 1s.4 1 1 1zm-.8 11.6h1.6v-9.6h-1.6V91zm4.9 0h1.6v-7c1-.9 1.6-1.4 2.6-1.4 1.3 0 1.8.8 1.8 2.6v5.8h1.7v-6c0-2.5-1-3.8-3-3.8-1.3 0-2.3.7-3.2 1.6l-.2-1.4h-1.3V91zm11-3c0 2 .8 3.3 2.8 3.3a6 6 0 001.8-.4l-.3-1.2-1.1.2c-1.1 0-1.5-.6-1.5-1.8v-5.4h2.6v-1.3h-2.6v-2.7h-1.4l-.2 2.7-1.5.1v1.2h1.5V88zm5.6-1.8c0 3.2 2 5 4.4 5 2.4 0 4.5-1.8 4.5-5s-2.1-5-4.5-5c-2.3 0-4.4 1.8-4.4 5zm1.6 0c0-2.2 1.2-3.7 2.8-3.7 1.7 0 2.8 1.5 2.8 3.7s-1.1 3.7-2.8 3.7c-1.6 0-2.8-1.5-2.8-3.7zm13 0c0 3.2 1.7 5 4 5 1.2 0 2.2-.6 3-1.3l.2 1.1h1.3V77h-1.6v5.2c-.8-.7-1.5-1.1-2.6-1.1-2.2 0-4.2 2-4.2 5zm1.8 0c0-2.2 1.2-3.6 2.7-3.6.8 0 1.6.2 2.4 1v5c-.8.9-1.6 1.3-2.5 1.3-1.7 0-2.6-1.4-2.6-3.7zm9.5 2.3c0 1.8 1.2 2.8 2.8 2.8 1.2 0 2.3-.7 3.2-1.4l.2 1.1h1.3V85c0-2.4-1-4-3.3-4-1.6 0-3 .8-3.8 1.3l.6 1.2a5 5 0 013-1c1.5 0 1.9 1.1 1.9 2.3-4.1.5-6 1.5-6 3.6zm1.6 0c0-1.3 1-2 4.3-2.5v2.7c-1 .8-1.7 1.3-2.6 1.3-1 0-1.7-.5-1.7-1.6zm9.2-.4c0 1.9.7 3.2 2.8 3.2a6 6 0 001.8-.4l-.4-1.2-1 .2c-1.1 0-1.5-.6-1.5-1.8v-5.4h2.6v-1.3h-2.6v-2.7h-1.4l-.2 2.7-1.5.1v1.2h1.4V88zm5.6.4c0 1.8 1.2 2.8 2.8 2.8 1.2 0 2.3-.7 3.2-1.4l.2 1.1h1.3V85c0-2.4-1-4-3.3-4-1.5 0-2.9.8-3.8 1.3l.7 1.2c.7-.6 1.7-1 2.9-1 1.5 0 2 1.1 2 2.3-4.2.5-6 1.5-6 3.6zm1.6 0c0-1.3 1.1-2 4.3-2.5v2.7c-.9.8-1.7 1.3-2.6 1.3-1 0-1.7-.5-1.7-1.6z" fill="#222222"></path></svg>'},function(module,exports,__webpack_require__){module.exports=__webpack_require__(83).default},function(module,exports,__webpack_require__){"use strict";var queryParser=__webpack_require__(87),escaping=__webpack_require__(88);exports.parse=queryParser.parse.bind(queryParser),exports.toString=__webpack_require__(89),exports.term={escape:escaping.escape,unescape:escaping.unescape},exports.phrase={escape:escaping.escapePhrase,unescape:escaping.unescapePhrase}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return MOBILE_BREAKPOINT})),__webpack_require__.d(__webpack_exports__,"n",(function(){return layout})),__webpack_require__.d(__webpack_exports__,"m",(function(){return initializeViewer})),__webpack_require__.d(__webpack_exports__,"t",(function(){return setViewerInitializeAction})),__webpack_require__.d(__webpack_exports__,"b",(function(){return annotationValid})),__webpack_require__.d(__webpack_exports__,"r",(function(){return pageDragStart})),__webpack_require__.d(__webpack_exports__,"q",(function(){return pageDragMove})),__webpack_require__.d(__webpack_exports__,"p",(function(){return pageDragEnd})),__webpack_require__.d(__webpack_exports__,"v",(function(){return startPageNote})),__webpack_require__.d(__webpack_exports__,"s",(function(){return redact})),__webpack_require__.d(__webpack_exports__,"x",(function(){return undoRedaction})),__webpack_require__.d(__webpack_exports__,"c",(function(){return cancelActions})),__webpack_require__.d(__webpack_exports__,"d",(function(){return cancelAnnotation})),__webpack_require__.d(__webpack_exports__,"k",(function(){return hideEditSections})),__webpack_require__.d(__webpack_exports__,"y",(function(){return updatePageAnnotation})),__webpack_require__.d(__webpack_exports__,"f",(function(){return createPageAnnotation})),__webpack_require__.d(__webpack_exports__,"g",(function(){return deletePageAnnotation})),__webpack_require__.d(__webpack_exports__,"w",(function(){return startSearch})),__webpack_require__.d(__webpack_exports__,"e",(function(){return clearSearch})),__webpack_require__.d(__webpack_exports__,"u",(function(){return showEmbedFlow})),__webpack_require__.d(__webpack_exports__,"l",(function(){return hideEmbedFlow})),__webpack_require__.d(__webpack_exports__,"j",(function(){return hideDocumentInfo})),__webpack_require__.d(__webpack_exports__,"i",(function(){return hideDocumentData})),__webpack_require__.d(__webpack_exports__,"h",(function(){return hideAccess})),__webpack_require__.d(__webpack_exports__,"o",(function(){return openAccess}));var svue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_viewer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(18),_util_url__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_util_wrapLoad__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10),_api_document__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7),_manager_confirmDialog__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(28),_manager_documents__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(23),_router_router__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(5),_api_annotation__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(37),_structure_note__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(17),_api_common__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(6),_util_iframe__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(30);const MOBILE_BREAKPOINT=800,layout=new svue__WEBPACK_IMPORTED_MODULE_0__.a({data:()=>({router:_router_router__WEBPACK_IMPORTED_MODULE_7__.e,viewer:_viewer__WEBPACK_IMPORTED_MODULE_1__.d,headerHeight:36,baseSidebarWidth:350,footerHeight:36,title:!0,embed:!1,showSidebar:document.body.offsetWidth>=MOBILE_BREAKPOINT,hideTextOption:!1,hidePdfLink:!1,showOrg:!1,showFullscreen:!0,loading:!1,error:null,viewerInitialized:!1,viewerInitializeAction:null,action:null,displayedAnnotation:null,displayedAnnotationElemRaw:null,annotateMode:"view",rawRedaction:null,rawPendingRedactions:[],rawAnnotation:null,annotationPending:!1,defaultAnnotationAccess:"private",hoveredNote:null,showInfo:!1,showData:!1,showAccess:!1,showEditSections:!1,search:null,searchExpanded:!1,searchPending:!1,searchHighlights:null,searchPages:null,embedDocument:null,embedNote:null,embedContext:"viewer"}),watch:{"router.resolvedRoute"(){const route=_router_router__WEBPACK_IMPORTED_MODULE_7__.e.resolvedRoute;if(null!=route&&"viewer"!=route.name)clearSearch(),cancelActions();else if(null!=route&&"viewer"==route.name){this.embed=Object(_util_iframe__WEBPACK_IMPORTED_MODULE_11__.a)()||Object(_util_url__WEBPACK_IMPORTED_MODULE_2__.e)(route.props.embed),this.title=!this.embed||Object(_util_url__WEBPACK_IMPORTED_MODULE_2__.e)(route.props.title),this.hideTextOption=Object(_util_url__WEBPACK_IMPORTED_MODULE_2__.b)(route.props.text),this.hidePdfLink=Object(_util_url__WEBPACK_IMPORTED_MODULE_2__.b)(route.props.pdf),this.showOrg=Object(_util_url__WEBPACK_IMPORTED_MODULE_2__.e)(route.props.onlyshoworg),this.showFullscreen=!Object(_util_url__WEBPACK_IMPORTED_MODULE_2__.b)(route.props.fullscreen);const sidebarValue=route.props.sidebar;null!=sidebarValue?this.showSidebar=Object(_util_url__WEBPACK_IMPORTED_MODULE_2__.e)(sidebarValue):this.embed&&(this.showSidebar=!1)}}},computed:{pollEvents(viewer){return null!=viewer.document&&viewer.document.readable?[async()=>{const doc=await Object(_api_document__WEBPACK_IMPORTED_MODULE_4__.f)(viewer.document.id,[_api_common__WEBPACK_IMPORTED_MODULE_10__.a,"notes","sections","notes.organization","notes.user"].join(","));viewer.document=doc,null!=this.embedDocument&&this.embedDocument.id==viewer.id&&(this.embedDocument=doc)}]:[]},sidebarWidth:(baseSidebarWidth,showSidebar)=>showSidebar?baseSidebarWidth:0,displayAnnotate:displayedAnnotation=>null!=displayedAnnotation,displayedAnnotationElem:(displayedAnnotation,displayedAnnotationElemRaw)=>null==displayedAnnotation?null:displayedAnnotationElemRaw,redacting:action=>"redact"==action,annotating:action=>"annotate"==action,searching:action=>"search"==action,selectNoteEmbed:action=>"selectnote"==action,pageCrosshair:(redacting,annotating)=>redacting||annotating,disableControls:(action,displayAnnotate)=>null!=action||displayAnnotate,nomove:action=>null!=action,currentRedaction:(redacting,rawRedaction)=>redacting&&null!=rawRedaction?consolidateDragObject(rawRedaction):null,pendingRedactions:(redacting,rawPendingRedactions)=>redacting?rawPendingRedactions:null,redactionsUndoable:pendingRedactions=>null!=pendingRedactions&&pendingRedactions.length>=1,allRedactions:(currentRedaction,pendingRedactions)=>null==currentRedaction?pendingRedactions:[...pendingRedactions,currentRedaction],currentAnnotation:(annotating,rawAnnotation,annotationPending)=>!annotating||null==rawAnnotation||annotationPending?null:consolidateDragObject(rawAnnotation),shownEditAnnotation:(rawAnnotation,annotationPending)=>annotationPending?consolidateDragObject(rawAnnotation):null,totalResults(searchHighlights,searchPages){if(null==searchHighlights||null==searchPages)return 0;let sum=0;for(let i=0;i<searchPages.length;i++){const{page:page}=searchPages[i];sum+=searchHighlights[page].length}return sum},showEmbedDialog:(embedDocument,selectNoteEmbed)=>null!=embedDocument&&!selectNoteEmbed,dialogShown:(showInfo,showData,showAccess,showEditSections,showEmbedDialog)=>showInfo||showData||showAccess||showEditSections||showEmbedDialog}});function initializeViewer(){layout.viewerInitialized=!0,null!=layout.viewerInitializeAction&&layout.viewerInitializeAction()}function setViewerInitializeAction(action){layout.viewerInitializeAction=action,layout.viewerInitialized&&layout.viewerInitializeAction()}function consolidateDragObject(dragObject){if(null==dragObject.start)return new _structure_note__WEBPACK_IMPORTED_MODULE_9__.a({page_number:dragObject.pageNumber});const start={x:Math.min(dragObject.start.x,dragObject.end.x),y:Math.min(dragObject.start.y,dragObject.end.y)},end={x:Math.max(dragObject.start.x,dragObject.end.x),y:Math.max(dragObject.start.y,dragObject.end.y)};return new _structure_note__WEBPACK_IMPORTED_MODULE_9__.a({page_number:dragObject.pageNumber,x1:start.x,x2:end.x,y1:start.y,y2:end.y})}function annotationValid(annotation){return!!annotation.isPageNote||!(annotation.x2<=annotation.x1)&&!(annotation.y2<=annotation.y1)}function enterEditAnnotateMode(annotation){cancelActions(),annotationValid(annotation)&&(layout.annotateMode="edit",layout.displayedAnnotation=annotation)}function pageDragStart(pageNumber,{x:x,y:y}){return layout.redacting?(layout.rawRedaction={pageNumber:pageNumber,start:{x:x,y:y},end:{x:x,y:y}},!0):!!layout.annotating&&(layout.rawAnnotation={pageNumber:pageNumber,start:{x:x,y:y},end:{x:x,y:y}},!0)}function pageDragMove(pageNumber,{x:x,y:y}){return layout.redacting?(layout.rawRedaction={...layout.rawRedaction,pageNumber:pageNumber,end:{x:x,y:y}},!0):!!layout.annotating&&(layout.rawAnnotation={...layout.rawAnnotation,pageNumber:pageNumber,end:{x:x,y:y}},!0)}function pageDragEnd(pageNumber,{x:x,y:y}){return layout.redacting?(layout.rawRedaction={...layout.rawRedaction,pageNumber:pageNumber,end:{x:x,y:y}},layout.rawPendingRedactions=[...layout.rawPendingRedactions,layout.currentRedaction],layout.rawRedaction=null,!0):!!layout.annotating&&(layout.rawAnnotation={...layout.rawAnnotation,pageNumber:pageNumber,end:{x:x,y:y}},layout.annotationPending=!0,enterEditAnnotateMode(layout.shownEditAnnotation),!0)}function startPageNote(pageNumber){layout.rawAnnotation={pageNumber:pageNumber},layout.annotationPending=!0,enterEditAnnotateMode(layout.shownEditAnnotation)}function redact(){Object(_manager_confirmDialog__WEBPACK_IMPORTED_MODULE_5__.d)("Confirm redactions","Are you sure you wish to redact the current document? If you continue, the document viewer will close temporarily while the document reprocesses with the redactions in place. This change is irreversible.","Continue",async()=>{await Object(_util_wrapLoad__WEBPACK_IMPORTED_MODULE_3__.a)(layout,async()=>await Object(_api_document__WEBPACK_IMPORTED_MODULE_4__.i)(_viewer__WEBPACK_IMPORTED_MODULE_1__.d.id,layout.pendingRedactions)),await Object(_manager_documents__WEBPACK_IMPORTED_MODULE_6__.h)([_viewer__WEBPACK_IMPORTED_MODULE_1__.d.id]),cancelActions(),Object(_router_router__WEBPACK_IMPORTED_MODULE_7__.c)("app")})}function undoRedaction(){layout.rawPendingRedactions.length>0&&(layout.rawPendingRedactions=layout.rawPendingRedactions.slice(0,layout.rawPendingRedactions.length-1))}function cancelActions(){layout.action=null,layout.embedDocument=null,layout.embedNote=null,layout.displayedAnnotation=null,layout.showEditSections=!1}function cancelAnnotation(){layout.displayAnnotate&&cancelActions()}function hideEditSections(){layout.showEditSections&&cancelActions()}async function updatePageAnnotation(noteId,docId,title,description,access,annotation){const newNote=await Object(_api_annotation__WEBPACK_IMPORTED_MODULE_8__.e)(noteId,docId,annotation.page,title,description,access,annotation.x1,annotation.x2,annotation.y1,annotation.y2,_viewer__WEBPACK_IMPORTED_MODULE_1__.d.me);return Object(_viewer__WEBPACK_IMPORTED_MODULE_1__.c)(newNote),newNote}async function createPageAnnotation(id,title,description,access,annotation){const newNote=await Object(_api_annotation__WEBPACK_IMPORTED_MODULE_8__.a)(id,annotation.page,title,description,access,annotation.x1,annotation.x2,annotation.y1,annotation.y2,_viewer__WEBPACK_IMPORTED_MODULE_1__.d.me);return Object(_viewer__WEBPACK_IMPORTED_MODULE_1__.a)(newNote),newNote}async function deletePageAnnotation(noteId,docId){Object(_manager_confirmDialog__WEBPACK_IMPORTED_MODULE_5__.d)("Confirm delete","Are you sure you wish to delete the current note?","Continue",async()=>{await Object(_api_annotation__WEBPACK_IMPORTED_MODULE_8__.b)(docId,noteId),Object(_viewer__WEBPACK_IMPORTED_MODULE_1__.b)({id:noteId}),cancelActions()})}async function startSearch(query){layout.search=query,layout.searchPending=!0,layout.searchHighlights=null,layout.searchPages=null;const{highlights:highlights,pages:pages}=await Object(_api_document__WEBPACK_IMPORTED_MODULE_4__.l)(query,_viewer__WEBPACK_IMPORTED_MODULE_1__.d.id);return null!=highlights&&(layout.searchHighlights=highlights,layout.searchPages=pages),layout.searchPending=!1,null!=highlights}function clearSearch(){layout.search="",layout.searchPending=!1,layout.searchHighlights=null,layout.searchPages=null}function showEmbedFlow(document){layout.embedNote=null,layout.embedDocument=document}function hideEmbedFlow(){layout.embedDocument=null}function hideDocumentInfo(){layout.showInfo=!1}function hideDocumentData(){layout.showData=!1}function hideAccess(){layout.showAccess=!1}function openAccess(documents){const document=documents[0];null!=document&&document.editAccess&&!document.processing&&(layout.showAccess=!0)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return pageImageUrl})),__webpack_require__.d(__webpack_exports__,"c",(function(){return textUrl})),__webpack_require__.d(__webpack_exports__,"a",(function(){return jsonUrl}));const imageWidths=function(widthSpec){let result=widthSpec.split(",").map(width=>{const parts=width.split(":");return[parseFloat(parts[1]),parts[0]]});return result=result.sort((a,b)=>a[0]-b[0]),result}("xlarge:2000,large:1000,normal:700,small:180,thumbnail:60");function pageImageUrl(document,pageNumber,desiredWidth){const size=function(desiredWidth){for(let i=0;i<imageWidths.length;i++){const[width,name]=imageWidths[i];if(desiredWidth<=width)return name}return imageWidths[imageWidths.length-1][1]}(desiredWidth);return`${document.assetUrl}documents/${document.id}/pages/${document.slug}-p${pageNumber+1}-${size}.gif?ts=${document.updatedAtTimestamp}`}function textUrl(document,pageNumber){return`${document.assetUrl}documents/${document.id}/pages/${document.slug}-p${pageNumber+1}.txt?ts=${document.updatedAtTimestamp}`}function jsonUrl(document){return`${document.assetUrl}documents/${document.id}/${document.slug}.txt.json`}},function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return spring})),__webpack_require__.d(__webpack_exports__,"b",(function(){return tweened}));var _store_index_mjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(19),_internal_index_mjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_easing_index_mjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(21);function is_date(obj){return"[object Date]"===Object.prototype.toString.call(obj)}function spring(value,opts={}){const store=Object(_store_index_mjs__WEBPACK_IMPORTED_MODULE_0__.c)(value),{stiffness:stiffness=.15,damping:damping=.8,precision:precision=.01}=opts;let last_time,task,current_token,last_value=value,target_value=value,inv_mass=1,inv_mass_recovery_rate=0,cancel_task=!1;function set(new_value,opts={}){target_value=new_value;const token=current_token={};if(null==value||opts.hard||spring.stiffness>=1&&spring.damping>=1)return cancel_task=!0,last_time=Object(_internal_index_mjs__WEBPACK_IMPORTED_MODULE_1__.N)(),last_value=new_value,store.set(value=target_value),Promise.resolve();if(opts.soft){const rate=!0===opts.soft?.5:+opts.soft;inv_mass_recovery_rate=1/(60*rate),inv_mass=0}return task||(last_time=Object(_internal_index_mjs__WEBPACK_IMPORTED_MODULE_1__.N)(),cancel_task=!1,task=Object(_internal_index_mjs__WEBPACK_IMPORTED_MODULE_1__.K)(now=>{if(cancel_task)return cancel_task=!1,task=null,!1;inv_mass=Math.min(inv_mass+inv_mass_recovery_rate,1);const ctx={inv_mass:inv_mass,opts:spring,settled:!0,dt:60*(now-last_time)/1e3},next_value=function tick_spring(ctx,last_value,current_value,target_value){if("number"==typeof current_value||is_date(current_value)){const delta=target_value-current_value,velocity=(current_value-last_value)/(ctx.dt||1/60),d=(velocity+(ctx.opts.stiffness*delta-ctx.opts.damping*velocity)*ctx.inv_mass)*ctx.dt;return Math.abs(d)<ctx.opts.precision&&Math.abs(delta)<ctx.opts.precision?target_value:(ctx.settled=!1,is_date(current_value)?new Date(current_value.getTime()+d):current_value+d)}if(Array.isArray(current_value))return current_value.map((_,i)=>tick_spring(ctx,last_value[i],current_value[i],target_value[i]));if("object"==typeof current_value){const next_value={};for(const k in current_value)next_value[k]=tick_spring(ctx,last_value[k],current_value[k],target_value[k]);return next_value}throw new Error(`Cannot spring ${typeof current_value} values`)}(ctx,last_value,value,target_value);return last_time=now,last_value=value,store.set(value=next_value),ctx.settled&&(task=null),!ctx.settled})),new Promise(fulfil=>{task.promise.then(()=>{token===current_token&&fulfil()})})}const spring={set:set,update:(fn,opts)=>set(fn(target_value,value),opts),subscribe:store.subscribe,stiffness:stiffness,damping:damping,precision:precision};return spring}function get_interpolator(a,b){if(a===b||a!=a)return()=>a;const type=typeof a;if(type!==typeof b||Array.isArray(a)!==Array.isArray(b))throw new Error("Cannot interpolate values of different type");if(Array.isArray(a)){const arr=b.map((bi,i)=>get_interpolator(a[i],bi));return t=>arr.map(fn=>fn(t))}if("object"===type){if(!a||!b)throw new Error("Object cannot be null");if(is_date(a)&&is_date(b)){a=a.getTime();const delta=(b=b.getTime())-a;return t=>new Date(a+t*delta)}const keys=Object.keys(b),interpolators={};return keys.forEach(key=>{interpolators[key]=get_interpolator(a[key],b[key])}),t=>{const result={};return keys.forEach(key=>{result[key]=interpolators[key](t)}),result}}if("number"===type){const delta=b-a;return t=>a+t*delta}throw new Error(`Cannot interpolate ${type} values`)}function tweened(value,defaults={}){const store=Object(_store_index_mjs__WEBPACK_IMPORTED_MODULE_0__.c)(value);let task,target_value=value;function set(new_value,opts){if(null==value)return store.set(value=new_value),Promise.resolve();target_value=new_value;let previous_task=task,started=!1,{delay:delay=0,duration:duration=400,easing:easing=_easing_index_mjs__WEBPACK_IMPORTED_MODULE_2__.c,interpolate:interpolate=get_interpolator}=Object(_internal_index_mjs__WEBPACK_IMPORTED_MODULE_1__.h)(Object(_internal_index_mjs__WEBPACK_IMPORTED_MODULE_1__.h)({},defaults),opts);if(0===duration)return previous_task&&(previous_task.abort(),previous_task=null),store.set(value=target_value),Promise.resolve();const start=Object(_internal_index_mjs__WEBPACK_IMPORTED_MODULE_1__.N)()+delay;let fn;return task=Object(_internal_index_mjs__WEBPACK_IMPORTED_MODULE_1__.K)(now=>{if(now<start)return!0;started||(fn=interpolate(value,new_value),"function"==typeof duration&&(duration=duration(value,new_value)),started=!0),previous_task&&(previous_task.abort(),previous_task=null);const elapsed=now-start;return elapsed>duration?(store.set(value=new_value),!1):(store.set(value=fn(easing(elapsed/duration))),!0)}),task.promise}return{set:set,update:(fn,opts)=>set(fn(target_value,value),opts),subscribe:store.subscribe}}},function(module,exports){module.exports='<svg class="closeinline" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.54162 14.9961C11.5684 14.9961 14.8327 11.7317 14.8327 7.70495C14.8327 3.67817 11.5684 0.413818 7.54162 0.413818C3.51484 0.413818 0.250488 3.67817 0.250488 7.70495C0.250488 11.7317 3.51484 14.9961 7.54162 14.9961ZM11.7861 4.57213L8.60229 7.75598L11.7861 10.9398L10.7255 12.0005L7.54163 8.81664L4.35778 12.0005L3.29712 10.9398L6.48097 7.75598L3.29713 4.57213L4.35779 3.51147L7.54163 6.69532L10.7255 3.51147L11.7861 4.57213Z" fill="black" fill-opacity="0.51"></path></svg>'},function(module,__webpack_exports__,__webpack_require__){"use strict";var internal=__webpack_require__(0),motion=__webpack_require__(44);__webpack_require__(21);__webpack_require__(19);var bounds=__webpack_require__(29);function sigmoidHelper(t,a){return 1/(1+Math.exp(-a*t))-.5}function sigmoid(t,k=2){return.5/sigmoidHelper(1,k)*sigmoidHelper(2*t-1,k)+.5}function easing_scale(tweener,ratio,keepInBounds=!0){return t=>{let value=tweener(t/ratio);return keepInBounds&&(value=Object(bounds.a)(value)),value}}function interp(tweener,a,b){return t=>tweener(t)*(b-a)+a}__webpack_require__(90);function create_if_block(ctx){let div1,div0,t,if_block_anchor,if_block=!ctx[1]&&create_if_block_1(ctx);return{c(){div1=Object(internal.w)("div"),div0=Object(internal.w)("div"),t=Object(internal.ab)(),if_block&&if_block.c(),if_block_anchor=Object(internal.x)(),Object(internal.i)(div0,"class","inner svelte-1nq8ixm"),Object(internal.Z)(div0,"width",100*ctx[2]+"%"),Object(internal.gb)(div0,"complete",ctx[4]),Object(internal.i)(div1,"class","bar svelte-1nq8ixm"),Object(internal.gb)(div1,"initializing",ctx[0]),Object(internal.gb)(div1,"compact",ctx[1])},m(target,anchor){Object(internal.H)(target,div1,anchor),Object(internal.g)(div1,div0),Object(internal.H)(target,t,anchor),if_block&&if_block.m(target,anchor),Object(internal.H)(target,if_block_anchor,anchor)},p(ctx,dirty){4&dirty&&Object(internal.Z)(div0,"width",100*ctx[2]+"%"),16&dirty&&Object(internal.gb)(div0,"complete",ctx[4]),1&dirty&&Object(internal.gb)(div1,"initializing",ctx[0]),2&dirty&&Object(internal.gb)(div1,"compact",ctx[1]),ctx[1]?if_block&&(if_block.d(1),if_block=null):if_block?if_block.p(ctx,dirty):(if_block=create_if_block_1(ctx),if_block.c(),if_block.m(if_block_anchor.parentNode,if_block_anchor))},d(detaching){detaching&&Object(internal.v)(div1),detaching&&Object(internal.v)(t),if_block&&if_block.d(detaching),detaching&&Object(internal.v)(if_block_anchor)}}}function create_if_block_1(ctx){let div,t;return{c(){div=Object(internal.w)("div"),t=Object(internal.db)(ctx[5]),Object(internal.i)(div,"class","text svelte-1nq8ixm")},m(target,anchor){Object(internal.H)(target,div,anchor),Object(internal.g)(div,t)},p(ctx,dirty){32&dirty&&Object(internal.W)(t,ctx[5])},d(detaching){detaching&&Object(internal.v)(div)}}}function create_fragment(ctx){let div,if_block=!ctx[3]&&create_if_block(ctx);return{c(){div=Object(internal.w)("div"),if_block&&if_block.c(),Object(internal.i)(div,"class","container svelte-1nq8ixm")},m(target,anchor){Object(internal.H)(target,div,anchor),if_block&&if_block.m(div,null)},p(ctx,[dirty]){ctx[3]?if_block&&(if_block.d(1),if_block=null):if_block?if_block.p(ctx,dirty):(if_block=create_if_block(ctx),if_block.c(),if_block.m(div,null))},i:internal.M,o:internal.M,d(detaching){detaching&&Object(internal.v)(div),if_block&&if_block.d()}}}function instance($$self,$$props,$$invalidate){let isNull,complete,progressPercent,$smoothProgress,{progress:progress}=$$props,{initializing:initializing=!1}=$$props,{compact:compact=!1}=$$props;const PROGRESS_DURATION=parseInt("5000");let lastProgress=null,realProgress=null;const smoothProgress=Object(motion.b)(realProgress,{duration:PROGRESS_DURATION,interpolate:(a,b)=>0==b?t=>0:b<a||1==b?interp(easing_scale(sigmoid,400/PROGRESS_DURATION),a,b):t=>sigmoid(t)*(b-a)+a});return Object(internal.o)($$self,smoothProgress,value=>$$invalidate(2,$smoothProgress=value)),$$self.$$set=$$props=>{"progress"in $$props&&$$invalidate(7,progress=$$props.progress),"initializing"in $$props&&$$invalidate(0,initializing=$$props.initializing),"compact"in $$props&&$$invalidate(1,compact=$$props.compact)},$$self.$$.update=()=>{384&$$self.$$.dirty&&(null==progress?$$invalidate(9,realProgress=lastProgress):($$invalidate(8,lastProgress=progress),$$invalidate(9,realProgress=progress))),512&$$self.$$.dirty&&$$invalidate(3,isNull=null==realProgress),512&$$self.$$.dirty&&Object(internal.Y)(smoothProgress,$smoothProgress=realProgress,$smoothProgress),4&$$self.$$.dirty&&$$invalidate(4,complete=1==$smoothProgress),4&$$self.$$.dirty&&$$invalidate(5,progressPercent=Math.max(Math.min(Math.floor(100*$smoothProgress),100),0)+"%")},[initializing,compact,$smoothProgress,isNull,complete,progressPercent,smoothProgress,progress,lastProgress,realProgress]}class Progress_svelte_Progress extends internal.b{constructor(options){super(),Object(internal.G)(this,options,instance,create_fragment,internal.T,{progress:7,initializing:0,compact:1})}}__webpack_exports__.a=Progress_svelte_Progress},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getContent})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getFlatpage}));var _session__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_util_url__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);async function getContent(url){const{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.b.get(Object(_util_url__WEBPACK_IMPORTED_MODULE_1__.f)("https://api.www.documentcloud.org","pages",url));return data}async function getFlatpage(page){const{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.b.get("https://api.www.documentcloud.org/pages/"+page);return data}},function(module,exports,__webpack_require__){"use strict";module.exports=function(fn,thisArg){return function(){for(var args=new Array(arguments.length),i=0;i<args.length;i++)args[i]=arguments[i];return fn.apply(thisArg,args)}}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(13);function encode(val){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}module.exports=function(url,params,paramsSerializer){if(!params)return url;var serializedParams;if(paramsSerializer)serializedParams=paramsSerializer(params);else if(utils.isURLSearchParams(params))serializedParams=params.toString();else{var parts=[];utils.forEach(params,(function(val,key){null!=val&&(utils.isArray(val)?key+="[]":val=[val],utils.forEach(val,(function(v){utils.isDate(v)?v=v.toISOString():utils.isObject(v)&&(v=JSON.stringify(v)),parts.push(encode(key)+"="+encode(v))})))})),serializedParams=parts.join("&")}if(serializedParams){var hashmarkIndex=url.indexOf("#");-1!==hashmarkIndex&&(url=url.slice(0,hashmarkIndex)),url+=(-1===url.indexOf("?")?"?":"&")+serializedParams}return url}},function(module,exports,__webpack_require__){"use strict";module.exports=function(value){return!(!value||!value.__CANCEL__)}},function(module,exports,__webpack_require__){"use strict";(function(process){var utils=__webpack_require__(13),normalizeHeaderName=__webpack_require__(72),DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(headers,value){!utils.isUndefined(headers)&&utils.isUndefined(headers["Content-Type"])&&(headers["Content-Type"]=value)}var adapter,defaults={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==process&&"[object process]"===Object.prototype.toString.call(process))&&(adapter=__webpack_require__(53)),adapter),transformRequest:[function(data,headers){return normalizeHeaderName(headers,"Accept"),normalizeHeaderName(headers,"Content-Type"),utils.isFormData(data)||utils.isArrayBuffer(data)||utils.isBuffer(data)||utils.isStream(data)||utils.isFile(data)||utils.isBlob(data)?data:utils.isArrayBufferView(data)?data.buffer:utils.isURLSearchParams(data)?(setContentTypeIfUnset(headers,"application/x-www-form-urlencoded;charset=utf-8"),data.toString()):utils.isObject(data)?(setContentTypeIfUnset(headers,"application/json;charset=utf-8"),JSON.stringify(data)):data}],transformResponse:[function(data){if("string"==typeof data)try{data=JSON.parse(data)}catch(e){}return data}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(status){return status>=200&&status<300}};defaults.headers={common:{Accept:"application/json, text/plain, */*"}},utils.forEach(["delete","get","head"],(function(method){defaults.headers[method]={}})),utils.forEach(["post","put","patch"],(function(method){defaults.headers[method]=utils.merge(DEFAULT_CONTENT_TYPE)})),module.exports=defaults}).call(this,__webpack_require__(52))},function(module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(13),settle=__webpack_require__(73),buildURL=__webpack_require__(49),buildFullPath=__webpack_require__(75),parseHeaders=__webpack_require__(78),isURLSameOrigin=__webpack_require__(79),createError=__webpack_require__(54);module.exports=function(config){return new Promise((function(resolve,reject){var requestData=config.data,requestHeaders=config.headers;utils.isFormData(requestData)&&delete requestHeaders["Content-Type"];var request=new XMLHttpRequest;if(config.auth){var username=config.auth.username||"",password=config.auth.password||"";requestHeaders.Authorization="Basic "+btoa(username+":"+password)}var fullPath=buildFullPath(config.baseURL,config.url);if(request.open(config.method.toUpperCase(),buildURL(fullPath,config.params,config.paramsSerializer),!0),request.timeout=config.timeout,request.onreadystatechange=function(){if(request&&4===request.readyState&&(0!==request.status||request.responseURL&&0===request.responseURL.indexOf("file:"))){var responseHeaders="getAllResponseHeaders"in request?parseHeaders(request.getAllResponseHeaders()):null,response={data:config.responseType&&"text"!==config.responseType?request.response:request.responseText,status:request.status,statusText:request.statusText,headers:responseHeaders,config:config,request:request};settle(resolve,reject,response),request=null}},request.onabort=function(){request&&(reject(createError("Request aborted",config,"ECONNABORTED",request)),request=null)},request.onerror=function(){reject(createError("Network Error",config,null,request)),request=null},request.ontimeout=function(){var timeoutErrorMessage="timeout of "+config.timeout+"ms exceeded";config.timeoutErrorMessage&&(timeoutErrorMessage=config.timeoutErrorMessage),reject(createError(timeoutErrorMessage,config,"ECONNABORTED",request)),request=null},utils.isStandardBrowserEnv()){var cookies=__webpack_require__(80),xsrfValue=(config.withCredentials||isURLSameOrigin(fullPath))&&config.xsrfCookieName?cookies.read(config.xsrfCookieName):void 0;xsrfValue&&(requestHeaders[config.xsrfHeaderName]=xsrfValue)}if("setRequestHeader"in request&&utils.forEach(requestHeaders,(function(val,key){void 0===requestData&&"content-type"===key.toLowerCase()?delete requestHeaders[key]:request.setRequestHeader(key,val)})),utils.isUndefined(config.withCredentials)||(request.withCredentials=!!config.withCredentials),config.responseType)try{request.responseType=config.responseType}catch(e){if("json"!==config.responseType)throw e}"function"==typeof config.onDownloadProgress&&request.addEventListener("progress",config.onDownloadProgress),"function"==typeof config.onUploadProgress&&request.upload&&request.upload.addEventListener("progress",config.onUploadProgress),config.cancelToken&&config.cancelToken.promise.then((function(cancel){request&&(request.abort(),reject(cancel),request=null)})),void 0===requestData&&(requestData=null),request.send(requestData)}))}},function(module,exports,__webpack_require__){"use strict";var enhanceError=__webpack_require__(74);module.exports=function(message,config,code,request,response){var error=new Error(message);return enhanceError(error,config,code,request,response)}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(13);module.exports=function(config1,config2){config2=config2||{};var config={},valueFromConfig2Keys=["url","method","params","data"],mergeDeepPropertiesKeys=["headers","auth","proxy"],defaultToConfig2Keys=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];utils.forEach(valueFromConfig2Keys,(function(prop){void 0!==config2[prop]&&(config[prop]=config2[prop])})),utils.forEach(mergeDeepPropertiesKeys,(function(prop){utils.isObject(config2[prop])?config[prop]=utils.deepMerge(config1[prop],config2[prop]):void 0!==config2[prop]?config[prop]=config2[prop]:utils.isObject(config1[prop])?config[prop]=utils.deepMerge(config1[prop]):void 0!==config1[prop]&&(config[prop]=config1[prop])})),utils.forEach(defaultToConfig2Keys,(function(prop){void 0!==config2[prop]?config[prop]=config2[prop]:void 0!==config1[prop]&&(config[prop]=config1[prop])}));var axiosKeys=valueFromConfig2Keys.concat(mergeDeepPropertiesKeys).concat(defaultToConfig2Keys),otherKeys=Object.keys(config2).filter((function(key){return-1===axiosKeys.indexOf(key)}));return utils.forEach(otherKeys,(function(prop){void 0!==config2[prop]?config[prop]=config2[prop]:void 0!==config1[prop]&&(config[prop]=config1[prop])})),config}},function(module,exports,__webpack_require__){"use strict";function Cancel(message){this.message=message}Cancel.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,module.exports=Cancel},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Section}));var svue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);class Section extends svue__WEBPACK_IMPORTED_MODULE_0__.a{constructor(rawSection,structure={}){super({data(){const data=null==structure.data?{}:structure.data();return data.section=rawSection,data},computed:{...null==structure.computed?{}:structure.computed,id:section=>section.id,page:section=>section.page_number,title:section=>section.title}})}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return highlight}));var lucene__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(41),lucene__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lucene__WEBPACK_IMPORTED_MODULE_0__);const validFields=[/^id$/,/^document$/,/^access$/,/^created_at$/,/^data_[a-zA-Z0-9_-]+$/,/^tag$/,/^description$/,/^language$/,/^organization$/,/^group$/,/^page_count$/,/^pages$/,/^projects?$/,/^project?$/,/^slug$/,/^source$/,/^status$/,/^title$/,/^updated_at$/,/^user$/,/^account$/,/^doctext$/,/^text$/,/^page_no_[0-9]+$/,/^sort$/,/^order$/],OPERATORS=["AND","OR","NOT"],OPERATORS_RE=new RegExp(OPERATORS.map(x=>`(${x})`).join("|")+"|(.+?)"),NORMALIZE_PREFIX=/^[-+]+/g;function validField(field){field=field.replace(NORMALIZE_PREFIX,"");for(let i=0;i<validFields.length;i++)if(validFields[i].test(field))return!0;return!1}function highlight(query){return function(query,parsed){const getSuperPosition=(...parsedStructures)=>{let posMin=null,posMax=null;const reconcile=(...nums)=>{for(let i=0;i<nums.length;i++){const num=nums[i];null!=num&&((null==posMin||num<posMin)&&(posMin=num),(null==posMax||num>posMax)&&(posMax=num))}};for(let i=0;i<parsedStructures.length;i++){const parsed=parsedStructures[i];null!=parsed.left&&reconcile(...getSuperPosition(parsed.left)),null!=parsed.right&&reconcile(...getSuperPosition(parsed.right)),null!=parsed.fieldLocation&&reconcile(parsed.fieldLocation.start.offset,parsed.fieldLocation.end.offset),null!=parsed.termLocation&&reconcile(parsed.termLocation.start.offset,parsed.termLocation.end.offset)}return[posMin,posMax]},getChunks=parsed=>{let chunks=[];if(null!=parsed.fieldLocation&&parsed.parenthesized&&validField(parsed.field)){const position=getSuperPosition(parsed),endParenIdx=query.indexOf(")",position[1]);-1!=endParenIdx&&(position[1]=endParenIdx+1),chunks.push({type:"field",position:position})}else if(null!=parsed.fieldLocation&&parsed.inclusive&&validField(parsed.field)){const position=getSuperPosition(parsed),endParenIndex=query.indexOf("]",position[1]),endBraceIndex=query.indexOf("}",position[1]),endIndex=Math.min(-1==endParenIndex?1/0:endParenIndex,-1==endBraceIndex?1/0:endBraceIndex);endIndex!=1/0&&(position[1]=endIndex+1),chunks.push({type:"field",position:position})}else if(null!=parsed.left&&(chunks=chunks.concat(getChunks(parsed.left))),null!=parsed.right&&(chunks=chunks.concat(getChunks(parsed.right))),null!=parsed.fieldLocation&&null!=parsed.termLocation)validField(parsed.field)&&chunks.push({type:"field",position:[parsed.fieldLocation.start.offset,parsed.termLocation.end.offset]});else if(parsed.quoted){const position=[parsed.termLocation.start.offset,parsed.termLocation.end.offset],text=query.substring(...position);(text.startsWith('"')||text.endsWith('"'))&&chunks.push({type:"quote",position:position})}return chunks},chunks=getChunks(parsed);chunks.sort((a,b)=>a.position[0]-b.position[0]);let pos=0;const highlights=[],advance=offset=>{const text=query.substr(0,offset);return query=query.substr(offset),pos+=offset,text},pushRaw=position=>{if(null==position&&(position=query.length),0==position)return;const textGroups=advance(position).split(OPERATORS_RE).filter(x=>null!=x&&x.length>=1);let rawBuffer="";const clearBuffer=()=>{rawBuffer.length>0&&highlights.push({type:"raw",text:rawBuffer}),rawBuffer=""};for(let i=0;i<textGroups.length;i++){const group=textGroups[i];OPERATORS.includes(group)?(clearBuffer(),highlights.push({type:"operator",text:group})):rawBuffer+=group}clearBuffer()},pushHighlight=(type,position)=>{for(;position>0&&isWhitespace.test(query.charAt(position-1));)position--;if(0==position)return;const text=advance(position),colonIdx=text.indexOf(":");let field=null,value=null;-1!=colonIdx&&(field=text.substr(0,colonIdx+1),value=text.substr(colonIdx+1)),highlights.push({type:type,field:field,value:value,text:text})};for(let i=0;i<chunks.length;i++){const chunk=chunks[i],start=chunk.position[0]-pos;pushRaw(start),pushHighlight(chunk.type,chunk.position[1]-chunk.position[0])}return pushRaw(),highlights}(query,function(query){try{return lucene__WEBPACK_IMPORTED_MODULE_0___default.a.parse(query)}catch(e){const{escaped:escaped,mapping:mapping}=function(query){return function(clauses){let sb="";const mapping=[];for(let i=0;i<clauses.length;i++){const start=sb.length,clause=clauses[i];let doQuote=clause.isPhrase;const s=clause.val;clause.isPhrase||"OR"!=s&&"AND"!=s&&"NOT"!=s||(doQuote=!0),null!=clause.must&&(sb+=clause.must),null!=clause.field&&(sb+=clause.field,sb+=":"),doQuote&&(sb+='"'),sb+=clause.val,doQuote&&(sb+='"');let shift=0;clause.field!=clause.rawField&&null!=clause.field&&(shift=clause.field.length-clause.rawField.length);const end=sb.length;mapping.push([clause.pos,[start+shift,end+shift]]),sb+=" "}return{escaped:sb,mapping:mapping}}(function splitIntoClauses(s,ignoreQuote){const lst=[];let clause,start,disallowUserField,pos=0,end=s.length,ch=null;for(;pos<end;){for(clause={},disallowUserField=!0,ch=s.charAt(pos);isWhitespace.test(ch)&&!(++pos>=end);)ch=s.charAt(pos);if(start=pos,("+"==ch||"-"==ch)&&pos+1<end&&(clause.must=ch,pos++),clause.field=getFieldName(s,pos,end),null!=clause.field&&(clause.field,0)&&(clause.field=null),null!=clause.field){disallowUserField=!1;const colon=s.indexOf(":",pos);clause.rawField=s.substring(pos,colon),pos+=colon-pos,pos++}if(pos>=end)break;let inString=null;ch=s.charAt(pos),ignoreQuote||'"'!=ch||(clause.isPhrase=!0,inString='"',pos++);let sb="";for(;pos<end;)if(ch=s.charAt(pos++),"\\"!=ch){if(null!=inString&&ch==inString){inString=null;break}if(isWhitespace.test(ch)&&(clause.hasWhitespace=!0,null==inString)){pos--;break}if(null==inString)switch(ch){case"!":case"(":case")":case":":case"^":case"[":case"]":case"{":case"}":case"~":case"*":case"?":case'"':case"+":case"-":case"\\":case"|":case"&":case"/":clause.hasSpecialSyntax=!0,sb+="\\"}else'"'==ch&&(sb+="\\");sb+=ch}else{if(sb+=ch,pos>=end){sb+=ch;break}ch=s.charAt(pos++),sb+=ch}if(clause.val=sb,clause.isPhrase){if(null!=inString)return splitIntoClauses(s,!0);clause.hasSpecialSyntax=!1}else 0==clause.val.length&&(clause.syntaxError=!0,null!=clause.must?(clause.val="\\"+clause.must,clause.must=null,clause.hasSpecialSyntax=!0):clause=null);null!=clause&&(disallowUserField?(clause.raw=s.substring(start,pos),"*:*"!=clause.raw&&(clause.raw=clause.raw.replace(/([^\\]):/g,"$1\\:"))):clause.raw=s.substring(start,pos),clause.pos=[start,pos],lst.push(clause))}return lst}(query,!1))}(query),parsed=lucene__WEBPACK_IMPORTED_MODULE_0___default.a.parse(escaped);return function transform(parsed,mapping){const transformOffset=offset=>{for(let i=0;i<mapping.length;i++){const originalStart=mapping[i][0][0],transformedStart=mapping[i][1][0],transformedEnd=mapping[i][1][1];if(offset>=transformedStart&&offset<transformedEnd||i==mapping.length-1)return offset+originalStart-transformedStart}return offset},transformLocation=location=>{location.start.offset=transformOffset(location.start.offset),location.end.offset=transformOffset(location.end.offset)-1};null!=parsed.left&&transform(parsed.left,mapping);null!=parsed.right&&transform(parsed.right,mapping);null!=parsed.fieldLocation&&transformLocation(parsed.fieldLocation);null!=parsed.termLocation&&transformLocation(parsed.termLocation)}(parsed,mapping),parsed}}(query))}const isWhitespace=/\s/,isJavaIdentifierPart=/[a-zA-Z0-9$_]/;function getFieldName(s,pos,end){if(pos>=end)return null;let p=pos;const colon=s.indexOf(":",pos);if(colon<=pos||colon+1>=end||isWhitespace.test(s.charAt(colon+1)))return null;let ch=s.charAt(p++);for(;("("==ch||"+"==ch||"-"==ch)&&pos<end;)ch=s.charAt(p++),pos++;if(!isJavaIdentifierPart.test(ch))return null;for(;p<colon;)if(ch=s.charAt(p++),!isJavaIdentifierPart.test(ch)&&"-"!=ch&&"."!=ch)return null;return s.substring(pos,p)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return viewerEditDialogs})),__webpack_require__.d(__webpack_exports__,"a",(function(){return loadViewerEditDialogs}));var _pages_home_Empty_svelte__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14);const viewerEditDialogs=new(__webpack_require__(4).a)({data:()=>({embedDialog:_pages_home_Empty_svelte__WEBPACK_IMPORTED_MODULE_0__.default,accessDialog:_pages_home_Empty_svelte__WEBPACK_IMPORTED_MODULE_0__.default,documentInformationDialog:_pages_home_Empty_svelte__WEBPACK_IMPORTED_MODULE_0__.default,dataDialog:_pages_home_Empty_svelte__WEBPACK_IMPORTED_MODULE_0__.default,editSectionsDialog:_pages_home_Empty_svelte__WEBPACK_IMPORTED_MODULE_0__.default,loaded:!1})});async function loadViewerEditDialogs(){if(viewerEditDialogs.loaded)return;viewerEditDialogs.loaded=!0;const dialogs=await Promise.all([__webpack_require__.e(7).then(__webpack_require__.bind(null,101)),Promise.all([__webpack_require__.e(2),__webpack_require__.e(14)]).then(__webpack_require__.bind(null,96)),__webpack_require__.e(8).then(__webpack_require__.bind(null,94)),Promise.all([__webpack_require__.e(1),__webpack_require__.e(12)]).then(__webpack_require__.bind(null,95)),__webpack_require__.e(10).then(__webpack_require__.bind(null,105))]);viewerEditDialogs.embedDialog=dialogs[0].default,viewerEditDialogs.accessDialog=dialogs[1].default,viewerEditDialogs.documentInformationDialog=dialogs[2].default,viewerEditDialogs.dataDialog=dialogs[3].default,viewerEditDialogs.editSectionsDialog=dialogs[4].default}},function(module,__webpack_exports__,__webpack_require__){"use strict";var internal=__webpack_require__(0),Link_svelte=__webpack_require__(27),svelte=__webpack_require__(22),url=__webpack_require__(1),iframe=__webpack_require__(30),mastlogo=__webpack_require__(39),mastlogo_default=__webpack_require__.n(mastlogo);__webpack_require__(66);function create_else_block(ctx){let link,current;return link=new Link_svelte.a({props:{to:"app",$$slots:{default:[create_default_slot]},$$scope:{ctx:ctx}}}),{c(){Object(internal.r)(link.$$.fragment)},m(target,anchor){Object(internal.L)(link,target,anchor),current=!0},p(ctx,dirty){const link_changes={};256&dirty&&(link_changes.$$scope={dirty:dirty,ctx:ctx}),link.$set(link_changes)},i(local){current||(Object(internal.hb)(link.$$.fragment,local),current=!0)},o(local){Object(internal.ib)(link.$$.fragment,local),current=!1},d(detaching){Object(internal.t)(link,detaching)}}}function create_if_block_1(ctx){let a,a_href_value;return{c(){a=Object(internal.w)("a"),Object(internal.i)(a,"href",a_href_value="https://www.documentcloud.org/"),Object(internal.i)(a,"target","_blank"),Object(internal.i)(a,"rel","noreferrer")},m(target,anchor){Object(internal.H)(target,a,anchor),a.innerHTML=mastlogo_default.a},p:internal.M,i:internal.M,o:internal.M,d(detaching){detaching&&Object(internal.v)(a)}}}function create_default_slot(ctx){let html_tag,html_anchor;return{c(){html_anchor=Object(internal.x)(),html_tag=new internal.a(html_anchor)},m(target,anchor){html_tag.m(mastlogo_default.a,target,anchor),Object(internal.H)(target,html_anchor,anchor)},p:internal.M,d(detaching){detaching&&Object(internal.v)(html_anchor),detaching&&html_tag.d()}}}function create_if_block(ctx){let div1,div0;return{c(){div1=Object(internal.w)("div"),div0=Object(internal.w)("div"),Object(internal.i)(div0,"class","toc svelte-hiwfda"),Object(internal.i)(div1,"class","toccontainer svelte-hiwfda")},m(target,anchor){Object(internal.H)(target,div1,anchor),Object(internal.g)(div1,div0),ctx[4](div0)},p:internal.M,d(detaching){detaching&&Object(internal.v)(div1),ctx[4](null)}}}function create_fragment(ctx){let div2,header,div0,current_block_type_index,if_block0,t0,div1,t1,html_tag,current;const if_block_creators=[create_if_block_1,create_else_block],if_blocks=[];current_block_type_index=Object(iframe.a)()?0:1,if_block0=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx);let if_block1=!ctx[3]&&create_if_block(ctx);return{c(){div2=Object(internal.w)("div"),header=Object(internal.w)("header"),div0=Object(internal.w)("div"),if_block0.c(),t0=Object(internal.ab)(),div1=Object(internal.w)("div"),if_block1&&if_block1.c(),t1=Object(internal.ab)(),Object(internal.i)(div0,"class","logo"),html_tag=new internal.a(null),Object(internal.i)(div1,"class","content svelte-hiwfda"),Object(internal.i)(div2,"class","page svelte-hiwfda")},m(target,anchor){Object(internal.H)(target,div2,anchor),Object(internal.g)(div2,header),Object(internal.g)(header,div0),if_blocks[current_block_type_index].m(div0,null),Object(internal.g)(div2,t0),Object(internal.g)(div2,div1),if_block1&&if_block1.m(div1,null),Object(internal.g)(div1,t1),html_tag.m(ctx[0],div1),ctx[5](div1),current=!0},p(ctx,[dirty]){if_block0.p(ctx,dirty),ctx[3]?if_block1&&(if_block1.d(1),if_block1=null):if_block1?if_block1.p(ctx,dirty):(if_block1=create_if_block(ctx),if_block1.c(),if_block1.m(div1,t1)),(!current||1&dirty)&&html_tag.p(ctx[0])},i(local){current||(Object(internal.hb)(if_block0),current=!0)},o(local){Object(internal.ib)(if_block0),current=!1},d(detaching){detaching&&Object(internal.v)(div2),if_blocks[current_block_type_index].d(),if_block1&&if_block1.d(),ctx[5](null)}}}function instance($$self,$$props,$$invalidate){let{content:content}=$$props,contentElem=null,sidebarElem=null;let hideToc=!1;return Object(svelte.d)(async()=>{const queryReplacements=Object(url.c)(window.location.href);for(const key in queryReplacements)queryReplacements.hasOwnProperty(key)&&$$invalidate(0,content=content.replace(`{{{${key}}}}`,queryReplacements[key]));Object(url.b)(queryReplacements.toc)&&$$invalidate(3,hideToc=!0),location.hash.startsWith("#")&&(function(hash,smooth=!1){const elem=document.querySelector(hash);return null==elem||!!elem.scrollIntoView&&(elem.scrollIntoView({block:"start",behavior:smooth?"smooth":"auto"}),!0)}(location.hash)||location.replace(location.hash)),document.documentElement.style.scrollBehavior="smooth";const headers=function(){if(!contentElem)return;const headers=document.querySelectorAll("h1, h2, h3, h4, h5, h6"),contents=[];return headers.forEach(header=>{contents.push({text:header.textContent.trim(),id:header.id,level:parseInt(header.tagName.substr(1))});let id=header.id;if(null==id)return;if(id=id.trim(),""==id)return;const anchor=document.createElement("a");anchor.href="#"+id,anchor.textContent=" #",anchor.className="hiddenanchor",header.appendChild(anchor)}),contents}();hideToc||function(headers){let root={children:[]};const addNode=(node,level,tree)=>{if(1!=level){if(0==tree.children.length){const newNode={node:null,children:[]};return tree.children.push(newNode),addNode(node,level-1,newNode)}return addNode(node,level-1,tree.children[tree.children.length-1])}tree.children.push({node:node,children:[]})};for(headers.forEach(header=>{addNode({text:header.text,id:header.id},header.level,root)});1==root.children.length;)root=root.children[0];const generateToc=(tree,depth=0,first=!0)=>{if(0==tree.children.length||depth>=2)return null;const ul=document.createElement("ul");return tree.children.forEach(child=>{const li=document.createElement("li");if(li.className=first?"":"deep",null!=child.node){const a=document.createElement("a");a.textContent=child.node.text,a.href="#"+child.node.id,li.appendChild(a)}const subToc=generateToc(child,depth+1,!1);null!=subToc&&li.appendChild(subToc),ul.appendChild(li)}),ul};sidebarElem.appendChild(generateToc(root))}(headers)}),Object(svelte.c)(()=>{document.documentElement.style.scrollBehavior="auto"}),$$self.$$set=$$props=>{"content"in $$props&&$$invalidate(0,content=$$props.content)},[content,contentElem,sidebarElem,hideToc,function($$value){internal.l[$$value?"unshift":"push"](()=>{sidebarElem=$$value,$$invalidate(2,sidebarElem)})},function($$value){internal.l[$$value?"unshift":"push"](()=>{contentElem=$$value,$$invalidate(1,contentElem)})}]}class FlatPage_svelte_FlatPage extends internal.b{constructor(options){super(),Object(internal.G)(this,options,instance,create_fragment,internal.T,{content:0})}}var pages_FlatPage_svelte=FlatPage_svelte_FlatPage,router=__webpack_require__(5),cms=__webpack_require__(47);__webpack_require__(85);function NotFound_svelte_create_if_block_1(ctx){let flatpage,current;return flatpage=new pages_FlatPage_svelte({props:{content:ctx[3]}}),{c(){Object(internal.r)(flatpage.$$.fragment)},m(target,anchor){Object(internal.L)(flatpage,target,anchor),current=!0},p(ctx,dirty){const flatpage_changes={};8&dirty&&(flatpage_changes.content=ctx[3]),flatpage.$set(flatpage_changes)},i(local){current||(Object(internal.hb)(flatpage.$$.fragment,local),current=!0)},o(local){Object(internal.ib)(flatpage.$$.fragment,local),current=!1},d(detaching){Object(internal.t)(flatpage,detaching)}}}function NotFound_svelte_create_if_block(ctx){let div1,p,link,t0,h1,t1,t2,div0,t3,current;return link=new Link_svelte.a({props:{to:"default",$$slots:{default:[NotFound_svelte_create_default_slot]},$$scope:{ctx:ctx}}}),{c(){div1=Object(internal.w)("div"),p=Object(internal.w)("p"),Object(internal.r)(link.$$.fragment),t0=Object(internal.ab)(),h1=Object(internal.w)("h1"),t1=Object(internal.db)(ctx[0]),t2=Object(internal.ab)(),div0=Object(internal.w)("div"),t3=Object(internal.db)(ctx[1]),Object(internal.i)(div1,"class","notfound svelte-1l4vo2i")},m(target,anchor){Object(internal.H)(target,div1,anchor),Object(internal.g)(div1,p),Object(internal.L)(link,p,null),Object(internal.g)(div1,t0),Object(internal.g)(div1,h1),Object(internal.g)(h1,t1),Object(internal.g)(div1,t2),Object(internal.g)(div1,div0),Object(internal.g)(div0,t3),current=!0},p(ctx,dirty){const link_changes={};16&dirty&&(link_changes.$$scope={dirty:dirty,ctx:ctx}),link.$set(link_changes),(!current||1&dirty)&&Object(internal.W)(t1,ctx[0]),(!current||2&dirty)&&Object(internal.W)(t3,ctx[1])},i(local){current||(Object(internal.hb)(link.$$.fragment,local),current=!0)},o(local){Object(internal.ib)(link.$$.fragment,local),current=!1},d(detaching){detaching&&Object(internal.v)(div1),Object(internal.t)(link)}}}function NotFound_svelte_create_default_slot(ctx){let t;return{c(){t=Object(internal.db)("Home")},m(target,anchor){Object(internal.H)(target,t,anchor)},d(detaching){detaching&&Object(internal.v)(t)}}}function NotFound_svelte_create_fragment(ctx){let current_block_type_index,if_block,if_block_anchor,current;const if_block_creators=[NotFound_svelte_create_if_block,NotFound_svelte_create_if_block_1],if_blocks=[];function select_block_type(ctx,dirty){return ctx[2]?0:null!=ctx[3]?1:-1}return~(current_block_type_index=select_block_type(ctx))&&(if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx)),{c(){if_block&&if_block.c(),if_block_anchor=Object(internal.x)()},m(target,anchor){~current_block_type_index&&if_blocks[current_block_type_index].m(target,anchor),Object(internal.H)(target,if_block_anchor,anchor),current=!0},p(ctx,[dirty]){let previous_block_index=current_block_type_index;current_block_type_index=select_block_type(ctx),current_block_type_index===previous_block_index?~current_block_type_index&&if_blocks[current_block_type_index].p(ctx,dirty):(if_block&&(Object(internal.E)(),Object(internal.ib)(if_blocks[previous_block_index],1,1,()=>{if_blocks[previous_block_index]=null}),Object(internal.n)()),~current_block_type_index?(if_block=if_blocks[current_block_type_index],if_block?if_block.p(ctx,dirty):(if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),if_block.c()),Object(internal.hb)(if_block,1),if_block.m(if_block_anchor.parentNode,if_block_anchor)):if_block=null)},i(local){current||(Object(internal.hb)(if_block),current=!0)},o(local){Object(internal.ib)(if_block),current=!1},d(detaching){~current_block_type_index&&if_blocks[current_block_type_index].d(detaching),detaching&&Object(internal.v)(if_block_anchor)}}}function NotFound_svelte_instance($$self,$$props,$$invalidate){let{title:title="Page not found"}=$$props,{message:message="Please try another URL"}=$$props,notFound=!1,content=null;return Object(svelte.d)(async()=>{if(null==router.e.resolvedRoute.name)try{$$invalidate(3,content=await Object(cms.a)(router.e.currentUrl)),null!=content&&0!=content.trim().length||$$invalidate(2,notFound=!0)}catch(e){console.error(e),$$invalidate(2,notFound=!0)}else $$invalidate(2,notFound=!0)}),$$self.$$set=$$props=>{"title"in $$props&&$$invalidate(0,title=$$props.title),"message"in $$props&&$$invalidate(1,message=$$props.message)},[title,message,notFound,content]}class NotFound_svelte_NotFound extends internal.b{constructor(options){super(),Object(internal.G)(this,options,NotFound_svelte_instance,NotFound_svelte_create_fragment,internal.T,{title:0,message:1})}}__webpack_exports__.a=NotFound_svelte_NotFound},function(module,exports,__webpack_require__){var root,factory,define;factory=function(){return function(notFound,routeDefinitions){var routes={},decode=decodeURIComponent;return function(){for(var key in routeDefinitions)add(key,routeDefinitions[key])}(),function(url,arg){var result=function(url){var querySplit=function(url){return~url.indexOf("/?")&&(url=url.replace("/?","?")),"/"==url[0]&&(url=url.slice(1)),"/"==url[url.length-1]&&(url=url.slice(0,-1)),url}(url).split("?"),esc=~url.indexOf("%")?decode:noop;return function(url,ctx,esc){if(url&&ctx.cb)for(var hash=url.indexOf("#"),query=(hash<0?url:url.slice(0,hash)).split("&"),i=0;i<query.length;++i){var nameValue=query[i].split("=");ctx.params[nameValue[0]]=esc(nameValue[1])}return ctx}(querySplit[1],recurseUrl(querySplit[0].split("/"),esc,0,routes,[])||{},esc)}(url);return(result.cb||notFound)(result.params,arg,url)};function noop(s){return s}function recurseUrl(pieces,esc,i,rules,params){if(rules){if(i>=pieces.length){var cb=rules["@"];return cb&&{cb:cb,params:params.reduce((function(h,kv){return h[kv[0]]=kv[1],h}),{})}}var piece=esc(pieces[i]),paramLen=params.length;return recurseUrl(pieces,esc,i+1,rules[piece.toLowerCase()],params)||recurseNamedUrl(pieces,esc,i+1,rules,":",piece,params,paramLen)||recurseNamedUrl(pieces,esc,pieces.length,rules,"*",pieces.slice(i).join("/"),params,paramLen)}}function recurseNamedUrl(pieces,esc,i,rules,key,val,params,paramLen){params.length=paramLen;var subRules=rules[key];return subRules&&params.push([subRules["~"],val]),recurseUrl(pieces,esc,i,subRules,params)}function add(route,handler){for(var pieces=route.split("/"),rules=routes,i=+("/"===route[0]);i<pieces.length;++i){var piece=pieces[i],name=":"==piece[0]?":":"*"==piece[0]?"*":piece.toLowerCase();rules=rules[name]||(rules[name]={}),(":"==name||"*"==name)&&(rules["~"]=piece.slice(1))}rules["@"]=handler}}},(define=(root=this)&&root.define)&&define.amd?define("rlite",[],factory):module.exports?module.exports=factory():root.Rlite=factory()},function(module,exports,__webpack_require__){(function(global){var factory;factory=function(){"use strict";var toStringFunction=Function.prototype.toString,create=Object.create,defineProperty=Object.defineProperty,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getPrototypeOf=Object.getPrototypeOf,_a=Object.prototype,hasOwnProperty=_a.hasOwnProperty,propertyIsEnumerable=_a.propertyIsEnumerable,SUPPORTS_SYMBOL_PROPERTIES="function"==typeof getOwnPropertySymbols,SUPPORTS_WEAKMAP="function"==typeof WeakMap,getCleanClone=function(object,realm){if(!object.constructor)return create(null);var Constructor=object.constructor,prototype=object.__proto__||getPrototypeOf(object);if(Constructor===realm.Object)return prototype===realm.Object.prototype?{}:create(prototype);if(~toStringFunction.call(Constructor).indexOf("[native code]"))try{return new Constructor}catch(_a){}return create(prototype)},getObjectCloneLoose=function(object,realm,handleCopy,cache){var clone=getCleanClone(object,realm);for(var key in cache.set(object,clone),object)hasOwnProperty.call(object,key)&&(clone[key]=handleCopy(object[key],cache));if(SUPPORTS_SYMBOL_PROPERTIES){var symbols=getOwnPropertySymbols(object),length_1=symbols.length;if(length_1)for(var index=0,symbol=void 0;index<length_1;index++)symbol=symbols[index],propertyIsEnumerable.call(object,symbol)&&(clone[symbol]=handleCopy(object[symbol],cache))}return clone},getObjectCloneStrict=function(object,realm,handleCopy,cache){var clone=getCleanClone(object,realm);cache.set(object,clone);var properties=SUPPORTS_SYMBOL_PROPERTIES?getOwnPropertyNames(object).concat(getOwnPropertySymbols(object)):getOwnPropertyNames(object),length=properties.length;if(length)for(var index=0,property=void 0,descriptor=void 0;index<length;index++)if("callee"!==(property=properties[index])&&"caller"!==property)if(descriptor=getOwnPropertyDescriptor(object,property)){descriptor.get||descriptor.set||(descriptor.value=handleCopy(object[property],cache));try{defineProperty(clone,property,descriptor)}catch(error){clone[property]=descriptor.value}}else clone[property]=handleCopy(object[property],cache);return clone},isArray=Array.isArray,GLOBAL_THIS="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:void(console&&console.error&&console.error('Unable to locate global object, returning "this".'));function copy(object,options){var isStrict=!(!options||!options.isStrict),realm=options&&options.realm||GLOBAL_THIS,getObjectClone=isStrict?getObjectCloneStrict:getObjectCloneLoose,handleCopy=function(object,cache){if(!object||"object"!=typeof object)return object;if(cache.has(object))return cache.get(object);var clone,regExp,flags,Constructor=object.constructor;if(Constructor===realm.Object)return getObjectClone(object,realm,handleCopy,cache);if(isArray(object)){if(isStrict)return getObjectCloneStrict(object,realm,handleCopy,cache);var length_1=object.length;clone=new Constructor,cache.set(object,clone);for(var index=0;index<length_1;index++)clone[index]=handleCopy(object[index],cache);return clone}if(object instanceof realm.Date)return new Constructor(object.getTime());if(object instanceof realm.RegExp)return(clone=new Constructor(object.source,object.flags||(flags="",(regExp=object).global&&(flags+="g"),regExp.ignoreCase&&(flags+="i"),regExp.multiline&&(flags+="m"),regExp.unicode&&(flags+="u"),regExp.sticky&&(flags+="y"),flags))).lastIndex=object.lastIndex,clone;if(realm.Map&&object instanceof realm.Map)return clone=new Constructor,cache.set(object,clone),object.forEach((function(value,key){clone.set(key,handleCopy(value,cache))})),clone;if(realm.Set&&object instanceof realm.Set)return clone=new Constructor,cache.set(object,clone),object.forEach((function(value){clone.add(handleCopy(value,cache))})),clone;if(realm.Blob&&object instanceof realm.Blob)return clone=new Blob([object],{type:object.type});if(realm.Buffer&&realm.Buffer.isBuffer(object))return clone=realm.Buffer.allocUnsafe?realm.Buffer.allocUnsafe(object.length):new Constructor(object.length),cache.set(object,clone),object.copy(clone),clone;if(realm.ArrayBuffer){if(realm.ArrayBuffer.isView(object))return clone=new Constructor(object.buffer.slice(0)),cache.set(object,clone),clone;if(object instanceof realm.ArrayBuffer)return clone=object.slice(0),cache.set(object,clone),clone}return"function"==typeof object.then||object instanceof Error||realm.WeakMap&&object instanceof realm.WeakMap||realm.WeakSet&&object instanceof realm.WeakSet?object:getObjectClone(object,realm,handleCopy,cache)};return handleCopy(object,function(){if(SUPPORTS_WEAKMAP)return new WeakMap;var object=create({has:function(key){return!!~object._keys.indexOf(key)},set:function(key,value){object._keys.push(key),object._values.push(value)},get:function(key){return object._values[object._keys.indexOf(key)]}});return object._keys=[],object._values=[],object}())}return copy.strict=function(object,options){return copy(object,{isStrict:!0,realm:options?options.realm:void 0})},copy},module.exports=factory()}).call(this,__webpack_require__(86))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return orgsAndUsers})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getUserById})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getOrgById})),__webpack_require__.d(__webpack_exports__,"a",(function(){return changeActive}));var svue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_router_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_api_orgAndUser__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(26),_projects__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(36),_search_search__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(16),_manager_layout__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8),_util_wrapLoad__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(10),_toast__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(34);const orgsAndUsers=new svue__WEBPACK_IMPORTED_MODULE_0__.a({data:()=>({me:null,selfOrgs:null,usersById:{},orgsById:{},projects:_projects__WEBPACK_IMPORTED_MODULE_3__.h,router:_router_router__WEBPACK_IMPORTED_MODULE_1__.e,hasInited:!1,hasInitedProjects:!1}),watch:{"router.resolvedRoute"(){const route=_router_router__WEBPACK_IMPORTED_MODULE_1__.e.resolvedRoute;null==route||"app"!=route.name&&"home"!=route.name&&"default"!=route.name||(this.hasInited?reroute(route):(this.hasInited=!0,async function(callback=null){if(orgsAndUsers.me=await Object(_api_orgAndUser__WEBPACK_IMPORTED_MODULE_2__.d)(),null!=orgsAndUsers.me){orgsAndUsers.usersById[orgsAndUsers.me.id]=orgsAndUsers.me,orgsAndUsers.selfOrgs=await Object(_api_orgAndUser__WEBPACK_IMPORTED_MODULE_2__.f)(orgsAndUsers.me.organizations);for(let i=0;i<orgsAndUsers.selfOrgs.length;i++){const org=orgsAndUsers.selfOrgs[i];orgsAndUsers.orgsById[org.id]=org}orgsAndUsers.usersById=orgsAndUsers.usersById,orgsAndUsers.orgsById=orgsAndUsers.orgsById}null!=callback&&callback()}(()=>reroute(route))),initProjectsIfNecessary(route),null==route||"app"!=route.name||null==this.me||this.hasInitedProjects||(this.hasInitedProjects=!0,Object(_projects__WEBPACK_IMPORTED_MODULE_3__.g)(this.me)))},me(){initProjectsIfNecessary(_router_router__WEBPACK_IMPORTED_MODULE_1__.e.resolvedRoute)}},computed:{loggedIn:me=>null!=me,isStaff:me=>null!=me&&1==me.is_staff,isVerified:me=>null!=me&&me.verified_journalist}});function reroute(route){null!=route&&("app"==route.name&&null==route.props.q?null!=orgsAndUsers.me?Object(_router_router__WEBPACK_IMPORTED_MODULE_1__.d)(Object(_search_search__WEBPACK_IMPORTED_MODULE_4__.j)(orgsAndUsers.me)):Object(_router_router__WEBPACK_IMPORTED_MODULE_1__.d)(Object(_search_search__WEBPACK_IMPORTED_MODULE_4__.a)()):"default"==route.name&&(null!=orgsAndUsers.me?Object(_router_router__WEBPACK_IMPORTED_MODULE_1__.d)(Object(_search_search__WEBPACK_IMPORTED_MODULE_4__.j)(orgsAndUsers.me)):Object(_router_router__WEBPACK_IMPORTED_MODULE_1__.c)("home")))}function initProjectsIfNecessary(route){null!=route&&("app"!=route.name||null==orgsAndUsers.me||orgsAndUsers.hasInitedProjects||(orgsAndUsers.hasInitedProjects=!0,Object(_projects__WEBPACK_IMPORTED_MODULE_3__.g)(orgsAndUsers.me)))}async function getUserById(id){try{const user=await Object(_api_orgAndUser__WEBPACK_IMPORTED_MODULE_2__.g)(id);return orgsAndUsers.usersById[user.id]=user,orgsAndUsers.usersById=orgsAndUsers.usersById,user}catch(e){return null}}async function getOrgById(id){try{const org=await Object(_api_orgAndUser__WEBPACK_IMPORTED_MODULE_2__.e)(id);return orgsAndUsers.orgsById[org.id]=org,orgsAndUsers.orgsById=orgsAndUsers.orgsById,org}catch(e){return null}}async function changeActive(org){null!=orgsAndUsers.me&&orgsAndUsers.me.organization.id!=org.id&&await Object(_util_wrapLoad__WEBPACK_IMPORTED_MODULE_6__.a)(_manager_layout__WEBPACK_IMPORTED_MODULE_5__.o,async()=>{await Object(_api_orgAndUser__WEBPACK_IMPORTED_MODULE_2__.c)(org.id),orgsAndUsers.me.organization=org,orgsAndUsers.me=orgsAndUsers.me,Object(_toast__WEBPACK_IMPORTED_MODULE_7__.b)("Successfully changed active organization")})}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(93)},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(13),bind=__webpack_require__(48),Axios=__webpack_require__(68),mergeConfig=__webpack_require__(55);function createInstance(defaultConfig){var context=new Axios(defaultConfig),instance=bind(Axios.prototype.request,context);return utils.extend(instance,Axios.prototype,context),utils.extend(instance,context),instance}var axios=createInstance(__webpack_require__(51));axios.Axios=Axios,axios.create=function(instanceConfig){return createInstance(mergeConfig(axios.defaults,instanceConfig))},axios.Cancel=__webpack_require__(56),axios.CancelToken=__webpack_require__(81),axios.isCancel=__webpack_require__(50),axios.all=function(promises){return Promise.all(promises)},axios.spread=__webpack_require__(82),module.exports=axios,module.exports.default=axios},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(13),buildURL=__webpack_require__(49),InterceptorManager=__webpack_require__(69),dispatchRequest=__webpack_require__(70),mergeConfig=__webpack_require__(55);function Axios(instanceConfig){this.defaults=instanceConfig,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios.prototype.request=function(config){"string"==typeof config?(config=arguments[1]||{}).url=arguments[0]:config=config||{},(config=mergeConfig(this.defaults,config)).method?config.method=config.method.toLowerCase():this.defaults.method?config.method=this.defaults.method.toLowerCase():config.method="get";var chain=[dispatchRequest,void 0],promise=Promise.resolve(config);for(this.interceptors.request.forEach((function(interceptor){chain.unshift(interceptor.fulfilled,interceptor.rejected)})),this.interceptors.response.forEach((function(interceptor){chain.push(interceptor.fulfilled,interceptor.rejected)}));chain.length;)promise=promise.then(chain.shift(),chain.shift());return promise},Axios.prototype.getUri=function(config){return config=mergeConfig(this.defaults,config),buildURL(config.url,config.params,config.paramsSerializer).replace(/^\?/,"")},utils.forEach(["delete","get","head","options"],(function(method){Axios.prototype[method]=function(url,config){return this.request(utils.merge(config||{},{method:method,url:url}))}})),utils.forEach(["post","put","patch"],(function(method){Axios.prototype[method]=function(url,data,config){return this.request(utils.merge(config||{},{method:method,url:url,data:data}))}})),module.exports=Axios},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(13);function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function(fulfilled,rejected){return this.handlers.push({fulfilled:fulfilled,rejected:rejected}),this.handlers.length-1},InterceptorManager.prototype.eject=function(id){this.handlers[id]&&(this.handlers[id]=null)},InterceptorManager.prototype.forEach=function(fn){utils.forEach(this.handlers,(function(h){null!==h&&fn(h)}))},module.exports=InterceptorManager},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(13),transformData=__webpack_require__(71),isCancel=__webpack_require__(50),defaults=__webpack_require__(51);function throwIfCancellationRequested(config){config.cancelToken&&config.cancelToken.throwIfRequested()}module.exports=function(config){return throwIfCancellationRequested(config),config.headers=config.headers||{},config.data=transformData(config.data,config.headers,config.transformRequest),config.headers=utils.merge(config.headers.common||{},config.headers[config.method]||{},config.headers),utils.forEach(["delete","get","head","post","put","patch","common"],(function(method){delete config.headers[method]})),(config.adapter||defaults.adapter)(config).then((function(response){return throwIfCancellationRequested(config),response.data=transformData(response.data,response.headers,config.transformResponse),response}),(function(reason){return isCancel(reason)||(throwIfCancellationRequested(config),reason&&reason.response&&(reason.response.data=transformData(reason.response.data,reason.response.headers,config.transformResponse))),Promise.reject(reason)}))}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(13);module.exports=function(data,headers,fns){return utils.forEach(fns,(function(fn){data=fn(data,headers)})),data}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(13);module.exports=function(headers,normalizedName){utils.forEach(headers,(function(value,name){name!==normalizedName&&name.toUpperCase()===normalizedName.toUpperCase()&&(headers[normalizedName]=value,delete headers[name])}))}},function(module,exports,__webpack_require__){"use strict";var createError=__webpack_require__(54);module.exports=function(resolve,reject,response){var validateStatus=response.config.validateStatus;!validateStatus||validateStatus(response.status)?resolve(response):reject(createError("Request failed with status code "+response.status,response.config,null,response.request,response))}},function(module,exports,__webpack_require__){"use strict";module.exports=function(error,config,code,request,response){return error.config=config,code&&(error.code=code),error.request=request,error.response=response,error.isAxiosError=!0,error.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},error}},function(module,exports,__webpack_require__){"use strict";var isAbsoluteURL=__webpack_require__(76),combineURLs=__webpack_require__(77);module.exports=function(baseURL,requestedURL){return baseURL&&!isAbsoluteURL(requestedURL)?combineURLs(baseURL,requestedURL):requestedURL}},function(module,exports,__webpack_require__){"use strict";module.exports=function(url){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(url)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(baseURL,relativeURL){return relativeURL?baseURL.replace(/\/+$/,"")+"/"+relativeURL.replace(/^\/+/,""):baseURL}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(13),ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];module.exports=function(headers){var key,val,i,parsed={};return headers?(utils.forEach(headers.split("\n"),(function(line){if(i=line.indexOf(":"),key=utils.trim(line.substr(0,i)).toLowerCase(),val=utils.trim(line.substr(i+1)),key){if(parsed[key]&&ignoreDuplicateOf.indexOf(key)>=0)return;parsed[key]="set-cookie"===key?(parsed[key]?parsed[key]:[]).concat([val]):parsed[key]?parsed[key]+", "+val:val}})),parsed):parsed}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(13);module.exports=utils.isStandardBrowserEnv()?function(){var originURL,msie=/(msie|trident)/i.test(navigator.userAgent),urlParsingNode=document.createElement("a");function resolveURL(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}return originURL=resolveURL(window.location.href),function(requestURL){var parsed=utils.isString(requestURL)?resolveURL(requestURL):requestURL;return parsed.protocol===originURL.protocol&&parsed.host===originURL.host}}():function(){return!0}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(13);module.exports=utils.isStandardBrowserEnv()?{write:function(name,value,expires,path,domain,secure){var cookie=[];cookie.push(name+"="+encodeURIComponent(value)),utils.isNumber(expires)&&cookie.push("expires="+new Date(expires).toGMTString()),utils.isString(path)&&cookie.push("path="+path),utils.isString(domain)&&cookie.push("domain="+domain),!0===secure&&cookie.push("secure"),document.cookie=cookie.join("; ")},read:function(name){var match=document.cookie.match(new RegExp("(^|;\\s*)("+name+")=([^;]*)"));return match?decodeURIComponent(match[3]):null},remove:function(name){this.write(name,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(module,exports,__webpack_require__){"use strict";var Cancel=__webpack_require__(56);function CancelToken(executor){if("function"!=typeof executor)throw new TypeError("executor must be a function.");var resolvePromise;this.promise=new Promise((function(resolve){resolvePromise=resolve}));var token=this;executor((function(message){token.reason||(token.reason=new Cancel(message),resolvePromise(token.reason))}))}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.source=function(){var cancel;return{token:new CancelToken((function(c){cancel=c})),cancel:cancel}},module.exports=CancelToken},function(module,exports,__webpack_require__){"use strict";module.exports=function(callback){return function(arr){return callback.apply(null,arr)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNetworkError=isNetworkError,exports.isRetryableError=isRetryableError,exports.isSafeRequestError=isSafeRequestError,exports.isIdempotentRequestError=isIdempotentRequestError,exports.isNetworkOrIdempotentRequestError=isNetworkOrIdempotentRequestError,exports.exponentialDelay=exponentialDelay,exports.default=axiosRetry;var obj,_isRetryAllowed=__webpack_require__(84),_isRetryAllowed2=(obj=_isRetryAllowed)&&obj.__esModule?obj:{default:obj};function isNetworkError(error){return!error.response&&Boolean(error.code)&&"ECONNABORTED"!==error.code&&(0,_isRetryAllowed2.default)(error)}var SAFE_HTTP_METHODS=["get","head","options"],IDEMPOTENT_HTTP_METHODS=SAFE_HTTP_METHODS.concat(["put","delete"]);function isRetryableError(error){return"ECONNABORTED"!==error.code&&(!error.response||error.response.status>=500&&error.response.status<=599)}function isSafeRequestError(error){return!!error.config&&(isRetryableError(error)&&-1!==SAFE_HTTP_METHODS.indexOf(error.config.method))}function isIdempotentRequestError(error){return!!error.config&&(isRetryableError(error)&&-1!==IDEMPOTENT_HTTP_METHODS.indexOf(error.config.method))}function isNetworkOrIdempotentRequestError(error){return isNetworkError(error)||isIdempotentRequestError(error)}function noDelay(){return 0}function exponentialDelay(){var retryNumber=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,delay=100*Math.pow(2,retryNumber),randomSum=.2*delay*Math.random();return delay+randomSum}function getCurrentState(config){var currentState=config["axios-retry"]||{};return currentState.retryCount=currentState.retryCount||0,config["axios-retry"]=currentState,currentState}function axiosRetry(axios,defaultOptions){axios.interceptors.request.use((function(config){return getCurrentState(config).lastRequestTime=Date.now(),config})),axios.interceptors.response.use(null,(function(error){var config=error.config;if(!config)return Promise.reject(error);var _getRequestOptions=function(config,defaultOptions){return Object.assign({},defaultOptions,config["axios-retry"])}(config,defaultOptions),_getRequestOptions$re=_getRequestOptions.retries,retries=void 0===_getRequestOptions$re?3:_getRequestOptions$re,_getRequestOptions$re2=_getRequestOptions.retryCondition,retryCondition=void 0===_getRequestOptions$re2?isNetworkOrIdempotentRequestError:_getRequestOptions$re2,_getRequestOptions$re3=_getRequestOptions.retryDelay,retryDelay=void 0===_getRequestOptions$re3?noDelay:_getRequestOptions$re3,_getRequestOptions$sh=_getRequestOptions.shouldResetTimeout,shouldResetTimeout=void 0!==_getRequestOptions$sh&&_getRequestOptions$sh,currentState=getCurrentState(config);if(retryCondition(error)&&currentState.retryCount<retries){currentState.retryCount+=1;var delay=retryDelay(currentState.retryCount,error);if(function(axios,config){axios.defaults.agent===config.agent&&delete config.agent,axios.defaults.httpAgent===config.httpAgent&&delete config.httpAgent,axios.defaults.httpsAgent===config.httpsAgent&&delete config.httpsAgent}(axios,config),!shouldResetTimeout&&config.timeout&&currentState.lastRequestTime){var lastRequestDuration=Date.now()-currentState.lastRequestTime;config.timeout=Math.max(config.timeout-lastRequestDuration-delay,1)}return config.transformRequest=[function(data){return data}],new Promise((function(resolve){return setTimeout((function(){return resolve(axios(config))}),delay)}))}return Promise.reject(error)}))}axiosRetry.isNetworkError=isNetworkError,axiosRetry.isSafeRequestError=isSafeRequestError,axiosRetry.isIdempotentRequestError=isIdempotentRequestError,axiosRetry.isNetworkOrIdempotentRequestError=isNetworkOrIdempotentRequestError,axiosRetry.exponentialDelay=exponentialDelay,axiosRetry.isRetryableError=isRetryableError},function(module,exports,__webpack_require__){"use strict";var WHITELIST=["ETIMEDOUT","ECONNRESET","EADDRINUSE","ESOCKETTIMEDOUT","ECONNREFUSED","EPIPE","EHOSTUNREACH","EAI_AGAIN"],BLACKLIST=["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED"];module.exports=function(err){return!err||!err.code||(-1!==WHITELIST.indexOf(err.code)||-1===BLACKLIST.indexOf(err.code))}},function(module,exports,__webpack_require__){},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports,__webpack_require__){"use strict";function peg$SyntaxError(message,expected,found,location){this.message=message,this.expected=expected,this.found=found,this.location=location,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}!function(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor}(peg$SyntaxError,Error),peg$SyntaxError.buildMessage=function(expected,found){var DESCRIBE_EXPECTATION_FNS={literal:function(expectation){return'"'+literalEscape(expectation.text)+'"'},class:function(expectation){var i,escapedParts="";for(i=0;i<expectation.parts.length;i++)escapedParts+=expectation.parts[i]instanceof Array?classEscape(expectation.parts[i][0])+"-"+classEscape(expectation.parts[i][1]):classEscape(expectation.parts[i]);return"["+(expectation.inverted?"^":"")+escapedParts+"]"},any:function(expectation){return"any character"},end:function(expectation){return"end of input"},other:function(expectation){return expectation.description}};function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}function literalEscape(s){return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(ch){return"\\x0"+hex(ch)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(ch){return"\\x"+hex(ch)}))}function classEscape(s){return s.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(ch){return"\\x0"+hex(ch)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(ch){return"\\x"+hex(ch)}))}return"Expected "+function(expected){var i,j,expectation,descriptions=new Array(expected.length);for(i=0;i<expected.length;i++)descriptions[i]=(expectation=expected[i],DESCRIBE_EXPECTATION_FNS[expectation.type](expectation));if(descriptions.sort(),descriptions.length>0){for(i=1,j=1;i<descriptions.length;i++)descriptions[i-1]!==descriptions[i]&&(descriptions[j]=descriptions[i],j++);descriptions.length=j}switch(descriptions.length){case 1:return descriptions[0];case 2:return descriptions[0]+" or "+descriptions[1];default:return descriptions.slice(0,-1).join(", ")+", or "+descriptions[descriptions.length-1]}}(expected)+" but "+function(found){return found?'"'+literalEscape(found)+'"':"end of input"}(found)+" found."},module.exports={SyntaxError:peg$SyntaxError,parse:function(input,options){options=void 0!==options?options:{};var peg$result,peg$FAILED={},peg$startRuleFunctions={start:peg$parsestart},peg$startRuleFunction=peg$parsestart,peg$c8=peg$literalExpectation("(",!1),peg$c10=peg$literalExpectation(")",!1),peg$c15=/^[:]/,peg$c16=peg$classExpectation([":"],!1,!1),peg$c22=peg$literalExpectation("\\",!1),peg$c23=function(sequence){return"\\"+sequence},peg$c25=peg$literalExpectation(".",!1),peg$c26=/^[^ \t\r\n\f{}()"\/\^~[\]]/,peg$c27=peg$classExpectation([" ","\t","\r","\n","\f","{","}","(",")",'"',"/","^","~","[","]"],!0,!1),peg$c30=/^[^: \t\r\n\f{}()"\/\^~[\]]/,peg$c31=peg$classExpectation([":"," ","\t","\r","\n","\f","{","}","(",")",'"',"/","^","~","[","]"],!0,!1),peg$c33=peg$literalExpectation('"',!1),peg$c36=peg$literalExpectation("/",!1),peg$c38={type:"any"},peg$c41=peg$literalExpectation("+",!1),peg$c43=peg$literalExpectation("-",!1),peg$c45=peg$literalExpectation("!",!1),peg$c47=peg$literalExpectation("{",!1),peg$c49=peg$literalExpectation("}",!1),peg$c51=peg$literalExpectation("[",!1),peg$c53=peg$literalExpectation("]",!1),peg$c55=peg$literalExpectation("^",!1),peg$c57=peg$literalExpectation("?",!1),peg$c59=peg$literalExpectation(":",!1),peg$c61=peg$literalExpectation("&",!1),peg$c63=peg$literalExpectation("|",!1),peg$c65=peg$literalExpectation("'",!1),peg$c67=peg$literalExpectation("~",!1),peg$c69=peg$literalExpectation("*",!1),peg$c71=peg$literalExpectation(" ",!1),peg$c76=peg$literalExpectation("0.",!1),peg$c77=/^[0-9]/,peg$c78=peg$classExpectation([["0","9"]],!1,!1),peg$c82=peg$literalExpectation("TO",!1),peg$c89=peg$literalExpectation("OR NOT",!1),peg$c91=peg$literalExpectation("AND NOT",!1),peg$c93=peg$literalExpectation("OR",!1),peg$c95=peg$literalExpectation("AND",!1),peg$c97=peg$literalExpectation("NOT",!1),peg$c99=peg$literalExpectation("||",!1),peg$c101=peg$literalExpectation("&&",!1),peg$c102=peg$otherExpectation("whitespace"),peg$c103=/^[ \t\r\n\f]/,peg$c104=peg$classExpectation([" ","\t","\r","\n","\f"],!1,!1),peg$currPos=0,peg$savedPos=0,peg$posDetailsCache=[{line:1,column:1}],peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions))throw new Error("Can't start parsing from rule \""+options.startRule+'".');peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function location(){return peg$computeLocation(peg$savedPos,peg$currPos)}function peg$literalExpectation(text,ignoreCase){return{type:"literal",text:text,ignoreCase:ignoreCase}}function peg$classExpectation(parts,inverted,ignoreCase){return{type:"class",parts:parts,inverted:inverted,ignoreCase:ignoreCase}}function peg$otherExpectation(description){return{type:"other",description:description}}function peg$computePosDetails(pos){var p,details=peg$posDetailsCache[pos];if(details)return details;for(p=pos-1;!peg$posDetailsCache[p];)p--;for(details={line:(details=peg$posDetailsCache[p]).line,column:details.column};p<pos;)10===input.charCodeAt(p)?(details.line++,details.column=1):details.column++,p++;return peg$posDetailsCache[pos]=details,details}function peg$computeLocation(startPos,endPos){var startPosDetails=peg$computePosDetails(startPos),endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}}}function peg$fail(expected){peg$currPos<peg$maxFailPos||(peg$currPos>peg$maxFailPos&&(peg$maxFailPos=peg$currPos,peg$maxFailExpected=[]),peg$maxFailExpected.push(expected))}function peg$buildStructuredError(expected,found,location){return new peg$SyntaxError(peg$SyntaxError.buildMessage(expected,found),expected,found,location)}function peg$parsestart(){var s0,s1,s2,s3;for(s0=peg$currPos,s1=[],s2=peg$parse_();s2!==peg$FAILED;)s1.push(s2),s2=peg$parse_();if(s1!==peg$FAILED){if(s2=[],(s3=peg$parsenode())!==peg$FAILED)for(;s3!==peg$FAILED;)s2.push(s3),s3=peg$parsenode();else s2=peg$FAILED;s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=s2[0]):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;if(s0===peg$FAILED){for(s0=peg$currPos,s1=[],s2=peg$parse_();s2!==peg$FAILED;)s1.push(s2),s2=peg$parse_();s1!==peg$FAILED&&(peg$savedPos=s0,s1={}),(s0=s1)===peg$FAILED&&(s0=peg$currPos,(s1=peg$parseEOF())!==peg$FAILED&&(peg$savedPos=s0,s1={}),s0=s1)}return s0}function peg$parsenode(){var s0,s1,s2,s3,s4,s5;if(s0=peg$currPos,(s1=peg$parseoperator_exp())!==peg$FAILED&&(s2=peg$parseEOF())!==peg$FAILED?(peg$savedPos=s0,s0=s1={operator:s1}):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED){if(s0=peg$currPos,(s1=peg$parseoperator_exp())!==peg$FAILED)if((s2=peg$parsegroup_exp())!==peg$FAILED){for(s3=[],s4=peg$parseoperator_exp();s4!==peg$FAILED;)s3.push(s4),s4=peg$parseoperator_exp();if(s3!==peg$FAILED){for(s4=[],s5=peg$parsenode();s5!==peg$FAILED;)s4.push(s5),s5=peg$parsenode();s4!==peg$FAILED?(peg$savedPos=s0,s0=s1=function(start,left,operator,right){var node={start:start,left:left};return null!=(right=0==right.length?null:null==right[0].right?right[0].left:right[0])&&(node.operator=""==operator?"<implicit>":operator[0],node.right=right),node}(s1,s2,s3,s4)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;if(s0===peg$FAILED&&(s0=peg$currPos,(s1=peg$parseoperator_exp())!==peg$FAILED&&(s2=peg$parsenode())!==peg$FAILED?(peg$savedPos=s0,s0=s1=s2):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED))if(s0=peg$currPos,(s1=peg$parsegroup_exp())!==peg$FAILED){for(s2=[],s3=peg$parseoperator_exp();s3!==peg$FAILED;)s2.push(s3),s3=peg$parseoperator_exp();if(s2!==peg$FAILED){for(s3=[],s4=peg$parsenode();s4!==peg$FAILED;)s3.push(s4),s4=peg$parsenode();s3!==peg$FAILED?(peg$savedPos=s0,s0=s1=function(left,operator,right){var node={left:left};return null!=(right=0==right.length?null:null==right[0].right?right[0].left:right[0])&&(node.operator=""==operator?"<implicit>":operator[0],node.right=right),node}(s1,s2,s3)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED}return s0}function peg$parsegroup_exp(){var s0,s1,s2,s3;if(s0=peg$currPos,(s1=function(){var s0,s1,s2;s0=peg$currPos,(s1=peg$parsefieldname())===peg$FAILED&&(s1=null);s1!==peg$FAILED&&(s2=function(){var s0,s1,s2,s3,s4,s5,s6,s7;s0=peg$currPos,91===input.charCodeAt(peg$currPos)?(s1="[",peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c51));if(s1!==peg$FAILED)if((s2=peg$parseranged_term())!==peg$FAILED){for(s3=[],s4=peg$parse_();s4!==peg$FAILED;)s3.push(s4),s4=peg$parse_();if(s3!==peg$FAILED)if("TO"===input.substr(peg$currPos,2)?(s4="TO",peg$currPos+=2):(s4=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c82)),s4!==peg$FAILED){if(s5=[],(s6=peg$parse_())!==peg$FAILED)for(;s6!==peg$FAILED;)s5.push(s6),s6=peg$parse_();else s5=peg$FAILED;s5!==peg$FAILED&&(s6=peg$parseranged_term())!==peg$FAILED?(93===input.charCodeAt(peg$currPos)?(s7="]",peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c53)),s7!==peg$FAILED?(peg$savedPos=s0,s0=s1={term_min:s2,term_max:s6,inclusive:"both"}):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;if(s0===peg$FAILED){if(s0=peg$currPos,123===input.charCodeAt(peg$currPos)?(s1="{",peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c47)),s1!==peg$FAILED)if((s2=peg$parseranged_term())!==peg$FAILED){for(s3=[],s4=peg$parse_();s4!==peg$FAILED;)s3.push(s4),s4=peg$parse_();if(s3!==peg$FAILED)if("TO"===input.substr(peg$currPos,2)?(s4="TO",peg$currPos+=2):(s4=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c82)),s4!==peg$FAILED){if(s5=[],(s6=peg$parse_())!==peg$FAILED)for(;s6!==peg$FAILED;)s5.push(s6),s6=peg$parse_();else s5=peg$FAILED;s5!==peg$FAILED&&(s6=peg$parseranged_term())!==peg$FAILED?(125===input.charCodeAt(peg$currPos)?(s7="}",peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c49)),s7!==peg$FAILED?(peg$savedPos=s0,s1=function(term_min,term_max){return{term_min:term_min,term_max:term_max,inclusive:"none"}}(s2,s6),s0=s1):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;if(s0===peg$FAILED){if(s0=peg$currPos,91===input.charCodeAt(peg$currPos)?(s1="[",peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c51)),s1!==peg$FAILED)if((s2=peg$parseranged_term())!==peg$FAILED){for(s3=[],s4=peg$parse_();s4!==peg$FAILED;)s3.push(s4),s4=peg$parse_();if(s3!==peg$FAILED)if("TO"===input.substr(peg$currPos,2)?(s4="TO",peg$currPos+=2):(s4=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c82)),s4!==peg$FAILED){if(s5=[],(s6=peg$parse_())!==peg$FAILED)for(;s6!==peg$FAILED;)s5.push(s6),s6=peg$parse_();else s5=peg$FAILED;s5!==peg$FAILED&&(s6=peg$parseranged_term())!==peg$FAILED?(125===input.charCodeAt(peg$currPos)?(s7="}",peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c49)),s7!==peg$FAILED?(peg$savedPos=s0,s1=function(term_min,term_max){return{term_min:term_min,term_max:term_max,inclusive:"left"}}(s2,s6),s0=s1):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;if(s0===peg$FAILED)if(s0=peg$currPos,123===input.charCodeAt(peg$currPos)?(s1="{",peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c47)),s1!==peg$FAILED)if((s2=peg$parseranged_term())!==peg$FAILED){for(s3=[],s4=peg$parse_();s4!==peg$FAILED;)s3.push(s4),s4=peg$parse_();if(s3!==peg$FAILED)if("TO"===input.substr(peg$currPos,2)?(s4="TO",peg$currPos+=2):(s4=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c82)),s4!==peg$FAILED){if(s5=[],(s6=peg$parse_())!==peg$FAILED)for(;s6!==peg$FAILED;)s5.push(s6),s6=peg$parse_();else s5=peg$FAILED;s5!==peg$FAILED&&(s6=peg$parseranged_term())!==peg$FAILED?(93===input.charCodeAt(peg$currPos)?(s7="]",peg$currPos++):(s7=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c53)),s7!==peg$FAILED?(peg$savedPos=s0,s1=function(term_min,term_max){return{term_min:term_min,term_max:term_max,inclusive:"right"}}(s2,s6),s0=s1):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED}}return s0}())!==peg$FAILED?(peg$savedPos=s0,fieldname=s1,(range=s2).field=null==fieldname||""==fieldname.label?"<implicit>":fieldname.label,range.fieldLocation=null==fieldname||""==fieldname.label?null:fieldname.location,s0=s1=range):(peg$currPos=s0,s0=peg$FAILED);var fieldname,range;s0===peg$FAILED&&(s0=peg$currPos,(s1=peg$parsefieldname())!==peg$FAILED&&(s2=peg$parseparen_exp())!==peg$FAILED?(peg$savedPos=s0,s1=function(fieldname,node){return node.field=fieldname.label,node.fieldLocation=fieldname.location,node}(s1,s2),s0=s1):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED&&(s0=peg$currPos,(s1=peg$parsefieldname())===peg$FAILED&&(s1=null),s1!==peg$FAILED&&(s2=function(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos,(s1=peg$parseprefix_operator_exp())===peg$FAILED&&(s1=null);if(s1!==peg$FAILED)if((s2=function(){var s0,s1,s2,s3;s0=peg$currPos,34===input.charCodeAt(peg$currPos)?(s1='"',peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c33));if(s1!==peg$FAILED){for(s2=[],s3=peg$parseDoubleStringCharacter();s3!==peg$FAILED;)s2.push(s3),s3=peg$parseDoubleStringCharacter();s2!==peg$FAILED?(34===input.charCodeAt(peg$currPos)?(s3='"',peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c33)),s3!==peg$FAILED?(peg$savedPos=s0,s1=s2.join(""),s0=s1):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return s0}())!==peg$FAILED)if((s3=function(){var s0,s1,s2;s0=peg$currPos,126===input.charCodeAt(peg$currPos)?(s1="~",peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c67));s1!==peg$FAILED&&(s2=peg$parseint_exp())!==peg$FAILED?(peg$savedPos=s0,s0=s1=s2):(peg$currPos=s0,s0=peg$FAILED);return s0}())===peg$FAILED&&(s3=null),s3!==peg$FAILED)if((s4=peg$parseboost_modifier())===peg$FAILED&&(s4=null),s4!==peg$FAILED){for(s5=[],s6=peg$parse_();s6!==peg$FAILED;)s5.push(s6),s6=peg$parse_();s5!==peg$FAILED?(peg$savedPos=s0,op=s1,proximity=s3,boost=s4,result={term:s2,quoted:!0,regex:!1,termLocation:location()},""!=proximity&&(result.proximity=proximity),""!=boost&&(result.boost=boost),""!=op&&(result.prefix=op),s0=s1=result):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;var op,proximity,boost,result;if(s0===peg$FAILED){if(s0=peg$currPos,(s1=peg$parseprefix_operator_exp())===peg$FAILED&&(s1=null),s1!==peg$FAILED)if((s2=function(){var s0,s1,s2,s3;s0=peg$currPos,47===input.charCodeAt(peg$currPos)?(s1="/",peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c36));if(s1!==peg$FAILED){if(s2=[],(s3=peg$parseRegexCharacter())!==peg$FAILED)for(;s3!==peg$FAILED;)s2.push(s3),s3=peg$parseRegexCharacter();else s2=peg$FAILED;s2!==peg$FAILED?(47===input.charCodeAt(peg$currPos)?(s3="/",peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c36)),s3!==peg$FAILED?(peg$savedPos=s0,s1=s2.join(""),s0=s1):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return s0}())!==peg$FAILED){for(s3=[],s4=peg$parse_();s4!==peg$FAILED;)s3.push(s4),s4=peg$parse_();s3!==peg$FAILED?(peg$savedPos=s0,s1=function(op,term){return{term:term,quoted:!1,regex:!0,termLocation:location()}}(0,s2),s0=s1):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;if(s0===peg$FAILED)if(s0=peg$currPos,(s1=peg$parseprefix_operator_exp())===peg$FAILED&&(s1=null),s1!==peg$FAILED)if((s2=peg$parseunquoted_term())!==peg$FAILED)if((s3=function(){var s0,s1,s2;s0=peg$currPos,126===input.charCodeAt(peg$currPos)?(s1="~",peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c67));s1!==peg$FAILED?((s2=peg$parsedecimal_exp())===peg$FAILED&&(s2=null),s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=""==(fuzziness=s2)||null==fuzziness?.5:fuzziness):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED);var fuzziness;return s0}())===peg$FAILED&&(s3=null),s3!==peg$FAILED)if((s4=peg$parseboost_modifier())===peg$FAILED&&(s4=null),s4!==peg$FAILED){for(s5=[],s6=peg$parse_();s6!==peg$FAILED;)s5.push(s6),s6=peg$parse_();s5!==peg$FAILED?(peg$savedPos=s0,s1=function(op,term,similarity,boost){var result={term:term.label,quoted:!1,regex:!1,termLocation:location()};return""!=similarity&&(result.similarity=similarity),""!=boost&&(result.boost=boost),""!=op&&(result.prefix=op),result}(s1,s2,s3,s4),s0=s1):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED}return s0}())!==peg$FAILED?(peg$savedPos=s0,s1=function(fieldname,term){var fieldexp={field:null==fieldname||""==fieldname.label?"<implicit>":fieldname.label,fieldLocation:null==fieldname||""==fieldname.label?null:fieldname.location};for(var key in term)fieldexp[key]=term[key];return fieldexp}(s1,s2),s0=s1):(peg$currPos=s0,s0=peg$FAILED)));return s0}())!==peg$FAILED){for(s2=[],s3=peg$parse_();s3!==peg$FAILED;)s2.push(s3),s3=peg$parse_();s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=s1):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return s0===peg$FAILED&&(s0=peg$parseparen_exp()),s0}function peg$parseparen_exp(){var s0,s1,s2,s3,s4,s5,s6,node;if(s0=peg$currPos,40===input.charCodeAt(peg$currPos)?(s1="(",peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c8)),s1!==peg$FAILED){for(s2=[],s3=peg$parse_();s3!==peg$FAILED;)s2.push(s3),s3=peg$parse_();if(s2!==peg$FAILED){if(s3=[],(s4=peg$parsenode())!==peg$FAILED)for(;s4!==peg$FAILED;)s3.push(s4),s4=peg$parsenode();else s3=peg$FAILED;if(s3!==peg$FAILED)if(41===input.charCodeAt(peg$currPos)?(s4=")",peg$currPos++):(s4=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c10)),s4!==peg$FAILED){for(s5=[],s6=peg$parse_();s6!==peg$FAILED;)s5.push(s6),s6=peg$parse_();s5!==peg$FAILED?(peg$savedPos=s0,(node=s3)[0].parenthesized=!0,s0=s1=node[0]):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED}else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parsefieldname(){var s0,s1,s2,s3,s4,fieldname;if(s0=peg$currPos,(s1=peg$parseunquoted_term())!==peg$FAILED)if(peg$c15.test(input.charAt(peg$currPos))?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c16)),s2!==peg$FAILED){for(s3=[],s4=peg$parse_();s4!==peg$FAILED;)s3.push(s4),s4=peg$parse_();s3!==peg$FAILED?(peg$savedPos=s0,s0=s1={label:(fieldname=s1).label,location:fieldname.location}):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parserterm_char(){var s0,s1,s2;return s0=peg$currPos,92===input.charCodeAt(peg$currPos)?(s1="\\",peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c22)),s1!==peg$FAILED&&(s2=peg$parseEscapeSequence())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c23(s2)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED&&(46===input.charCodeAt(peg$currPos)?(s0=".",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c25)),s0===peg$FAILED&&(peg$c26.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c27)))),s0}function peg$parseranged_term(){var s0,s1,s2;if(s0=peg$currPos,s1=[],(s2=peg$parserterm_char())!==peg$FAILED)for(;s2!==peg$FAILED;)s1.push(s2),s2=peg$parserterm_char();else s1=peg$FAILED;return s1!==peg$FAILED&&(peg$savedPos=s0,s1=s1.join("")),s0=s1}function peg$parseunquoted_term(){var s0,s1,s2;if(s0=peg$currPos,s1=[],(s2=peg$parseterm_char())!==peg$FAILED)for(;s2!==peg$FAILED;)s1.push(s2),s2=peg$parseterm_char();else s1=peg$FAILED;return s1!==peg$FAILED&&(peg$savedPos=s0,s1={label:s1.join(""),location:location()}),s0=s1}function peg$parseterm_char(){var s0,s1,s2;return s0=peg$currPos,92===input.charCodeAt(peg$currPos)?(s1="\\",peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c22)),s1!==peg$FAILED&&(s2=peg$parseEscapeSequence())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c23(s2)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED&&(46===input.charCodeAt(peg$currPos)?(s0=".",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c25)),s0===peg$FAILED&&(peg$c30.test(input.charAt(peg$currPos))?(s0=input.charAt(peg$currPos),peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c31)))),s0}function peg$parseDoubleStringCharacter(){var s0,s1,s2;return s0=peg$currPos,s1=peg$currPos,peg$silentFails++,34===input.charCodeAt(peg$currPos)?(s2='"',peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c33)),s2===peg$FAILED&&(92===input.charCodeAt(peg$currPos)?(s2="\\",peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c22))),peg$silentFails--,s2===peg$FAILED?s1=void 0:(peg$currPos=s1,s1=peg$FAILED),s1!==peg$FAILED?(input.length>peg$currPos?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c38)),s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=s2):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED&&(s0=peg$currPos,92===input.charCodeAt(peg$currPos)?(s1="\\",peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c22)),s1!==peg$FAILED&&(s2=peg$parseEscapeSequence())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c23(s2)):(peg$currPos=s0,s0=peg$FAILED)),s0}function peg$parseRegexCharacter(){var s0,s1,s2;return s0=peg$currPos,s1=peg$currPos,peg$silentFails++,47===input.charCodeAt(peg$currPos)?(s2="/",peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c36)),s2===peg$FAILED&&(92===input.charCodeAt(peg$currPos)?(s2="\\",peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c22))),peg$silentFails--,s2===peg$FAILED?s1=void 0:(peg$currPos=s1,s1=peg$FAILED),s1!==peg$FAILED?(input.length>peg$currPos?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c38)),s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=s2):(peg$currPos=s0,s0=peg$FAILED)):(peg$currPos=s0,s0=peg$FAILED),s0===peg$FAILED&&(s0=peg$currPos,92===input.charCodeAt(peg$currPos)?(s1="\\",peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c22)),s1!==peg$FAILED&&(s2=peg$parseEscapeSequence())!==peg$FAILED?(peg$savedPos=s0,s0=s1=peg$c23(s2)):(peg$currPos=s0,s0=peg$FAILED)),s0}function peg$parseEscapeSequence(){var s0;return 43===input.charCodeAt(peg$currPos)?(s0="+",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c41)),s0===peg$FAILED&&(45===input.charCodeAt(peg$currPos)?(s0="-",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c43)),s0===peg$FAILED&&(33===input.charCodeAt(peg$currPos)?(s0="!",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c45)),s0===peg$FAILED&&(40===input.charCodeAt(peg$currPos)?(s0="(",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c8)),s0===peg$FAILED&&(41===input.charCodeAt(peg$currPos)?(s0=")",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c10)),s0===peg$FAILED&&(123===input.charCodeAt(peg$currPos)?(s0="{",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c47)),s0===peg$FAILED&&(125===input.charCodeAt(peg$currPos)?(s0="}",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c49)),s0===peg$FAILED&&(91===input.charCodeAt(peg$currPos)?(s0="[",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c51)),s0===peg$FAILED&&(93===input.charCodeAt(peg$currPos)?(s0="]",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c53)),s0===peg$FAILED&&(94===input.charCodeAt(peg$currPos)?(s0="^",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c55)),s0===peg$FAILED&&(34===input.charCodeAt(peg$currPos)?(s0='"',peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c33)),s0===peg$FAILED&&(63===input.charCodeAt(peg$currPos)?(s0="?",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c57)),s0===peg$FAILED&&(58===input.charCodeAt(peg$currPos)?(s0=":",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c59)),s0===peg$FAILED&&(92===input.charCodeAt(peg$currPos)?(s0="\\",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c22)),s0===peg$FAILED&&(38===input.charCodeAt(peg$currPos)?(s0="&",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c61)),s0===peg$FAILED&&(124===input.charCodeAt(peg$currPos)?(s0="|",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c63)),s0===peg$FAILED&&(39===input.charCodeAt(peg$currPos)?(s0="'",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c65)),s0===peg$FAILED&&(47===input.charCodeAt(peg$currPos)?(s0="/",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c36)),s0===peg$FAILED&&(126===input.charCodeAt(peg$currPos)?(s0="~",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c67)),s0===peg$FAILED&&(42===input.charCodeAt(peg$currPos)?(s0="*",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c69)),s0===peg$FAILED&&(32===input.charCodeAt(peg$currPos)?(s0=" ",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c71)))))))))))))))))))))),s0}function peg$parseboost_modifier(){var s0,s1,s2;return s0=peg$currPos,94===input.charCodeAt(peg$currPos)?(s1="^",peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c55)),s1!==peg$FAILED&&(s2=function(){var s0;(s0=peg$parsedecimal_exp())===peg$FAILED&&(s0=peg$parseint_exp());return s0}())!==peg$FAILED?(peg$savedPos=s0,s0=s1=s2):(peg$currPos=s0,s0=peg$FAILED),s0}function peg$parsedecimal_exp(){var s0,s1,s2,s3;if(s0=peg$currPos,"0."===input.substr(peg$currPos,2)?(s1="0.",peg$currPos+=2):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c76)),s1!==peg$FAILED){if(s2=[],peg$c77.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c78)),s3!==peg$FAILED)for(;s3!==peg$FAILED;)s2.push(s3),peg$c77.test(input.charAt(peg$currPos))?(s3=input.charAt(peg$currPos),peg$currPos++):(s3=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c78));else s2=peg$FAILED;s2!==peg$FAILED?(peg$savedPos=s0,s0=s1=parseFloat("0."+s2.join(""))):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;return s0}function peg$parseint_exp(){var s0,s1,s2;if(s0=peg$currPos,s1=[],peg$c77.test(input.charAt(peg$currPos))?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c78)),s2!==peg$FAILED)for(;s2!==peg$FAILED;)s1.push(s2),peg$c77.test(input.charAt(peg$currPos))?(s2=input.charAt(peg$currPos),peg$currPos++):(s2=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c78));else s1=peg$FAILED;return s1!==peg$FAILED&&(peg$savedPos=s0,s1=parseInt(s1.join(""))),s0=s1}function peg$parseoperator_exp(){var s0,s1,s2,s3,s4;for(s0=peg$currPos,s1=[],s2=peg$parse_();s2!==peg$FAILED;)s1.push(s2),s2=peg$parse_();if(s1!==peg$FAILED)if((s2=peg$parseoperator())!==peg$FAILED){if(s3=[],(s4=peg$parse_())!==peg$FAILED)for(;s4!==peg$FAILED;)s3.push(s4),s4=peg$parse_();else s3=peg$FAILED;s3!==peg$FAILED?(peg$savedPos=s0,s0=s1=s2):(peg$currPos=s0,s0=peg$FAILED)}else peg$currPos=s0,s0=peg$FAILED;else peg$currPos=s0,s0=peg$FAILED;if(s0===peg$FAILED){for(s0=peg$currPos,s1=[],s2=peg$parse_();s2!==peg$FAILED;)s1.push(s2),s2=peg$parse_();s1!==peg$FAILED&&(s2=peg$parseoperator())!==peg$FAILED&&(s3=peg$parseEOF())!==peg$FAILED?(peg$savedPos=s0,s0=s1=s2):(peg$currPos=s0,s0=peg$FAILED)}return s0}function peg$parseoperator(){var s0;return"OR NOT"===input.substr(peg$currPos,6)?(s0="OR NOT",peg$currPos+=6):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c89)),s0===peg$FAILED&&("AND NOT"===input.substr(peg$currPos,7)?(s0="AND NOT",peg$currPos+=7):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c91)),s0===peg$FAILED&&("OR"===input.substr(peg$currPos,2)?(s0="OR",peg$currPos+=2):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c93)),s0===peg$FAILED&&("AND"===input.substr(peg$currPos,3)?(s0="AND",peg$currPos+=3):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c95)),s0===peg$FAILED&&("NOT"===input.substr(peg$currPos,3)?(s0="NOT",peg$currPos+=3):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c97)),s0===peg$FAILED&&("||"===input.substr(peg$currPos,2)?(s0="||",peg$currPos+=2):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c99)),s0===peg$FAILED&&("&&"===input.substr(peg$currPos,2)?(s0="&&",peg$currPos+=2):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c101)))))))),s0}function peg$parseprefix_operator_exp(){var s0,s1,s2;for(s0=peg$currPos,s1=[],s2=peg$parse_();s2!==peg$FAILED;)s1.push(s2),s2=peg$parse_();return s1!==peg$FAILED&&(s2=function(){var s0;43===input.charCodeAt(peg$currPos)?(s0="+",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c41));s0===peg$FAILED&&(45===input.charCodeAt(peg$currPos)?(s0="-",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c43)),s0===peg$FAILED&&(33===input.charCodeAt(peg$currPos)?(s0="!",peg$currPos++):(s0=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c45))));return s0}())!==peg$FAILED?(peg$savedPos=s0,s0=s1=s2):(peg$currPos=s0,s0=peg$FAILED),s0}function peg$parse_(){var s0,s1;if(peg$silentFails++,s0=[],peg$c103.test(input.charAt(peg$currPos))?(s1=input.charAt(peg$currPos),peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c104)),s1!==peg$FAILED)for(;s1!==peg$FAILED;)s0.push(s1),peg$c103.test(input.charAt(peg$currPos))?(s1=input.charAt(peg$currPos),peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c104));else s0=peg$FAILED;return peg$silentFails--,s0===peg$FAILED&&(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c102)),s0}function peg$parseEOF(){var s0,s1;return s0=peg$currPos,peg$silentFails++,input.length>peg$currPos?(s1=input.charAt(peg$currPos),peg$currPos++):(s1=peg$FAILED,0===peg$silentFails&&peg$fail(peg$c38)),peg$silentFails--,s1===peg$FAILED?s0=void 0:(peg$currPos=s0,s0=peg$FAILED),s0}if((peg$result=peg$startRuleFunction())!==peg$FAILED&&peg$currPos===input.length)return peg$result;throw peg$result!==peg$FAILED&&peg$currPos<input.length&&peg$fail({type:"end"}),peg$buildStructuredError(peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos))}}},function(module,exports){function prefixCharWithBackslashes(char){return"\\"+char}function extractChar(match,char){return char}exports.escape=function(s){return s.replace(/[\+\-\!\(\)\{\}\[\]\^\"\?\:\\\&\|\'\/\s\*\~]/g,prefixCharWithBackslashes)},exports.unescape=function(s){return s.replace(/\\([\+\-\!\(\)\{\}\[\]\^\"\?\:\\\&\|\'\/\s\*\~])/g,extractChar)},exports.escapePhrase=function(s){return s.replace(/"/g,prefixCharWithBackslashes)},exports.unescapePhrase=function(s){return s.replace(/\\(")/g,extractChar)}},function(module,exports,__webpack_require__){"use strict";module.exports=function toString(ast){if(!ast)return"";var result="";return null!=ast.start&&(result+=(ast.parenthesized?"(":"")+ast.start+" "),ast.field&&"<implicit>"!==ast.field&&(result+=ast.field+":"),ast.left&&(ast.parenthesized&&!ast.start&&(result+="("),result+=toString(ast.left),ast.parenthesized&&!ast.right&&(result+=")")),ast.operator&&(ast.left&&(result+=" "),"<implicit>"!==ast.operator&&(result+=ast.operator)),ast.right&&(ast.operator&&"<implicit>"!==ast.operator&&(result+=" "),result+=toString(ast.right),ast.parenthesized&&(result+=")")),(ast.term||""===ast.term&&ast.quoted)&&(ast.prefix&&(result+=ast.prefix),ast.quoted?(result+='"',result+=ast.term,result+='"'):ast.regex?(result+="/",result+=ast.term,result+="/"):result+=ast.term,null!=ast.proximity&&(result+="~"+ast.proximity),null!=ast.boost&&(result+="^"+ast.boost)),ast.term_min&&("both"===ast.inclusive||"left"===ast.inclusive?result+="[":result+="{",result+=ast.term_min,result+=" TO ",result+=ast.term_max,"both"===ast.inclusive||"right"===ast.inclusive?result+="]":result+="}"),ast.similarity&&(result+="~",.5!==ast.similarity&&(result+=ast.similarity)),result}},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var internal=__webpack_require__(0),router=__webpack_require__(5),NotFound_svelte=__webpack_require__(60),util_lazyComponent=__webpack_require__(15),svelte=__webpack_require__(22),api_document=__webpack_require__(7),session=__webpack_require__(2),base=__webpack_require__(3),svue=__webpack_require__(4),structure_results=__webpack_require__(25);class entity_Entity extends svue.a{constructor(rawEntity,structure={}){super({data(){const data=null==structure.data?{}:structure.data();return data.rawEntity=rawEntity,data},computed:{...null==structure.computed?{}:structure.computed,entity:rawEntity=>rawEntity.entity,name:entity=>entity.name,kind:entity=>entity.kind,description:entity=>entity.description,mid:entity=>entity.mid,wikiUrl:entity=>entity.wikipedia_url,hasWikiUrl:wikiUrl=>wikiUrl.trim().length>0,occurrences:rawEntity=>rawEntity.occurrences,numOccurrences:occurrences=>occurrences.length}})}}class entity_Entities extends structure_results.a{constructor(url,rawEntities){super(url,rawEntities,{computed:{entities:results=>results.map(x=>new entity_Entity(x))}})}}var util_url=__webpack_require__(1);var viewer=__webpack_require__(43),string=__webpack_require__(12),Link_svelte=__webpack_require__(27);function callEveryAsync(fn,times){let count=0;return async()=>{count++%times==0&&await fn()}}const cache={};async function getE(id,page=1,filters=null,useCache=!0){const key=`${id},${JSON.stringify(filters)},${page}`;if(useCache&&null!=cache[key])return cache[key];const results=await async function(id,page=1,filters){const url=Object(base.a)(Object(util_url.d)(`documents/${id}/entities/`,{page:page,...filters})),{data:data}=await session.b.get(url);return new entity_Entities(url,data)}(id,page,filters);return cache[key]=results,results}const entities=new svue.a({data:()=>({document:null,entities:null}),computed:{pollEvents(document){return null==document||!document.readable&&null!=this.entities&&this.entities.count>0?[]:[callEveryAsync(async()=>{const doc=await Object(api_document.f)(document.id),newEntities=await getE(document.id,1,null,!1);this.entities=newEntities,this.document=doc},3)]}}});var documents=__webpack_require__(23),Progress_svelte=__webpack_require__(46),close_inline=__webpack_require__(45),close_inline_default=__webpack_require__.n(close_inline);__webpack_require__(91);function get_each_context(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[46]=list[i],child_ctx}function get_each_context_1(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[49]=list[i],child_ctx}function get_each_context_2(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[52]=list[i],child_ctx}function get_each_context_3(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[55]=list[i],child_ctx[57]=i,child_ctx}function create_default_slot_1(ctx){let t;return{c(){t=Object(internal.db)("Back")},m(target,anchor){Object(internal.H)(target,t,anchor)},d(detaching){detaching&&Object(internal.v)(t)}}}function create_else_block_1(ctx){let t;return{c(){t=Object(internal.db)("Loading...")},m(target,anchor){Object(internal.H)(target,t,anchor)},p:internal.M,i:internal.M,o:internal.M,d(detaching){detaching&&Object(internal.v)(t)}}}function create_if_block_5(ctx){let h2,t0,t1,t2,t3,current_block_type_index,if_block,if_block_anchor,current,t1_value=ctx[4].document.title+"";const if_block_creators=[create_if_block_6,create_else_block],if_blocks=[];function select_block_type_1(ctx,dirty){return ctx[4].document.readable?0:1}return current_block_type_index=select_block_type_1(ctx),if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),{c(){h2=Object(internal.w)("h2"),t0=Object(internal.db)("Entity extraction for "),t1=Object(internal.db)(t1_value),t2=Object(internal.db)(""),t3=Object(internal.ab)(),if_block.c(),if_block_anchor=Object(internal.x)()},m(target,anchor){Object(internal.H)(target,h2,anchor),Object(internal.g)(h2,t0),Object(internal.g)(h2,t1),Object(internal.g)(h2,t2),Object(internal.H)(target,t3,anchor),if_blocks[current_block_type_index].m(target,anchor),Object(internal.H)(target,if_block_anchor,anchor),current=!0},p(ctx,dirty){(!current||16&dirty[0])&&t1_value!==(t1_value=ctx[4].document.title+"")&&Object(internal.W)(t1,t1_value);let previous_block_index=current_block_type_index;current_block_type_index=select_block_type_1(ctx),current_block_type_index===previous_block_index?if_blocks[current_block_type_index].p(ctx,dirty):(Object(internal.E)(),Object(internal.ib)(if_blocks[previous_block_index],1,1,()=>{if_blocks[previous_block_index]=null}),Object(internal.n)(),if_block=if_blocks[current_block_type_index],if_block?if_block.p(ctx,dirty):(if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),if_block.c()),Object(internal.hb)(if_block,1),if_block.m(if_block_anchor.parentNode,if_block_anchor))},i(local){current||(Object(internal.hb)(if_block),current=!0)},o(local){Object(internal.ib)(if_block),current=!1},d(detaching){detaching&&Object(internal.v)(h2),detaching&&Object(internal.v)(t3),if_blocks[current_block_type_index].d(detaching),detaching&&Object(internal.v)(if_block_anchor)}}}function create_if_block(ctx){let p,span0,t1,t2,span1,t3,t4,t5,t6,t7,t8,t9,t10,details,summary,t12,div25,div0,button,t14,div15,h30,t16,div1,t18,div2,label0,input0,t19,t20,div3,label1,input1,t21,t22,div4,label2,input2,t23,t24,div5,label3,input3,t25,t26,div6,label4,input4,t27,t28,div7,label5,input5,t29,t30,div8,label6,input6,t31,t32,div9,label7,input7,t33,t34,div10,label8,input8,t35,t36,div11,label9,input9,t37,t38,div12,label10,input10,t39,t40,div13,label11,input11,t41,t42,div14,label12,input12,t43,t44,div20,h31,t46,div16,t48,div17,label13,input13,t49,t50,div18,label14,input14,t51,t52,div19,label15,input15,t53,t54,div24,h32,t56,div21,t57,select0,t58,div22,t59,select1,option0,option0_value_value,option1,option1_value_value,option2,option2_value_value,t63,div23,t64,select2,option3,option3_value_value,option4,option4_value_value,option5,option5_value_value,t68,t69,div26,current,mounted,dispose,t3_value=ctx[4].entities.page+1+"",t5_value=ctx[4].entities.numPages+"",t7_value=Object(string.d)(ctx[4].entities.count,"total entity result",!0)+"",if_block0=ctx[4].entities.hasPrev&&create_if_block_4(ctx),if_block1=ctx[4].entities.hasNext&&create_if_block_3(ctx),each_value_3=Array(101),each_blocks_1=[];for(let i=0;i<each_value_3.length;i+=1)each_blocks_1[i]=create_each_block_3(get_each_context_3(ctx,each_value_3,i));let if_block2=null!=ctx[7]&&create_if_block_2(ctx),each_value=ctx[11],each_blocks=[];for(let i=0;i<each_value.length;i+=1)each_blocks[i]=create_each_block(get_each_context(ctx,each_value,i));return{c(){p=Object(internal.w)("p"),span0=Object(internal.w)("span"),span0.textContent="Page",t1=Object(internal.ab)(),if_block0&&if_block0.c(),t2=Object(internal.ab)(),span1=Object(internal.w)("span"),t3=Object(internal.db)(t3_value),t4=Object(internal.db)("\n        of\n        "),t5=Object(internal.db)(t5_value),t6=Object(internal.db)("\n        ("),t7=Object(internal.db)(t7_value),t8=Object(internal.db)(")"),t9=Object(internal.ab)(),if_block1&&if_block1.c(),t10=Object(internal.ab)(),details=Object(internal.w)("details"),summary=Object(internal.w)("summary"),summary.textContent="Filter",t12=Object(internal.ab)(),div25=Object(internal.w)("div"),div0=Object(internal.w)("div"),button=Object(internal.w)("button"),button.textContent="Apply filters",t14=Object(internal.ab)(),div15=Object(internal.w)("div"),h30=Object(internal.w)("h3"),h30.textContent="Kind",t16=Object(internal.ab)(),div1=Object(internal.w)("div"),div1.textContent="Clear",t18=Object(internal.ab)(),div2=Object(internal.w)("div"),label0=Object(internal.w)("label"),input0=Object(internal.w)("input"),t19=Object(internal.db)("Person"),t20=Object(internal.ab)(),div3=Object(internal.w)("div"),label1=Object(internal.w)("label"),input1=Object(internal.w)("input"),t21=Object(internal.db)("Organization"),t22=Object(internal.ab)(),div4=Object(internal.w)("div"),label2=Object(internal.w)("label"),input2=Object(internal.w)("input"),t23=Object(internal.db)("Location"),t24=Object(internal.ab)(),div5=Object(internal.w)("div"),label3=Object(internal.w)("label"),input3=Object(internal.w)("input"),t25=Object(internal.db)("Event"),t26=Object(internal.ab)(),div6=Object(internal.w)("div"),label4=Object(internal.w)("label"),input4=Object(internal.w)("input"),t27=Object(internal.db)("Work of Art"),t28=Object(internal.ab)(),div7=Object(internal.w)("div"),label5=Object(internal.w)("label"),input5=Object(internal.w)("input"),t29=Object(internal.db)("Consumer Good"),t30=Object(internal.ab)(),div8=Object(internal.w)("div"),label6=Object(internal.w)("label"),input6=Object(internal.w)("input"),t31=Object(internal.db)("Address"),t32=Object(internal.ab)(),div9=Object(internal.w)("div"),label7=Object(internal.w)("label"),input7=Object(internal.w)("input"),t33=Object(internal.db)("Date"),t34=Object(internal.ab)(),div10=Object(internal.w)("div"),label8=Object(internal.w)("label"),input8=Object(internal.w)("input"),t35=Object(internal.db)("Number"),t36=Object(internal.ab)(),div11=Object(internal.w)("div"),label9=Object(internal.w)("label"),input9=Object(internal.w)("input"),t37=Object(internal.db)("Phone Number"),t38=Object(internal.ab)(),div12=Object(internal.w)("div"),label10=Object(internal.w)("label"),input10=Object(internal.w)("input"),t39=Object(internal.db)("Price"),t40=Object(internal.ab)(),div13=Object(internal.w)("div"),label11=Object(internal.w)("label"),input11=Object(internal.w)("input"),t41=Object(internal.db)("Unknown"),t42=Object(internal.ab)(),div14=Object(internal.w)("div"),label12=Object(internal.w)("label"),input12=Object(internal.w)("input"),t43=Object(internal.db)("Other"),t44=Object(internal.ab)(),div20=Object(internal.w)("div"),h31=Object(internal.w)("h3"),h31.textContent="Occurrences",t46=Object(internal.ab)(),div16=Object(internal.w)("div"),div16.textContent="Clear",t48=Object(internal.ab)(),div17=Object(internal.w)("div"),label13=Object(internal.w)("label"),input13=Object(internal.w)("input"),t49=Object(internal.db)("Proper"),t50=Object(internal.ab)(),div18=Object(internal.w)("div"),label14=Object(internal.w)("label"),input14=Object(internal.w)("input"),t51=Object(internal.db)("Common"),t52=Object(internal.ab)(),div19=Object(internal.w)("div"),label15=Object(internal.w)("label"),input15=Object(internal.w)("input"),t53=Object(internal.db)("Unknown"),t54=Object(internal.ab)(),div24=Object(internal.w)("div"),h32=Object(internal.w)("h3"),h32.textContent="Advanced",t56=Object(internal.ab)(),div21=Object(internal.w)("div"),t57=Object(internal.db)("Relevance threshold:\n            "),select0=Object(internal.w)("select");for(let i=0;i<each_blocks_1.length;i+=1)each_blocks_1[i].c();t58=Object(internal.ab)(),div22=Object(internal.w)("div"),t59=Object(internal.db)("Knowledge graph:\n            "),select1=Object(internal.w)("select"),option0=Object(internal.w)("option"),option0.textContent="---",option1=Object(internal.w)("option"),option1.textContent="Has a knowledge graph ID",option2=Object(internal.w)("option"),option2.textContent="Does not have a knowledge graph ID",t63=Object(internal.ab)(),div23=Object(internal.w)("div"),t64=Object(internal.db)("Wikipedia URL:\n            "),select2=Object(internal.w)("select"),option3=Object(internal.w)("option"),option3.textContent="---",option4=Object(internal.w)("option"),option4.textContent="Has a Wikipedia URL",option5=Object(internal.w)("option"),option5.textContent="Does not have a Wikipedia URL",t68=Object(internal.ab)(),if_block2&&if_block2.c(),t69=Object(internal.ab)(),div26=Object(internal.w)("div");for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();Object(internal.i)(span1,"class","page"),Object(internal.i)(p,"class","paginator svelte-kod8w4"),Object(internal.i)(summary,"class","svelte-kod8w4"),Object(internal.i)(h30,"class","svelte-kod8w4"),Object(internal.i)(div1,"class","action svelte-kod8w4"),Object(internal.i)(input0,"type","checkbox"),Object(internal.i)(input1,"type","checkbox"),Object(internal.i)(input2,"type","checkbox"),Object(internal.i)(input3,"type","checkbox"),Object(internal.i)(input4,"type","checkbox"),Object(internal.i)(input5,"type","checkbox"),Object(internal.i)(input6,"type","checkbox"),Object(internal.i)(input7,"type","checkbox"),Object(internal.i)(input8,"type","checkbox"),Object(internal.i)(input9,"type","checkbox"),Object(internal.i)(input10,"type","checkbox"),Object(internal.i)(input11,"type","checkbox"),Object(internal.i)(input12,"type","checkbox"),Object(internal.i)(div15,"class","filtergroup svelte-kod8w4"),Object(internal.i)(h31,"class","svelte-kod8w4"),Object(internal.i)(div16,"class","action svelte-kod8w4"),Object(internal.i)(input13,"type","checkbox"),Object(internal.i)(input14,"type","checkbox"),Object(internal.i)(input15,"type","checkbox"),Object(internal.i)(div20,"class","filtergroup svelte-kod8w4"),Object(internal.i)(h32,"class","svelte-kod8w4"),void 0===ctx[2].relevance&&Object(internal.e)(()=>ctx[38].call(select0)),option0.__value=option0_value_value=null,option0.value=option0.__value,option1.__value=option1_value_value=!0,option1.value=option1.__value,option2.__value=option2_value_value=!1,option2.value=option2.__value,void 0===ctx[2].mid&&Object(internal.e)(()=>ctx[39].call(select1)),option3.__value=option3_value_value=null,option3.value=option3.__value,option4.__value=option4_value_value=!0,option4.value=option4.__value,option5.__value=option5_value_value=!1,option5.value=option5.__value,void 0===ctx[2].wikipedia_url&&Object(internal.e)(()=>ctx[40].call(select2)),Object(internal.i)(div24,"class","filtergroup svelte-kod8w4"),Object(internal.i)(div25,"class","filters svelte-kod8w4"),Object(internal.i)(div26,"class","categories svelte-kod8w4")},m(target,anchor){Object(internal.H)(target,p,anchor),Object(internal.g)(p,span0),Object(internal.g)(p,t1),if_block0&&if_block0.m(p,null),Object(internal.g)(p,t2),Object(internal.g)(p,span1),Object(internal.g)(span1,t3),Object(internal.g)(span1,t4),Object(internal.g)(span1,t5),Object(internal.g)(span1,t6),Object(internal.g)(span1,t7),Object(internal.g)(span1,t8),Object(internal.g)(p,t9),if_block1&&if_block1.m(p,null),Object(internal.H)(target,t10,anchor),Object(internal.H)(target,details,anchor),Object(internal.g)(details,summary),Object(internal.g)(details,t12),Object(internal.g)(details,div25),Object(internal.g)(div25,div0),Object(internal.g)(div0,button),Object(internal.g)(div25,t14),Object(internal.g)(div25,div15),Object(internal.g)(div15,h30),Object(internal.g)(div15,t16),Object(internal.g)(div15,div1),Object(internal.g)(div15,t18),Object(internal.g)(div15,div2),Object(internal.g)(div2,label0),Object(internal.g)(label0,input0),input0.checked=ctx[0].person,Object(internal.g)(label0,t19),Object(internal.g)(div15,t20),Object(internal.g)(div15,div3),Object(internal.g)(div3,label1),Object(internal.g)(label1,input1),input1.checked=ctx[0].organization,Object(internal.g)(label1,t21),Object(internal.g)(div15,t22),Object(internal.g)(div15,div4),Object(internal.g)(div4,label2),Object(internal.g)(label2,input2),input2.checked=ctx[0].location,Object(internal.g)(label2,t23),Object(internal.g)(div15,t24),Object(internal.g)(div15,div5),Object(internal.g)(div5,label3),Object(internal.g)(label3,input3),input3.checked=ctx[0].event,Object(internal.g)(label3,t25),Object(internal.g)(div15,t26),Object(internal.g)(div15,div6),Object(internal.g)(div6,label4),Object(internal.g)(label4,input4),input4.checked=ctx[0].work_of_art,Object(internal.g)(label4,t27),Object(internal.g)(div15,t28),Object(internal.g)(div15,div7),Object(internal.g)(div7,label5),Object(internal.g)(label5,input5),input5.checked=ctx[0].consumer_good,Object(internal.g)(label5,t29),Object(internal.g)(div15,t30),Object(internal.g)(div15,div8),Object(internal.g)(div8,label6),Object(internal.g)(label6,input6),input6.checked=ctx[0].address,Object(internal.g)(label6,t31),Object(internal.g)(div15,t32),Object(internal.g)(div15,div9),Object(internal.g)(div9,label7),Object(internal.g)(label7,input7),input7.checked=ctx[0].date,Object(internal.g)(label7,t33),Object(internal.g)(div15,t34),Object(internal.g)(div15,div10),Object(internal.g)(div10,label8),Object(internal.g)(label8,input8),input8.checked=ctx[0].number,Object(internal.g)(label8,t35),Object(internal.g)(div15,t36),Object(internal.g)(div15,div11),Object(internal.g)(div11,label9),Object(internal.g)(label9,input9),input9.checked=ctx[0].phone_number,Object(internal.g)(label9,t37),Object(internal.g)(div15,t38),Object(internal.g)(div15,div12),Object(internal.g)(div12,label10),Object(internal.g)(label10,input10),input10.checked=ctx[0].price,Object(internal.g)(label10,t39),Object(internal.g)(div15,t40),Object(internal.g)(div15,div13),Object(internal.g)(div13,label11),Object(internal.g)(label11,input11),input11.checked=ctx[0].unknown,Object(internal.g)(label11,t41),Object(internal.g)(div15,t42),Object(internal.g)(div15,div14),Object(internal.g)(div14,label12),Object(internal.g)(label12,input12),input12.checked=ctx[0].other,Object(internal.g)(label12,t43),Object(internal.g)(div25,t44),Object(internal.g)(div25,div20),Object(internal.g)(div20,h31),Object(internal.g)(div20,t46),Object(internal.g)(div20,div16),Object(internal.g)(div20,t48),Object(internal.g)(div20,div17),Object(internal.g)(div17,label13),Object(internal.g)(label13,input13),input13.checked=ctx[1].proper,Object(internal.g)(label13,t49),Object(internal.g)(div20,t50),Object(internal.g)(div20,div18),Object(internal.g)(div18,label14),Object(internal.g)(label14,input14),input14.checked=ctx[1].common,Object(internal.g)(label14,t51),Object(internal.g)(div20,t52),Object(internal.g)(div20,div19),Object(internal.g)(div19,label15),Object(internal.g)(label15,input15),input15.checked=ctx[1].unknown,Object(internal.g)(label15,t53),Object(internal.g)(div25,t54),Object(internal.g)(div25,div24),Object(internal.g)(div24,h32),Object(internal.g)(div24,t56),Object(internal.g)(div24,div21),Object(internal.g)(div21,t57),Object(internal.g)(div21,select0);for(let i=0;i<each_blocks_1.length;i+=1)each_blocks_1[i].m(select0,null);Object(internal.U)(select0,ctx[2].relevance),Object(internal.g)(div24,t58),Object(internal.g)(div24,div22),Object(internal.g)(div22,t59),Object(internal.g)(div22,select1),Object(internal.g)(select1,option0),Object(internal.g)(select1,option1),Object(internal.g)(select1,option2),Object(internal.U)(select1,ctx[2].mid),Object(internal.g)(div24,t63),Object(internal.g)(div24,div23),Object(internal.g)(div23,t64),Object(internal.g)(div23,select2),Object(internal.g)(select2,option3),Object(internal.g)(select2,option4),Object(internal.g)(select2,option5),Object(internal.U)(select2,ctx[2].wikipedia_url),Object(internal.H)(target,t68,anchor),if_block2&&if_block2.m(target,anchor),Object(internal.H)(target,t69,anchor),Object(internal.H)(target,div26,anchor);for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].m(div26,null);current=!0,mounted||(dispose=[Object(internal.J)(button,"click",ctx[15]),Object(internal.J)(div1,"click",ctx[20]),Object(internal.J)(input0,"change",ctx[21]),Object(internal.J)(input1,"change",ctx[22]),Object(internal.J)(input2,"change",ctx[23]),Object(internal.J)(input3,"change",ctx[24]),Object(internal.J)(input4,"change",ctx[25]),Object(internal.J)(input5,"change",ctx[26]),Object(internal.J)(input6,"change",ctx[27]),Object(internal.J)(input7,"change",ctx[28]),Object(internal.J)(input8,"change",ctx[29]),Object(internal.J)(input9,"change",ctx[30]),Object(internal.J)(input10,"change",ctx[31]),Object(internal.J)(input11,"change",ctx[32]),Object(internal.J)(input12,"change",ctx[33]),Object(internal.J)(div16,"click",ctx[34]),Object(internal.J)(input13,"change",ctx[35]),Object(internal.J)(input14,"change",ctx[36]),Object(internal.J)(input15,"change",ctx[37]),Object(internal.J)(select0,"change",ctx[38]),Object(internal.J)(select1,"change",ctx[39]),Object(internal.J)(select2,"change",ctx[40])],mounted=!0)},p(ctx,dirty){if(ctx[4].entities.hasPrev?if_block0?if_block0.p(ctx,dirty):(if_block0=create_if_block_4(ctx),if_block0.c(),if_block0.m(p,t2)):if_block0&&(if_block0.d(1),if_block0=null),(!current||16&dirty[0])&&t3_value!==(t3_value=ctx[4].entities.page+1+"")&&Object(internal.W)(t3,t3_value),(!current||16&dirty[0])&&t5_value!==(t5_value=ctx[4].entities.numPages+"")&&Object(internal.W)(t5,t5_value),(!current||16&dirty[0])&&t7_value!==(t7_value=Object(string.d)(ctx[4].entities.count,"total entity result",!0)+"")&&Object(internal.W)(t7,t7_value),ctx[4].entities.hasNext?if_block1?if_block1.p(ctx,dirty):(if_block1=create_if_block_3(ctx),if_block1.c(),if_block1.m(p,null)):if_block1&&(if_block1.d(1),if_block1=null),1&dirty[0]&&(input0.checked=ctx[0].person),1&dirty[0]&&(input1.checked=ctx[0].organization),1&dirty[0]&&(input2.checked=ctx[0].location),1&dirty[0]&&(input3.checked=ctx[0].event),1&dirty[0]&&(input4.checked=ctx[0].work_of_art),1&dirty[0]&&(input5.checked=ctx[0].consumer_good),1&dirty[0]&&(input6.checked=ctx[0].address),1&dirty[0]&&(input7.checked=ctx[0].date),1&dirty[0]&&(input8.checked=ctx[0].number),1&dirty[0]&&(input9.checked=ctx[0].phone_number),1&dirty[0]&&(input10.checked=ctx[0].price),1&dirty[0]&&(input11.checked=ctx[0].unknown),1&dirty[0]&&(input12.checked=ctx[0].other),2&dirty[0]&&(input13.checked=ctx[1].proper),2&dirty[0]&&(input14.checked=ctx[1].common),2&dirty[0]&&(input15.checked=ctx[1].unknown),4&dirty[0]&&Object(internal.U)(select0,ctx[2].relevance),4&dirty[0]&&Object(internal.U)(select1,ctx[2].mid),4&dirty[0]&&Object(internal.U)(select2,ctx[2].wikipedia_url),null!=ctx[7]?if_block2?(if_block2.p(ctx,dirty),128&dirty[0]&&Object(internal.hb)(if_block2,1)):(if_block2=create_if_block_2(ctx),if_block2.c(),Object(internal.hb)(if_block2,1),if_block2.m(t69.parentNode,t69)):if_block2&&(Object(internal.E)(),Object(internal.ib)(if_block2,1,1,()=>{if_block2=null}),Object(internal.n)()),2184&dirty[0]){let i;for(each_value=ctx[11],i=0;i<each_value.length;i+=1){const child_ctx=get_each_context(ctx,each_value,i);each_blocks[i]?each_blocks[i].p(child_ctx,dirty):(each_blocks[i]=create_each_block(child_ctx),each_blocks[i].c(),each_blocks[i].m(div26,null))}for(;i<each_blocks.length;i+=1)each_blocks[i].d(1);each_blocks.length=each_value.length}},i(local){current||(Object(internal.hb)(if_block2),current=!0)},o(local){Object(internal.ib)(if_block2),current=!1},d(detaching){detaching&&Object(internal.v)(p),if_block0&&if_block0.d(),if_block1&&if_block1.d(),detaching&&Object(internal.v)(t10),detaching&&Object(internal.v)(details),Object(internal.u)(each_blocks_1,detaching),detaching&&Object(internal.v)(t68),if_block2&&if_block2.d(detaching),detaching&&Object(internal.v)(t69),detaching&&Object(internal.v)(div26),Object(internal.u)(each_blocks,detaching),mounted=!1,Object(internal.S)(dispose)}}}function create_else_block(ctx){let p0,t0,a,t1,t2,t3,p1,t5,if_block_anchor;function select_block_type_2(ctx,dirty){return ctx[8]?create_if_block_7:0==ctx[9]||2==ctx[9]?create_if_block_8:1==ctx[9]?create_if_block_10:void 0}let current_block_type=select_block_type_2(ctx),if_block=current_block_type&&current_block_type(ctx);return{c(){p0=Object(internal.w)("p"),t0=Object(internal.db)("Welcome to entity extraction! This feature is very much in progress but\n        we want it in your hands early to welcome any "),a=Object(internal.w)("a"),t1=Object(internal.db)("feedback"),t2=Object(internal.db)(" you might have."),t3=Object(internal.ab)(),p1=Object(internal.w)("p"),p1.textContent="Right now the process for extracting entities is manual. This document\n        has not had entities extracted yet, so click below to get started.",t5=Object(internal.ab)(),if_block&&if_block.c(),if_block_anchor=Object(internal.x)(),Object(internal.i)(a,"href",ctx[12]),Object(internal.i)(a,"target","_blank"),Object(internal.i)(a,"class","svelte-kod8w4"),Object(internal.i)(p0,"class","svelte-kod8w4"),Object(internal.i)(p1,"class","svelte-kod8w4")},m(target,anchor){Object(internal.H)(target,p0,anchor),Object(internal.g)(p0,t0),Object(internal.g)(p0,a),Object(internal.g)(a,t1),Object(internal.g)(p0,t2),Object(internal.H)(target,t3,anchor),Object(internal.H)(target,p1,anchor),Object(internal.H)(target,t5,anchor),if_block&&if_block.m(target,anchor),Object(internal.H)(target,if_block_anchor,anchor)},p(ctx,dirty){current_block_type===(current_block_type=select_block_type_2(ctx))&&if_block?if_block.p(ctx,dirty):(if_block&&if_block.d(1),if_block=current_block_type&&current_block_type(ctx),if_block&&(if_block.c(),if_block.m(if_block_anchor.parentNode,if_block_anchor)))},i:internal.M,o:internal.M,d(detaching){detaching&&Object(internal.v)(p0),detaching&&Object(internal.v)(t3),detaching&&Object(internal.v)(p1),detaching&&Object(internal.v)(t5),if_block&&if_block.d(detaching),detaching&&Object(internal.v)(if_block_anchor)}}}function create_if_block_6(ctx){let p,t,progress,current;return progress=new Progress_svelte.a({props:{initializing:!0,progress:0,compact:!0}}),{c(){p=Object(internal.w)("p"),t=Object(internal.db)("Extracting entities...\n        "),Object(internal.r)(progress.$$.fragment),Object(internal.i)(p,"class","svelte-kod8w4")},m(target,anchor){Object(internal.H)(target,p,anchor),Object(internal.g)(p,t),Object(internal.L)(progress,p,null),current=!0},p:internal.M,i(local){current||(Object(internal.hb)(progress.$$.fragment,local),current=!0)},o(local){Object(internal.ib)(progress.$$.fragment,local),current=!1},d(detaching){detaching&&Object(internal.v)(p),Object(internal.t)(progress)}}}function create_if_block_10(ctx){let p;return{c(){p=Object(internal.w)("p"),p.innerHTML="<i>Starting extraction...</i>",Object(internal.i)(p,"class","svelte-kod8w4")},m(target,anchor){Object(internal.H)(target,p,anchor)},p:internal.M,d(detaching){detaching&&Object(internal.v)(p)}}}function create_if_block_8(ctx){let p,button,t1,if_block_anchor,mounted,dispose,if_block=2==ctx[9]&&create_if_block_9(ctx);return{c(){p=Object(internal.w)("p"),button=Object(internal.w)("button"),button.textContent="Extract entities",t1=Object(internal.ab)(),if_block&&if_block.c(),if_block_anchor=Object(internal.x)(),Object(internal.i)(p,"class","svelte-kod8w4")},m(target,anchor){Object(internal.H)(target,p,anchor),Object(internal.g)(p,button),Object(internal.H)(target,t1,anchor),if_block&&if_block.m(target,anchor),Object(internal.H)(target,if_block_anchor,anchor),mounted||(dispose=Object(internal.J)(button,"click",ctx[13]),mounted=!0)},p(ctx,dirty){2==ctx[9]?if_block||(if_block=create_if_block_9(ctx),if_block.c(),if_block.m(if_block_anchor.parentNode,if_block_anchor)):if_block&&(if_block.d(1),if_block=null)},d(detaching){detaching&&Object(internal.v)(p),detaching&&Object(internal.v)(t1),if_block&&if_block.d(detaching),detaching&&Object(internal.v)(if_block_anchor),mounted=!1,dispose()}}}function create_if_block_7(ctx){let t;return{c(){t=Object(internal.db)("An unexpected error occurred")},m(target,anchor){Object(internal.H)(target,t,anchor)},p:internal.M,d(detaching){detaching&&Object(internal.v)(t)}}}function create_if_block_9(ctx){let p;return{c(){p=Object(internal.w)("p"),p.textContent="There are no entities. This could happen if the document doesnt\n            have text, is non-English (only English is supported for now), or\n            some error occurred.",Object(internal.i)(p,"class","svelte-kod8w4")},m(target,anchor){Object(internal.H)(target,p,anchor)},d(detaching){detaching&&Object(internal.v)(p)}}}function create_if_block_4(ctx){let span,mounted,dispose;return{c(){span=Object(internal.w)("span"),span.textContent="",Object(internal.i)(span,"class","paginate svelte-kod8w4")},m(target,anchor){Object(internal.H)(target,span,anchor),mounted||(dispose=Object(internal.J)(span,"click",ctx[18]),mounted=!0)},p:internal.M,d(detaching){detaching&&Object(internal.v)(span),mounted=!1,dispose()}}}function create_if_block_3(ctx){let span,mounted,dispose;return{c(){span=Object(internal.w)("span"),span.textContent="",Object(internal.i)(span,"class","paginate svelte-kod8w4")},m(target,anchor){Object(internal.H)(target,span,anchor),mounted||(dispose=Object(internal.J)(span,"click",ctx[19]),mounted=!0)},p:internal.M,d(detaching){detaching&&Object(internal.v)(span),mounted=!1,dispose()}}}function create_each_block_3(ctx){let option,t0,t1,option_value_value,t0_value=100-ctx[57]+"";return{c(){option=Object(internal.w)("option"),t0=Object(internal.db)(t0_value),t1=Object(internal.db)("%"),option.__value=option_value_value=1-ctx[57]/100,option.value=option.__value},m(target,anchor){Object(internal.H)(target,option,anchor),Object(internal.g)(option,t0),Object(internal.g)(option,t1)},p:internal.M,d(detaching){detaching&&Object(internal.v)(option)}}}function create_if_block_2(ctx){let div,h3,t0,t1,span,t2,ul,current,mounted,dispose,t0_value=ctx[7].name+"",each_value_2=ctx[7].occurrences,each_blocks=[];for(let i=0;i<each_value_2.length;i+=1)each_blocks[i]=create_each_block_2(get_each_context_2(ctx,each_value_2,i));const out=i=>Object(internal.ib)(each_blocks[i],1,1,()=>{each_blocks[i]=null});return{c(){div=Object(internal.w)("div"),h3=Object(internal.w)("h3"),t0=Object(internal.db)(t0_value),t1=Object(internal.ab)(),span=Object(internal.w)("span"),t2=Object(internal.ab)(),ul=Object(internal.w)("ul");for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();Object(internal.i)(span,"class","close svelte-kod8w4"),Object(internal.i)(div,"class","entity")},m(target,anchor){Object(internal.H)(target,div,anchor),Object(internal.g)(div,h3),Object(internal.g)(h3,t0),Object(internal.g)(h3,t1),Object(internal.g)(h3,span),span.innerHTML=close_inline_default.a,Object(internal.g)(div,t2),Object(internal.g)(div,ul);for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].m(ul,null);current=!0,mounted||(dispose=Object(internal.J)(span,"click",ctx[41]),mounted=!0)},p(ctx,dirty){if((!current||128&dirty[0])&&t0_value!==(t0_value=ctx[7].name+"")&&Object(internal.W)(t0,t0_value),16528&dirty[0]){let i;for(each_value_2=ctx[7].occurrences,i=0;i<each_value_2.length;i+=1){const child_ctx=get_each_context_2(ctx,each_value_2,i);each_blocks[i]?(each_blocks[i].p(child_ctx,dirty),Object(internal.hb)(each_blocks[i],1)):(each_blocks[i]=create_each_block_2(child_ctx),each_blocks[i].c(),Object(internal.hb)(each_blocks[i],1),each_blocks[i].m(ul,null))}for(Object(internal.E)(),i=each_value_2.length;i<each_blocks.length;i+=1)out(i);Object(internal.n)()}},i(local){if(!current){for(let i=0;i<each_value_2.length;i+=1)Object(internal.hb)(each_blocks[i]);current=!0}},o(local){each_blocks=each_blocks.filter(Boolean);for(let i=0;i<each_blocks.length;i+=1)Object(internal.ib)(each_blocks[i]);current=!1},d(detaching){detaching&&Object(internal.v)(div),Object(internal.u)(each_blocks,detaching),mounted=!1,dispose()}}}function create_default_slot(ctx){let t0,t1,t2,t1_value=ctx[52].page+1+"";return{c(){t0=Object(internal.db)("pg.\n                "),t1=Object(internal.db)(t1_value),t2=Object(internal.db)(":")},m(target,anchor){Object(internal.H)(target,t0,anchor),Object(internal.H)(target,t1,anchor),Object(internal.H)(target,t2,anchor)},p(ctx,dirty){128&dirty[0]&&t1_value!==(t1_value=ctx[52].page+1+"")&&Object(internal.W)(t1,t1_value)},d(detaching){detaching&&Object(internal.v)(t0),detaching&&Object(internal.v)(t1),detaching&&Object(internal.v)(t2)}}}function create_each_block_2(ctx){let li,link,t0,span0,t1,span1,t2,span2,t3,t4,current,t1_value=ctx[14](ctx[52])[0]+"",t2_value=ctx[14](ctx[52])[1]+"",t3_value=ctx[14](ctx[52])[2]+"";return link=new Link_svelte.a({props:{inlineBlock:!0,toUrl:ctx[4].document.relativePageUrl(ctx[52].page+1),$$slots:{default:[create_default_slot]},$$scope:{ctx:ctx}}}),{c(){li=Object(internal.w)("li"),Object(internal.r)(link.$$.fragment),t0=Object(internal.ab)(),span0=Object(internal.w)("span"),t1=Object(internal.db)(t1_value),span1=Object(internal.w)("span"),t2=Object(internal.db)(t2_value),span2=Object(internal.w)("span"),t3=Object(internal.db)(t3_value),t4=Object(internal.ab)(),Object(internal.i)(span1,"class","highlight svelte-kod8w4")},m(target,anchor){Object(internal.H)(target,li,anchor),Object(internal.L)(link,li,null),Object(internal.g)(li,t0),Object(internal.g)(li,span0),Object(internal.g)(span0,t1),Object(internal.g)(li,span1),Object(internal.g)(span1,t2),Object(internal.g)(li,span2),Object(internal.g)(span2,t3),Object(internal.g)(li,t4),current=!0},p(ctx,dirty){const link_changes={};144&dirty[0]&&(link_changes.toUrl=ctx[4].document.relativePageUrl(ctx[52].page+1)),128&dirty[0]|134217728&dirty[1]&&(link_changes.$$scope={dirty:dirty,ctx:ctx}),link.$set(link_changes),(!current||128&dirty[0])&&t1_value!==(t1_value=ctx[14](ctx[52])[0]+"")&&Object(internal.W)(t1,t1_value),(!current||128&dirty[0])&&t2_value!==(t2_value=ctx[14](ctx[52])[1]+"")&&Object(internal.W)(t2,t2_value),(!current||128&dirty[0])&&t3_value!==(t3_value=ctx[14](ctx[52])[2]+"")&&Object(internal.W)(t3,t3_value)},i(local){current||(Object(internal.hb)(link.$$.fragment,local),current=!0)},o(local){Object(internal.ib)(link.$$.fragment,local),current=!1},d(detaching){detaching&&Object(internal.v)(li),Object(internal.t)(link)}}}function create_if_block_1(ctx){let div,a,t,a_href_value;return{c(){div=Object(internal.w)("div"),a=Object(internal.w)("a"),t=Object(internal.db)("Wikipedia"),Object(internal.i)(a,"href",a_href_value=ctx[49].wikiUrl),Object(internal.i)(a,"target","_blank"),Object(internal.i)(a,"class","svelte-kod8w4"),Object(internal.i)(div,"class","subtitle svelte-kod8w4")},m(target,anchor){Object(internal.H)(target,div,anchor),Object(internal.g)(div,a),Object(internal.g)(a,t)},p(ctx,dirty){2056&dirty[0]&&a_href_value!==(a_href_value=ctx[49].wikiUrl)&&Object(internal.i)(a,"href",a_href_value)},d(detaching){detaching&&Object(internal.v)(div)}}}function create_each_block_1(ctx){let div2,div0,t0,t1,div1,t2,t3,mounted,dispose,t0_value=ctx[49].name+"",t2_value=Object(string.d)(ctx[49].occurrences.length,"occurrence")+"",if_block=ctx[49].hasWikiUrl&&create_if_block_1(ctx);function click_handler_5(){return ctx[42](ctx[49])}return{c(){div2=Object(internal.w)("div"),div0=Object(internal.w)("div"),t0=Object(internal.db)(t0_value),t1=Object(internal.ab)(),div1=Object(internal.w)("div"),t2=Object(internal.db)(t2_value),t3=Object(internal.ab)(),if_block&&if_block.c(),Object(internal.i)(div0,"class","title"),Object(internal.i)(div1,"class","subtitle svelte-kod8w4"),Object(internal.i)(div2,"class","entity svelte-kod8w4")},m(target,anchor){Object(internal.H)(target,div2,anchor),Object(internal.g)(div2,div0),Object(internal.g)(div0,t0),Object(internal.g)(div2,t1),Object(internal.g)(div2,div1),Object(internal.g)(div1,t2),Object(internal.g)(div2,t3),if_block&&if_block.m(div2,null),mounted||(dispose=Object(internal.J)(div2,"click",click_handler_5),mounted=!0)},p(new_ctx,dirty){ctx=new_ctx,2056&dirty[0]&&t0_value!==(t0_value=ctx[49].name+"")&&Object(internal.W)(t0,t0_value),2056&dirty[0]&&t2_value!==(t2_value=Object(string.d)(ctx[49].occurrences.length,"occurrence")+"")&&Object(internal.W)(t2,t2_value),ctx[49].hasWikiUrl?if_block?if_block.p(ctx,dirty):(if_block=create_if_block_1(ctx),if_block.c(),if_block.m(div2,null)):if_block&&(if_block.d(1),if_block=null)},d(detaching){detaching&&Object(internal.v)(div2),if_block&&if_block.d(),mounted=!1,dispose()}}}function create_each_block(ctx){let div1,div0,t0,t1,t2,t0_value=ctx[46]+"",each_value_1=ctx[3][ctx[46]],each_blocks=[];for(let i=0;i<each_value_1.length;i+=1)each_blocks[i]=create_each_block_1(get_each_context_1(ctx,each_value_1,i));return{c(){div1=Object(internal.w)("div"),div0=Object(internal.w)("div"),t0=Object(internal.db)(t0_value),t1=Object(internal.ab)();for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();t2=Object(internal.ab)(),Object(internal.i)(div0,"class","categorytitle svelte-kod8w4"),Object(internal.i)(div1,"class","category svelte-kod8w4")},m(target,anchor){Object(internal.H)(target,div1,anchor),Object(internal.g)(div1,div0),Object(internal.g)(div0,t0),Object(internal.g)(div1,t1);for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].m(div1,null);Object(internal.g)(div1,t2)},p(ctx,dirty){if(2048&dirty[0]&&t0_value!==(t0_value=ctx[46]+"")&&Object(internal.W)(t0,t0_value),2184&dirty[0]){let i;for(each_value_1=ctx[3][ctx[46]],i=0;i<each_value_1.length;i+=1){const child_ctx=get_each_context_1(ctx,each_value_1,i);each_blocks[i]?each_blocks[i].p(child_ctx,dirty):(each_blocks[i]=create_each_block_1(child_ctx),each_blocks[i].c(),each_blocks[i].m(div1,t2))}for(;i<each_blocks.length;i+=1)each_blocks[i].d(1);each_blocks.length=each_value_1.length}},d(detaching){detaching&&Object(internal.v)(div1),Object(internal.u)(each_blocks,detaching)}}}function create_fragment(ctx){let div,p,link,t,current_block_type_index,if_block,current;link=new Link_svelte.a({props:{back:!0,color:!0,$$slots:{default:[create_default_slot_1]},$$scope:{ctx:ctx}}});const if_block_creators=[create_if_block,create_if_block_5,create_else_block_1],if_blocks=[];function select_block_type(ctx,dirty){return!ctx[5]&&null!=ctx[4].entities&&null!=ctx[6]&&(ctx[4].entities.count>0||ctx[10])?0:0==ctx[5]&&null!=ctx[4].document?1:2}return current_block_type_index=select_block_type(ctx),if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),{c(){div=Object(internal.w)("div"),p=Object(internal.w)("p"),Object(internal.r)(link.$$.fragment),t=Object(internal.ab)(),if_block.c(),Object(internal.i)(p,"class","svelte-kod8w4"),Object(internal.i)(div,"class","body svelte-kod8w4")},m(target,anchor){Object(internal.H)(target,div,anchor),Object(internal.g)(div,p),Object(internal.L)(link,p,null),Object(internal.g)(div,t),if_blocks[current_block_type_index].m(div,null),current=!0},p(ctx,dirty){const link_changes={};134217728&dirty[1]&&(link_changes.$$scope={dirty:dirty,ctx:ctx}),link.$set(link_changes);let previous_block_index=current_block_type_index;current_block_type_index=select_block_type(ctx),current_block_type_index===previous_block_index?if_blocks[current_block_type_index].p(ctx,dirty):(Object(internal.E)(),Object(internal.ib)(if_blocks[previous_block_index],1,1,()=>{if_blocks[previous_block_index]=null}),Object(internal.n)(),if_block=if_blocks[current_block_type_index],if_block?if_block.p(ctx,dirty):(if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),if_block.c()),Object(internal.hb)(if_block,1),if_block.m(div,null))},i(local){current||(Object(internal.hb)(link.$$.fragment,local),Object(internal.hb)(if_block),current=!0)},o(local){Object(internal.ib)(link.$$.fragment,local),Object(internal.ib)(if_block),current=!1},d(detaching){detaching&&Object(internal.v)(div),Object(internal.t)(link),if_blocks[current_block_type_index].d()}}}function filterize(f){const results=[];for(const k in f)f.hasOwnProperty(k)&&f[k]&&results.push(""+k);return results.join(",")}function instance($$self,$$props,$$invalidate){let filter,entitiesByCategory,categories,$entities;Object(internal.o)($$self,entities,$$value=>$$invalidate(4,$entities=$$value));let loading=!0,fullText=null,selectedEntity=null,page=1,extractionError=!1,extractionStage=0,kindFilter={person:!0,organization:!0,location:!0,event:!0,work_of_art:!0,consumer_good:!0,address:!0,date:!0,number:!0,phone_number:!0,price:!0,unknown:!0,other:!0},occurrenceFilter={proper:!0,common:!0,unknown:!0},advancedFilter={relevance:0};Object(svelte.d)(async()=>{const id=parseInt(router.e.resolvedRoute.props.id.split("-")[0]);entities.document=await Object(api_document.f)(id);try{entities.entities=await getE(id,1),$$invalidate(6,fullText=await session.b.getStatic(Object(viewer.a)(entities.document)))}catch(e){console.error(e)}$$invalidate(5,loading=!1)});let pagePushed=!1;async function pushPage(num){$$invalidate(10,pagePushed=!0),page=num;const id=parseInt(router.e.resolvedRoute.props.id.split("-")[0]);$$invalidate(7,selectedEntity=null),entities.entities=await getE(id,page,filter)}async function prevPage(){pushPage(page-1)}async function nextPage(){pushPage(page+1)}return $$self.$$.update=()=>{7&$$self.$$.dirty[0]&&(filter={kind:filterize(kindFilter),occurrences:filterize(occurrenceFilter),relevance__gt:advancedFilter.relevance,mid:advancedFilter.mid,wikipedia_url:advancedFilter.wikipedia_url}),16&$$self.$$.dirty[0]&&$$invalidate(3,entitiesByCategory=function(entities){if(null==entities)return{};const results={};for(let i=0;i<entities.length;i++){const entity=entities[i];null==results[entity.kind]&&(results[entity.kind]=[]),results[entity.kind].push(entity)}return results}(($entities.entities||{}).entities)),8&$$self.$$.dirty[0]&&$$invalidate(11,categories=null==entitiesByCategory?[]:Object.keys(entitiesByCategory).sort())},[kindFilter,occurrenceFilter,advancedFilter,entitiesByCategory,$entities,loading,fullText,selectedEntity,extractionError,extractionStage,pagePushed,categories,"mailto:info@documentcloud.org?subject=DocumentCloud Feedback",async function(){if(null==entities.document)return;const id=entities.document.id;try{$$invalidate(9,extractionStage=1),await async function(id){const url=Object(base.a)(`documents/${id}/entities/`),{data:data}=await session.b.post(url);return data}(id),entities.document.doc={...entities.document.doc,status:"readable"},entities.document=entities.document,Object(documents.q)(entities.document,d=>d.doc={...d.doc,status:"readable"}),$$invalidate(9,extractionStage=2)}catch(e){$$invalidate(8,extractionError=!0),console.error(e),alert("An unexpected error occurred: "+JSON.stringify(e))}},function(occurrence){const pageText=fullText.pages[occurrence.page].contents;return[pageText.substring(occurrence.page_offset-50,occurrence.page_offset),pageText.substring(occurrence.page_offset,occurrence.page_offset+occurrence.content.length),pageText.substring(occurrence.page_offset+occurrence.content.length,occurrence.page_offset+occurrence.content.length+50)]},async function(){await pushPage(page)},prevPage,nextPage,()=>prevPage(),()=>nextPage(),()=>$$invalidate(0,kindFilter={}),function(){kindFilter.person=this.checked,$$invalidate(0,kindFilter)},function(){kindFilter.organization=this.checked,$$invalidate(0,kindFilter)},function(){kindFilter.location=this.checked,$$invalidate(0,kindFilter)},function(){kindFilter.event=this.checked,$$invalidate(0,kindFilter)},function(){kindFilter.work_of_art=this.checked,$$invalidate(0,kindFilter)},function(){kindFilter.consumer_good=this.checked,$$invalidate(0,kindFilter)},function(){kindFilter.address=this.checked,$$invalidate(0,kindFilter)},function(){kindFilter.date=this.checked,$$invalidate(0,kindFilter)},function(){kindFilter.number=this.checked,$$invalidate(0,kindFilter)},function(){kindFilter.phone_number=this.checked,$$invalidate(0,kindFilter)},function(){kindFilter.price=this.checked,$$invalidate(0,kindFilter)},function(){kindFilter.unknown=this.checked,$$invalidate(0,kindFilter)},function(){kindFilter.other=this.checked,$$invalidate(0,kindFilter)},()=>$$invalidate(1,occurrenceFilter={}),function(){occurrenceFilter.proper=this.checked,$$invalidate(1,occurrenceFilter)},function(){occurrenceFilter.common=this.checked,$$invalidate(1,occurrenceFilter)},function(){occurrenceFilter.unknown=this.checked,$$invalidate(1,occurrenceFilter)},function(){advancedFilter.relevance=Object(internal.V)(this),$$invalidate(2,advancedFilter)},function(){advancedFilter.mid=Object(internal.V)(this),$$invalidate(2,advancedFilter)},function(){advancedFilter.wikipedia_url=Object(internal.V)(this),$$invalidate(2,advancedFilter)},()=>$$invalidate(7,selectedEntity=null),entity=>$$invalidate(7,selectedEntity=entity)]}class Entities_svelte_Entities extends internal.b{constructor(options){super(),Object(internal.G)(this,options,instance,create_fragment,internal.T,{},[-1,-1])}}var entities_Entities_svelte=Entities_svelte_Entities;const routes=[NotFound_svelte.a,lazyComponent=>({default:{path:"/",component:lazyComponent.default,get:util_lazyComponent.c},home:{path:"/home",component:lazyComponent.home,get:util_lazyComponent.d},app:{path:"/app",component:lazyComponent.app,get:util_lazyComponent.b},viewer:{path:"/documents/:id",component:lazyComponent.viewer,get:util_lazyComponent.i},entity:{path:"/entities/:id",component:entities_Entities_svelte},note:{path:"/documents/:id/annotations/:noteId",component:lazyComponent.note,get:util_lazyComponent.f},page:{path:"/documents/:id/pages/:page",component:lazyComponent.page,get:util_lazyComponent.g},project:{path:"/projects/:projectEmbedId",component:lazyComponent.project,get:util_lazyComponent.h},search:{path:"/search/*query",component:lazyComponent.legacyRedirect,get:util_lazyComponent.e},publicSearch:{path:"/public/search/*query",component:lazyComponent.legacyRedirect,get:util_lazyComponent.e}})];var Empty_svelte=__webpack_require__(14),layout=__webpack_require__(42),batchDelay=__webpack_require__(32);const POLL_INTERVAL=parseInt("5000"),GET_BATCH_DELAY=parseInt("1000"),ticker=new svue.a({data:()=>({documents:documents.e,layout:layout.n,entities:entities,triggered:!1}),computed:{events:(documents,layout,entities)=>[...documents.pollEvents,...layout.pollEvents,...entities.pollEvents],shouldTrigger(events,triggered){events.length>0&&!triggered&&(ticker.triggered=!0,triggerTimer())}}});async function triggerTimer(){await Object(batchDelay.a)(ticker.events,1,GET_BATCH_DELAY,x=>x[0](),e=>console.error("error updating some poll events",e)),setTimeout(triggerTimer,POLL_INTERVAL)}__webpack_require__(92);const{window:window_1}=internal.D;function Main_svelte_create_if_block(ctx){let switch_instance,switch_instance_anchor,current;const switch_instance_spread_levels=[ctx[2]];var switch_value=ctx[1];function switch_props(ctx){let switch_instance_props={};for(let i=0;i<switch_instance_spread_levels.length;i+=1)switch_instance_props=Object(internal.h)(switch_instance_props,switch_instance_spread_levels[i]);return{props:switch_instance_props}}return switch_value&&(switch_instance=new switch_value(switch_props())),{c(){switch_instance&&Object(internal.r)(switch_instance.$$.fragment),switch_instance_anchor=Object(internal.x)()},m(target,anchor){switch_instance&&Object(internal.L)(switch_instance,target,anchor),Object(internal.H)(target,switch_instance_anchor,anchor),current=!0},p(ctx,dirty){const switch_instance_changes=4&dirty?Object(internal.B)(switch_instance_spread_levels,[Object(internal.A)(ctx[2])]):{};if(switch_value!==(switch_value=ctx[1])){if(switch_instance){Object(internal.E)();const old_component=switch_instance;Object(internal.ib)(old_component.$$.fragment,1,0,()=>{Object(internal.t)(old_component,1)}),Object(internal.n)()}switch_value?(switch_instance=new switch_value(switch_props()),Object(internal.r)(switch_instance.$$.fragment),Object(internal.hb)(switch_instance.$$.fragment,1),Object(internal.L)(switch_instance,switch_instance_anchor.parentNode,switch_instance_anchor)):switch_instance=null}else switch_value&&switch_instance.$set(switch_instance_changes)},i(local){current||(switch_instance&&Object(internal.hb)(switch_instance.$$.fragment,local),current=!0)},o(local){switch_instance&&Object(internal.ib)(switch_instance.$$.fragment,local),current=!1},d(detaching){detaching&&Object(internal.v)(switch_instance_anchor),switch_instance&&Object(internal.t)(switch_instance,detaching)}}}function Main_svelte_create_fragment(ctx){let if_block_anchor,current,mounted,dispose,if_block=null!=ctx[0].resolvedRoute&&Main_svelte_create_if_block(ctx);return{c(){if_block&&if_block.c(),if_block_anchor=Object(internal.x)()},m(target,anchor){if_block&&if_block.m(target,anchor),Object(internal.H)(target,if_block_anchor,anchor),current=!0,mounted||(dispose=Object(internal.J)(window_1,"popstate",ctx[3]),mounted=!0)},p(ctx,[dirty]){null!=ctx[0].resolvedRoute?if_block?(if_block.p(ctx,dirty),1&dirty&&Object(internal.hb)(if_block,1)):(if_block=Main_svelte_create_if_block(ctx),if_block.c(),Object(internal.hb)(if_block,1),if_block.m(if_block_anchor.parentNode,if_block_anchor)):if_block&&(Object(internal.E)(),Object(internal.ib)(if_block,1,1,()=>{if_block=null}),Object(internal.n)())},i(local){current||(Object(internal.hb)(if_block),current=!0)},o(local){Object(internal.ib)(if_block),current=!1},d(detaching){if_block&&if_block.d(detaching),detaching&&Object(internal.v)(if_block_anchor),mounted=!1,dispose()}}}function Main_svelte_instance($$self,$$props,$$invalidate){let routeComponent,routeProps,$router;return Object(internal.o)($$self,router.e,$$value=>$$invalidate(0,$router=$$value)),router.e.notFound=routes[0],router.e.routeFunc=routes[1],Object(svelte.d)(()=>{router.e.currentUrl=Object(util_url.a)(),history.state||window.history.replaceState({path:Object(util_url.a)()},"",window.location.href)}),$$self.$$.update=()=>{1&$$self.$$.dirty&&$$invalidate(1,routeComponent=($router.resolvedRoute||{component:Empty_svelte.default}).component||Empty_svelte.default),1&$$self.$$.dirty&&$$invalidate(2,routeProps=($router.resolvedRoute||{props:[]}).props||{})},[$router,routeComponent,routeProps,function(e){null!=e.state&&(router.e.currentUrl=e.state.path)}]}class Main_svelte_Main extends internal.b{constructor(options){super(),Object(internal.G)(this,options,Main_svelte_instance,Main_svelte_create_fragment,internal.T,{})}}var src_Main_svelte=Main_svelte_Main;__webpack_require__(63);const app=new src_Main_svelte({target:document.body});window.app=app;__webpack_exports__.default=app}]);