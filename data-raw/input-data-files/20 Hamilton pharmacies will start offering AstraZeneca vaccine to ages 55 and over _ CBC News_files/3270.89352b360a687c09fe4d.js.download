(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3270],{53270:function(t,e,n){"use strict";var r=n(28481),o=n(21914),i=n(15882),a=n(92972),c=n.n(a),u=n(44718),l=n(46826),s=n(31869),f=n(46619),d=n(68075),v=n(80792),y=n(63578),h=n(75854);function p(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var R=function(t){var e=(0,o.useState)(!1),n=(0,r.Z)(e,2),a=n[0],c=n[1],f=(0,o.useState)(""),m=(0,r.Z)(f,2),R=m[0],g=m[1],b=(0,o.useState)(""),w=(0,r.Z)(b,2),E=w[0],Z=w[1],L=(0,o.useState)(""),A=(0,r.Z)(L,2),S=A[0],I=A[1],N=(0,i.useDispatch)();(0,o.useEffect)((function(){k()}),[t]);var k=function(){D(O().radio)},C=function(e,n){var r,o=p(t.listenRecord);try{for(o.s();!(r=o.n()).done;){var i,a=p(r.value.stations);try{for(a.s();!(i=a.n()).done;){var c=i.value;if((!e||c.radio===e)&&(!n||c.location===n))return c}}catch(u){a.e(u)}finally{a.f()}}}catch(u){o.e(u)}finally{o.f()}},O=function(){var e=function(){var t=(0,d.Ok)();return v.z2[t]||{radio:t,location:""}}(),n=e.radio,r=e.location,o=R||n,i=E||r,a=t.showRegionHierarchy?y.fu.listenLive:t.listenRecord.first();return(o?t.showRegionHierarchy?C(o,i):t.listenRecord.find((function(t){return t.radio===o}),null,a):a)||a},D=function(t){(0,s.U9)(t).then((function(t){var e=t.program&&t.program.name?t.program.name:t;I(e)}))},_=function(t){c(!a)},K=function(t){var e=t.currentTarget.dataset.radio||"",n=t.currentTarget.dataset.location||"";g(e),Z(n),c(!1),D(e)},P=function(t){13===t.charCode&&K(t)},x=function(e){var n="",r=e.currentTarget.dataset.radio,o=e.currentTarget.dataset.location;n=t.showRegionHierarchy?C(r,o):t.listenRecord.find((function(t){return r===t.radio})),N((0,l.o)({mediaItem:{id:n.liveRadioId,source:h.lS,isLive:!0,isVideo:!1,showName:S},isVisible:!0,selector:h.IL,forcePersistence:!0,featureAttribution:{name:"radio-bar"}}))},H=function(t){32===t.charCode?(t.preventDefault(),x(t)):13===t.charCode&&x(t)},T=function(t){return o.createElement("ul",{key:"radioRegionList"},t.map((function(t){return o.createElement("li",{key:t.location},o.createElement("button",{id:"radioRegion-".concat(t.radio),key:t.radio,onClick:K,onKeyPress:P,"data-radio":t.radio,"data-location":t.location,value:t.radio},t.location))})))};return o.createElement("div",{className:"listenLive ".concat(t.listenRecord&&t.listenRecord.size>1?"hasDropdown":""," ").concat(t.showRegionHierarchy?"showsProvinces":"")},o.createElement("h2",{className:"a11y"},"LIVE RADIO"),o.createElement("span",{className:"liveLabel"},"LIVE"),function(){if(t.listenRecord.size<=1)return null;var e=O();return o.createElement("div",{className:"locationDropDown"},o.createElement("button",{className:"locationButton ".concat(a?"open":""),onClick:_,"aria-label":"Choose your region, currently ".concat(e.location),"aria-expanded":a?"true":"false"},e.location,o.createElement(u.Z,{type:"chevron"})),a?t.showRegionHierarchy?o.createElement("div",{className:"locationList"},o.createElement("h3",{className:"a11y"},"Provinces"),t.listenRecord.map((function(t,e){return o.createElement("div",{className:"radioRegion",key:"radioRegion-".concat(e)},o.createElement("h4",{key:t.province},t.province),T(t.stations))}))):T(t.listenRecord):null)}(),function(){var t=O(),e=t.title?t.title:"CBC Radio One";return o.createElement("div",{className:"listenLink",onClick:x,onKeyPress:H,"data-radio":t.radio,"data-location":t.location,role:"button",tabIndex:"0"},o.createElement("div",null,o.createElement(u.Z,{type:"play",height:"25px",width:"25px","aria-label":"play"}),o.createElement("div",{className:"schedule nowPlaying"},o.createElement("span",{className:"nowPlayingNetwork"},e," ",o.createElement("span",{className:"".concat(""===S?"hide":"")},"-")," ",S))))}())};R.propTypes={listenRecord:c().instanceOf(f.List),showRegionHierarchy:c().bool},R.defaultProps={listenRecord:(0,f.List)([{}]),showRegionHierarchy:!1};var g=function(t,e){return(0,f.is)(t.listenRecord,e.listenRecord)};e.Z=(0,o.memo)(R,g)},80792:function(t,e,n){"use strict";n.d(e,{WK:function(){return s},Kt:function(){return f},z2:function(){return d}});var r=n(6610),o=n(5991),i=n(10379),a=n(46070),c=n(77608),u=n(46619);function l(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,c.Z)(t);if(e){var o=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var s=function(t){(0,i.Z)(n,t);var e=l(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,o.Z)(n,[{key:"isEmpty",value:function(){return""===this.title}}]),n}((0,u.Record)({title:"",liveRadioId:"",radio:"",location:""})),f=function(t){(0,i.Z)(n,t);var e=l(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,o.Z)(n,[{key:"isEmpty",value:function(){return!this.stations||this.stations.empty()}}]),n}((0,u.Record)({province:"",stations:(0,u.List)()})),d={toronto:{radio:"toronto",location:"Toronto"}}},31869:function(t,e,n){"use strict";n.d(e,{Zj:function(){return R},U9:function(){return b}});var r=n(6610),o=n(10379),i=n(46070),a=n(77608),c=n(45366),u=n(85061),l=n(80792),s=n(46619),f=n(93789),d=n(41718),v=n(63578);function y(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,a.Z)(t);if(e){var o=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}function h(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var m=function(){var t,e=[],n=h(v.nv);try{var r=function(){var n=t.value,r=e.find((function(t){return t.province===n.province}));if(r)r.stations.push(n.listenLive[0]);else{var o,i={province:"",stations:[]};i.province=n.province,(o=i.stations).push.apply(o,(0,u.Z)(n.listenLive)),e.push(i)}};for(n.s();!(t=n.n()).done;)r()}catch(o){n.e(o)}finally{n.f()}return e},R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=[],n=!1;return null===t&&(t=m(),n=!0),t.forEach((function(t){var r={};r=n?new l.Kt({province:t.province,stations:(0,s.List)(t.stations.map((function(t){return new l.WK({title:t.title||"",liveRadioId:t.liveRadioId||"",radio:t.radio||"",location:t.location||""})})))}):new l.WK({title:t.title||"",liveRadioId:t.liveRadioId||"",radio:t.radio||"",location:t.location||""}),e.push(r)})),new s.List(e)},g=function(t){(0,o.Z)(n,t);var e=y(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return n}((0,c.Z)(Error));function b(t){var e="".concat(f.b.radio+encodeURIComponent("&locationKey=".concat(t)));return fetch(e).then((function(t){if(!t.ok)throw new g(t.statusText);return t.json()})).catch((function(t){return d.Z.send(t),"Sorry, the network request failed."}))}}}]);