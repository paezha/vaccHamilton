(window._vfP=window._vfP||[]).push([[126,127],{375:function(n,t,e){"use strict";e.r(t);var r,i=e(2),u=e(20),c=e(86),o=e(33);function a(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var f,s=(a(r={},i.ub,(function(n,t){(n[t]||[]).pop()})),a(r,i.a,Object(c.a)(u.default,(function(n,t){return!t.some((function(t){return t.thread_uuid===n.thread_uuid}))}))),a(r,i.D,Object(o.e)(u.default)),a(r,i.bd,(function(n,t){var e=t.uuid,r=t.mode,i=n[e];i[i.length-1].mode=r})),r),d=e(0);function l(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var _=(l(f={},d.a,(function(n){return function(t){var e=n[t]||[];return e[e.length-1]||{}}})),l(f,d.Kb,(function(n){return function(t){return Boolean(n[t])}})),f),b=e(3);var p,E,O,v=(p={},E=b.a,O=function(n,t){var e=t.thread_uuid,r=t.offset_top,u=t.mode,c=n.getters[d.S](e),o=n.getters[d.V](e);r=n.getters[d.a](o).offset_top||r;var a={key:o,items:[{parent_thread_uuid:c.thread_uuid,content_container_uuid:o,thread_uuid:e,offset_top:r,mode:u}]};n.commit(i.a,a)},E in p?Object.defineProperty(p,E,{value:O,enumerable:!0,configurable:!0,writable:!0}):p[E]=O,p);e.d(t,"REPLY_THREAD_MODES",(function(){return D})),e.d(t,"replyThreads",(function(){return N}));var D={MENTION:"mention",REPLY_PARENT:"reply",REPLIES:"replies"},m=function(){return{}},N=function(){return{state:m,mutations:s,getters:_,actions:v}}},451:function(n,t,e){"use strict";e.r(t);e(6),e(7),e(4),e(75),e(38),e(41);var r,i=e(2),u=e(67),c=e(33),o=e(669),a=e(294),f=e(20);function s(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var d,l=(s(r={},i.fc,Object(c.h)(f.default,a.c)),s(r,i.zc,(function(n,t){delete t.item.actions,Object(c.h)(f.default,a.c)(n,t)})),s(r,i.Db,Object(c.e)(f.default)),s(r,i.db,(function(n,t){n[t].isNew=!1})),s(r,i.cb,(function(n,t){n[t].isNew=!0})),s(r,i.fb,(function(n,t){n[t].read=!1})),s(r,i.eb,(function(n,t){n[t].read=!0})),s(r,i.jc,(function(n,t){var e=t.content_uuid,r=t.place;n[e].place=r})),s(r,i.gc,(function(n,t){var e=t.content_uuid,r=t.animation;n[e].animation=Object.values(a.a).includes(r)?r:a.a.NONE})),s(r,i.Z,(function(n,t){n[t].is_picked=!0})),s(r,i.ab,(function(n,t){n[t].is_picked=!1})),s(r,i.Uc,(function(n,t){n[t].state_reasons.push(u.d.CONTENT_MARKED_AS_SPAM)})),s(r,i.bb,(function(n,t){n[t].state=u.c.VISIBLE,n[t].simplified_state=u.c.VISIBLE,n[t].state_reasons=n[t].state_reasons.filter((function(n){return n!==u.d.CONTENT_DISABLED&&n!==u.d.CONTENT_MARKED_AS_SPAM&&n!==u.d.CONTENT_AWAITING_MODERATION}))})),s(r,i.Y,(function(n,t){n[t].simplified_state=u.c.DISABLED,n[t].state_reasons.push(u.d.CONTENT_DISABLED)})),s(r,i.tb,(function(n,t){n[t].is_pinned=!0,n[t].date_pinned=Date.now()})),s(r,i.ad,(function(n,t){n[t].is_pinned=!1,n[t].date_pinned=void 0})),s(r,i.ic,(function(n,t){var e=t.content_uuid,r=t.simplified_state;n[e].simplified_state=r,n[e].state_reasons.push(u.d.CONTENT_DELETED)})),s(r,i.Xb,(function(n){Object.values(n).forEach((function(n){n.actions=[]}))})),s(r,i.jb,Object(o.b)("total_likes")),s(r,i.X,Object(o.a)("total_likes")),s(r,i.hb,Object(o.b)("total_dislikes")),s(r,i.W,Object(o.a)("total_dislikes")),s(r,i.j,(function(n,t){n[t].actions=n[t].actions.concat("flag")})),s(r,i.I,(function(n,t){n[t].total_flags=0,n[t].actions=n[t].actions.filter((function(n){return"flag"!==n}))})),s(r,i.m,(function(n,t){n[t].actions=n[t].actions.concat("like")})),s(r,i.k,(function(n,t){n[t].actions=n[t].actions.concat("flag"),n[t].total_flags+=1})),s(r,i.ib,Object(o.b)("total_flags")),s(r,i.f,(function(n,t){n[t].actions=n[t].actions.concat("dislike")})),s(r,i.Pb,(function(n,t){n[t].actions=n[t].actions.filter((function(n){return"like"!==n}))})),s(r,i.Eb,(function(n,t){n[t].actions=n[t].actions.filter((function(n){return"dislike"!==n}))})),s(r,i.o,(function(n,t){var e=t.parent_uuid,r=t.child_uuid;n[e].reply_uuids.push(r),n[r].parent_uuid=e})),s(r,i.Tb,(function(n,t){var e=t.parent_uuid,r=t.child_uuid;n[e].reply_uuids=n[e].reply_uuids.filter((function(n){return n!==r})),n[r].parent_uuid=""})),s(r,i.kb,(function(n,t){n[t].total_replies+=1,n[t].total_direct_replies+=1})),r),_=(e(140),e(0)),b=e(14),p=e(59);function E(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var O,v,D=function(n,t){return Boolean(n)&&Object(b.H)(t)},m=(E(d={},_.S,(function(n){return function(t){return n[t]}})),E(d,_.R,(function(n,t){return function(e){return Object.values(n).filter((function(n){return n.thread_uuid===e})).filter((function(n){var e=n.content_uuid;return t[_.Ob](e)}))}})),E(d,_.Q,(function(n,t){return function(e){return Object.values(n).filter((function(n){return n.parent_uuid===e})).filter((function(n){var e=n.content_uuid;return t[_.Ob](e)}))}})),E(d,_.eb,(function(n,t){return function(e){return n[e].reply_uuids.filter(t[_.Ob]).map(t[_.S]).filter((function(n){return!n.state_reasons.includes(u.d.ACTOR_GHOST_BANNED)})).sort((function(n,t){return n.time-t.time}))}})),E(d,_.w,(function(n,t){return function(e){var r=n[e],i=t[_.ed](r),u=t[_.jb];return Boolean(r)&&function(n){return!n.social_id&&Boolean(n.content)}(r)&&i&&i.uuid===u}})),E(d,_.v,(function(n,t){return function(e){var r=n[e];return D(r,t[_.hb])&&r.simplified_state!==u.c.VISIBLE}})),E(d,_.s,(function(n,t){return function(e){var r=n[e];return D(r,t[_.hb])&&!r.state_reasons.includes(u.d.CONTENT_DISABLED)}})),E(d,_.x,(function(n,t){return function(e){var r=n[e];return D(r,t[_.hb])&&!r.is_pinned&&r.parent_uuid===r.content_container_uuid}})),E(d,_.A,(function(n,t){return function(e){var r=n[e];return D(r,t[_.hb])&&r.is_pinned&&r.parent_uuid===r.content_container_uuid}})),E(d,_.r,(function(n,t){return function(e){var r=n[e];return D(r,t[_.hb])&&r.total_flags>0}})),E(d,_.t,(function(n,t){return function(e){var r=n[e];return D(r,t[_.hb])&&!r.is_picked}})),E(d,_.u,(function(n,t){return function(e){var r=n[e];return D(r,t[_.hb])&&r.is_picked}})),E(d,_.z,(function(n,t){return function(e){var r=n[e];return D(r,t[_.hb])&&!r.state_reasons.includes(u.d.CONTENT_MARKED_AS_SPAM)}})),E(d,_.B,(function(n,t){return function(e){var r=n[e];return D(r,t[_.hb])&&r.state_reasons.includes(u.d.CONTENT_MARKED_AS_SPAM)}})),E(d,_.y,(function(n,t){return function(e){var r=n[e];return t[_.w](e)&&!r.state_reasons.includes(u.d.CONTENT_DELETED)}})),E(d,_.bb,(function(n){return function(t){return n[t].actions.some((function(n){return"like"===n}))}})),E(d,_.Z,(function(n){return function(t){return n[t].actions.some((function(n){return"dislike"===n}))}})),E(d,_.ab,(function(n){return function(t){return n[t].actions.some((function(n){return"flag"===n}))}})),E(d,_.Y,(function(n){return function(t,e){return n[t].actor_uuid===e}})),E(d,_.X,(function(n,t){return function(n){return t[_.Y](n,t[_.jb])}})),E(d,_.cb,(function(n){return function(t){return n[t].is_pinned}})),E(d,_.db,(function(n){return function(t){return!n[t].is_pinned}})),E(d,_.Ob,(function(n,t){return function(e){var r=n[e];if(!r)return!1;if(Object(b.H)(t[_.hb]))return!0;var i=t[_.Nb];if(Object(p.c)(i)&&i(r.content_container_uuid))return t[_.Sb](r);if(!r.state_reasons.includes(u.d.CONTENT_DELETED)&&t[_.X](r.content_uuid))return!0;var c=t[_.hd](r.actor_uuid),o=r.simplified_state===u.c.DISABLED,a=0===r.total_replies||0===t[_.Q](r.content_uuid).length;return!(c&&a||o)&&!r.state_reasons.includes(u.d.CONTENT_AWAITING_MODERATION)}})),E(d,_.Mb,(function(n){return function(t){return n[t].isNew}})),E(d,_.W,(function(n){return function(t,e){return n[t].reply_uuids.includes(e)}})),E(d,_.V,(function(n){return function(t){return n[t].content_container_uuid}})),d),N=(e(40),e(13),e(22),e(16),e(11),e(3)),h=e(10),j=e(172);function y(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function I(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function T(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?I(Object(e),!0).forEach((function(t){P(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):I(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function P(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var A=T(T({},(y(O={},h.k,(function(n,t){var e=n.state,r=n.getters,i=n.dispatch;if(!e[t.content_uuid])return Promise.resolve();var u=r[_.S](t.content_uuid);return u&&t.payload&&(!u.date_edited&&t.payload.date_edited||u.date_edited<t.payload.date_edited)&&(t.payload.content=u.content,t.payload.is_edited=u.is_edited,t.payload.date_edited=u.date_edited),r[_.Pb](t.actor_uuid)?i(N.fc,t):i(N.ic,t)})),y(O,N.fc,(function(n,t){var e=n.commit,r=t.action,u=t.content_uuid,c=t.payload;switch(r){case j.a.FLAGGED:case j.a.FLAGS_CLEARED:case j.a.PICKED:case j.a.UNPICKED:case j.a.PINNED:case j.a.UNPINNED:case j.a.SPAM:case j.a.DISABLED:case j.a.VISIBLE:e(i.zc,{key:u,item:c})}})),y(O,N.ic,(function(n,t){var e=n.commit,r=t.action,u=t.content_uuid,c=t.payload;switch(r){case j.a.LIKED:e(i.jb,u);break;case j.a.UNLIKED:e(i.X,u);break;case j.a.DISLIKED:e(i.hb,u);break;case j.a.UNDISLIKED:e(i.W,u);break;case j.a.FLAGGED:case j.a.PICKED:case j.a.UNPICKED:case j.a.PINNED:case j.a.UNPINNED:case j.a.DELETED:case j.a.SPAM:case j.a.DISABLED:case j.a.VISIBLE:e(i.zc,{key:u,item:c});break;case j.a.FLAGS_CLEARED:e(i.zc,{key:u,item:c}),e(i.I,u)}})),O)),{},(P(v={},N.Ec,(function(n,t){var e=n.commit,r=Object(a.d)(t),u=r.post;return r.media.forEach((function(n){e(i.tc,n)})),e(i.fc,{key:u.content_uuid,item:u}),Promise.resolve(u)})),P(v,N.Dc,(function(n,t){for(var e=n.dispatch,r=t.content_container_uuid,i=t.contents,u=[],c=function(n){var t=i[n];t.media=t.media||[],t.content_container_uuid=t.content_container_uuid||r,u.push(e(N.Ec,t).then((function(){return t.content_uuid}))),t.origin===a.b.USER&&e(N.yb,t.content_uuid)},o=0;o<i.length;o++)c(o);return Promise.all(u)})),P(v,N.hc,(function(n){(0,n.commit)(i.Xb)})),v)),S=e(375);e.d(t,"storeModule",(function(){return g}));var g=function(){return{mutations:l,getters:m,actions:A,state:a.e,modules:{replyThreads:Object(S.replyThreads)()}}}},669:function(n,t,e){"use strict";e.d(t,"b",(function(){return r})),e.d(t,"a",(function(){return i}));var r=function(n){return function(t,e){t[e][n]++}},i=function(n){return function(t,e){t[e][n]--}}}}]);
//# sourceMappingURL=content-module-js.8d8d550097d7a9b9f5f7.js.map