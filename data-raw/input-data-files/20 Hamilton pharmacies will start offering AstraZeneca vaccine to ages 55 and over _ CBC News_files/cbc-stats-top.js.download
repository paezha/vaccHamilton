function _defineProperty2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _typeof2(e){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){if(void 0===t)var t={};if(void 0===n)var n={};if(void 0===i)var i={};if(i.radio||(i.radio={}),i.plugin||(i.plugin={}),void 0===r)var r={};r.clock||(r.clock={}),function(){"use strict";function d(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function s(e,t,n,i,r,a){return d(function(e,t){return e<<t|e>>>32-t}(d(d(t,e),d(i,a)),r),n)}function p(e,t,n,i,r,a,o){return s(t&n|~t&i,e,t,r,a,o)}function g(e,t,n,i,r,a,o){return s(t&i|n&~i,e,t,r,a,o)}function f(e,t,n,i,r,a,o){return s(t^n^i,e,t,r,a,o)}function h(e,t,n,i,r,a,o){return s(n^(t|~i),e,t,r,a,o)}function l(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var n,i,r,a,o,s=1732584193,l=-271733879,c=-1732584194,u=271733878;for(n=0;n<e.length;n+=16)l=h(l=h(l=h(l=h(l=f(l=f(l=f(l=f(l=g(l=g(l=g(l=g(l=p(l=p(l=p(l=p(r=l,c=p(a=c,u=p(o=u,s=p(i=s,l,c,u,e[n],7,-680876936),l,c,e[n+1],12,-389564586),s,l,e[n+2],17,606105819),u,s,e[n+3],22,-1044525330),c=p(c,u=p(u,s=p(s,l,c,u,e[n+4],7,-176418897),l,c,e[n+5],12,1200080426),s,l,e[n+6],17,-1473231341),u,s,e[n+7],22,-45705983),c=p(c,u=p(u,s=p(s,l,c,u,e[n+8],7,1770035416),l,c,e[n+9],12,-1958414417),s,l,e[n+10],17,-42063),u,s,e[n+11],22,-1990404162),c=p(c,u=p(u,s=p(s,l,c,u,e[n+12],7,1804603682),l,c,e[n+13],12,-40341101),s,l,e[n+14],17,-1502002290),u,s,e[n+15],22,1236535329),c=g(c,u=g(u,s=g(s,l,c,u,e[n+1],5,-165796510),l,c,e[n+6],9,-1069501632),s,l,e[n+11],14,643717713),u,s,e[n],20,-373897302),c=g(c,u=g(u,s=g(s,l,c,u,e[n+5],5,-701558691),l,c,e[n+10],9,38016083),s,l,e[n+15],14,-660478335),u,s,e[n+4],20,-405537848),c=g(c,u=g(u,s=g(s,l,c,u,e[n+9],5,568446438),l,c,e[n+14],9,-1019803690),s,l,e[n+3],14,-187363961),u,s,e[n+8],20,1163531501),c=g(c,u=g(u,s=g(s,l,c,u,e[n+13],5,-1444681467),l,c,e[n+2],9,-51403784),s,l,e[n+7],14,1735328473),u,s,e[n+12],20,-1926607734),c=f(c,u=f(u,s=f(s,l,c,u,e[n+5],4,-378558),l,c,e[n+8],11,-2022574463),s,l,e[n+11],16,1839030562),u,s,e[n+14],23,-35309556),c=f(c,u=f(u,s=f(s,l,c,u,e[n+1],4,-1530992060),l,c,e[n+4],11,1272893353),s,l,e[n+7],16,-155497632),u,s,e[n+10],23,-1094730640),c=f(c,u=f(u,s=f(s,l,c,u,e[n+13],4,681279174),l,c,e[n],11,-358537222),s,l,e[n+3],16,-722521979),u,s,e[n+6],23,76029189),c=f(c,u=f(u,s=f(s,l,c,u,e[n+9],4,-640364487),l,c,e[n+12],11,-421815835),s,l,e[n+15],16,530742520),u,s,e[n+2],23,-995338651),c=h(c,u=h(u,s=h(s,l,c,u,e[n],6,-198630844),l,c,e[n+7],10,1126891415),s,l,e[n+14],15,-1416354905),u,s,e[n+5],21,-57434055),c=h(c,u=h(u,s=h(s,l,c,u,e[n+12],6,1700485571),l,c,e[n+3],10,-1894986606),s,l,e[n+10],15,-1051523),u,s,e[n+1],21,-2054922799),c=h(c,u=h(u,s=h(s,l,c,u,e[n+8],6,1873313359),l,c,e[n+15],10,-30611744),s,l,e[n+6],15,-1560198380),u,s,e[n+13],21,1309151649),c=h(c,u=h(u,s=h(s,l,c,u,e[n+4],6,-145523070),l,c,e[n+11],10,-1120210379),s,l,e[n+2],15,718787259),u,s,e[n+9],21,-343485551),s=d(s,i),l=d(l,r),c=d(c,a),u=d(u,o);return[s,l,c,u]}function c(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function u(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function i(e){var t,n,i="0123456789abcdef",r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+=i.charAt(t>>>4&15)+i.charAt(15&t);return r}function n(e){return unescape(encodeURIComponent(e))}function r(e){return function(e){return c(l(u(e),8*e.length))}(n(e))}function a(e,t){return function(e,t){var n,i,r=u(e),a=[],o=[];for(a[15]=o[15]=void 0,16<r.length&&(r=l(r,8*e.length)),n=0;n<16;n+=1)a[n]=909522486^r[n],o[n]=1549556828^r[n];return i=l(a.concat(u(t)),512+8*t.length),c(l(o.concat(i),640))}(n(e),n(t))}t.md5=function(e,t,n){return t?n?a(t,e):function(e,t){return i(a(e,t))}(t,e):n?r(e):function(e){return i(r(e))}(e)}}(),function(){"use strict";var e={startsWith:function(e,t){return 0==e.indexOf(t)}};t.StringUtils=e}(),function(){"use strict";var r={clone:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},merge:function(e,t){var n=r.clone(e);for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}};t.ObjectUtils=r}(),function(e){"use strict";function t(e,t,n){this.fn=e,this.ctx=t,this.params=n}t.prototype.run=function(){this.params?this.fn.apply(this.ctx,this.params):this.fn.apply(this.ctx)},e.radio.Command=t}(i),function(e){"use strict";function t(e,t){this._queue=[],this._lastTs=0,this._isSuspended=void 0!==e&&e,this._delay=void 0!==t?t:0}t.prototype.addCommand=function(e){this._queue.push(e),this._drain()},t.prototype.cancelAllCommands=function(){this._queue=[]},t.prototype.isEmpty=function(){return 0===this._queue.length},t.prototype.suspend=function(){this._isSuspended=!0},t.prototype.resume=function(){this._isSuspended=!1,this._drain()},t.prototype.flush=function(){this._isSuspended=!1;for(var e=0;e<this._queue.length;e++){this._queue[e].run()}this._queue=[]},t.prototype._drain=function(){if(!this._isSuspended&&!this._drainInProgress){this._drainInProgress=!0;var n=this;!function e(){var t=n._queue.shift();t?n._runCommand(t,function(){n._isSuspended||e()}):n._drainInProgress=!1}()}},t.prototype._runCommand=function(e,t){function n(){e.run(),null!=t&&t.call(i)}var i=this;if(0==this._lastTs)n();else{var r=(new Date).getTime(),a=r-this._lastTs;this._lastTs=r,a<this._delay?setTimeout(n,this._delay-a):n()}},e.radio.CommandQueue=t}(i),function(e){"use strict";function o(e,t){if(this._name=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._listeners={},this._requests={},this._commands={},this._isShutDown=!1}function a(e,t){if(e===t)return!0;for(var n=(e||"").split(o.SEPARATOR),i=(t||"").split(o.SEPARATOR),r=!0,a=0;a<n.length;a++)r=r&&(n[a]===o.WILDCARD||n[a]===i[a]);return r}o.WILDCARD="*",o.SEPARATOR=":",o.prototype.toString=function(){return"<channel: "+this._name+">"},o.prototype.shutdown=function(){this._isShutDown||(this._logger.debug(i,"#shutdown > Shutting down"),this.off(),this._requests={},this._commands={},this._isShutDown=!0)},o.prototype.on=function(e,t,n){this._isShutDown||(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push({fn:t,ctx:n}))},o.prototype.off=function(e,t,n){if(!this._isShutDown){if(t="function"==typeof t?t:null,!e&&null==t&&!n)return void(this._listeners={});if(e)this._removeListener(e,t,n);else for(e in this._listeners)this._listeners.hasOwnProperty(e)&&this._removeListener(e,t,n)}},o.prototype.trigger=function(e){if(!this._isShutDown)for(var t in this._listeners)if(this._listeners.hasOwnProperty(t)&&a(t,e.name))for(var n=this._listeners[t].slice(0),i=0;i<n.length;i++){var r=n[i];r.fn.call(r.ctx,e)}},o.prototype.comply=function(e,t,n){this._isShutDown||(this._commands[e]={cmd:t,ctx:n})},o.prototype.command=function(e,t){if(!this._isShutDown){var n=this._commands[e];return n?void n.cmd.call(n.ctx,t):void this._logger.warn(i,"#command > No command handler for: "+e)}},o.prototype.reply=function(e,t,n){this._isShutDown||(this._requests[e]={fn:t,ctx:n})},o.prototype.request=function(e){if(!this._isShutDown){var t=this._requests[e];return t?t.fn.call(t.ctx):(this._logger.warn(i,"#request > No request handler for: "+e),null)}},o.prototype._removeListener=function(e,t,n){t="function"==typeof t?t:null;var i=this._listeners[e];if(i){if(!i.length||null==t&&!n)return void delete this._listeners[e];for(var r=0;r<i.length;r++){var a=i[r];null!==t&&t!==a.fn||n&&n!==a.ctx||this._listeners[e].splice(r,1)}}};var i="radio::Channel";e.radio.Channel=o}(i),function(e){"use strict";function t(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._channels={}}var n=e.radio.Channel;t.prototype.channel=function(e){return this._channels[e]||(this._channels[e]=new n(e,this._logger)),this._channels[e]},t.prototype.shutdown=function(){for(var e in this._channels)this._channels.hasOwnProperty(e)&&this._channels[e].shutdown()},e.radio.Radio=t}(i),function(){"use strict";i.extend=function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e}}(),function(e){"use strict";function t(){}t.prototype.write=function(e){throw new Error("Implementation error: Method must be overridden.")},e.ILogWriter=t}(i),function(e){"use strict";function t(){}t.prototype.write=function(e){window.console&&window.console.log&&window.console.log(e)},e.LogWriter=t}(i),function(e){"use strict";function t(){}t.prototype.setLogWriter=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getLogWriter=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getEnabled=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.debug=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.info=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.warn=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.error=function(e,t){throw new Error("Implementation error: Method must be overridden.")},e.ILogger=t}(i),function(e){"use strict";function t(){this._logWriter=new n}var n=e.LogWriter;t.prototype.setLogWriter=function(e){if(!e)throw new Error("Reference to the ILogWriter object cannot be NULL");this._logWriter=e,this._enabled=!1},t.prototype.getLogWriter=function(){return this._logWriter},t.prototype.getEnabled=function(){return this._enabled},t.prototype.enable=function(){this._enabled=!0},t.prototype.disable=function(){this._enabled=!1},t.prototype.debug=function(e,t){this._log(e,r,t)},t.prototype.info=function(e,t){this._log(e,i,t)},t.prototype.warn=function(e,t){this._log(e,a,t)},t.prototype.error=function(e,t){this._log(e,o,t)},t.prototype._log=function(e,t,n){if(t==o||this._enabled){var i="",r=new Date;i+="["+r.toTimeString()+"."+function(e){return e<10?"00"+e:e<100?"0"+e:""+e}(r.getMilliseconds())+"] ["+t+"] ",i+="["+e+"] "+n,this._logWriter.write(i)}};var i="INFO",r="DEBUG",a="WARN",o="ERROR";e.Logger=t}(i),function(e){"use strict";function t(e,t){this._pluginName=e,this._eventName=t}var n=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getEventName=function(){return this._eventName},t.prototype.getName=function(){return this._pluginName+n.SEPARATOR+this._eventName},e.Trigger=t}(i),function(e){"use strict";function t(e,t){this.name=e,this.data=t}t.SUCCESS="success",t.ERROR="error",t.createFromTrigger=function(e){return new t(e.getName())},e.Event=t}(i),function(e){"use strict";function t(){this._events={}}t.prototype.addEventListener=function(e,t,n){e&&t&&(n=n||window,this._events[e]=this._events[e]||[],this._events[e].push({cb:t,ctx:n}))},t.prototype.removeEventListener=function(e,t,n){if(e&&t){n=n||window;var i,r,a=!1;for(r in this._events)if(e===r){a=!0;break}if(a){for(i=this._events[r].length-1;0<=i;i--){var o=this._events[r][i];t===o.cb&&n===o.ctx&&this._events[r].splice(i,1)}this._events[r].length||delete this._events[r]}}},t.prototype.dispatchEvent=function(e){var t,n;if(e.name)for(t in this._events)if(this._events.hasOwnProperty(t)&&e.name===t){var i=this._events[t].slice(0),r=i.length;for(n=0;n<r;n++)i[n].cb.call(i[n].ctx,e);break}},t.prototype.removeAllListeners=function(e){var t,n;if(e){for(n in this._events)if(this._events.hasOwnProperty(n)){for(t=this._events[n].length-1;0<=t;t--){this._events[n][t].ctx===e&&this._events[n].splice(t,1)}this._events[n].length||delete this._events[n]}}else this._events={}},e.EventDispatcher=t}(i),function(e){"use strict";function t(){}function a(){a.__super__.constructor.call(this),this._connection=null}var o=e.Event,n=e.EventDispatcher;t.GET="GET",a.RESPONSE="response",a.INSTANCE="instance",e.extend(a,n),a.prototype.close=function(){this.removeAllListeners(null)},a.prototype.load=function(e){e&&e.method&&e.url&&(e._xmlhttp=this._createCORSRequest(e),e._xmlhttp?e._xmlhttp.send():this._loadImage(e))},a.prototype._createCORSRequest=function(e){var t=null;if(void 0!==window.XMLHttpRequest){var n=new window.XMLHttpRequest;"withCredentials"in n&&(t=n).open(e.method,e.url,!0)}if(null==t&&void 0!==window.XDomainRequest&&(t=new window.XDomainRequest).open(e.method,e.url),t){var i={},r=i[a.INSTANCE]=this;t.onload=function(){return t.status&&400<=parseInt(t.status,10)?this.onerror():(i[a.RESPONSE]=t.responseText,void r.dispatchEvent(new o(o.SUCCESS,i)))},t.onerror=function(){r.dispatchEvent(new o(o.ERROR,i))}}return t},a.prototype._loadImage=function(e){this._connection||(this._connection=new Image,this._connection.alt=""),this._connection.src=e.url;var t={};t[a.RESPONSE]="",(t[a.INSTANCE]=this).dispatchEvent(new o(o.SUCCESS,t))},e.URLRequestMethod=t,e.URLRequest=function(e,t){this.url=e||null,this.method=t,this._xmlhttp=null},e.URLLoader=a}(i),function(){"use strict";var t="2.0.2.123",e={getVersion:function(){return"js-"+t+"-150f2b"},getMajor:function(){return e.getNumberAtPosition(0)},getMinor:function(){return e.getNumberAtPosition(1)},getMicro:function(){return e.getNumberAtPosition(2)},getPatch:function(){return e.getNumberAtPosition(3)},getBuild:function(){return"150f2b"},getApiLevel:function(){return 4},getNumberAtPosition:function(e){return t.split(".")[e]}};n.Version=e}(),function(e){"use strict";function t(e,t){this._message=e,this._details=t}t.prototype.getMessage=function(){return this._message},t.prototype.getDetails=function(){return this._details},e.ErrorInfo=t}(n),function(){"use strict";n.HeartbeatConfig=function(){this.debugLogging=!1}}(),function(e){"use strict";function t(){}t.prototype.onError=function(e){},e.HeartbeatDelegate=t}(n),function(e){"use strict";function t(){}t.prototype.configure=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.bootstrap=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.setup=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.destroy=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getName=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.isInitialized=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.resolveData=function(e){throw new Error("Implementation error: Method must be overridden.")},e.plugin.IPlugin=t}(i),function(e){"use strict";function t(e,t,n,i){this.trigger=e,this.action=n,this.plugin=t,this._paramMappings={},this.mergeParams(i)}var i=e.plugin.ParamMapping;t.prototype.mergeParams=function(e){if(e)for(var t=0;t<e.length;t++){var n=e[t];this._paramMappings[n.getKeyName()]=n}},t.prototype.getParams=function(){var e=[];for(var t in this._paramMappings)this._paramMappings.hasOwnProperty(t)&&e.push(this._paramMappings[t]);return e},t.prototype.addParam=function(e){this._paramMappings[e.getKeyName()]=e},t.prototype.removeParam=function(e,t){var n=new i(e,t);this._paramMappings.hasOwnProperty(n.getKeyName())&&delete this._paramMappings[n.getKeyName()]},e.plugin.Behaviour=t}(i),function(e){"use strict";function t(e,t,n){this._pluginName=e,this._key=t,this._paramName=n||e+i.SEPARATOR+t}var i=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getKey=function(){return this._key},t.prototype.getKeyName=function(){return this._pluginName+i.SEPARATOR+this._key},t.prototype.getParamName=function(){return this._paramName},e.plugin.ParamMapping=t}(i),function(e){"use strict";function n(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._plugins={},this._behaviours={},this._radio=new t(this._logger),this._dataChannel=this._radio.channel(r),this._ctrlChannel=this._radio.channel(s)}var i=e.Event,t=e.radio.Radio,a=e.radio.Channel,o=e.plugin.Behaviour;n.ERROR="error",n.prototype.addPlugin=function(e){var t=e.getName();this._plugins[t]&&this._logger.warn(l,"#addPlugin > Replacing plugin: "+t),(this._plugins[t]=e).bootstrap(this)},n.prototype.setupPlugins=function(){for(var e in this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].setup()},n.prototype.pluginExists=function(e){return!!this._plugins[e]},n.prototype.isPluginInitialized=function(e){return this._plugins[e]&&this._plugins[e].isInitialized()},n.prototype.on=function(e,t,n,i){this._dataChannel.on(e+a.SEPARATOR+t,n,i)},n.prototype.off=function(e,t,n,i){var r=e&&t?e+a.SEPARATOR+t:null;this._dataChannel.off(r,n,i)},n.prototype.trigger=function(e){var t=e.name,n=this._behaviours[t];if(n){var i,r,a,o,s,l={},c={};for(i=0;i<n.length;i++)if(o=(a=n[i]).getParams())for(r=0;r<o.length;r++)l[(s=o[r]).getPluginName()]=l[s.getPluginName()]||[],s.key in l[s.getPluginName()]||l[s.getPluginName()].push(s.getKey());for(var u in l)l.hasOwnProperty(u)&&(c[u]=this.request(u,l[u]));for(i=0;i<n.length;i++){var d={_behaviour:a=n[i],_eventData:e.data||{}};if(o=a.getParams()){for(r=0;r<o.length;r++)d[(s=o[r]).getParamName()]=c[s.getPluginName()]?c[s.getPluginName()][s.getKey()]:null;this.command(a.plugin.getName(),a.action,d)}}}this._dataChannel.trigger(e)},n.prototype.request=function(e,t){var n=this._plugins[e];return n&&t&&0!=t.length?n.resolveData(t):null},n.prototype.raise=function(e){this._errorInfo=e;var t=new i(n.ERROR,e);this._ctrlChannel.trigger(t)},n.prototype.getErrorInfo=function(){return this._errorInfo},n.prototype.destroy=function(){for(var e in this._radio.shutdown(),this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].destroy()},n.prototype.comply=function(e,t,n){this._dataChannel.comply(e.getName()+a.SEPARATOR+t,n,e)},n.prototype.command=function(e,t,n){this._dataChannel.command(e+a.SEPARATOR+t,n)},n.prototype.registerBehaviour=function(e,t,n,i){var r=e.getName(),a=new o(e,t,n,i);this._behaviours[r]=this._behaviours[r]||[],this._behaviours[r].push(a)};var r="data_channel",s="ctrl_channel",l="plugin::PluginManager";e.plugin.PluginManager=n}(i),function(e,t){"use strict";function n(e){this._name=e,this._isInitialized=!1,this._isDestroyed=!1,this._isEnabled=!0,this._dataResolver={},this._logTag="plugin::"+this.getName(),this._logger=new i}var i=e.Logger,r=e.Trigger,a=e.Event,o=t.ErrorInfo;n.INITIALIZED="initialized",n.prototype.configure=function(e){},n.prototype.bootstrap=function(e){this._pluginManager=e,this._isDestroyed&&this._pluginManager.raise(new o("Invalid state.","Plugin already destroyed."))},n.prototype.setup=function(){this._trigger(n.INITIALIZED),this._isInitialized=!0},n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._teardown())},n.prototype.enable=function(){this._isEnabled=!0,this._enabled()},n.prototype.disable=function(){this._isEnabled=!1,this._disabled()},n.prototype.getName=function(){return this._name},n.prototype.getLogger=function(){return this._logger},n.prototype.isInitialized=function(){return this._isInitialized},n.prototype.resolveData=function(e){if(!this._isEnabled||!this._isInitialized)return this._logger.warn(this._logTag,"Unable to retrieve plugin data. Plugin: "+this._name+". Enabled: "+this._isEnabled+". Initialized: "+this._isInitialized+"."),null;if("function"==typeof this._dataResolver)return this._dataResolver.call(this,e);var t=null;if(e)for(var n=0;n<e.length;n++){var i=e[n];this._dataResolver.hasOwnProperty(i)&&(t=t||{},"function"==typeof this._dataResolver[i]?t[i]=this._dataResolver[i].call(this):t[i]=this._dataResolver[i])}return t},n.prototype.toString=function(){return"<plugin: "+this._name+">"},n.prototype._enabled=function(){},n.prototype._disabled=function(){},n.prototype._teardown=function(){},n.prototype._canProcess=function(){return this._isEnabled?!this._isDestroyed||(this._logger.error(this._logTag,"Plugin destroyed."),!1):(this._logger.error(this._logTag,"Plugin disabled."),!1)},n.prototype._trigger=function(e,t){var n=a.createFromTrigger(new r(this.getName(),e));n.data=t,this._pluginManager.trigger(n)},e.plugin.BasePlugin=n}(i,n),function(e){"use strict";function i(e,t,n){this.name=e,this.interval=t,this.isActive=!1,this.repeatCount=void 0!==n?n:a,this._nextTickTimestamp=0,this.reset()}function t(e,t){if(!e)throw new Error("Reference to the ClockService object cannot be NULL");if(this._service=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._isDestroyed=!1,this._timers={};var n=this;this._clock=window.setInterval(function(){n._onTick()},1e3*o)}i.prototype.reset=function(){this.tick=0,this._createdTimestamp=(new Date).getTime(),this._updateNextTickTimestamp()},i.prototype.shouldTick=function(){return(new Date).getTime()>this._nextTickTimestamp-o/2&&(this.tick++,this._updateNextTickTimestamp(),!0)},i.prototype._updateNextTickTimestamp=function(){this._nextTickTimestamp=this._createdTimestamp+1e3*this.interval*(this.tick+1)},t.prototype.createTimer=function(e,t,n){this._timers[e]=new i(e,t,n)},t.prototype.destroyTimer=function(e){delete this._timers[e]},t.prototype.resumeTimer=function(e,t){t=void 0!==t&&t,this._logger.debug(r,"#resumeTimer(name="+e+", reset="+t+")");var n=this._timers[e];n&&(n.isActive=!0,t&&n.reset())},t.prototype.pauseTimer=function(e,t){t=void 0!==t&&t,this._logger.debug(r,"#pauseTimer(name="+e+", reset="+t+")");var n=this._timers[e];n&&(n.isActive=!1,t&&n.reset())},t.prototype.isTimerPaused=function(e){var t=this._timers[e];return!!t&&!t.isActive},t.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._timers={},window.clearInterval(this._clock))},t.prototype._onTick=function(){for(var e in this._timers)if(this._timers.hasOwnProperty(e)){var t=this._timers[e];t.isActive&&t.shouldTick()&&(1<t.interval&&this._logger.debug(r,"#_onTick() > "+t.name+"("+t.tick+" | "+t.repeatCount+")"),0!=t.repeatCount?(this._service.onTick(t.name,t.interval,t.tick),t.repeatCount!=a&&t.repeatCount--):this.destroyTimer(t.name))}};var r="service.clock::TimerManager",a=-1,o=.25;e.clock.TimerDescriptor=i,e.clock.TimerManager=t}(r),function(e,t,n){"use strict";function i(e){if(i.__super__.constructor.call(this,s),!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._timerManager=new r(this,this._logger),this._setupDataResolver()}var r=n.clock.TimerManager,o=t.StringUtils,a=e.plugin.BasePlugin;e.extend(i,a),i.prototype.bootstrap=function(e){i.__super__.bootstrap.call(this,e),this._pluginManager.comply(this,l,this._cmdCreate),this._pluginManager.comply(this,u,this._cmdResume),this._pluginManager.comply(this,c,this._cmdPause),this._pluginManager.comply(this,d,this._cmdDestroy)},i.prototype._teardown=function(){this._timerManager.destroy()},i.prototype._cmdCreate=function(e){var t=e[f]||v;this._timerManager.createTimer(e[p],e[g],t)},i.prototype._cmdPause=function(e){this._timerManager.pauseTimer(e[p],!!e[_])},i.prototype._cmdResume=function(e){this._timerManager.resumeTimer(e[p],!!e[_])},i.prototype._cmdDestroy=function(e){this._timerManager.destroyTimer(e[p])},i.prototype.onTick=function(e,t,n){e+=".tick";var i={};i[p]=e,i[g]=t,i[h]=n,this._trigger(e,i)},i.prototype._setupDataResolver=function(){var a={},t=this._timerManager;a[m]=function(e){return t.isTimerPaused(e)},this._dataResolver=function(e){if(!e||0==e.length)return null;for(var t=null,n=0;n<e.length;n++){var i=e[n];if(t=t||{},o.startsWith(i,m)){var r=i.split(m+".");0<r.length&&(t[i]=a[m].call(this,r[1]))}}return t}};var s="service.clock",l="create",c="pause",u="resume",d="destroy",p="name",g="interval",f="repeat_count",h="tick",_="reset",m="is_paused",v=-1;n.clock.ClockService=i}(i,t,r),function(e,t,n){"use strict";function i(e,t){if(this._logger=new r,this._pluginManager=new a(this._logger),this._pluginManager.addPlugin(new o(this._logger)),t)for(var n=0;n<t.length;n++)this._pluginManager.addPlugin(t[n]);this._pluginManager.setupPlugins(),this._isDestroyed=!1}var r=e.Logger,a=e.plugin.PluginManager,o=t.clock.ClockService;i.prototype.configure=function(e){if(!e)throw new Error("Configuration object cannot be NULL.");e.debugLogging?this._logger.enable():this._logger.disable(),this._isDestroyed&&this._logger.error(s,"Instance is destroyed.")},i.prototype.destroy=function(){this._isDestroyed||(this._pluginManager.destroy(),this._isDestroyed=!0)};var s="Heartbeat";n.Heartbeat=i}(i,r,n),e.ADB||(e.ADB={}),e.ADB.core||(e.ADB.core=i),e.ADB.va||(e.ADB.va=n),e.ADB.va.utils||(e.ADB.va.utils=t),e.ADB.va.plugins||(e.ADB.va.plugins={})}(this),function(e){if(void 0===t)var t={};!function(){"use strict";var e={ASSET_TYPE_VOD:"vod",ASSET_TYPE_LIVE:"live",ASSET_TYPE_LINEAR:"linear"};t.AssetType=e}(),function(e){"use strict";function t(){this.playerName=null,this.name=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return"playerName="+this.playerName+", name="+this.name+", position="+this.position+", startTime="+this.startTime},e.AdBreakInfo=t}(t),function(e){"use strict";function t(){this.id=null,this.name=null,this.length=null,this.position=null}t.prototype.toString=function(){return"id="+this.id+", name="+this.name+", length="+this.length+", position="+this.position},e.AdInfo=t}(t),function(e){"use strict";function t(){this.name=null,this.length=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return"name="+this.name+", length="+this.length+", position="+this.position+", startTime="+this.startTime},e.ChapterInfo=t}(t),function(e){"use strict";function t(){this.bitrate=null,this.fps=null,this.droppedFrames=null,this.startupTime=null}t.prototype.toString=function(){return"bitrate="+this.bitrate+", fps="+this.fps+", droppedFrames="+this.droppedFrames+", startupTime="+this.startupTime},e.QoSInfo=t}(t),function(e){"use strict";function t(){this.playerName=null,this.id=null,this.name=null,this.length=null,this.playhead=null,this.streamType=null,this.resumed=!1}t.prototype.toString=function(){return"playerName="+this.playerName+", id="+this.id+", name="+this.name+", length="+this.length+", playhead="+this.playhead+", streamType="+this.streamType+", resumed="+this.resumed},e.VideoInfo=t}(t),function(){"use strict";t.VideoPlayerPluginConfig=function(){this.debugLogging=!1}}(),function(e){"use strict";function t(){}t.prototype.getVideoInfo=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getAdBreakInfo=function(){return null},t.prototype.getAdInfo=function(){return null},t.prototype.getChapterInfo=function(){return null},t.prototype.getQoSInfo=function(){return null},e.VideoPlayerPluginDelegate=t}(t),function(e,t){"use strict";function n(e){if(n.__super__.constructor.call(this,s),!e)throw new Error("PlayerPlugin delegate cannot be NULL.");this._delegate=e,this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._isTrackingAd=!1,this._playheadTimer=null,this._previousPlayhead=-1,this._stalledPlayheadCount=0,this._playheadStalled=!1,this._videoIdle=!1,this._setupDataResolver()}var i=e.plugin.ParamMapping,r=e.Trigger,a=e.plugin.BasePlugin,o=t.VideoPlayerPluginConfig;e.extend(n,a),n.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof o))throw new Error("Expected config data to be instance of VideoPlayerPluginConfig.");e.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure(debugLogging="+e.debugLogging+")")},n.prototype.bootstrap=function(e){n.__super__.bootstrap.call(this,e),this._registerCommands(),this._registerBehaviours()},n.prototype._cmdVideoIdleStart=function(e){this._logger.info(this._logTag,"#_cmdVideoIdleStart()"),this._videoIdle=!0},n.prototype._cmdVideoIdleResume=function(e){this._logger.info(this._logTag,"#_cmdVideoIdleResume()"),this._videoIdle&&(this._trigger(f),this._trigger(h),e.isInChapter&&this._trigger(E),e.isInAd&&(this._trigger(C),this._isTrackingAd=!0)),this._videoIdle=!1},n.prototype.trackSessionStart=function(){if(this._logger.info(this._logTag,"#trackSessionStart()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackSessionStart() > No active tracking session.");if(this._isTrackingSessionStarted)return void this._logger.info(this._logTag,"#trackSessionStart() > Tracking session already started.");this._trigger(f),this._isTrackingSessionStarted=!0;var e=this._dataResolver(["video.resumed"]);e.hasOwnProperty("video.resumed")&&e["video.resumed"]&&this._trigger(h)}},n.prototype.trackVideoLoad=function(){this._logger.info(this._logTag,"#trackVideoLoad()"),this._canProcess()&&(this._trigger(p),this._isTrackingSessionActive=!0,this._isTrackingSessionStarted=!1)},n.prototype.trackVideoUnload=function(){if(this._logger.info(this._logTag,"#trackVideoUnload()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackVideoUnload() > No active tracking session.");this._stopPlayheadTimer(),this._trigger(g),this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._videoIdle=!1}},n.prototype.trackPlay=function(){this._logger.info(this._logTag,"#trackPlay()"),this._canProcess()&&this._startSessionIfNeeded("trackPlay")&&(this._trigger(v),this._startPlayheadTimer())},n.prototype.trackPause=function(){if(this._logger.info(this._logTag,"#trackPause()"),this._canProcess()&&this._startSessionIfNeeded("trackPause")){this._stopPlayheadTimer();var e={};e[B]=!1,this._trigger(y,e)}},n.prototype.trackBufferStart=function(){this._logger.info(this._logTag,"#trackBufferStart()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferStart")&&(this._stopPlayheadTimer(),this._trigger(b))},n.prototype.trackBufferComplete=function(){this._logger.info(this._logTag,"#trackBufferComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferComplete")&&(this._trigger(S),this._startPlayheadTimer())},n.prototype.trackSeekStart=function(){this._logger.info(this._logTag,"#trackSeekStart()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekStart")&&(this._stopPlayheadTimer(),this._trigger(A))},n.prototype.trackSeekComplete=function(){if(this._logger.info(this._logTag,"#trackSeekComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekComplete")){this._trigger(T),this._startPlayheadTimer();var e=this._dataResolver(["ad.isInAd"]);this._isTrackingAd=e.hasOwnProperty("ad.isInAd")&&e["ad.isInAd"]}},n.prototype.trackComplete=function(e){if(this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackComplete")){var t={};t[N]=e,this._stopPlayheadTimer(),this._trigger(_,t)}},n.prototype.trackTimedMetadata=function(e){this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackTimedMetadata")&&this._trigger(m,e)},n.prototype.trackChapterStart=function(){this._logger.info(this._logTag,"#trackChapterStart()"),this._canProcess()&&this._startSessionIfNeeded("#trackChapterStart")&&this._trigger(E)},n.prototype.trackChapterComplete=function(){this._logger.info(this._logTag,"trackChapterComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterComplete")&&this._trigger(I)},n.prototype.trackAdStart=function(){this._logger.info(this._logTag,"#trackAdStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdStart")&&(this._trigger(C),this._isTrackingAd=!0)},n.prototype.trackAdComplete=function(){this._logger.info(this._logTag,"#trackAdComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdComplete")&&(this._trigger(P),this._isTrackingAd=!1)},n.prototype.trackBitrateChange=function(){this._logger.info(this._logTag,"#trackBitrateChange()"),this._canProcess()&&this._startSessionIfNeeded("trackBitrateChange")&&this._trigger(w)},n.prototype.trackVideoPlayerError=function(e){if(this._logger.info(this._logTag,"#trackVideoPlayerError(errorId="+e+")"),this._startSessionIfNeeded("trackVideoPlayerError")){var t={};t[M]=d,t[L]=e,this._trigger(k,t)}},n.prototype.trackApplicationError=function(e){if(this._logger.info(this._logTag,"#trackApplicationError(errorId="+e+")"),this._startSessionIfNeeded("trackApplicationError")){var t={};t[M]=u,t[L]=e,this._trigger(k,t)}},n.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoIdleStart",this._cmdVideoIdleStart),this._pluginManager.comply(this,"handleVideoIdleResume",this._cmdVideoIdleResume)},n.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new r(c,D),this,"handleVideoIdleStart"),this._pluginManager.registerBehaviour(new r(c,O),this,"handleVideoIdleResume",[new i(l,"ad.isInAd","isInAd"),new i(l,"chapter.isInChapter","isInChapter")])},n.prototype._setupDataResolver=function(){function n(){return l.video||(l.video=c._delegate.getVideoInfo(),c._logger.info(c._logTag,"Data from delegate > VideoInfo: "+l.video)),l.video}function i(){return l.ad||(l.ad=c._delegate.getAdInfo(),c._logger.info(c._logTag,"Data from delegate > AdInfo: "+l.ad)),l.ad}function r(){return l.pod||(l.pod=c._delegate.getAdBreakInfo(),c._logger.info(c._logTag,"Data from delegate > AdBreakInfo: "+l.pod)),l.pod}function a(){return l.chapter||(l.chapter=c._delegate.getChapterInfo(),c._logger.info(c._logTag,"Data from delegate > ChapterInfo: "+l.chapter)),l.chapter}function o(){return l.qos||(l.qos=c._delegate.getQoSInfo(),c._logger.info(c._logTag,"Data from delegate > QoSInfo: "+l.qos)),l.qos}var s={},l={},c=this;s["video.id"]=function(){var e=n(),t=e?e.id:null;return c._logger.debug(c._logTag,"Resolving video.id: "+t),t},s["video.name"]=function(){var e=n(),t=e?e.name:null;return c._logger.debug(c._logTag,"Resolving video.name: "+t),t},s["video.length"]=function(){var e=n(),t=e?e.length:NaN;return c._logger.debug(c._logTag,"Resolving video.length: "+t),t},s["video.playerName"]=function(){var e=n(),t=e?e.playerName:null;return c._logger.debug(c._logTag,"Resolving video.playerName: "+t),t},s["video.streamType"]=function(){var e=n(),t=e?e.streamType:null;return c._logger.debug(c._logTag,"Resolving video.streamType: "+t),t},s["video.playhead"]=function(){var e=n(),t=e?e.playhead:NaN;return c._logger.debug(c._logTag,"Resolving video.playhead: "+t),t},s["video.resumed"]=function(){var e=n(),t=!!e&&e.resumed;return c._logger.debug(c._logTag,"Resolving video.resumed: "+t),t},s["video.playheadStalled"]=function(){return this._playheadStalled},s["pod.name"]=function(){var e=r(),t=e?e.name:null;return c._logger.debug(c._logTag,"Resolving pod.name: "+t),t},s["pod.playerName"]=function(){var e=r(),t=e?e.playerName:null;return c._logger.debug(c._logTag,"Resolving pod.playerName: "+t),t},s["pod.position"]=function(){var e=r(),t=e?e.position:NaN;return c._logger.debug(c._logTag,"Resolving pod.position: "+t),t},s["pod.startTime"]=function(){var e=r(),t=e?e.startTime:NaN;return c._logger.debug(c._logTag,"Resolving pod.startTime: "+t),t},s["ad.isInAd"]=function(){var e=null!=i();return c._logger.debug(c._logTag,"Resolving ad.isInAd: "+e),e},s["ad.isInAdBreak"]=function(){var e=null!=r();return c._logger.debug(c._logTag,"Resolving ad.isInAdBreak: "+e),e},s["ad.id"]=function(){var e=i(),t=e?e.id:null;return c._logger.debug(c._logTag,"Resolving ad.id: "+t),t},s["ad.name"]=function(){var e=i(),t=e?e.name:null;return c._logger.debug(c._logTag,"Resolving ad.name: "+t),t},s["ad.length"]=function(){var e=i(),t=e?e.length:NaN;return c._logger.debug(c._logTag,"Resolving ad.length: "+t),t},s["ad.position"]=function(){var e=i(),t=e?e.position:NaN;return c._logger.debug(c._logTag,"Resolving ad.position: "+t),t},s["chapter.isInChapter"]=function(){var e=null!=a();return c._logger.debug(c._logTag,"Resolving chapter.isInChapter: "+e),e},s["chapter.name"]=function(){var e=a(),t=e?e.name:null;return c._logger.debug(c._logTag,"Resolving chapter.name: "+t),t},s["chapter.length"]=function(){var e=a(),t=e?e.length:NaN;return c._logger.debug(c._logTag,"Resolving chapter.length: "+t),t},s["chapter.position"]=function(){var e=a(),t=e?e.position:NaN;return c._logger.debug(c._logTag,"Resolving chapter.position: "+t),t},s["chapter.startTime"]=function(){var e=a(),t=e?e.startTime:NaN;return c._logger.debug(c._logTag,"Resolving chapter.startTime: "+t),t},s["qos.bitrate"]=function(){var e=o(),t=e?e.bitrate:NaN;return c._logger.debug(c._logTag,"Resolving qos.bitrate: "+t),t},s["qos.fps"]=function(){var e=o(),t=e?e.fps:NaN;return c._logger.debug(c._logTag,"Resolving qos.fps: "+t),t},s["qos.droppedFrames"]=function(){var e=o(),t=e?e.droppedFrames:NaN;return c._logger.debug(c._logTag,"Resolving qos.droppedFrames: "+t),t},s["qos.startupTime"]=function(){var e=o(),t=e?1e3*e.startupTime:NaN;return c._logger.debug(c._logTag,"Resolving qos.startupTime: "+t),t},this._dataResolver=function(e){if(!e||0==e.length)return null;l={};for(var t=null,n=0;n<e.length;n++){var i=e[n];(t=t||{})[i]=s.hasOwnProperty(i)?s[i].call(this):null}return t}},n.prototype._trackPlayheadStall=function(){this._canProcess()&&(this._playheadStalled||(this._logger.info(this._logTag,"#_trackPlayheadStall()"),this._stalledPlayheadCount=0,this._playheadStalled=!0,this._trigger(y)))},n.prototype._trackExitStall=function(){this._canProcess()&&(this._stalledPlayheadCount=0,this._playheadStalled&&(this._logger.info(this._logTag,"#_trackExitStall()"),this._playheadStalled=!1,this._trigger(v)))},n.prototype._startPlayheadTimer=function(){var n=this;this._playheadTimer||(this._playheadTimer=setInterval(function(){if(n._canProcess()){var e=n._dataResolver(["ad.isInAd","video.playhead"]);if(n._isTrackingAd)n._playheadStalled&&n._trackExitStall(),e.hasOwnProperty("ad.isInAd")&&!e["ad.isInAd"]&&(n._isTrackingAd=!1);else{var t=e["video.playhead"];t!=n._previousPlayhead?n._trackExitStall():0<=n._previousPlayhead&&t==n._previousPlayhead&&(n._stalledPlayheadCount++,n._stalledPlayheadCount==x&&n._trackPlayheadStall()),n._previousPlayhead=t}}},R))},n.prototype._stopPlayheadTimer=function(){this._playheadTimer&&(clearInterval(this._playheadTimer),this._playheadTimer=null),this._trackExitStall()},n.prototype._startSessionIfNeeded=function(e){return this._isTrackingSessionActive?(this._isTrackingSessionStarted||(this._logger.info(this._logTag,"#"+e+"() > Tracking session auto-start."),this.trackSessionStart()),!0):(this._logger.warn(this._logTag,"#"+e+"() > No active tracking session."),!1)};var s="player",l=s,c="adobe-heartbeat",u="sourceErrorExternal",d="sourceErrorSDK",p="video_load",g="video_unload",f="video_start",h="video_resume",_="video_complete",m="timed_metadata",v="play",y="pause",C="ad_start",P="ad_complete",b="buffer_start",S="buffer_complete",A="seek_start",T="seek_complete",E="chapter_start",I="chapter_complete",w="bitrate_change",k="track_error",D="video_idle_start",O="video_idle_resume",N="callback",B="filter_report",M="source",L="error_id",R=1001,x=2;t.VideoPlayerPlugin=n}(e.ADB.core,t),e.ADB.va.plugins.videoplayer||(e.ADB.va.plugins.videoplayer=t)}(this),function(e){if(void 0===t)var t={};t.clock||(t.clock={}),t.context||(t.context={}),t.filter||(t.filter={}),t.model||(t.model={}),t.network||(t.network={}),function(e,t){"use strict";function i(e,t,n,i,r){if(!t)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=t,!e)throw new Error("Reference to the pluginManager object cannot be NULL");if(this._pluginManager=e,!r)throw new Error("Reference to the logger object cannot be NULL");this._logTag="ah::Timer."+n,this._logger=r,this._isDestroyed=!1,this._createTimer(n,i),this._installHandlers()}var n=e.Event;i.KEY_NAME="name",i.KEY_INTERVAL="interval",i.KEY_RESET="reset",i.prototype.resume=function(e){this._logger.debug(this._logTag,"Starting timer: "+this._name);var t={};t[i.KEY_NAME]=r+"."+this._name,t[i.KEY_RESET]=e,this._pluginManager.command(a,l,t)},i.prototype.pause=function(e){this._logger.debug(this._logTag,"Stopping timer: "+this._name);var t={};t[i.KEY_NAME]=r+"."+this._name,t[i.KEY_RESET]=e,this._pluginManager.command(a,s,t)},i.prototype.destroy=function(){if(!this._isDestroyed){this._isDestroyed=!0,this._uninstallHandlers();var e={};e[i.KEY_NAME]=r+"."+this._name,this._pluginManager.command(a,c,e)}},i.prototype.setInterval=function(e){var t=u+"."+r+"."+this._name,n=this._pluginManager.request(a,[t])[t];this.pause(!0),this._createTimer(this._name,e),n||this.resume(!0)},i.prototype._cmdResume=function(e){var t=!1;null!=e&&e.hasOwnProperty(i.KEY_RESET)&&(t=e[i.KEY_RESET]),this.resume(t)},i.prototype._cmdPause=function(e){var t=!1;null!=e&&e.hasOwnProperty(i.KEY_RESET)&&(t=e[i.KEY_RESET]),this.pause(t)},i.prototype._onTick=function(e,t){this._channel.trigger(new n("clock:"+this._name+".tick",t))},i.prototype._installHandlers=function(){this._channel.comply("clock:"+this._name+".resume",this._cmdResume,this),this._channel.comply("clock:"+this._name+".pause",this._cmdPause,this),this._pluginManager.on(a,r+"."+this._name+".tick",this._onTick,this)},i.prototype._uninstallHandlers=function(){this._channel.off(null,null,this),this._pluginManager.off(null,null,null,this)},i.prototype._createTimer=function(e,t){this._name=e,this._interval=t;var n={};n[i.KEY_NAME]=r+"."+this._name,n[i.KEY_INTERVAL]=this._interval,this._pluginManager.command(a,o,n)};var r="heartbeat",a="service.clock",o="create",s="pause",l="resume",c="destroy",u="is_paused";t.clock.Timer=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t,n){i.__super__.constructor.call(this,e,t,a,s,n)}var n=e.Event,r=t.clock.Timer;e.extend(i,r),i.prototype._onCheckStatusComplete=function(e){var t=e.data[d];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+t+")"),t){if(t==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");o<t?(this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Interval value too large: "+t),this.setInterval(o)):(this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+t),this.setInterval(t))}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(s)},i.prototype._getSettings=function(e){this._logger.debug(this._logTag,"#_getSettings()"),this._channel.trigger(new n(l))},i.prototype._installHandlers=function(){i.__super__._installHandlers.call(this),this._channel.on(c,this._getSettings,this),this._channel.on(u,this._onCheckStatusComplete,this),this._channel.reply(d,function(){return this._interval},this)};var a="check_status",o=600,s=60,l="clock:check_status.tick",c="clock:check_status.get_settings",u="net:check_status_complete",d="check_status_interval";t.clock.CheckStatusTimer=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t,n){i.__super__.constructor.call(this,e,t,r,a,n)}var n=t.clock.Timer;e.extend(i,n),i.prototype._onCheckStatusComplete=function(e){var t=e.data[o];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+t+")"),t){if(t==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+t),this.setInterval(t)}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(a)},i.prototype._installHandlers=function(){i.__super__._installHandlers.call(this),this._channel.on(s,this._onCheckStatusComplete,this),this._channel.reply(o,function(){return this._interval},this)};var r="reporting",a=10,o="reporting_interval",s="net:check_status_complete";t.clock.ReportingTimer=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t,n){i.__super__.constructor.call(this,e,t,r,a,n)}var n=t.clock.Timer;e.extend(i,n);var r="idle",a=1800;t.clock.IdleTimer=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t,n){i.__super__.constructor.call(this,e,t,r,a,n)}var n=t.clock.Timer;e.extend(i,n);var r="flush_filter",a=.25;t.clock.FlushFilterTimer=i}(e.ADB.core,t),function(e,t){"use strict";function n(e,t,n){if(!e)throw new Error("Reference to the pluginManager object cannot be NULL");if(!t)throw new Error("Reference to the channel object cannot be NULL");if(!n)throw new Error("Reference to the logger object cannot be NULL");this._isDestroyed=!1,this._reportingTimer=new a(e,t,n),this._checkStatusTimer=new i(e,t,n),this._flushFilterTimer=new r(e,t,n),this._idleTimer=new o(e,t,n)}var i=t.clock.CheckStatusTimer,r=t.clock.FlushFilterTimer,a=t.clock.ReportingTimer,o=t.clock.IdleTimer;n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._reportingTimer.destroy(),this._checkStatusTimer.destroy(),this._flushFilterTimer.destroy(),this._idleTimer.destroy())},t.clock.Clock=n}(e.ADB.core,t),function(e,t){"use strict";function i(e,t){this.value=e,this.hint=t}function n(e){this.realm=e,this.data={}}i.HINT_SHORT="short",n.prototype.setField=function(e,t,n){this.data[e]=new i(t,n)},n.prototype._createAccessor=function(e,t,n){var i=this;return function(){return arguments.length&&(i[e]=arguments[0],i.setField(t,arguments[0],n)),i[e]}},t.model.Dao=n,t.model.DaoField=i}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"asset"),this.adId=this._createAccessor("_adId","ad_id",null),this.sid=this._createAccessor("_sid","ad_sid",null),this.resolver=this._createAccessor("_resolver","resolver",null),this.podId=this._createAccessor("_podId","pod_id",null),this.podPosition=this._createAccessor("_podPosition","pod_position",null),this.podOffset=this._createAccessor("_podOffset","pod_offset",null),this.podName=this._createAccessor("_podName","pod_name",null),this.adLength=this._createAccessor("_adLength","ad_length",null),this.adName=this._createAccessor("_adName","ad_name",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.adId(e.adId()),this.sid(e.sid()),this.resolver(e.resolver()),this.podId(e.podId()),this.podPosition(e.podPosition()),this.podOffset(e.podOffset()),this.podName(e.podName()),this.adLength(e.adLength()),this.adName(e.adName())}else this.adId(""),this.sid(""),this.resolver(""),this.podId(""),this.podPosition(""),this.podOffset(0),this.podName(""),this.adLength(0),this.adName("")}var i=t.model.Dao;e.extend(n,i),t.model.AdDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"sc"),this.reportSuiteId=this._createAccessor("_reportSuiteId","rsid",null),this.trackingServer=this._createAccessor("_trackingServer","tracking_server",null),this.ssl=this._createAccessor("_ssl","ssl",r.HINT_SHORT),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.reportSuiteId(e.reportSuiteId()),this.trackingServer(e.trackingServer()),this.ssl(e.ssl())}else this.reportSuiteId(""),this.trackingServer(""),this.ssl(0)}var i=t.model.Dao,r=t.model.DaoField;e.extend(n,i),t.model.AdobeAnalyticsDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"stream"),this.id=this._createAccessor("_id","chapter_id",null),this.sid=this._createAccessor("_sid","chapter_sid",null),this.name=this._createAccessor("_name","chapter_name",null),this.position=this._createAccessor("_position","chapter_pos",null),this.length=this._createAccessor("_length","chapter_length",null),this.offset=this._createAccessor("_offset","chapter_offset",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.id(e.id()),this.sid(e.sid()),this.name(e.name()),this.position(e.position()),this.length(e.length()),this.offset(e.offset())}else this.id(""),this.sid(""),this.name(""),this.position(0),this.length(0),this.offset(0)}var i=t.model.Dao;e.extend(n,i),t.model.ChapterDao=n}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"asset"),this.type=this._createAccessor("_type","type",null),this.videoId=this._createAccessor("_videoId","video_id",null),this.publisher=this._createAccessor("_publisher","publisher",null),this.adData=this._createAccessor("_adData","ad_data",null),this.chapterData=this._createAccessor("_chapterData","chapter_data",null),this.length=this._createAccessor("_length","length",null),this.name=this._createAccessor("_name","name",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.type(e.type()),this.name(e.name()),this.videoId(e.videoId()),this.publisher(e.publisher()),this.length(e.length());var t=e.adData()?new r(e.adData()):null;this.adData(t);var n=e.chapterData()?new a(e.chapterData()):null;this.chapterData(n)}else this.type(""),this.name(""),this.videoId(""),this.publisher(""),this.length(0),this.adData(null),this.chapterData(null)}var n=t.model.Dao,r=t.model.AdDao,a=t.model.ChapterDao;e.extend(i,n),i.TYPE_AD="ad",i.TYPE_MAIN_CONTENT="main",t.model.AssetDao=i}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"event"),this.type=this._createAccessor("_type","type",null),this.duration=this._createAccessor("_duration","duration",null),this.playhead=this._createAccessor("_playhead","playhead",null),this.id=this._createAccessor("_id","id",null),this.source=this._createAccessor("_source","source",null),this.ts=this._createAccessor("_ts","ts",null),this.prevTs=this._createAccessor("_prevTs","prev_ts",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.type(e.type()),this.duration(e.duration()),this.playhead(e.playhead()),this.id(e.id()),this.source(e.source()),this.ts(e.ts()),this.prevTs(e.prevTs())}else this.type(""),this.duration(0),this.playhead(0),this.id(""),this.source(""),this.ts(0),this.prevTs(-1)}var i=t.model.Dao;e.extend(n,i),n.EVENT_TYPE_AA_START="aa_start",n.EVENT_TYPE_AA_AD_START="aa_ad_start",n.EVENT_TYPE_START="start",n.EVENT_TYPE_RESUME="resume",n.EVENT_TYPE_CHAPTER_START="chapter_start",n.EVENT_TYPE_CHAPTER_COMPLETE="chapter_complete",n.EVENT_TYPE_PLAY="play",n.EVENT_TYPE_PAUSE="pause",n.EVENT_TYPE_STALL="stall",n.EVENT_TYPE_BUFFER="buffer",n.EVENT_TYPE_BITRATE_CHANGE="bitrate_change",n.EVENT_TYPE_ERROR="error",n.EVENT_TYPE_COMPLETE="complete",t.model.EventDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"stream"),this.bitrate=this._createAccessor("_bitrate","bitrate",null),this.fps=this._createAccessor("_fps","fps",null),this.droppedFrames=this._createAccessor("_droppedFrames","dropped_frames",null),this.startupTime=this._createAccessor("_startup_time","startup_time",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.bitrate(e.bitrate()),this.fps(e.fps()),this.droppedFrames(e.droppedFrames()),this.startupTime(e.startupTime()),this.isStartupTimeOverridden=e.isStartupTimeOverridden}else this.bitrate(0),this.fps(0),this.droppedFrames(0),this.startupTime(0),this.isStartupTimeOverridden=!1}var i=t.model.Dao;e.extend(n,i),t.model.QoSDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"sp"),this.ovp=this._createAccessor("_ovp","ovp",null),this.sdk=this._createAccessor("_sdk","sdk",null),this.channel=this._createAccessor("_channel","channel",null),this.playerName=this._createAccessor("_playerName","player_name",null),this.libVersion=this._createAccessor("_libVersion","hb_version",null),this.apiLevel=this._createAccessor("_apiLevel","hb_api_lvl",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.ovp(e.ovp()),this.sdk(e.sdk()),this.channel(e.channel()),this.playerName(e.playerName()),this.libVersion(e.libVersion()),this.apiLevel(e.apiLevel())}else this.ovp(r),this.sdk(r),this.channel(r),this.playerName(""),this.libVersion(""),this.apiLevel(0)}var i=t.model.Dao;e.extend(n,i);var r="unknown";t.model.ServiceProviderDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"event"),this.sessionId=this._createAccessor("_sessionId","sid",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.sessionId(e.sessionId())}else this.sessionId(null)}var i=t.model.Dao;e.extend(n,i),t.model.SessionDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"stream"),this.type=this._createAccessor("_type","type",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.type(e.type())}else this.type(null)}var i=t.model.Dao;e.extend(n,i),t.model.StreamDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"user"),this.analyticsVisitorId=this._createAccessor("_analyticsVisitorId","aid",null),this.marketingCloudVisitorId=this._createAccessor("_marketingCloudVisitorId","mid",null),this.visitorId=this._createAccessor("_visitorId","id",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.analyticsVisitorId(e.analyticsVisitorId()),this.marketingCloudVisitorId(e.marketingCloudVisitorId()),this.visitorId(e.visitorId())}else this.analyticsVisitorId(null),this.marketingCloudVisitorId(null),this.visitorId(null)}var i=t.model.Dao;e.extend(n,i),t.model.UserDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"aam"),this.audienceManagerBlob=this._createAccessor("_audienceManagerBlob","blob",null),this.audienceManagerLocationHint=this._createAccessor("_audienceManagerLocationHint","loc_hint",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.audienceManagerBlob(e.audienceManagerBlob()),this.audienceManagerLocationHint(e.audienceManagerLocationHint())}else this.audienceManagerBlob(null),this.audienceManagerLocationHint(null)}var i=t.model.Dao;e.extend(n,i),t.model.AudienceManagerDao=n}(e.ADB.core,t),function(e,t){"use strict";var a=e.ObjectUtils,o=t.model.EventDao,s=t.model.AssetDao,l=t.model.StreamDao,c=t.model.QoSDao;t.model.TrackItem=function(e,t,n,i,r){this.eventData=new o,this.eventData.type(t),this.eventData.duration(0),this.eventData.ts((new Date).getTime()),this.eventData.playhead(n),this.assetData=new s(e._assetData),this.streamData=new l(e._streamData),this.qosData=new c(e._qosData),this.cuserData=a.clone(e._cuserData),this.meta=i,this.callback=r,this.filterReport=!0}}(e.ADB.va.utils,t),function(e,t){"use strict";var o=e.ObjectUtils,s=t.model.EventDao,l=t.model.AssetDao,c=t.model.StreamDao,u=t.model.QoSDao;t.model.CUserDao,t.model.Report=function(e,t,n,i,r,a){this.adobeAnalyticsData=e,this.userData=t,this.aamData=n,this.serviceProviderData=i,this.sessionData=r,this.eventData=new s(a.eventData),this.assetData=new l(a.assetData),this.streamData=new c(a.streamData),this.qosData=new u(a.qosData),this.cuserData=o.clone(a.cuserData),this.meta=o.clone(a.meta),this.callback=a.callback,this.filterReport=a.filterReport}}(e.ADB.va.utils,t),function(e){"use strict";function t(){}t.prototype.serializeReport=function(e){},t.prototype.serializeDao=function(e){},t.prototype.serializeMap=function(e){},t.prototype.serializeNumber=function(e,t,n,i){},t.prototype.serializeString=function(e,t,n,i){},e.model.ISerializer=t}(t),function(e,t){"use strict";function n(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e}var l=t.model.Dao,a=t.model.DaoField,i=t.model.ISerializer;e.extend(n,i),n.prototype.serializeReport=function(e){var t=[];return t.push(this.serializeDao(e.adobeAnalyticsData)),t.push(this.serializeDao(e.userData)),t.push(this.serializeDao(e.aamData)),t.push(this.serializeMap(e.cuserData,"cuser")),t.push(this.serializeDao(e.serviceProviderData)),t.push(this.serializeDao(e.sessionData)),t.push(this.serializeDao(e.eventData)),t.push(this.serializeDao(e.assetData)),t.push(this.serializeDao(e.streamData)),t.push(this.serializeDao(e.qosData)),t.push(this.serializeMap(e.meta,"meta")),{serializedOutput:t.filter(function(e){return!!e}).join("&"),callback:e.callback}},n.prototype.serializeDao=function(e){return this._processDao(e).filter(function(e){return!!e}).join("&")},n.prototype.serializeMap=function(e,t){var n=[],i=t||"meta";for(var r in e)e.hasOwnProperty(r)&&e[r]&&n.push("s:"+i+":"+r+"="+window.encodeURIComponent(e[r]));return n.join("&")},n.prototype.serializeNumber=function(e,t,n,i){var r=o;return null==t||isNaN(t)?null:(i===a.HINT_SHORT&&(r=s),r+":"+n+":"+e+"="+Math.floor(t))},n.prototype.serializeString=function(e,t,n,i){return t?r+":"+n+":"+e+"="+window.encodeURIComponent(t):null},n.prototype._processDao=function(e){var t=[];for(var n in e.data)if(e.data.hasOwnProperty(n)){var i=e.data[n],r=i.value,a=i.hint,o=null,s=e.realm;if(null==r)continue;"number"==typeof r?o=this.serializeNumber(n,r,s,a):"string"==typeof r?o=this.serializeString(n,r,s,a):r instanceof l?o=this.serializeDao(r):this._logger.warn(c,"#_processDao() > Unable to serialize DAO. Field: "+n+". Value: "+r+"."),o&&t.push(o)}return t};var c="ah::QuerystringSerializer",o="l",s="h",r="s";t.model.QuerystringSerializer=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t){if(!e)throw new Error("Reference to the data object cannot be NULL");if(this._data=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t}n.prototype.parse=function(){var e,t,n,i,r,a;window.DOMParser?r=(new window.DOMParser).parseFromString(this._data,"text/xml"):((r=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,r.loadXML(this._data));(a=parseInt(r.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10))&&(e=a),(a=parseInt(r.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10))&&(t=a),(a=parseInt(r.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10))&&(n=1==a),i=!r.getElementsByTagName("nielsenEnabled")[0]||1==(a=parseInt(r.getElementsByTagName("nielsenEnabled")[0].childNodes[0].nodeValue,10));var o={};return o[l]=e,o[c]=t,o[u]=n,o[d]=i,this._logger.debug(s,"#parse() > Obtained configuration settings."),o};var s="ah::SettingsParser",l="reporting_interval",c="check_status_interval",u="track_external_errors",d="nielsen_enabled";t.network.SettingsParser=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t){if(this._trackingServer=null,this._checkStatusServer=null,this._publisher=null,this._isConfigured=!1,this._isDestroyed=!1,this._quietMode=!1,this._visitorOptedOut=!1,this._prevReportSent=null,!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._serializer=new i(t),this._installEventListeners()}var l=e.Event,c=e.URLRequestMethod,u=e.URLRequest,d=e.URLLoader,o=t.network.SettingsParser,i=t.model.QuerystringSerializer;n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(p,"#destroy()"),this._uninstallEventListeners())},n.prototype._onApiConfig=function(e){var t=e.data;this._logger.debug(p,"#_onApiConfig(sb_server="+t[r]+", check_status_server="+t[a]+", publisher="+t[s]+", quiet_mode="+t[g]+", ssl="+t[f]+")"),this._trackingServer=this._updateRequestProtocol(t[r],t[f]),this._checkStatusServer=this._updateRequestProtocol(t[a],t[f]),this._publisher=t[s],this._quietMode=t[g],this._isConfigured=!0},n.prototype._onUpdateVisitorOptOut=function(e){var t=e.data;this._logger.debug(p,"#_onUpdateVisitorOptOut(visitor_opt_out="+t[_]+")"),this._visitorOptedOut=t[_]},n.prototype._onFilterReportAvailable=function(e){var t=e.data;if(this._isConfigured){var n=t[h],i=this._serializer.serializeReport(n),r=this._trackingServer+"/?"+i.serializedOutput;if(this._prevReportSent&&this._prevReportSent.eventData&&n.eventData&&this._prevReportSent.eventData.playhead==n.eventData.playhead&&this._prevReportSent.eventData.ts==n.eventData.ts&&this._prevReportSent.eventData.prevTs==n.eventData.prevTs&&this._prevReportSent.eventData.type==n.eventData.type)this._logger.debug(p,"#_onFilterReportAvailable() > Duplicate heartbeat report not sent for URL:\n"+r);else{this._prevReportSent=n;var a=new u(r,c.GET);this._logger.debug(p,"#_onFilterReportAvailable() > "+a.url);var o=this;if(!this._quietMode&&!this._visitorOptedOut){var s=new d;s.addEventListener(l.SUCCESS,function(e){s.close(),i.callback&&i.callback.call(null)},this),s.addEventListener(l.ERROR,function(e){s.close(),o._logger.warn(p,"#_onFilterReportAvailable() > Failed to send heartbeat report."),i.callback&&i.callback.call(null)},this),s.load(a)}}}else this._logger.warn(p,"#_onFilterReportAvailable() > Unable to send request: not configured.")},n.prototype._onClockCheckStatusTick=function(e){if(this._isConfigured)if(this._publisher){var n=this,t=this._publisher.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase(),i=this._checkStatusServer+t+".xml?r="+(new Date).getTime(),r=new u(i,c.GET),a=new d;a.addEventListener(l.SUCCESS,function(e){if(e.data){var t=new o(e.data.response,n._logger).parse();t?n._channel.trigger(new l(P,t)):n._logger.warn(p,"#_onClockCheckStatusTick() > Failed to parse the config. settings.")}a.close()},this),a.addEventListener(l.ERROR,function(e){n._logger.warn(p,"#_onClockCheckStatusTick() > Failed to obtain the config. settings."),a.close()},this),this._logger.debug(p,"#_onClockCheckStatusTick() > Get new settings from: "+i),a.load(r)}else this._logger.warn(p,"#_onClockCheckStatusTick() > Publisher is NULL.");else this._logger.warn(p,"#_onClockCheckStatusTick() > Unable to send request: not configured.")},n.prototype._updateRequestProtocol=function(e,t){var n=e;return 0===n.indexOf("http://")?n=n.slice(7):0===n.indexOf("https://")&&(n=n.slice(8)),t?"https://"+n:"http://"+n},n.prototype._installEventListeners=function(){this._channel.on(m,this._onApiConfig,this),this._channel.on(v,this._onUpdateVisitorOptOut,this),this._channel.on(y,this._onFilterReportAvailable,this),this._channel.on(C,this._onClockCheckStatusTick,this)},n.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var p="ah::Network",r="tracking_server",a="check_status_server",s="publisher",g="quiet_mode",f="ssl",h="report",_="visitor_opt_out",m="api:config",v="api:update_visitor_optout",y="filter:data_available",C="clock:check_status.tick",P="net:check_status_complete";t.network.Network=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t){if(!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._isDestroyed=!1,this._isBufferingInProgress=!1,this._reportBuffer={},this._tsHistory={},this._workQueue=new r,this._installEventListeners()}function c(e){var t=[];return e&&e.forEach(function(e){e.eventData.type()==a.EVENT_TYPE_PAUSE||e.eventData.type()==a.EVENT_TYPE_STALL?(!e.filterReport||e.eventData.duration()>y)&&t.push(e):t.push(e)}),t}function u(e){var t=-1,n=-1,i=[];return e.forEach(function(e){e.eventData.type()==a.EVENT_TYPE_START?e.assetData.type()==g.TYPE_MAIN_CONTENT?-1==t?t=i.push(e)-1:(e.eventData.prevTs(-1),i[t]=e):-1==n?n=i.push(e)-1:(e.eventData.prevTs(-1),i[n]=e):i.push(e)}),i}function d(n){var i=[];return n.forEach(function(e){if(e.eventData.type()==a.EVENT_TYPE_PLAY){if(e.eventData.duration()>v)i.push(e);else if(0==e.eventData.duration()&&e.assetData.type()==g.TYPE_MAIN_CONTENT){var t=function(e){var t=[];return e.forEach(function(e){e.eventData.type()!=a.EVENT_TYPE_PLAY&&e.eventData.type()!=a.EVENT_TYPE_BUFFER&&e.eventData.type()!=a.EVENT_TYPE_START||t.push(e)}),t}(n);t.indexOf(e)==t.length-1&&i.push(e)}}else i.push(e)}),i}var i=e.radio.Command,r=e.radio.CommandQueue,p=e.Event,a=t.model.EventDao,g=t.model.AssetDao;n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(P,"#destroy()"),this._uninstallEventListeners(),this.clear())},n.prototype.clear=function(){this._logger.debug(P,"#clear()"),this._workQueue.cancelAllCommands(),this._reportBuffer={},this._tsHistory={},this._isBufferingInProgress=!1},n.prototype.flush=function(){this._workQueue.addCommand(new i(this._flushBufferReport,this))},n.prototype._bufferReport=function(e){if(!this._isDestroyed){var t=e[h];if(t){var n=t.sessionData.sessionId();this._reportBuffer[n]=this._reportBuffer[n]||[],this._reportBuffer[n].push(t)}if(!this._isBufferingInProgress){this._isBufferingInProgress=!0;var i={};i[l]=!0,i[_]=1,this._channel.command(m,i)}}},n.prototype._flushBufferReport=function(){function e(e){if(e)for(var t=0;t<e.length;t++){var n=e[t],i=n.sessionData.sessionId();a._tsHistory[i]=a._tsHistory[i]||{};var r=n.eventData.type()+"."+(n.assetData.type()==g.TYPE_AD?n.assetData.adData().adId():n.assetData.videoId());a._tsHistory[i].hasOwnProperty(r)&&n.eventData.prevTs(a._tsHistory[i][r]),a._tsHistory[i][r]=n.eventData.ts()}}if(!this._isDestroyed){var a=this;for(var t in this._reportBuffer)if(this._reportBuffer.hasOwnProperty(t)){var n=d(u(c(this._reportBuffer[t])));e(n);for(var i=0;i<n.length;i++){var r=n[i],o={};o[h]=r,this._channel.trigger(new p(f,o))}}this._reportBuffer={};var s=this._channel.request(C),l=this._tsHistory[s]||{};this._tsHistory={},this._tsHistory[s]=l,this._isBufferingInProgress=!1}},n.prototype._onContextReportAvailable=function(e){var t=e.data;this._workQueue.addCommand(new i(this._bufferReport,this,[t]))},n.prototype._onClockFlushFilterTick=function(e){this.flush()},n.prototype._installEventListeners=function(){this._channel.on(o,this._onContextReportAvailable,this),this._channel.on(s,this._onClockFlushFilterTick,this)},n.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var o="context:report_available",f="filter:data_available",s="clock:flush_filter.tick",l="reset",h="report",_="repeat_count",m="clock:flush_filter.resume",v=250,y=250,C="session_id",P="ah::ReportFilter";t.filter.ReportFilter=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t){this._onFail={fn:e,ctx:t}}var i=e.ErrorInfo;n.prototype.validateFields=function(e,t){if(!e)return this._fail("Data cannot be null");if(t)for(var n=0;n<t.length;n++){var i=t[n];switch(i){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof e.videoId)return this._fail("The ID for the main video must be a String.");if(""===e.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof e.streamType)return this._fail("The stream type for the main video must be a String.");if(""===e.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof e.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"playhead":if(!e.hasOwnProperty("playhead"))return this._fail("The playhead for the main video must be specified.");if("number"!=typeof e.playhead)return this._fail("The playhead for the main video must be a Number.");if(isNaN(e.playhead))return this._fail("The playhead for the main video cannot be NaN.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof e.playerName)return this._fail("The player name for the main video must be a String.");if(""===e.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"rsid":if(!e.hasOwnProperty("rsid"))return this._fail("account (rsid) is required and has to be set in the AppMeasurement instance.");if("string"!=typeof e.rsid)return this._fail("account (rsid) of the AppMeasurement instance must be a String.");if(""===e.rsid)return this._fail("account (rsid) of the AppMeasurement instance  cannot be an empty string.");break;case"trackingServer":if(!e.hasOwnProperty("trackingServer"))return this._fail("trackingServer is required and has to be set in the AppMeasurement instance.");if("string"!=typeof e.trackingServer)return this._fail("trackingServer of the AppMeasurement instance must be a String.");if(""===e.trackingServer)return this._fail("trackingServer of the AppMeasurement instance cannot be an empty string.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof e.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===e.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof e.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof e.adId)return this._fail("The ad ID must be a String.");if(""===e.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof e.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"chapterPosition":if(!e.hasOwnProperty("chapterPosition"))return this._fail("Position (index) of the chapter must be specified.");if("number"!=typeof e.chapterPosition)return this._fail("Position (index) of the chapter must be a Number.");if(isNaN(e.chapterPosition))return this._fail("Position (index) of the chapter cannot be NaN.");break;case"chapterOffset":if(!e.hasOwnProperty("chapterOffset"))return this._fail("Chapter start-time (offset) must be specified.");if("number"!=typeof e.chapterOffset)return this._fail("Chapter start-time (offset) must be a Number.");if(isNaN(e.chapterOffset))return this._fail("Chapter start-time (offset) cannot be NaN.");break;case"chapterLength":if(!e.hasOwnProperty("chapterLength"))return this._fail("The length of the chapter must be specified.");if("number"!=typeof e.chapterLength)return this._fail("The length of the chapter must be a Number.");if(isNaN(e.chapterLength))return this._fail("The length of the chapter cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+i)}}return!0},n.prototype._fail=function(e){var t=new i("Invalid input data",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,t),!1},t.context.InputDataValidator=n}(e.ADB.va,t),function(e,t){"use strict";function n(e,t){if(!t)throw new Error("Reference to the logger object cannot be NULL");if(this._logger=t,!e)throw new Error("Reference to the context object cannot be NULL");this._context=e}var i=t.model.Report;n.prototype.createReportForItem=function(e){return this._logger.debug(r,"Creating report for item: "+e.eventData.type()),new i(this._context._adobeAnalyticsData,this._context._userData,this._context._aamData,this._context._serviceProviderData,this._context._sessionData,e)};var r="ah::ReportFactory";t.context.ReportFactory=n}(e.ADB.core,t),function(e,t,n,i){"use strict";function r(e,t){if(!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._lastInBandItem=null,this._autoComputedStartupTime=0,this._reportingInterval=ae,this._assetData=null,this._streamData=null,this._qosData=null,this._sessionData=null,this._cuserData=null,this._adobeAnalyticsData=new c,this._serviceProviderData=new u,this._userData=new d,this._aamData=new p,this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._activeAssetId=null,this._isDestroyed=!1,this._doNotOverrideEventDuration=!1,this._reportFactory=new C(this,this._logger),this._inputDataValidator=new P(function(e){this._logger.error(b,e.getMessage()+" | "+e.getDetails()),this._channel.trigger(new s(A,e))},this),this._stashedChapterData=null,this._stashedAdData=null,this._trackExternalErrors=!0,this._installEventListeners()}var a=n.md5,o=n.ObjectUtils,s=e.Event,l=i.model.SessionDao,c=i.model.AdobeAnalyticsDao,u=i.model.ServiceProviderDao,d=i.model.UserDao,p=i.model.AudienceManagerDao,g=i.model.EventDao,f=i.model.AssetDao,h=i.model.StreamDao,_=i.model.QoSDao,m=i.model.AdDao,v=i.model.ChapterDao,y=i.model.TrackItem,C=i.context.ReportFactory,P=i.context.InputDataValidator;r.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(b,"#destroy()"),this._uninstallEventListeners())},r.prototype._onApiAnalyticsStart=function(e){this._logger.debug(b,"#_onApiAnalyticsStart()");var t=e.data;if(this._checkCall("_onApiAnalyticsStart")&&this._inputDataValidator.validateFields(t,["playhead"])){this._userData.visitorId(t.vid),this._userData.analyticsVisitorId(t.aid),this._userData.marketingCloudVisitorId(t.mid),this._aamData.audienceManagerBlob(t.blob),this._aamData.audienceManagerLocationHint(t.loc_hint),t.customerIDs&&(this._cuserData=t.customerIDs),this._updateQoSInfo(t);var n=new y(this,g.EVENT_TYPE_AA_START,t.playhead,null,t._eventData[D]);n.assetData.adData(null),n.assetData.type(f.TYPE_MAIN_CONTENT),this._cuserData=null,this._sendHit(n)}},r.prototype._onApiAnalyticsAdStart=function(e){this._logger.debug(b,"#_onApiAnalyticsAdStart()");var t=e.data;if(this._checkCall("_onApiAnalyticsAdStart")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var n=new y(this,g.EVENT_TYPE_AA_AD_START,t.playhead,null,t._eventData[D]);this._sendHit(n)}},r.prototype._onApiVideoLoad=function(e){var t=e.data;this._logger.debug(b,"#_onApiVideoLoad(rsid="+t.rsid+", aa_trackingServer="+t.trackingServer+")"),this._resetInternalState(),this._inputDataValidator.validateFields(t,["rsid","trackingServer"])&&(this._sessionData.sessionId(this._generateSessionId()),this._isTrackingSessionActive=!0)},r.prototype._onApiVideoUnload=function(e){return this._logger.debug(b,"#_onApiVideoUnload()"),this._isTrackingSessionActive?void(this._isTrackingSessionActive=!1):void this._logger.debug(b,"#_onApiVideoUnload() > No active tracking session.")},r.prototype._onApiVideoStart=function(e){var t=e.data;if(this._logger.debug(b,"#_onApiVideoStart(id="+t.videoId+", name="+t.videoName+", length="+t.videoLength+", type="+t.streamType+", playerName="+t.playerName+")"),this._checkCall("_onApiVideoStart")&&this._inputDataValidator.validateFields(t,["videoId","streamType","videoLength","playhead","playerName"])){this._adobeAnalyticsData.reportSuiteId(t.rsid),this._adobeAnalyticsData.trackingServer(t.trackingServer),this._adobeAnalyticsData.ssl(Number(t.useSsl)),this._serviceProviderData.ovp(t.ovp),this._serviceProviderData.sdk(t.sdk),this._serviceProviderData.channel(t.channel),this._serviceProviderData.libVersion(t.version),this._serviceProviderData.apiLevel(t.apiLvl),this._activeAssetId=t.videoId,this._serviceProviderData.playerName(t.playerName),this._assetData.videoId(this._activeAssetId),this._assetData.length(t.videoLength),this._assetData.type(f.TYPE_MAIN_CONTENT),this._assetData.publisher(t.publisher),this._assetData.name(t.videoName),this._streamData.type(t.streamType),this._updateQoSInfo(t);var n=t.metaNielsen?o.merge(t.metaVideo,t.metaNielsen):t.metaVideo,i=new y(this,g.EVENT_TYPE_START,t.playhead,n,t._eventData[D]);this._sendHit(i)}},r.prototype._onApiVideoResume=function(e){var t=e.data;if(this._logger.debug(b,"#_onApiVideoResume(id="+t.videoId+", name="+t.videoName+", length="+t.videoLength+", type="+t.streamType+", playerName="+t.playerName+")"),this._checkCall("_onApiVideoResume")&&this._inputDataValidator.validateFields(t,["videoId","streamType","videoLength","playhead","playerName"])){this._activeAssetId=t.videoId,this._assetData.videoId(this._activeAssetId),this._assetData.length(t.videoLength),this._assetData.type(f.TYPE_MAIN_CONTENT),this._assetData.name(t.videoName),this._streamData.type(t.streamType);var n=new y(this,g.EVENT_TYPE_RESUME,t.playhead,null,t._eventData[D]);this._sendHit(n)}},r.prototype._onApiVideoComplete=function(e){this._logger.debug(b,"#_onApiVideoComplete()");var t=e.data;if(this._checkCall("_onApiVideoComplete")){var n=new y(this,g.EVENT_TYPE_COMPLETE,this._assetData.length(),null,t._eventData[D]);this._sendHit(n),this._isVideoComplete=!0}},r.prototype._onApiPlay=function(e){this._logger.debug(b,"#_onApiPlay()");var t=e.data;if(this._checkCall("_onApiPlay")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var n=new y(this,g.EVENT_TYPE_PLAY,t.playhead,null,t._eventData[D]);this._sendHit(n)}},r.prototype._onApiPause=function(e){this._logger.debug(b,"#_onApiPause()");var t=e.data;if(this._checkCall("_onApiPause")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var n=t.playheadStalled?g.EVENT_TYPE_STALL:g.EVENT_TYPE_PAUSE,i=new y(this,n,t.playhead,null,t._eventData[D]);t._eventData.hasOwnProperty(O)&&(i.filterReport=t._eventData[O]),this._sendHit(i)}},r.prototype._onApiBufferStart=function(e){this._logger.debug(b,"#_onApiBufferStart()");var t=e.data;if(this._checkCall("_onApiBufferStart")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var n=new y(this,g.EVENT_TYPE_BUFFER,t.playhead,null,t._eventData[D]);this._sendHit(n)}},r.prototype._onApiSeekStart=function(e){this._logger.debug(b,"#_onApiSeekStart()"),this._checkCall("_onApiSeekStart")&&(this._stashedAdData=this._assetData.adData(),this._stashedChapterData=this._assetData.chapterData(),this._assetData.adData(null),this._assetData.type(f.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId(),this._assetData.chapterData(null))},r.prototype._onApiSeekComplete=function(e){this._logger.debug(b,"#_onApiSeekComplete()");var t=e.data;if(this._checkCall("_onApiSeekComplete")&&this._inputDataValidator.validateFields(t,["playhead"])){if(t.isInAd){if(!this._inputDataValidator.validateFields(t,["adId","adPosition","podPosition","podPlayerName"]))return;var n=a(this._assetData.videoId())+"_"+t.podPosition;if(this._stashedAdData&&this._stashedAdData.podId()==n&&parseInt(this._stashedAdData.podPosition(),10)==t.adPosition)this._assetData.adData(this._stashedAdData),this._activeAssetId=this._stashedAdData.adId();else if(!this._assetData.adData()){this._activeAssetId=t.adId;var i=new m;i.adId(this._activeAssetId),i.adName(t.adName),i.adLength(t.adLength),i.podId(n),i.resolver(t.podPlayerName),i.podPosition(t.podPosition+""),i.podName(t.podName),i.podOffset(t.podSecond),i.sid(this._generateSessionId()),this._assetData.adData(i)}this._assetData.type(f.TYPE_AD)}else this._assetData.adData(null),this._assetData.type(f.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId();if(t.isInChapter){if(!this._inputDataValidator.validateFields(t,["chapterPosition","chapterLength","chapterOffset"]))return;if(this._stashedChapterData&&t.chapterPosition==this._stashedChapterData.position())this._assetData.chapterData(this._stashedChapterData);else if(!this._assetData.chapterData()){var r=new v;r.id(a(this._assetData.videoId())+"_"+t.chapterPosition),r.name(t.chapterName),r.length(t.chapterLength),r.position(t.chapterPosition),r.offset(t.chapterOffset),r.sid(this._generateSessionId()),this._assetData.chapterData(r)}}else this._assetData.chapterData(null);this._stashedAdData=null,this._stashedChapterData=null}},r.prototype._onApiAdStart=function(e){var t=e.data;if(this._logger.debug(b,"#_onApiAdStart(id="+t.adId+", player_name="+t.podPlayerName+", parent_name="+this._assetData.videoId()+", pod_pos="+t.adPosition+")"),this._checkCall("_onApiAdStart")&&this._inputDataValidator.validateFields(t,["playhead","podPosition","podPlayerName","adId","adPosition"])){this._activeAssetId=t.adId;var n=new m;n.adId(this._activeAssetId),n.adName(t.adName),n.adLength(t.adLength),n.resolver(t.podPlayerName),n.podId(a(this._assetData.videoId())+"_"+t.podPosition),n.podPosition(t.adPosition+""),n.podName(t.podName),n.podOffset(t.podSecond),n.sid(this._generateSessionId()),this._assetData.adData(n),this._assetData.type(f.TYPE_AD),this._updateQoSInfo(t);var i=o.merge(t.metaVideo,t.metaAd);i=t.metaNielsen?o.merge(i,t.metaNielsen):i;var r=new y(this,g.EVENT_TYPE_START,t.playhead,i,t._eventData[D]);this._sendHit(r)}},r.prototype._onApiAdComplete=function(e){this._logger.debug(b,"#_onApiAdComplete()");var t=e.data;if(this._checkCall("_onApiAdComplete")&&this._inputDataValidator.validateFields(t,["playhead"])){if(this._assetData.type()!=f.TYPE_AD)return void this._logger.warn(b,"#_onApiAdComplete() > Ignoring the ad complete event, because we are no longer in an ad.");this._updateQoSInfo(t);var n=new y(this,g.EVENT_TYPE_COMPLETE,t.playhead,null,t._eventData[D]);this._sendHit(n),this._assetData.adData(null),this._assetData.type(f.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId()}},r.prototype._onApiChapterStart=function(e){var t=e.data;if(this._logger.debug(b,"#_onApiChapterStart(name="+t.chapterName+", length="+t.chapterLength+", position="+t.chapterPosition+", chapter_offset="+t.chapterOffset+")"),this._checkCall("_onApiChapterStart")&&this._inputDataValidator.validateFields(t,["playhead","chapterPosition","chapterOffset","chapterLength"])){var n=new v;n.id(a(this._assetData.videoId())+"_"+t.chapterPosition),n.name(t.chapterName),n.length(t.chapterLength),n.position(t.chapterPosition),n.offset(t.chapterOffset),n.sid(this._generateSessionId()),this._assetData.chapterData(n),this._updateQoSInfo(t);var i=o.merge(t.metaVideo,t.metaChapter),r=new y(this,g.EVENT_TYPE_CHAPTER_START,t.playhead,i,t._eventData[D]);r.assetData.adData(null),r.assetData.type(f.TYPE_MAIN_CONTENT),this._sendHit(r)}},r.prototype._onApiChapterComplete=function(e){this._logger.debug(b,"#_onApiChapterComplete()");var t=e.data;if(this._checkCall("_onApiChapterComplete")&&this._inputDataValidator.validateFields(t,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(b,"#_onApiChapterComplete() > Ignoring the chapter complete event, because we are no longer in a chapter.");this._updateQoSInfo(t);var n=new y(this,g.EVENT_TYPE_CHAPTER_COMPLETE,t.playhead,null,t._eventData[D]);n.assetData.adData(null),n.assetData.type(f.TYPE_MAIN_CONTENT),this._sendHit(n),this._assetData.chapterData(null)}},r.prototype._onApiBitrateChange=function(e){this._logger.debug(b,"#_onApiBitrateChange()");var t=e.data;if(this._checkCall("_onApiBitrateChange")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var n=new y(this,g.EVENT_TYPE_BITRATE_CHANGE,t.playhead,null,t._eventData[D]);this._sendHit(n)}},r.prototype._onApiTrackError=function(e){var t=e.data;if(this._logger.debug(b,"#_onApiTrackError(source="+t._eventData.source+", err_id="+t._eventData.error_id+")"),this._isTrackingSessionActive){if(this._trackExternalErrors||t._eventData.source===S){this._updateQoSInfo(t);var n=new y(this,g.EVENT_TYPE_ERROR,0,null,t._eventData[D]);n.eventData.id(t._eventData.error_id),n.eventData.source(t._eventData.source),this._sendHit(n)}}else this._logger.warn(b,"#_onApiTrackError() > No active tracking session.")},r.prototype._onApiTrackInternalError=function(e){var t=e.data;this._logger.debug(b,"#_onApiTrackInternalError(source="+t.source+", err_id="+t.error_id+")"),this._updateQoSInfo(t);var n=new y(this,g.EVENT_TYPE_ERROR,0);n.eventData.id(t.error_id),n.eventData.source(t.source),this._sendHit(n)},r.prototype._onApiQuantumEnd=function(e){this._logger.debug(b,"#_onApiQuantumEnd(interval="+this._channel.request(I)+")");var t=e.data;this._checkCall("_onApiQuantumEnd")&&this._inputDataValidator.validateFields(t,["playhead"])&&(this._lastInBandItem&&(this._lastInBandItem.eventData.playhead(t.playhead),this._updateQoSInfo(t),this._lastInBandItem.qosData.bitrate(this._qosData.bitrate()),this._lastInBandItem.qosData.fps(this._qosData.fps()),this._lastInBandItem.qosData.droppedFrames(this._qosData.droppedFrames()),this._lastInBandItem.qosData.startupTime(this._qosData.startupTime())),this._sendHit(this._lastInBandItem))},r.prototype._onNetworkCheckStatusComplete=function(e){var t=e.data;this._trackExternalErrors=t[M],this._reportingInterval=t[L],this._reportingInterval||(this._reportingInterval=ae),this._logger.debug(b,"#_onNetworkCheckStatusComplete(track_ext_err="+this._trackExternalErrors+")")},r.prototype._onResetSessionId=function(e){var t=this._generateSessionId();this._sessionData=new l,this._sessionData.sessionId(t),this._logger.debug(b,"#_resetSessionId(new sessionId="+t+")")},r.prototype._installEventListeners=function(){this._channel.on(R,this._onApiAnalyticsStart,this),this._channel.on(x,this._onApiAnalyticsAdStart,this),this._channel.on(U,this._onApiVideoLoad,this),this._channel.on(F,this._onApiVideoUnload,this),this._channel.on(V,this._onApiVideoStart,this),this._channel.on(j,this._onApiVideoComplete,this),this._channel.on(q,this._onApiVideoResume,this),this._channel.on(H,this._onApiAdStart,this),this._channel.on(K,this._onApiAdComplete,this),this._channel.on(Y,this._onApiPlay,this),this._channel.on(G,this._onApiPause,this),this._channel.on(W,this._onApiBufferStart,this),this._channel.on(J,this._onApiSeekStart,this),this._channel.on(z,this._onApiSeekComplete,this),this._channel.on(Q,this._onApiChapterStart,this),this._channel.on(X,this._onApiChapterComplete,this),this._channel.on(ee,this._onApiBitrateChange,this),this._channel.on($,this._onApiTrackError,this),this._channel.on(Z,this._onApiTrackInternalError,this),this._channel.on(te,this._onApiQuantumEnd,this),this._channel.on(ie,this._onNetworkCheckStatusComplete,this),this._channel.on(k,this._onResetSessionId,this),this._channel.reply(w,function(){return this._sessionData&&this._sessionData.sessionId()?this._sessionData.sessionId():null},this)},r.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},r.prototype._resetInternalState=function(){this._logger.debug(b,"#_resetInternalState()"),this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._autoComputedStartupTime=0,this._streamData=new h,this._qosData=new _,this._sessionData=new l,this._assetData=new f,this._cuserData=null,this._stashedAdData=null,this._stashedChapterData=null,this._lastInBandItem=null},r.prototype._generateSessionId=function(){return""+(new Date).getTime()+Math.floor(1e9*Math.random())},r.prototype._updateQoSInfo=function(e){this._qosData.bitrate(e.bitrate||0),this._qosData.fps(e.fps||0),this._qosData.droppedFrames(e.droppedFrames||0),null==e.startupTime||isNaN(e.startupTime)?(this._qosData.startupTime(this._autoComputedStartupTime),this._qosData.isStartupTimeOverridden=!1):(this._qosData.startupTime(e.startupTime),this._qosData.isStartupTimeOverridden=!0)},r.prototype._checkCall=function(e){return this._isTrackingSessionActive?!this._isVideoComplete||(this._logger.warn(b,"#"+e+"() > The video content already completed."),!1):(this._logger.warn(b,"#"+e+"() > No active tracking session."),!1)},r.prototype._updateLastInBandItem=function(e){var t=(new Date).getTime(),n=1e3*Math.abs(e.eventData.playhead()-this._lastInBandItem.eventData.playhead()),i=Math.abs(t-this._lastInBandItem.eventData.ts());this._lastInBandItem.eventData.type()!=g.EVENT_TYPE_PAUSE&&this._lastInBandItem.eventData.type()!=g.EVENT_TYPE_STALL?(n<=i*re||this._doNotOverrideEventDuration)&&i<=this._reportingInterval*re*1e3?this._lastInBandItem.eventData.duration(t-this._lastInBandItem.eventData.ts()):(this._logger.warn(b,"[WARNING] Resetting duration in lastInBandItem to 0. playheadDelta:"+n+" tsDelta:"+i+" event type:"+this._lastInBandItem.eventData.type()),this._lastInBandItem.eventData.duration(0)):this._lastInBandItem.eventData.duration(t-this._lastInBandItem.eventData.ts()),this._doNotOverrideEventDuration&&(this._doNotOverrideEventDuration=!1),this._lastInBandItem.eventData.ts(t),this._lastInBandItem.eventData.playhead(e.eventData.playhead()),this._lastInBandItem.qosData.startupTime(e.qosData.startupTime()),this._lastInBandItem.qosData.isStartupTimeOverridden=e.qosData.isStartupTimeOverridden},r.prototype._sendHit=function(e){function t(e){var t=i._reportFactory.createReportForItem(e);t.qosData.isStartupTimeOverridden||t.qosData.startupTime(i._autoComputedStartupTime);var n={};n[N]=t,i._channel.trigger(new s(ne,n)),t.eventData.type()!=g.EVENT_TYPE_PLAY&&t.eventData.type()!=g.EVENT_TYPE_BUFFER&&t.eventData.type()!=g.EVENT_TYPE_START||((r={})[B]=!0,i._channel.command(T,r))}var i=this,r={};switch(e.eventData.type()){case g.EVENT_TYPE_START:case g.EVENT_TYPE_PLAY:case g.EVENT_TYPE_PAUSE:case g.EVENT_TYPE_STALL:case g.EVENT_TYPE_BUFFER:this._lastInBandItem&&(this._updateLastInBandItem(e),this._lastInBandItem.eventData.type()==g.EVENT_TYPE_START&&this._lastInBandItem.assetData.type()==f.TYPE_MAIN_CONTENT&&(this._autoComputedStartupTime+=this._lastInBandItem.eventData.duration()),e!=this._lastInBandItem&&t(this._lastInBandItem)),t(e),this._lastInBandItem=e,(r={})[B]=!0,this._channel.command(T,r);break;case g.EVENT_TYPE_COMPLETE:this._lastInBandItem&&(e.assetData.type()==f.TYPE_AD&&(this._doNotOverrideEventDuration=!0),this._updateLastInBandItem(e),t(this._lastInBandItem)),t(e),e.assetData.type()==f.TYPE_MAIN_CONTENT?(this._lastInBandItem=null,(r={})[B]=!0,this._channel.command(E,r)):e.assetData.type()==f.TYPE_AD&&(this._lastInBandItem.assetData.adData(null),this._lastInBandItem.assetData.type(f.TYPE_MAIN_CONTENT),this._doNotOverrideEventDuration=!0);break;case g.EVENT_TYPE_CHAPTER_START:case g.EVENT_TYPE_CHAPTER_COMPLETE:this._lastInBandItem&&(this._updateLastInBandItem(e),t(this._lastInBandItem)),t(e),this._lastInBandItem&&(this._lastInBandItem.assetData.chapterData(e.eventData.type()==g.EVENT_TYPE_CHAPTER_START?new v(e.assetData.chapterData()):null),this._lastInBandItem.eventData.duration(0),t(this._lastInBandItem));break;default:t(e)}};var b="ah::Context",S="sourceErrorSDK",A="error",T="clock:reporting.resume",E="clock:reporting.pause",I="reporting_interval",w="session_id",k="reset_session_id",D="callback",O="filter_report",N="report",B="reset",M="track_external_errors",L="reporting_interval",R="api:aa_start",x="api:aa_ad_start",U="api:video_load",F="api:video_unload",V="api:video_start",j="api:video_complete",q="api:video_resume",H="api:ad_start",K="api:ad_complete",Y="api:play",G="api:pause",W="api:buffer_start",J="api:seek_start",z="api:seek_complete",Q="api:chapter_start",X="api:chapter_complete",$="api:track_error",Z="api:track_internal_error",ee="api:bitrate_change",te="api:quantum_end",ne="context:report_available",ie="net:check_status_complete",re=1.5,ae=10;i.context.Context=r}(e.ADB.core,e.ADB.va,e.ADB.va.utils,t),function(){"use strict";var n="unknown";t.AdobeHeartbeatPluginConfig=function(e,t){this.trackingServer=e,this.publisher=t,this.ssl=!1,this.ovp=n,this.sdk=n,this.quietMode=!1,this.debugLogging=!1,this.__isPrimetime=!1,this.__psdkVersion=null}}(),function(e){"use strict";function t(){}t.prototype.onError=function(e){},e.AdobeHeartbeatPluginDelegate=t}(t),function(e,t,n){"use strict";function i(e){i.__super__.constructor.call(this,_),this._radio=new l(this._logger),this._channel=this._radio.channel(A),this._delegate=e,this._context=new d(this._channel,this._logger),this._filter=new p(this._channel,this._logger),this._network=new g(this._channel,this._logger),this._setupDataResolver()}var r=e.Event,a=e.Trigger,o=e.plugin.BasePlugin,s=e.plugin.ParamMapping,l=e.radio.Radio,c=t.ErrorInfo,u=t.Version,d=n.context.Context,p=n.filter.ReportFilter,g=n.network.Network,f=n.clock.Clock,h=n.AdobeHeartbeatPluginConfig;e.extend(i,o),i.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof h))throw new Error("Expected config data to be instance of AdobeHeartbeatPluginConfig.");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.trackingServer+", publisher="+this._config.publisher+", quietMode="+this._config.quietMode+", ssl="+this._config.ssl+"})");var t=this._config.trackingServer+"/settings/",n={};n[Z]=this._config.trackingServer,n[ee]=t,n[te]=this._config.publisher,n[ne]=this._config.quietMode,n[ie]=this._config.ssl,this._channel.trigger(new r(se,n)),this._isConfigured=!0},i.prototype.bootstrap=function(e){i.__super__.bootstrap.call(this,e),this._channel.on(T,this._onError,this),this._clock=new f(this._pluginManager,this._channel,this._logger),this._channel.command(we),this._channel.trigger(new r(Le)),this._registerCommands(),this._registerBehaviours()},i.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()"),this._radio.shutdown(),this._context.destroy(),this._clock.destroy(),this._filter.destroy(),this._network.destroy()},i.prototype._canProcess=function(){return this._isConfigured?this._errorInfo?(this._logger.error(this._logTag,"_canProcess() > Plugin in ERROR state."),!1):i.__super__._canProcess.call(this):(this._logger.error(this._logTag,"_canProcess() > Plugin not configured."),!1)},i.prototype._cmdAnalyticsError=function(e){this._errorInfo||(this._errorInfo=new c("Internal error","AdobeAnalyticsPlugin is in ERROR state."),this._trigger(T,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},i.prototype._cmdAnalyticsStart=function(e){if(this._canProcess()){var t={};t[re]=e.visitorOptedOut,this._channel.trigger(new r(le,t)),this._channel.trigger(new r(ae,e))}},i.prototype._cmdAnalyticsAdStart=function(e){this._canProcess()&&this._channel.trigger(new r(oe,e))},i.prototype._cmdVideoLoad=function(e){this._errorInfo=null,this._canProcess()&&(this._isTrackingSessionActive&&this._channel.trigger(new r(ue,e)),this._isTrackingSessionActive=!1,this._isPaused=!0,this._isSeeking=!1,this._isBuffering=!1,this._isVideoIdle=!1,this._filter.clear(),this._channel.trigger(new r(ce,e)),this._isTrackingSessionActive=!0)},i.prototype._cmdVideoUnload=function(e){this._errorInfo=null,this._canProcess()&&(this._channel.trigger(new r(ue,e)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._isTrackingSessionActive=!1)},i.prototype._cmdVideoStart=function(e){this._canProcess()&&this._channel.trigger(new r(de,e))},i.prototype._cmdVideoComplete=function(e){this._canProcess()&&this._channel.trigger(new r(pe,e))},i.prototype._cmdVideoResume=function(e){this._canProcess()&&this._channel.trigger(new r(ge,e))},i.prototype._cmdPlay=function(e){this._canProcess()&&(this._isPaused=!1,this._resumePlaybackIfPossible(e))},i.prototype._cmdPause=function(e){this._canProcess()&&(this._channel.trigger(new r(me,e)),this._isPaused=!0,this._runIdleTimer(!0))},i.prototype._cmdAdStart=function(e){this._canProcess()&&(this._channel.trigger(new r(fe,e)),this._resumePlaybackIfPossible(e))},i.prototype._cmdAdComplete=function(e){this._canProcess()&&(this._channel.trigger(new r(he,e)),e.isInAdBreak||this._resumePlaybackIfPossible(e))},i.prototype._cmdBufferStart=function(e){this._canProcess()&&(this._channel.trigger(new r(ve,e)),this._isBuffering=!0,this._runIdleTimer(!0))},i.prototype._cmdBufferComplete=function(e){this._canProcess()&&(this._isBuffering=!1,this._resumePlaybackIfPossible(e))},i.prototype._cmdSeekStart=function(e){this._canProcess()&&(this._channel.trigger(new r(ye,e)),this._channel.trigger(new r(me,e)),this._isSeeking=!0,this._runIdleTimer(!0))},i.prototype._cmdSeekComplete=function(e){this._canProcess()&&(this._channel.trigger(new r(Ce,e)),this._isSeeking=!1,this._resumePlaybackIfPossible(e))},i.prototype._cmdChapterStart=function(e){this._canProcess()&&this._channel.trigger(new r(Pe,e))},i.prototype._cmdChapterComplete=function(e){this._canProcess()&&this._channel.trigger(new r(be,e))},i.prototype._cmdBitrateChange=function(e){this._canProcess()&&this._channel.trigger(new r(Te,e))},i.prototype._cmdTrackError=function(e){this._canProcess()&&this._channel.trigger(new r(Se,e))},i.prototype._cmdClockReportingTick=function(e){this._canProcess()&&this._channel.trigger(new r(Ee,e))},i.prototype._cmdIdleTick=function(e){this._canProcess()&&(this._isVideoIdle=!0,this._trigger(W),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._trigger(Y))},i.prototype._onError=function(e){this._errorInfo=e.data;var t={};t[X]=Ie,t[$]=this._errorInfo.getMessage()+"|"+this._errorInfo.getDetails(),this._channel.trigger(new r(Ae,t)),this._runReportingTimer(!1),this._trigger(T,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo)},i.prototype._runIdleTimer=function(e){var t={};t[Q]=!0,e?this._channel.command(Be,t):this._channel.command(Me,t)},i.prototype._runFlushFilterTimer=function(e){var t={};t[Q]=!0,e?this._channel.command(Oe,t):this._channel.command(Ne,t)},i.prototype._runReportingTimer=function(e){var t={};t[Q]=!0,e?this._channel.command(ke,t):this._channel.command(De,t)},i.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleAnalyticsError",this._cmdAnalyticsError),this._pluginManager.comply(this,"handleAnalyticsStart",this._cmdAnalyticsStart),this._pluginManager.comply(this,"handleAnalyticsAdStart",this._cmdAnalyticsAdStart),this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoUnload",this._cmdVideoUnload),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleVideoComplete",this._cmdVideoComplete),this._pluginManager.comply(this,"handleVideoResume",this._cmdVideoResume),this._pluginManager.comply(this,"handlePlay",this._cmdPlay),this._pluginManager.comply(this,"handlePause",this._cmdPause),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleAdComplete",this._cmdAdComplete),this._pluginManager.comply(this,"handleBufferStart",this._cmdBufferStart),this._pluginManager.comply(this,"handleBufferComplete",this._cmdBufferComplete),this._pluginManager.comply(this,"handleSeekStart",this._cmdSeekStart),this._pluginManager.comply(this,"handleSeekComplete",this._cmdSeekComplete),this._pluginManager.comply(this,"handleChapterStart",this._cmdChapterStart),this._pluginManager.comply(this,"handleChapterComplete",this._cmdChapterComplete),this._pluginManager.comply(this,"handleBitrateChange",this._cmdBitrateChange),this._pluginManager.comply(this,"handleTrackError",this._cmdTrackError),this._pluginManager.comply(this,"handleClockReportingTick",this._cmdClockReportingTick),this._pluginManager.comply(this,"handleIdleTick",this._cmdIdleTick)},i.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new a(y,w),this,"handleVideoLoad",[new s(v,"rsid","rsid"),new s(v,"tracking_server","trackingServer")]),this._pluginManager.registerBehaviour(new a(y,k),this,"handleVideoUnload"),this._pluginManager.registerBehaviour(new a(y,D),this,"handleVideoStart",[new s(y,"video.id","videoId"),new s(y,"video.name","videoName"),new s(y,"video.length","videoLength"),new s(y,"video.playhead","playhead"),new s(y,"video.playerName","playerName"),new s(y,"video.streamType","streamType"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime"),new s(v,"rsid","rsid"),new s(v,"tracking_server","trackingServer"),new s(v,"channel","channel"),new s(v,"meta.video.*","metaVideo"),new s(v,"ssl","useSsl"),new s(C,"meta","metaNielsen"),new s(m,"publisher","publisher"),new s(m,"sdk","sdk"),new s(m,"ovp","ovp"),new s(m,"version","version"),new s(m,"api_level","apiLvl")]),this._pluginManager.registerBehaviour(new a(y,N),this,"handleVideoComplete",[new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,O),this,"handleVideoResume",[new s(y,"video.id","videoId"),new s(y,"video.name","videoName"),new s(y,"video.length","videoLength"),new s(y,"video.playhead","playhead"),new s(y,"video.playerName","playerName"),new s(y,"video.streamType","streamType")]),this._pluginManager.registerBehaviour(new a(y,B),this,"handlePlay",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,M),this,"handlePause",[new s(y,"video.playhead","playhead"),new s(y,"video.playheadStalled","playheadStalled"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,L),this,"handleAdStart",[new s(y,"video.playhead","playhead"),new s(y,"ad.id","adId"),new s(y,"ad.name","adName"),new s(y,"ad.length","adLength"),new s(y,"ad.position","adPosition"),new s(y,"pod.name","podName"),new s(y,"pod.playerName","podPlayerName"),new s(y,"pod.position","podPosition"),new s(y,"pod.startTime","podSecond"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime"),new s(v,"meta.video.*","metaVideo"),new s(v,"meta.ad.*","metaAd"),new s(C,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new a(y,R),this,"handleAdComplete",[new s(y,"video.playhead","playhead"),new s(y,"ad.isInAdBreak","isInAdBreak"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,x),this,"handleBufferStart",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,U),this,"handleBufferComplete",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,F),this,"handleSeekStart",[new s(y,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new a(y,V),this,"handleSeekComplete",[new s(y,"video.playhead","playhead"),new s(y,"ad.isInAd","isInAd"),new s(y,"ad.id","adId"),new s(y,"ad.position","adPosition"),new s(y,"pod.playerName","podPlayerName"),new s(y,"pod.position","podPosition"),new s(y,"chapter.isInChapter","isInChapter"),new s(y,"chapter.position","chapterPosition"),new s(y,"chapter.name","chapterName"),new s(y,"chapter.length","chapterLength"),new s(y,"chapter.startTime","chapterOffset"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,j),this,"handleChapterStart",[new s(y,"video.playhead","playhead"),new s(y,"chapter.position","chapterPosition"),new s(y,"chapter.name","chapterName"),new s(y,"chapter.length","chapterLength"),new s(y,"chapter.startTime","chapterOffset"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime"),new s(v,"meta.video.*","metaVideo"),new s(v,"meta.chapter.*","metaChapter"),new s(C,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new a(y,q),this,"handleChapterComplete",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,H),this,"handleBitrateChange",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,K),this,"handleTrackError"),this._pluginManager.registerBehaviour(new a(P,J),this,"handleClockReportingTick",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(P,z),this,"handleIdleTick",[]),this._pluginManager.registerBehaviour(new a(m,W),this,"handleClockReportingTick",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(v,T),this,"handleAnalyticsError"),this._pluginManager.registerBehaviour(new a(v,E),this,"handleAnalyticsStart",[new s(v,"vid","vid"),new s(v,"aid","aid"),new s(v,"mid","mid"),new s(v,"customerIDs","customerIDs"),new s(v,"visitorOptedOut","visitorOptedOut"),new s(v,"blob","blob"),new s(v,"loc_hint","loc_hint"),new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(v,I),this,"handleAnalyticsAdStart",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")])},i.prototype._setupDataResolver=function(){var r={},e=this;r.version=function(){return u.getVersion()},r.api_level=function(){return u.getApiLevel()},r.tracking_server=function(){return e._config?e._config.trackingServer:null},r.publisher=function(){return e._config?e._config.publisher:null},r.quiet_mode=function(){return!!e._config&&e._config.quietMode},r.ovp=function(){return e._config?e._config.ovp:null},r.sdk=function(){return e._config?e._config.sdk:null},r.is_primetime=function(){return!!e._config&&e._config.__isPrimetime},r.psdk_version=function(){return e._config?e._config.__psdkVersion:null},r.session_id=function(){return e._channel.request(b)},this._dataResolver=function(e){if(!e||0==e.length)return null;for(var t=null,n=0;n<e.length;n++){var i=e[n];(t=t||{})[i]=r.hasOwnProperty(i)?r[i].call(this):null}return t}},i.prototype._resumePlaybackIfPossible=function(e){this._errorInfo||this._isPaused||this._isSeeking||this._isBuffering||(this._isVideoIdle&&(this._isVideoIdle=!1,this._resumePlaybackFromIdle()),this._runIdleTimer(!1),this._channel.trigger(new r(_e,e)))},i.prototype._resumePlaybackFromIdle=function(){this._trigger(W),this._filter.clear(),this._channel.trigger(new r(S)),this._trigger(G),this._runReportingTimer(!0),this._runFlushFilterTimer(!0)};var _="adobe-heartbeat",m=_,v="adobe-analytics",y="player",C="nielsen",P="service.clock",b="session_id",S="reset_session_id",A="heartbeat-channel",T="error",E="aa_start",I="sc_ad_start",w="video_load",k="video_unload",D="video_start",O="video_resume",N="video_complete",B="play",M="pause",L="ad_start",R="ad_complete",x="buffer_start",U="buffer_complete",F="seek_start",V="seek_complete",j="chapter_start",q="chapter_complete",H="bitrate_change",K="track_error",Y="video_idle_start",G="video_idle_resume",W="quantum_close",J="heartbeat.reporting.tick",z="heartbeat.idle.tick",Q="reset",X="source",$="error_id",Z="tracking_server",ee="check_status_server",te="publisher",ne="quiet_mode",ie="ssl",re="visitor_opt_out",ae="api:aa_start",oe="api:aa_ad_start",se="api:config",le="api:update_visitor_optout",ce="api:video_load",ue="api:video_unload",de="api:video_start",pe="api:video_complete",ge="api:video_resume",fe="api:ad_start",he="api:ad_complete",_e="api:play",me="api:pause",ve="api:buffer_start",ye="api:seek_start",Ce="api:seek_complete",Pe="api:chapter_start",be="api:chapter_complete",Se="api:track_error",Ae="api:track_internal_error",Te="api:bitrate_change",Ee="api:quantum_end",Ie="sourceErrorHeartbeat",we="clock:check_status.resume",ke="clock:reporting.resume",De="clock:reporting.pause",Oe="clock:flush_filter.resume",Ne="clock:flush_filter.pause",Be="clock:idle.resume",Me="clock:idle.pause",Le="clock:check_status.get_settings";n.AdobeHeartbeatPlugin=i}(e.ADB.core,e.ADB.va,t),e.ADB.va.plugins.ah||(e.ADB.va.plugins.ah=t)}(this),function(e){if(void 0===t)var t={};!function(e,t){"use strict";function n(e,t){this._onFail={fn:e,ctx:t}}var i=e.ErrorInfo;n.prototype.validateFields=function(e,t){if(!e)return this._fail("Data cannot be null");if(t)for(var n=0;n<t.length;n++){var i=t[n];switch(i){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof e.videoId)return this._fail("The ID for the main video must be a String.");if(""===e.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof e.streamType)return this._fail("The stream type for the main video must be a String.");if(""===e.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof e.playerName)return this._fail("The player name for the main video must be a String.");if(""===e.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof e.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof e.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===e.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof e.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof e.adId)return this._fail("The ad ID must be a String.");if(""===e.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof e.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"adLength":if(!e.hasOwnProperty("adLength"))return this._fail("The length of the ad must be specified.");if("number"!=typeof e.adLength)return this._fail("The length of the ad must be a Number.");if(isNaN(e.adLength))return this._fail("The length of the ad cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+i)}}return!0},n.prototype._fail=function(e){var t=new i("Invalid input data",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,t),!1},t.InputDataValidator=n}(e.ADB.va,t),function(){"use strict";t.AdobeAnalyticsPluginConfig=function(){this.channel="",this.debugLogging=!1}}(),function(e){"use strict";function t(){}t.prototype.onError=function(e){},e.AdobeAnalyticsPluginDelegate=t}(t),function(e,t,n,i){"use strict";function r(e,t){if(r.__super__.constructor.call(this,m),!e)throw new Error("The reference to the AppMeasurement object cannot be NULL.");this._appMeasurement=e,this._delegate=t,this._customMetaKeys=[],this._videoMetadata={},this._adMetadata={},this._chapterMetadata={},this._errorInfo=null,this._workQueue=new u(!0,b),this._inputDataValidator=new _(function(e){this._errorInfo=e,this._logger.error(this._logTag,e.getMessage()+" | "+e.getDetails());var t=this;setTimeout(function(){t._trigger(S,e),t._delegate&&t._delegate.onError(t._errorInfo)},0)},this),this._appMeasurement.isReadyToTrack(),this._setupDataResolver()}var a=e.Trigger,o=e.plugin.BasePlugin,s=e.plugin.ParamMapping,l=e.radio.Channel,c=e.radio.Command,u=e.radio.CommandQueue,d=t.ErrorInfo,p=n.md5,g=n.StringUtils,f=n.ObjectUtils,h=i.AdobeAnalyticsPluginConfig,_=i.InputDataValidator;e.extend(r,o),r.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof h))throw new Error("Expected config data to be instance of AdobeAnalyticsPluginConfig.");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.debugLogging+", channel="+this._config.channel+", ssl="+this._appMeasurement.ssl+"})")},r.prototype.bootstrap=function(e){r.__super__.bootstrap.call(this,e),this._registerCommands(),this._registerBehaviours()},r.prototype.setup=function(){this._appMeasurement.isReadyToTrack()?this._onAppMeasurementReady():this._appMeasurement.callbackWhenReadyToTrack(this,this._onAppMeasurementReady,[]),r.__super__.setup.call(this)},r.prototype.setVideoMetadata=function(e){this._videoMetadata=f.clone(e)},r.prototype.setAdMetadata=function(e){this._adMetadata=f.clone(e)},r.prototype.setChapterMetadata=function(e){this._chapterMetadata=f.clone(e)},r.prototype._canProcess=function(){return this._errorInfo?(this._logger.error(this._logTag,"#_canProcess() > In ERROR state."),!1):r.__super__._canProcess.call(this)},r.prototype._cmdVideoLoad=function(e){this._errorInfo=null},r.prototype._cmdVideoStart=function(e){this._logger.debug(this._logTag,"#_cmdVideoStart()"),this._canProcess()&&this._workQueue.addCommand(new c(this._executeOpen,this,[e]))},r.prototype._cmdAdStart=function(e){this._logger.debug(this._logTag,"#_cmdAdStart()"),this._canProcess()&&this._workQueue.addCommand(new c(this._executeOpenAd,this,[e]))},r.prototype._cmdHeartbeatPluginError=function(e){this._errorInfo||(this._errorInfo=new d("Internal error","HeartbeatPlugin is in ERROR state."),this._trigger(S,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},r.prototype._resetAppMeasurementContextData=function(){delete this._appMeasurement.contextData["a.contentType"],delete this._appMeasurement.contextData["a.media.name"],delete this._appMeasurement.contextData["a.media.friendlyName"],delete this._appMeasurement.contextData["a.media.length"],delete this._appMeasurement.contextData["a.media.playerName"],delete this._appMeasurement.contextData["a.media.channel"],delete this._appMeasurement.contextData["a.media.view"],delete this._appMeasurement.contextData["a.media.ad.name"],delete this._appMeasurement.contextData["a.media.ad.friendlyName"],delete this._appMeasurement.contextData["a.media.ad.podFriendlyName"],delete this._appMeasurement.contextData["a.media.ad.length"],delete this._appMeasurement.contextData["a.media.ad.playerName"],delete this._appMeasurement.contextData["a.media.ad.pod"],delete this._appMeasurement.contextData["a.media.ad.podPosition"],delete this._appMeasurement.contextData["a.media.ad.podSecond"],delete this._appMeasurement.contextData["a.media.ad.view"];for(var e=0;e<this._customMetaKeys.length;e++){var t=this._customMetaKeys[e];delete this._appMeasurement.contextData[t]}this._customMetaKeys=[]},r.prototype._executeOpen=function(e){if(this._logger.debug(this._logTag,"#_executeOpen(id="+e.videoId+", videoName="+e.videoName+", streamType="+e.streamType+", length="+e.videoLength+", playerName="+e.playerName+", channel="+e.channel+", isPrimetime="+e.isPrimetime+", sessionId="+e.sessionId+")"),this._canProcess()&&this._inputDataValidator.validateFields(e,["videoId","streamType","videoLength","playerName"])){for(var t in this._resetAppMeasurementContextData(),e.metaVideo)e.metaVideo.hasOwnProperty(t)&&(this._appMeasurement.contextData[t]=e.metaVideo[t],this._customMetaKeys.push(t));if(e.metaNielsen)for(var t in e.metaNielsen)e.metaNielsen.hasOwnProperty(t)&&(this._appMeasurement.contextData[t]=e.metaNielsen[t],this._customMetaKeys.push(t));this._appMeasurement.contextData["a.contentType"]=e.streamType,this._appMeasurement.contextData["a.media.name"]=e.videoId,this._appMeasurement.contextData["a.media.friendlyName"]=e.videoName||"",this._appMeasurement.contextData["a.media.length"]=Math.floor(e.videoLength)||"0.0",this._appMeasurement.contextData["a.media.playerName"]=e.playerName,this._appMeasurement.contextData["a.media.channel"]=e.channel||"",this._appMeasurement.contextData["a.media.view"]=!0,this._appMeasurement.contextData["a.media.vsid"]=e.sessionId,this._appMeasurement.pev3=A,this._appMeasurement.pe=e.isPrimetime?I:E,this._appMeasurement.track();var n=this;setTimeout(function(){n._trigger(D,e)},0)}},r.prototype._executeOpenAd=function(e){var t=p(e.videoId)+"_"+e.podPosition;if(this._logger.debug(this._logTag,"#_executeOpenAd(id="+e.adId+", streamType="+e.streamType+", length="+e.adLength+", podPlayerName="+e.podPlayerName+", parentId="+e.videoId+", podId="+t+", parentPodPosition="+e.adPosition+", podSecond="+e.podSecond+")"),this._canProcess()&&this._inputDataValidator.validateFields(e,["videoId","streamType","playerName","adId","adLength","podPlayerName","adPosition"])){for(n in e.podSecond=null==e.podSecond||isNaN(e.podSecond)?e.playhead:e.podSecond,this._resetAppMeasurementContextData(),e.metaVideo)e.metaVideo.hasOwnProperty(n)&&(this._appMeasurement.contextData[n]=e.metaVideo[n],this._customMetaKeys.push(n));for(n in e.metaAd)e.metaAd.hasOwnProperty(n)&&(this._appMeasurement.contextData[n]=e.metaAd[n],this._customMetaKeys.push(n));if(e.metaNielsen)for(var n in e.metaNielsen)e.metaNielsen.hasOwnProperty(n)&&(this._appMeasurement.contextData[n]=e.metaNielsen[n],this._customMetaKeys.push(n));this._appMeasurement.contextData["a.contentType"]=e.streamType,this._appMeasurement.contextData["a.media.name"]=e.videoId,this._appMeasurement.contextData["a.media.playerName"]=e.playerName,this._appMeasurement.contextData["a.media.channel"]=e.channel||"",this._appMeasurement.contextData["a.media.vsid"]=e.sessionId,this._appMeasurement.contextData["a.media.friendlyName"]=e.videoName||"",this._appMeasurement.contextData["a.media.length"]=Math.floor(e.videoLength)||"0.0",this._appMeasurement.contextData["a.media.ad.name"]=e.adId,this._appMeasurement.contextData["a.media.ad.friendlyName"]=e.adName||"",this._appMeasurement.contextData["a.media.ad.podFriendlyName"]=e.podName||"",this._appMeasurement.contextData["a.media.ad.length"]=Math.floor(e.adLength)||"0.0",this._appMeasurement.contextData["a.media.ad.playerName"]=e.podPlayerName,this._appMeasurement.contextData["a.media.ad.pod"]=t,this._appMeasurement.contextData["a.media.ad.podPosition"]=Math.floor(e.adPosition)||"0.0",this._appMeasurement.contextData["a.media.ad.podSecond"]=Math.floor(e.podSecond)||"0.0",this._appMeasurement.contextData["a.media.ad.view"]=!0,this._appMeasurement.pev3=T,this._appMeasurement.pe=e.isPrimetime?k:w,this._appMeasurement.track();var i=this;setTimeout(function(){i._trigger(O,e)},0)}},r.prototype._setupDataResolver=function(){var r={},a=this;r.rsid=function(){return a._appMeasurement.account},r.tracking_server=function(){return a._appMeasurement.ssl&&a._appMeasurement.trackingServerSecure?a._appMeasurement.trackingServerSecure:a._appMeasurement.trackingServer},r.ssl=function(){return a._appMeasurement.ssl},r.vid=function(){return a._appMeasurement.visitorID},r.aid=function(){return a._appMeasurement.analyticsVisitorID},r.mid=function(){return a._appMeasurement.marketingCloudVisitorID},r.blob=function(){return a._appMeasurement.audienceManagerBlob},r.loc_hint=function(){return a._appMeasurement.audienceManagerLocationHint?parseInt(a._appMeasurement.audienceManagerLocationHint):""},r.customerIDs=function(){var e=a._appMeasurement.visitor.getCustomerIDs(),t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if("object"==typeof i){for(var r in i)i.hasOwnProperty(r)&&("authState"==r?t[n+".as"]=i[r]:t[n+"."+r]=i[r]);t[n+".as"]||(t[n+".as"]="0")}}return t},r.channel=function(){return a._config?a._config.channel:null},r.meta=function(e){var t=e.split(".");if(t.length<2)return null;var n=t.shift();switch(e=t.join("."),n){case"video":return e==l.WILDCARD?a._videoMetadata:a._videoMetadata[e];case"ad":return e==l.WILDCARD?a._adMetadata:a._adMetadata[e];case"chapter":return e==l.WILDCARD?a._chapterMetadata:a._chapterMetadata[e];default:return null}},r.visitorOptedOut=function(){return null!=a._appMeasurement.visitorOptedOut&&a._appMeasurement.visitorOptedOut},this._dataResolver=function(e){if(!e||0==e.length)return null;for(var t=null,n=0;n<e.length;n++){var i=e[n];t=t||{},g.startsWith(i,"meta.")?t[i]=r.meta(i.split("meta.")[1]):t[i]=r.hasOwnProperty(i)?r[i].call(this):null}return t}},r.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleHeartbeatPluginError",this._cmdHeartbeatPluginError)},r.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new a(C,N),this,"handleVideoLoad"),this._pluginManager.registerBehaviour(new a(C,B),this,"handleVideoStart",[new s(C,"video.id","videoId"),new s(C,"video.streamType","streamType"),new s(C,"video.name","videoName"),new s(C,"video.length","videoLength"),new s(C,"video.playerName","playerName"),new s(C,"video.streamType","streamType"),new s(P,"is_primetime","isPrimetime"),new s(P,"session_id","sessionId"),new s(v,"channel","channel"),new s(v,"meta.video.*","metaVideo"),new s(y,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new a(C,M),this,"handleAdStart",[new s(C,"video.id","videoId"),new s(C,"video.streamType","streamType"),new s(C,"video.playhead","playhead"),new s(C,"video.playerName","playerName"),new s(C,"video.name","videoName"),new s(C,"video.length","videoLength"),new s(C,"ad.id","adId"),new s(C,"ad.length","adLength"),new s(C,"ad.position","adPosition"),new s(C,"ad.name","adName"),new s(C,"pod.name","podName"),new s(C,"pod.position","podPosition"),new s(C,"pod.playerName","podPlayerName"),new s(C,"pod.startTime","podSecond"),new s(P,"is_primetime","isPrimetime"),new s(P,"session_id","sessionId"),new s(v,"channel","channel"),new s(v,"meta.video.*","metaVideo"),new s(v,"meta.ad.*","metaAd"),new s(y,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new a(P,S),this,"handleHeartbeatPluginError")},r.prototype._onAppMeasurementReady=function(){this._workQueue.resume()};var m="adobe-analytics",v=m,y="nielsen",C="player",P="adobe-heartbeat",b=2e3,S="error",A="video",T="videoAd",E="ms_s",I="msp_s",w="msa_s",k="mspa_s",D="aa_start",O="sc_ad_start",N="video_load",B="video_start",M="ad_start";i.AdobeAnalyticsPlugin=r}(e.ADB.core,e.ADB.va,e.ADB.va.utils,t),function(e){"use strict";e.VideoMetadataKeys={SHOW:"a.media.show",SEASON:"a.media.season",EPISODE:"a.media.episode",ASSET_ID:"a.media.asset",GENRE:"a.media.genre",FIRST_AIR_DATE:"a.media.airDate",FIRST_DIGITAL_DATE:"a.media.digitalDate",RATING:"a.media.rating",ORIGINATOR:"a.media.originator",NETWORK:"a.media.network",SHOW_TYPE:"a.media.type",AD_LOAD:"a.media.adLoad",MVPD:"a.media.pass.mvpd",AUTHORIZED:"a.media.pass.auth",DAY_PART:"a.media.dayPart",FEED:"a.media.feed",STREAM_FORMAT:"a.media.format"},e.AdMetadataKeys={ADVERTISER:"a.media.ad.advertiser",CAMPAIGN_ID:"a.media.ad.campaign",CREATIVE_ID:"a.media.ad.creative",PLACEMENT_ID:"a.media.ad.placement",SITE_ID:"a.media.ad.site",CREATIVE_URL:"a.media.ad.creativeURL"}}(t),e.ADB.va.plugins.aa||(e.ADB.va.plugins.aa=t)}(this),function(U){!function(e){"use strict";function t(){this.trackingServer=void 0,this.channel=void 0,this.ovp=void 0,this.appVersion=void 0,this.playerName=void 0,this.ssl=!1,this.debugLogging=!1}e.MediaHeartbeatConfig=t,e.MediaHeartbeatConfig.sharedInstance=new t}(U.ADB.va),function(e){"use strict";function t(){this.data={}}var n=e.plugins.videoplayer.VideoInfo,i=e.plugins.videoplayer.AdBreakInfo,r=e.plugins.videoplayer.AdInfo,a=e.plugins.videoplayer.ChapterInfo,o=e.plugins.videoplayer.QoSInfo;t.MEDIAINFO_KEY_NAME="a.name",t.MEDIAINFO_KEY_VIDEOID="a.videoId",t.MEDIAINFO_KEY_ADID="a.adId",t.MEDIAINFO_KEY_LENGTH="a.length",t.MEDIAINFO_KEY_PLAYHEAD="a.playhead",t.MEDIAINFO_KEY_STREAMTYPE="a.streamType",t.MEDIAINFO_KEY_POSITION="a.position",t.MEDIAINFO_KEY_STARTTIME="a.startTime",t.MEDIAINFO_KEY_BITRATE="a.bitrate",t.MEDIAINFO_KEY_FPS="a.fps",t.MEDIAINFO_KEY_DROPPEDFRAMES="a.droppedFrames",t.MEDIAINFO_KEY_STARTUPTIME="a.startupTime",t.MEDIAINFO_KEY_TIMEDMETADATA="a.timedMetadata",t.prototype.setValue=function(e,t){this.data[e]=t},t.prototype.getValue=function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},t.prototype.createVideoInfo=function(){var e=new n;return e.id=null!=this.getValue(t.MEDIAINFO_KEY_VIDEOID)?this.getValue(t.MEDIAINFO_KEY_VIDEOID):"",e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(t.MEDIAINFO_KEY_LENGTH)?this.getValue(t.MEDIAINFO_KEY_LENGTH):0,e.playhead=null!=this.getValue(t.MEDIAINFO_KEY_PLAYHEAD)?this.getValue(t.MEDIAINFO_KEY_PLAYHEAD):0,e.streamType=null!=this.getValue(t.MEDIAINFO_KEY_STREAMTYPE)?this.getValue(t.MEDIAINFO_KEY_STREAMTYPE):"",e},t.prototype.createAdBreakInfo=function(){var e=new i;return e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.position=null!=this.getValue(t.MEDIAINFO_KEY_POSITION)?this.getValue(t.MEDIAINFO_KEY_POSITION):0,e.startTime=null!=this.getValue(t.MEDIAINFO_KEY_STARTTIME)?this.getValue(t.MEDIAINFO_KEY_STARTTIME):0,e},t.prototype.createAdInfo=function(){var e=new r;return e.id=null!=this.getValue(t.MEDIAINFO_KEY_ADID)?this.getValue(t.MEDIAINFO_KEY_ADID):"",e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(t.MEDIAINFO_KEY_LENGTH)?this.getValue(t.MEDIAINFO_KEY_LENGTH):0,e.position=null!=this.getValue(t.MEDIAINFO_KEY_POSITION)?this.getValue(t.MEDIAINFO_KEY_POSITION):0,e},t.prototype.createChapterInfo=function(){var e=new a;return e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(t.MEDIAINFO_KEY_LENGTH)?this.getValue(t.MEDIAINFO_KEY_LENGTH):0,e.startTime=null!=this.getValue(t.MEDIAINFO_KEY_STARTTIME)?this.getValue(t.MEDIAINFO_KEY_STARTTIME):0,e.position=null!=this.getValue(t.MEDIAINFO_KEY_POSITION)?this.getValue(t.MEDIAINFO_KEY_POSITION):0,e},t.prototype.createQoSInfo=function(){var e=new o;return e.bitrate=null!=this.getValue(t.MEDIAINFO_KEY_BITRATE)?this.getValue(t.MEDIAINFO_KEY_BITRATE):0,e.fps=null!=this.getValue(t.MEDIAINFO_KEY_FPS)?this.getValue(t.MEDIAINFO_KEY_FPS):0,e.droppedFrames=null!=this.getValue(t.MEDIAINFO_KEY_DROPPEDFRAMES)?this.getValue(t.MEDIAINFO_KEY_DROPPEDFRAMES):0,e.startupTime=null!=this.getValue(t.MEDIAINFO_KEY_STARTUPTIME)?this.getValue(t.MEDIAINFO_KEY_STARTUPTIME):0,e},e.MediaObject=t}(U.ADB.va),function(e,t){"use strict";function n(e){n.__super__.constructor.call(this),this._heartbeat=e}function i(e){i.__super__.constructor.call(this),this._heartbeat=e}function r(e){r.__super__.constructor.call(this),this._heartbeat=e}function a(e){a.__super__.constructor.call(this),this._heartbeat=e}e.extend(n,t.plugins.aa.AdobeAnalyticsPluginDelegate),n.prototype.onError=function(e){t.MediaHeartbeat._onDelegateError.call(this._heartbeat,e)},e.extend(i,t.plugins.ah.AdobeHeartbeatPluginDelegate),i.prototype.onError=function(e){t.MediaHeartbeat._onDelegateError.call(this._heartbeat,e)},e.extend(r,t.HeartbeatDelegate),r.prototype.onError=function(e){t.MediaHeartbeat._onDelegateError.call(this._heartbeat,e)},e.extend(a,t.plugins.videoplayer.VideoPlayerPluginDelegate),a.prototype.getVideoInfo=function(){return this._heartbeat&&this._heartbeat._videoInfo?(this._heartbeat._delegate&&(this._heartbeat._videoInfo.playhead=this._heartbeat._delegate.getCurrentPlaybackTime()),this._heartbeat._videoInfo):null},a.prototype.getAdBreakInfo=function(){return this._heartbeat&&this._heartbeat._adBreakInfo?this._heartbeat._adBreakInfo:null},a.prototype.getAdInfo=function(){return this._heartbeat&&this._heartbeat._adInfo?this._heartbeat._adInfo:null},a.prototype.getChapterInfo=function(){return this._heartbeat&&this._heartbeat._chapterInfo?this._heartbeat._chapterInfo:null},a.prototype.getQoSInfo=function(){if(this._heartbeat&&this._heartbeat._delegate&&this._heartbeat._delegate.getQoSObject()){var e=this._heartbeat._delegate.getQoSObject();if(e&&"object"==typeof e&&e.setValue)return e.createQoSInfo()}return null},t._MediaAnalyticsPluginDelegate=n,t._MediaHeartbeatPluginDelegate=i,t._ADBMediaHeartbeatDelegate=r,t._MediaHeartbeatVideoPlayerPluginDelegate=a}(U.ADB.core,U.ADB.va),function(e,t){"use strict";function n(){}function i(e){i.__super__.constructor.call(this),this._heartbeat=e}var r=t.MediaHeartbeatConfig;t.plugins.nielsen&&(n.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA="media_nielsen_content_metadata",n.MEDIAHEARTBEAT_NIELSEN_AD_METADATA="media_nielsen_ad_metadata",n.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA="media_nielsen_channel_metadata",r.prototype.nielsenConfigKey=void 0,r.prototype.nielsenAppInfo=void 0,e.extend(i,t.plugins.nielsen.NielsenPluginDelegate),i.prototype.getMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentContentMediaObject){var e=this._heartbeat._currentContentMediaObject.getValue(n.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA);if("object"==typeof e)return e}return null},i.prototype.getAdMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentAdMediaObject){var e=this._heartbeat._currentAdMediaObject.getValue(n.MEDIAHEARTBEAT_NIELSEN_AD_METADATA);if("object"==typeof e)return e}return null},i.prototype.getChannelInfo=function(){if(this._heartbeat&&this._heartbeat._currentContentMediaObject){var e=this._heartbeat._currentContentMediaObject.getValue(n.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA);if("object"==typeof e)return e}return null},i.prototype.onError=function(e){this._heartbeat&&t.MediaHeartbeat._onError.call(this._heartbeat,e)},t._MediaHeartbeatNielsen=n,t._MediaHeartbeatNielsenPluginDelegate=i)}(U.ADB.core,U.ADB.va),function(e,i){"use strict";function t(){}function o(e,t,n){if(this._logger=new c,this._plugins=[],this._playerPlugin=null,this._aaPlugin=null,this._ahPlugin=null,this._nielsenPlugin=null,this._currentContentMediaObject=void 0,this._currentAdMediaObject=void 0,this._videoInfo=void 0,this._adBreakInfo=void 0,this._adInfo=void 0,this._chapterInfo=void 0,this._state={},this._delegate=e,n)this.appMeasurement=n;else{if(!U.s)return void this._logger.error(R,"Valid AppMeasurement instance required for initialising MediaHeartbeat");this.appMeasurement=U.s}t&&"object"==typeof t&&null!=t.trackingServer?(this._config=t,i.MediaHeartbeat._debugLogging||this._config.debugLogging?this._logger.enable():this._logger.disable()):this._logger.error(R,"Valid config required for initialising MediaHeartbeat")}function n(){this._ahPlugin=new P(new S(this));var e=new b(this._config.trackingServer,this.appMeasurement.visitor.marketingCloudOrgID);e.debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,e.ovp=this._config.ovp?this._config.ovp:"",e.ssl=this._config.ssl,e.sdk=this._config.appVersion?this._config.appVersion:"";var t=function(){return this._currentContentMediaObject?this._currentContentMediaObject.getValue(x):null}.call(this);t&&0<t.length&&(e.__primetime=!0,e.__psdkVersion=t),this._ahPlugin.configure(e),this._plugins.push(this._ahPlugin)}function a(e,t){if(e!=E&&(!this._state[E]||this._state[k]))return!1;if(e===I&&function(){this._state[O]&&this.trackEvent(o.Event.SeekComplete),this._state[D]&&this.trackEvent(o.Event.BufferComplete)}.call(this),!(e===M&&!t)&&(t?!this._state[e]:this._state[e]))return!1;switch(e){case I:this._state[w]=t,this._state[L]=!0;break;case w:this._state[I]=t;break;case M:if(!t&&this._state[B])return!1;break;case B:if(!t&&!this._state[M])return!1}return this._state[e]=!t,!0}function r(){return this._state[E]}function s(){this._state={}}function l(){this._plugins=[],this._aaPlugin=null,this._ahPlugin=null,this._playerPlugin=null,this._nielsenPlugin=null,this._heartbeat&&(this._heartbeat.destroy(),this._heartbeat=null)}var c=e.Logger,u=i.plugins.videoplayer.AssetType,d=i.MediaObject,p=i.Heartbeat,g=i.HeartbeatConfig,f=i._ADBMediaHeartbeatDelegate,h=i.plugins.videoplayer.VideoPlayerPlugin,_=i.plugins.videoplayer.VideoPlayerPluginConfig,m=i._MediaHeartbeatVideoPlayerPluginDelegate,v=i.plugins.aa.AdobeAnalyticsPlugin,y=i.plugins.aa.AdobeAnalyticsPluginConfig,C=i._MediaAnalyticsPluginDelegate,P=i.plugins.ah.AdobeHeartbeatPlugin,b=i.plugins.ah.AdobeHeartbeatPluginConfig,S=i._MediaHeartbeatPluginDelegate;if(t.prototype.getCurrentPlaybackTime=function(){return null},t.prototype.getQoSObject=function(){return null},o.Event={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",TimedMetadataUpdate:"timedMetadataUpdate"},o.StreamType={VOD:"vod",LIVE:"live",LINEAR:"linear"},o.MediaObjectKey={StandardVideoMetadata:"media_standard_content_metadata",StandardAdMetadata:"media_standard_ad_metadata",VideoResumed:"resumed"},o.VideoMetadataKeys=i.plugins.aa.VideoMetadataKeys,o.AdMetadataKeys=i.plugins.aa.AdMetadataKeys,o.version=function(){return i.Version.getVersion()},o.prototype.trackSessionStart=function(e,t){if(this._logger.info(R,"#::trackSessionStart()"),a.call(this,E)){if(!e||"object"!=typeof e||!e.setValue)return function(e){this._state[e]=!1}.call(this,E),void this._logger.error(R,"Invalid Media Info object");this._currentContentMediaObject=e,this._videoInfo=e.createVideoInfo(),this._videoInfo.playerName=null!=this._config.playerName?this._config.playerName:"";var n=e.getValue(o.MediaObjectKey.StandardVideoMetadata);if(n&&"object"==typeof n)for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);var r=e.getValue(o.MediaObjectKey.VideoResumed);r&&"boolean"==typeof r&&(this._videoInfo.resumed=e.getValue(o.MediaObjectKey.VideoResumed)),T.call(this),this._playerPlugin&&(this._aaPlugin&&this._aaPlugin.setVideoMetadata(t),this._playerPlugin.trackVideoLoad(),this._playerPlugin.trackSessionStart())}else this._logger.error(R,"API call trackSessionStart is unsupported in the current state.")},o.prototype.trackPlay=function(){return this._logger.info(R,"#::trackPlay()"),a.call(this,I)?void this._playerPlugin.trackPlay():void this._logger.error(R,"API call trackPlay is unsupported in the current state.")},o.prototype.trackPause=function(){return this._logger.info(R,"#::trackPause()"),a.call(this,w)?void(this._playerPlugin&&this._playerPlugin.trackPause()):void this._logger.error(R,"API call trackPause is unsupported in the current state.")},o.prototype.trackComplete=function(){return this._logger.info(R,"#::trackComplete()"),a.call(this,k)?void(this._playerPlugin&&this._playerPlugin.trackComplete(function(){})):void this._logger.error(R,"API call trackComplete is unsupported in the current state.")},o.prototype.trackSessionEnd=function(){return this._logger.info(R,"#::trackSessionEnd()"),a.call(this,E,!0)?(this._playerPlugin&&this._playerPlugin.trackVideoUnload(),s.call(this),void l.call(this)):(s.call(this),l.call(this),void this._logger.error(R,"API call trackSessionEnd is unsupported in the current state."))},o.prototype.trackError=function(e){return this._logger.info(R,"#::trackError()"),r.call(this)?void(this._playerPlugin&&this._playerPlugin.trackVideoPlayerError(e||"unknown_error_id")):void this._logger.error(R,"API call trackError is unsupported in the current state.")},o.prototype.trackEvent=function(e,t,n){switch(e){case o.Event.AdBreakStart:case o.Event.AdBreakComplete:(function(e,t){if(e==o.Event.AdBreakStart){if(this._logger.info(R,"#::trackEvent(AdBreakStart)"),!a.call(this,M))return void this._logger.error(R,"API call trackEvent:AdBreakStart is unsupported in the current state.");t&&"object"==typeof t&&t.setValue?(this._adBreakInfo=t.createAdBreakInfo(),this._adBreakInfo.playerName=this._config.playerName?this._config.playerName:""):this._logger.error(R,"Invalid AdBreak Info for MediaHeartbeatEvent.AdBreakStart event.")}else{if(this._logger.info(R,"#::trackEvent(AdBreakComplete)"),!a.call(this,M,!0))return void this._logger.error(R,"API call trackEvent:AdBreakComplete is unsupported in the current state.");this._adBreakInfo=void 0}}).call(this,e,t);break;case o.Event.AdStart:case o.Event.AdComplete:case o.Event.AdSkip:(function(e,t,n){if(e==o.Event.AdStart){if(this._logger.info(R,"#::trackEvent(AdStart)"),!a.call(this,B))return void this._logger.error(R,"API call trackEvent:AdStart is unsupported in the current state.");if(t&&"object"==typeof t&&t.setValue){this._currentAdMediaObject=t,this._adInfo=t.createAdInfo();var i=t.getValue(o.MediaObjectKey.StandardAdMetadata);if(i&&"object"==typeof i)for(var r in i)i.hasOwnProperty(r)&&(n[r]=i[r]);this._aaPlugin&&this._aaPlugin.setAdMetadata(n),this._playerPlugin.trackAdStart(),this._state[L]||this._state[w]||this.trackPlay()}else this._logger.error(R,"Invalid Ad Info for MediaHeartbeatEvent.AdStart event.")}else if(e==o.Event.AdComplete){if(this._logger.info(R,"#::trackEvent(AdComplete)"),!a.call(this,B,!0))return void this._logger.error(R,"API call trackEvent:AdComplete is unsupported in the current state.");this._playerPlugin.trackAdComplete(),this._adInfo=null}else{if(this._logger.info(R,"#::trackEvent(AdSkip)"),!a.call(this,B,!0))return void this._logger.error(R,"API call trackEvent:AdSkip is unsupported in the current state.");this._adInfo=null}}).call(this,e,t,n);break;case o.Event.SeekStart:case o.Event.SeekComplete:(function(e){if(e==o.Event.SeekStart){if(this._logger.info(R,"#::trackEvent(SeekStart)"),!a.call(this,O))return void this._logger.error(R,"API call trackEvent:SeekStart is unsupported in the current state.");this._playerPlugin.trackSeekStart()}else{if(this._logger.info(R,"#::trackEvent(SeekComplete)"),!a.call(this,O,!0))return void this._logger.error(R,"API call trackEvent:SeekComplete is unsupported in the current state.");this._playerPlugin.trackSeekComplete()}}).call(this,e);break;case o.Event.ChapterStart:case o.Event.ChapterComplete:case o.Event.ChapterSkip:(function(e,t,n){if(e==o.Event.ChapterStart){if(this._logger.info(R,"#::trackEvent(ChapterStart)"),!a.call(this,N))return void this._logger.error(R,"API call trackEvent:ChapterStart is unsupported in the current state.");t&&"object"==typeof t&&t.setValue?(this._chapterInfo=t.createChapterInfo(),this._aaPlugin&&this._aaPlugin.setChapterMetadata(n),this._playerPlugin.trackChapterStart(),this._state[L]||this._state[w]||this.trackPlay()):this._logger.error(R,"Invalid Chapter Info for MediaHeartbeatEvent.ChapterStart event.")}else if(e==o.Event.ChapterComplete){if(this._logger.info(R,"#::trackEvent(ChapterComplete)"),!a.call(this,N,!0))return void this._logger.error(R,"API call trackEvent:ChapterComplete is unsupported in the current state.");this._chapterInfo=null,this._playerPlugin.trackChapterComplete()}else{if(this._logger.info(R,"#::trackEvent(ChapterSkip)"),!a.call(this,N,!0))return void this._logger.error(R,"API call trackEvent:ChapterSkip is unsupported in the current state.");this._chapterInfo=null}}).call(this,e,t,n);break;case o.Event.BufferStart:case o.Event.BufferComplete:(function(e){if(e==o.Event.BufferStart){if(this._logger.info(R,"#::trackEvent(BufferStart)"),!a.call(this,D))return void this._logger.error(R,"API call trackEvent:BufferStart is unsupported in the current state.");this._playerPlugin.trackBufferStart()}else{if(this._logger.info(R,"#::trackEvent(BufferComplete)"),!a.call(this,D,!0))return void this._logger.error(R,"API call trackEvent:BufferComplete is unsupported in the current state.");this._playerPlugin.trackBufferComplete()}}).call(this,e);break;case o.Event.BitrateChange:(function(){return this._logger.info(R,"#::trackEvent(BitrateChange)"),r.call(this)?void this._playerPlugin.trackBitrateChange():void this._logger.error(R,"API call trackEvent:BitrateChange is unsupported in the current state.")}).call(this);break;case o.Event.TimedMetadataUpdate:(function(e){if(this._logger.info(R,"#::trackEvent(TimedMetadataUpdate)"),e&&"object"==typeof e&&e.setValue){var t=e.getValue(d.MEDIAINFO_KEY_TIMEDMETADATA);this._playerPlugin&&t&&"string"==typeof t&&this._playerPlugin.trackTimedMetadata(t)}}).call(this,t)}},i.plugins.nielsen){var A=i._MediaHeartbeatNielsen;o.MediaObjectKey.NielsenContentMetadata=A.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA,o.MediaObjectKey.NielsenAdMetadata=A.MEDIAHEARTBEAT_NIELSEN_AD_METADATA,o.MediaObjectKey.NielsenChannelMetadata=A.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA,o.prototype.nielsenLoadMetadata=function(e){this._nielsenPlugin&&this._nielsenPlugin.loadMetadata(e)}}var T=function(){if(!this.appMeasurement||!this.appMeasurement.visitor)throw new Error("appMeasurement.visitor object cannot be NULL.");(function(){this._aaPlugin=new v(this.appMeasurement,new C(this));var e=new y;e.channel=this._config.channel?this._config.channel:"",e.debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,this._aaPlugin.configure(e),this._plugins.push(this._aaPlugin)}).call(this),n.call(this),function(){this._playerPlugin=new h(new m(this));var e=new _;e.debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,this._playerPlugin.configure(e),this._plugins.push(this._playerPlugin)}.call(this),function(){if(i.plugins.nielsen&&this._config.nielsenConfigKey&&this._config.nielsenAppInfo){this._nielsenPlugin=new i.plugins.nielsen.NielsenPlugin(new i._MediaHeartbeatNielsenPluginDelegate(this));var e=new i.plugins.nielsen.NielsenPluginConfig;e.debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,e.appInfo=this._config.nielsenAppInfo,e.configKey=this._config.nielsenConfigKey,this._nielsenPlugin.configure(e),this._plugins.push(this._nielsenPlugin)}}.call(this),function(){var e=new g;e.debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,this._heartbeat=new p(new f(this),this._plugins),this._heartbeat.configure(e)}.call(this)},E=1,I=2,w=3,k=4,D=5,O=6,N=7,B=8,M=9,L=10;o.createMediaObject=function(e,t,n,i){var r=new d;r.setValue(d.MEDIAINFO_KEY_VIDEOID,t),r.setValue(d.MEDIAINFO_KEY_NAME,e),r.setValue(d.MEDIAINFO_KEY_LENGTH,n),r.setValue(d.MEDIAINFO_KEY_PLAYHEAD,0);var a=u.ASSET_TYPE_VOD;switch(i){case o.StreamType.VOD:a=u.ASSET_TYPE_VOD;break;case o.StreamType.LIVE:a=u.ASSET_TYPE_LIVE;break;case o.StreamType.LINEAR:a=u.ASSET_TYPE_LINEAR}return r.setValue(d.MEDIAINFO_KEY_STREAMTYPE,a),r},o.createAdBreakObject=function(e,t,n){var i=new d;return i.setValue(d.MEDIAINFO_KEY_NAME,e),i.setValue(d.MEDIAINFO_KEY_POSITION,t),i.setValue(d.MEDIAINFO_KEY_STARTUPTIME,n),i},o.createAdObject=function(e,t,n,i){var r=new d;return r.setValue(d.MEDIAINFO_KEY_NAME,e),r.setValue(d.MEDIAINFO_KEY_ADID,t),r.setValue(d.MEDIAINFO_KEY_POSITION,n),r.setValue(d.MEDIAINFO_KEY_LENGTH,i),r},o.createChapterObject=function(e,t,n,i){var r=new d;return r.setValue(d.MEDIAINFO_KEY_NAME,e),r.setValue(d.MEDIAINFO_KEY_POSITION,t),r.setValue(d.MEDIAINFO_KEY_LENGTH,n),r.setValue(d.MEDIAINFO_KEY_STARTTIME,i),r},o.createQoSObject=function(e,t,n,i){var r=new d;return r.setValue(d.MEDIAINFO_KEY_BITRATE,e),r.setValue(d.MEDIAINFO_KEY_FPS,n),r.setValue(d.MEDIAINFO_KEY_DROPPEDFRAMES,i),r.setValue(d.MEDIAINFO_KEY_STARTUPTIME,t),r},o.createTimedMetadataObject=function(e){var t=new d;return t.setValue(d.MEDIAINFO_KEY_TIMEDMETADATA,e),t};var R="MediaHeartbeat",x="a.__pttvsdkVersion";i.MediaHeartbeat=o,i.MediaHeartbeatDelegate=t,i.MediaHeartbeat._onDelegateError=function(e){this._logger.error(R,e.getMessage()+" | "+e.getDetails())},i.MediaHeartbeat._debugLogging=!1}(U.ADB.core,U.ADB.va),U.ADB||(U.ADB={}),U.ADB.core||(U.ADB.core=core),U.ADB.va||(U.ADB.va=va),U.ADB.va.plugins||(U.ADB.va.plugins={})}(this),function(e,t){"function"==typeof define&&define.amd?define([],function(){return e.ns_=t(e.ns_)}):"object"==typeof module&&module.exports?module.exports=t():e.ns_=t(e.ns_)}(this,function(C){(C=C||{}).ns_=C;var e,f,h,_,m,de={uid:(e=1,function(){return+new Date+"_"+e++}),filter:function(e,t){var n={};for(var i in t)t.hasOwnProperty(i)&&e(t[i])&&(n[i]=t[i]);return n},extend:function(e){var t,n=arguments.length;e=e||{};for(var i=1;i<n;i++)if(t=arguments[i])for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},getString:function(e,t){var n=String(e);return null==e?t||"na":n},getLong:function(e,t){var n=Number(e);return null==e||isNaN(n)?t||0:n},getInteger:function(e,t){var n=Number(parseInt(e));return null==e||isNaN(n)?t||0:n},getBoolean:function(e,t){var n="true"==String(e).toLowerCase();return null==e?t||!1:n},parseBoolean:function(e,t){return t=t||!1,e?"0"!=e&&void 0:t},isNotEmpty:function(e){return!this.isEmpty(e)},isEmpty:function(e){return null==e||""===e||e instanceof Array&&0===e.length},indexOf:function(n,e){var i=-1;return this.forEach(e,function(e,t){e==n&&(i=t)}),i},forEach:function(e,t,n){try{if("function"==typeof t)if(n=void 0!==n?n:null,"number"!=typeof e.length||void 0===e[0]){var i=void 0!==e.__proto__;for(var r in e)e.hasOwnProperty(r)&&(!i||i&&void 0===e.__proto__[r])&&"function"!=typeof e[r]&&t.call(n,e[r],r)}else for(var a=0,o=e.length;a<o;a++)t.call(n,e[a],a)}catch(e){}},regionMatches:function(e,t,n,i,r){if(t<0||i<0||t+r>e.length||i+r>n.length)return!1;for(;0<=--r;){if(e.charAt(t++)!=n.charAt(i++))return!1}return!0},size:function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t},log:function(e,t){if(void 0!==t&&t&&"undefined"!=typeof console&&console){var n=new Date,i=n.getHours()+":"+n.getMinutes()+":"+n.getSeconds();console.log(i,e)}},isTrue:function(e){return void 0!==e&&("string"==typeof e?"true"===(e=e.toLowerCase())||"1"===e||"on"===e:!!e)},toString:function(e){if(void 0===e)return"undefined";if("string"==typeof e)return e;if("[object Array]"===Object.prototype.toString.call(e))return e.join(",");if(0<this.size(e)){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t}return e.toString()},exists:function(e){return void 0!==e&&null!=e},firstGreaterThan0:function(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];if(0<n)return n}return 0},cloneObject:function(e){if(null==e||"object"!=typeof e)return e;var r;function t(){}function n(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}function i(){this.copiedObjects=[];var t=this;this.recursiveDeepCopy=function(e){return t.deepCopy(e)},this.depth=0}function a(e,t){var n=new i;return t&&(n.maxDepth=t),n.deepCopy(e)}return(r=[],n.prototype={constructor:n,canCopy:function(){return!1},create:function(e){},populate:function(e,t,n){}},i.prototype={constructor:i,maxDepth:256,cacheResult:function(e,t){this.copiedObjects.push([e,t])},getCachedResult:function(e){for(var t=this.copiedObjects,n=t.length,i=0;i<n;i++)if(t[i][0]===e)return t[i][1]},deepCopy:function(e){if(null===e)return null;if("object"!=typeof e)return e;var t=this.getCachedResult(e);if(t)return t;for(var n=0;n<r.length;n++){var i=r[n];if(i.canCopy(e))return this.applyDeepCopier(i,e)}throw new Error("Unable to clone the following object "+e)},applyDeepCopier:function(e,t){var n=e.create(t);if(this.cacheResult(t,n),this.depth++,this.depth>this.maxDepth)throw new Error("Maximum recursion depth exceeded.");return e.populate(this.recursiveDeepCopy,t,n),this.depth--,n}},a.DeepCopier=n,a.deepCopiers=r,a.register=function(e){e instanceof n||(e=new n(e)),r.unshift(e)},a.register({canCopy:function(){return!0},create:function(e){return e instanceof e.constructor?function(e){return"object"==typeof e?(t.prototype=e,new t):e}(e.constructor.prototype):{}},populate:function(e,t,n){for(var i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}}),a.register({canCopy:function(e){return e instanceof Array},create:function(e){return new e.constructor},populate:function(e,t,n){for(var i=0;i<t.length;i++)n.push(e(t[i]));return n}}),a.register({canCopy:function(e){return e instanceof Date},create:function(e){return new Date(e)}}),a.register({canCopy:function(e){return function(e){return"undefined"!=typeof window&&window&&window.Node?e instanceof Node:"undefined"!=typeof document&&e===document||"number"==typeof e.nodeType&&e.attributes&&e.childNodes&&e.cloneNode}(e)},create:function(e){return"undefined"!=typeof document&&e===document?document:e.cloneNode(!1)},populate:function(e,t,n){if("undefined"!=typeof document&&t===document)return document;if(t.childNodes&&t.childNodes.length)for(var i=0;i<t.childNodes.length;i++){var r=e(t.childNodes[i]);n.appendChild(r)}}}),{deepCopy:a}).deepCopy(e)},safeGet:function(e,t){return t=this.exists(t)?t:"",this.exists(e)?e:t},getBrowserName:function(){if(!navigator)return"";var e,t,n=navigator.userAgent||"",i=navigator.appName||"";return-1!=(t=n.indexOf("Opera"))||-1!=(t=n.indexOf("OPR/"))?i="Opera":-1!=(t=n.indexOf("Android"))?i="Android":-1!=(t=n.indexOf("Chrome"))?i="Chrome":-1!=(t=n.indexOf("Safari"))?i="Safari":-1!=(t=n.indexOf("Firefox"))?i="Firefox":-1!=(t=n.indexOf("IEMobile"))?i="Internet Explorer Mobile":"Microsoft Internet Explorer"==i||"Netscape"==i?i="Internet Explorer":(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))?(i=n.substring(e,t)).toLowerCase()==i.toUpperCase()&&(i=navigator.appName):i="unknown",i},getBrowserFullVersion:function(){if(!navigator)return"";var e,t,n,i=navigator.userAgent||"",r=navigator.appName||"",a=navigator.appVersion?""+parseFloat(navigator.appVersion):"";return-1!=(t=i.indexOf("Opera"))?(a=i.substring(t+6),-1!=(t=i.indexOf("Version"))&&(a=i.substring(t+8))):-1!=(t=i.indexOf("OPR/"))?a=i.substring(t+4):-1!=(t=i.indexOf("Android"))?a=i.substring(t+11):-1!=(t=i.indexOf("Chrome"))?a=i.substring(t+7):-1!=(t=i.indexOf("Safari"))?(a=i.substring(t+7),-1!=(t=i.indexOf("Version"))&&(a=i.substring(t+8))):-1!=(t=i.indexOf("Firefox"))?a=i.substring(t+8):"Microsoft Internet Explorer"==r?null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(i)&&(a=parseFloat(RegExp.$1)):"Netscape"==r?null!=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(i)&&(a=parseFloat(RegExp.$1)):a=i.lastIndexOf(" ")+1<(t=i.lastIndexOf("/"))?i.substring(t+1):"unknown",-1!=(n=(a=a.toString()).indexOf(";"))&&(a=a.substring(0,n)),-1!=(n=a.indexOf(" "))&&(a=a.substring(0,n)),-1!=(n=a.indexOf(")"))&&(a=a.substring(0,n)),e=parseInt(""+a,10),isNaN(e)&&(a=""+parseFloat(navigator.appVersion)),a},browserAcceptsLargeURLs:function(){return"undefined"==typeof window||(window.ActiveXObject,!0)},getNamespace:function(){return C.ns_||C}};return C.StreamSense=C.StreamSense||function(){var i,u={PLATFORM:"generic",httpGet:function(e,t){if("undefined"!=typeof Image){var n=new Image;n.onload=function(){t&&t(200),n=null},n.onerror=function(){t&&t(),n=null},n.src=e}else"function"==typeof setTimeout?t&&setTimeout(t,0):t&&t()},httpPost:function(e,t,n){"function"==typeof setTimeout?n&&setTimeout(function(){n(200)},0):n&&n(200)},Storage:(i="cs_",function(){var n="undefined"!=typeof localStorage?localStorage:null;de.extend(this,{get:function(e){return n&&n.getItem(i+e)},set:function(e,t){n&&n.setItem(i+e,t)},has:function(e){return n&&n.getItem(i+e)},remove:function(e){n&&n.removeItem(i+e)},clear:function(){for(var e=0;n&&e<n.length;++e){var t=n.key(e);t.substr(0,i.length)===i&&n.removeItem(t)}}})}),IO:{dir:function(){return null},append:function(e,t,n){},write:function(e,t,n){},deleteFile:function(){return!1},read:function(){return null}},onDataFetch:function(e){e()},getCrossPublisherId:function(){return null},getAppName:function(){return F.UNKNOWN_VALUE},getAppVersion:function(){return F.UNKNOWN_VALUE},getVisitorId:function(){return this.getDeviceName()+ +new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceModel:function(){return F.UNKNOWN_VALUE},getPlatformVersion:function(){return F.UNKNOWN_VALUE},getPlatformName:function(){return"js"},getRuntimeName:function(){return F.UNKNOWN_VALUE},getRuntimeVersion:function(){return F.UNKNOWN_VALUE},getDisplayResolution:function(){return F.UNKNOWN_RESOLUTION},getApplicationResolution:function(){return F.UNKNOWN_RESOLUTION},getLanguage:function(){return F.UNKNOWN_VALUE},getPackageName:function(){return null},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},setPlatformAPI:function(){},isCrossPublisherIdChanged:function(){return!1},setTimeout:function(e,t){return setTimeout(e,t)},clearTimeout:function(e){return clearTimeout(e)},getDeviceArchitecture:function(){return F.UNKNOWN_VALUE},getConnectionType:function(){return F.UNKNOWN_VALUE},getDeviceJailBrokenFlag:function(){return F.UNKNOWN_VALUE},isConnSecure:function(){return"s"===document.location.href.charAt(4)},processMeasurementLabels:function(){}},F={UNKNOWN_VALUE:"unknown",UNKNOWN_RESOLUTION:"0x0"};de.jsonObjectToStringDictionary=function(e){var t={};for(var n in e){var i=e[n];t[n]=null==i?i:e[n]+""}return t},de.getKeys=function(e,t){var n,i=[];for(n in e)t&&!t.test(n)||!e.hasOwnProperty(n)||(i[i.length]=n);return i},de.fixEventTime=function(e){if(e.ns_ts)return parseInt(e.ns_ts);var t=+new Date;return e.ns_ts=t+"",t},de.isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},de.addNewPlaybackInterval=function(e,t,n,i){var r,a={};if(!(t<=n))return de.cloneObject(e);if(a.start=t,a.end=n,0==e.length)return e.push(a),de.cloneObject(e);for(r=0;r<e.length;r++)if(a.start>=e[r].start&&a.end<=e[r].end)return de.cloneObject(e);var o,s=!1;for(o=0;o<e.length;o++)if(o+1===e.length&&a.start>=e[o].start||a.start>=e[o].start&&a.start<e[o+1].start){e.splice(o+1,0,a),s=!0;break}s||e.splice(0,0,a);var l=[e[0]];for(r=1;r<e.length;r++)l[l.length-1].end+i<e[r].start?l.push(e[r]):l[l.length-1].end<e[r].end&&(l[l.length-1].end=e[r].end);return de.cloneObject(l)};var t,n,e,r,a,o,N=(n=["play","pause","pause-on-buffering","end","buffer","buffer-stop","keep-alive","hb","custom","load","start","skstart","adskip","cta","error","trans","drmfa","drmap","drmde","bitrt","playrt","volume","window","audio","video","subs","cdn"],{PLAY:0,PAUSE:1,PAUSE_ON_BUFFERING:2,END:3,BUFFER:4,BUFFER_STOP:5,KEEPALIVE:6,HEARTBEAT:7,CUSTOM:8,LOAD:9,ENGAGE:10,SEEK_START:11,AD_SKIP:12,CTA:13,ERROR:14,TRANSFER:15,DRM_FAILED:16,DRM_APPROVED:17,DRM_DENIED:18,BIT_RATE:19,PLAYBACK_RATE:20,VOLUME:21,WINDOW_STATE:22,AUDIO:23,VIDEO:24,SUBS:25,CDN:26,toString:function(e){return n[e]}}),B={IDLE:0,PLAYBACK_NOT_STARTED:1,PLAYING:2,PAUSED:3,BUFFERING_BEFORE_PLAYBACK:4,BUFFERING_DURING_PLAYBACK:5,BUFFERING_DURING_SEEKING:6,BUFFERING_DURING_PAUSE:7,SEEKING_BEFORE_PLAYBACK:8,SEEKING_DURING_PLAYBACK:9,SEEKING_DURING_BUFFERING:10,SEEKING_DURING_PAUSE:11,PAUSED_DURING_BUFFERING:12},M=(t=["c","s","r"],{SINGLE_CLIP:0,SEGMENTED:1,REDUCED:2,toString:function(e){return t[e]}}),L="5.2.0.160629",R="5.3",x="js_api",s=[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],l=12e5,U=500,V="name",j=2048,q=4096,H=500,K=500,p=["ns_st_ci","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_li","ns_st_ad","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pu","c3","c4","c6"],Y=["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_alias","ca_ns_alias","cb_ns_alias","cc_ns_alias","cd_ns_alias","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_ap_smv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","cs_partner","cs_xcid","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_smv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sc","ns_st_psq","ns_st_asq","ns_st_sq","ns_st_ppc","ns_st_apc","ns_st_spc","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_sl","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_ad","ns_st_li","ns_st_ci","ns_st_si","ns_st_pt","ns_st_dpt","ns_st_ipt","ns_st_et","ns_st_det","ns_st_upc","ns_st_dupc","ns_st_iupc","ns_st_upa","ns_st_dupa","ns_st_iupa","ns_st_lpc","ns_st_dlpc","ns_st_lpa","ns_st_dlpa","ns_st_pa","ns_ap_jb","ns_ap_et","ns_ap_res","ns_ap_sd","ns_ap_po","ns_ap_ot","ns_ap_c12m","cs_c12u","ca_cs_c12u","cb_cs_c12u","cc_cs_c12u","cd_cs_c12u","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_ap_cfg","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_dbc","ns_st_bt","ns_st_dbt","ns_st_bp","ns_st_lt","ns_st_skc","ns_st_dskc","ns_st_ska","ns_st_dska","ns_st_skd","ns_st_skt","ns_st_dskt","ns_st_pc","ns_st_dpc","ns_st_pp","ns_st_br","ns_st_pbr","ns_st_rt","ns_st_prt","ns_st_ub","ns_st_vo","ns_st_pvo","ns_st_ws","ns_st_pws","ns_st_ki","ns_st_rp","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pl","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_sr","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_stc","ns_st_ce","ns_st_ia","ns_st_dt","ns_st_ddt","ns_st_tdt","ns_st_tm","ns_st_dtm","ns_st_ttm","ns_st_de","ns_st_pu","ns_st_ti","ns_st_cu","ns_st_fee","ns_st_ft","ns_st_at","ns_st_pat","ns_st_vt","ns_st_pvt","ns_st_tt","ns_st_ptt","ns_st_cdn","ns_st_pcdn","ns_st_ami","ns_st_amt","ns_st_ams","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","ns_ap_referrer","ns_clid","ns_campaign","ns_source","ns_mchannel","ns_linkname","ns_fee","gclid","utm_campaign","utm_source","utm_medium","utm_term","utm_content","ns_ecommerce","ns_ec_sv","ns_client_id","ns_order_id","ns_ec_cur","ns_orderline_id","ns_orderlines","ns_prod_id","ns_qty","ns_prod_price","ns_prod_grp","ns_brand","ns_shop","ns_category","category","ns_c","ns_search_term","ns_search_result","ns_m_exp","ns_m_chs","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9","ns_ap_er","ns_st_amc"],g=(h.resetClip=function(e,t,n){for(var i=e.getLabels(),r={},a=0;n&&a<n.length;++a)i.hasOwnProperty(n[a])&&(r[n[a]]=i[n[a]]);t.setLabels(r),t.setPlaybackIntervalMergeTolerance(e.getPlaybackIntervalMergeTolerance())},h),G=(d.resetPlaylist=function(e,t,n){for(var i=e.getClip(),r=e.getLabels(),a={},o=0;n&&o<n.length;o++)r.hasOwnProperty(n[o])&&(a[n[o]]=r[n[o]]);(t=new d).setLabels(a),g.resetClip(i,t.getClip(),n)},d),W=function(r){var t,a,n=this;de.extend(this,{newEvent:function(e){(function(e){a=de.extend({},e);var t=r.getSSECore().getPixelURL();if(r.getAppCore()){if(r.getSSECore().isProperlyInitialized()){var n=r.getSSECore().getExports().et;if("function"==typeof r.getAppCore().getMeasurementDispatcher)r.getAppCore().getMeasurementDispatcher().send(n.HIDDEN,e,t);else{var i=r.getSSECore().getExports().am.newApplicationMeasurement(r.getAppCore(),n.HIDDEN,e,t);r.getAppCore().getQueue().offer(i)}}}else t&&r.getSSECore().getPlatformAPI().httpGet(r.getSSECore().prepareUrl(t,e))})(e.eventLabels),e.eventType!=N.HEARTBEAT&&n.incrementEventCounter()},getEventCounter:function(){return t},incrementEventCounter:function(){t++},setEventCounter:function(e){t=e},getMeasurementSnapshot:function(){return a}}),t=1},J=function(d){function n(){g++;var e={},t=de.fixEventTime(e);e.ns_st_po=d.getPlaylist().getClip().getPlaybackTimeOffset()+t-d.getPlaylist().getClip().getPlaybackTimestamp()+"",e.ns_st_pa=d.getPlaylist().getPlaybackTime()+t-d.getPlaylist().getPlaybackTimestamp()+"",e.ns_st_pt=d.getPlaylist().getClip().getPlaybackTime()+t-d.getPlaylist().getClip().getPlaybackTimestamp()+"",e.ns_st_dpt=t-d.getPlaylist().getClip().getPlaybackTimestamp()+"",d.getStateMachine().getCurrentState()==B.BUFFERING_DURING_PLAYBACK?(e.ns_st_bp=d.getPlaylist().getBufferingTime()+t-d.getPlaylist().getBufferingTimestamp()+"",e.ns_st_bt=d.getPlaylist().getClip().getBufferingTime()+t-d.getPlaylist().getClip().getBufferingTimestamp()+"",e.ns_st_dbt=t-d.getPlaylist().getClip().getBufferingTimestamp()+""):e.ns_st_dbt=d.getPlaylist().getClip().getBufferingTime()-d.getPlaylist().getClip().getPreviousBufferingTime()+"",e.ns_st_et=d.getPlaylist().getClip().getElapsedTime()+t-d.getPlaylist().getClip().getElapsedTimestamp()+"",e.ns_st_det=t-d.getPlaylist().getClip().getElapsedTimestamp()+"";var n=de.cloneObject(d.getPlaylist().getClip().getClipPlaybackIntervals()),i=de.cloneObject(d.getPlaylist().getClip().getAssetPlaybackIntervals());n=de.addNewPlaybackInterval(n,d.getPlaylist().getClip().getPlaybackStartPosition(),parseInt(e.ns_st_po),d.getPlaylist().getClip().getPlaybackIntervalMergeTolerance()),i=de.addNewPlaybackInterval(i,d.getPlaylist().getClip().getPlaybackStartPosition(),parseInt(e.ns_st_po),d.getPlaylist().getClip().getPlaybackIntervalMergeTolerance());var r,a,o=0;for(r=0;r<n.length;r++)o+=Math.abs(n[r].end-n[r].start);e.ns_st_upc=o+"",e.ns_st_dupc=o-d.getPlaylist().getClip().getUniquePlaybackInterval()+"";var s=0;for(r=0;r<n.length;r++)s<(a=Math.abs(n[r].end-n[r].start))&&(s=a);e.ns_st_lpc=s+"",e.ns_st_dlpc=s-d.getPlaylist().getClip().getLongestPlaybackInterval()+"";var l=0;for(r=0;r<i.length;r++)l+=Math.abs(i[r].end-i[r].start);e.ns_st_upa=l+"",e.ns_st_dupa=l-d.getPlaylist().getClip().getAssetUniquePlaybackInterval()+"";var c=0;for(r=0;r<i.length;r++)c<(a=Math.abs(i[r].end-i[r].start))&&(c=a);e.ns_st_lpa=c+"",e.ns_st_dlpa=c-d.getPlaylist().getClip().getAssetLongestPlaybackInterval()+"",e.ns_st_hc=d.getHeartbeat().getCount()+"";var u=d.getSSECore().createLabels(N.HEARTBEAT,e,t);d.getEventManager().newEvent(u),p=0,f.resume()}function i(){null!=r&&(d.getSSECore().getPlatformAPI().clearTimeout(r),r=null)}var r,p,g,f=this,a=s;de.extend(this,{getCount:function(){return g},setIntervals:function(e){a=e},getInterval:function(e){var t=0;if(null!=a)for(var n=0;n<a.length;n++){var i=a[n],r=i.playingtime;if(!r||e<r){t=i.interval;break}}return t},getIntervals:function(){return a},resume:function(){i();var e=f.getInterval(d.getPlaylist().getClip().getPlaybackTime()+(+new Date-d.getPlaylist().getClip().getPlaybackTimestamp()));if(0<e){var t=0<p?p:e;r=d.getSSECore().getPlatformAPI().setTimeout(n,t)}p=0},pause:function(){i();var e=f.getInterval(d.getPlaylist().getClip().getPlaybackTime()+(+new Date-d.getPlaylist().getClip().getPlaybackTimestamp()));p=e-(d.getPlaylist().getClip().getPlaybackTime()+(+new Date-d.getPlaylist().getClip().getPlaybackTimestamp()))%e}}),g=p=0},z=function(i){function e(){var e={},t=de.fixEventTime(e);e.ns_st_po=i.getPlaylist().getClip().getExpectedPlaybackPosition(t)+"",i.getPlaylist().addPlaybackTime(t),i.getPlaylist().setPlaybackTimestamp(t),i.getPlaylist().getClip().addPlaybackTime(t),i.getPlaylist().getClip().setPlaybackTimestamp(t),i.getStateMachine().getCurrentState()==B.BUFFERING_DURING_PLAYBACK&&(i.getPlaylist().addBufferingTime(t),i.getPlaylist().setBufferingTimestamp(t),i.getPlaylist().getClip().addBufferingTime(t),i.getPlaylist().getClip().setBufferingTimestamp(t)),i.getPlaylist().getClip().addElapsedTime(t),i.getPlaylist().getClip().setElapsedTimestamp(t),i.getPlaylist().getClip().addInterval(parseInt(e.ns_st_po)),i.getPlaylist().getClip().setPlaybackStartPosition(parseInt(e.ns_st_po));var n=i.getSSECore().createLabels(N.KEEPALIVE,e,t);i.getEventManager().newEvent(n),r.resume()}function t(){null!=n&&(i.getSSECore().getPlatformAPI().clearTimeout(n),n=null)}var n,r=this,a=l;de.extend(r,{resume:function(){t(),n=i.getSSECore().getPlatformAPI().setTimeout(e,a)},pause:function(){t()},setInterval:function(e){a=e},getInterval:function(){return a}})},Q=function(e){var i,r,a,o=this;de.extend(o,{eventTypeToState:function(e){if(a==B.IDLE){if(e==N.PLAY)return B.PLAYING;if(e==N.SEEK_START)return B.SEEKING_BEFORE_PLAYBACK;if(e==N.BUFFER)return B.BUFFERING_BEFORE_PLAYBACK}else if(a==B.PLAYBACK_NOT_STARTED){if(e==N.PLAY)return B.PLAYING;if(e==N.SEEK_START)return B.SEEKING_BEFORE_PLAYBACK;if(e==N.BUFFER)return B.BUFFERING_BEFORE_PLAYBACK;if(e==N.END||e==N.AD_SKIP)return B.IDLE}else if(a==B.PLAYING){if(e==N.END||e==N.AD_SKIP)return B.IDLE;if(e==N.BUFFER)return B.BUFFERING_DURING_PLAYBACK;if(e==N.PAUSE)return B.PAUSED;if(e==N.SEEK_START)return B.SEEKING_DURING_PLAYBACK}else if(a==B.PAUSED){if(e==N.END||e==N.AD_SKIP)return B.IDLE;if(e==N.BUFFER)return B.BUFFERING_DURING_PAUSE;if(e==N.PLAY)return B.PLAYING;if(e==N.SEEK_START)return B.SEEKING_DURING_PAUSE}else if(a==B.BUFFERING_BEFORE_PLAYBACK){if(e==N.END||e==N.AD_SKIP)return B.IDLE;if(e==N.PAUSE||e==N.BUFFER_STOP)return B.PLAYBACK_NOT_STARTED;if(e==N.PLAY)return B.PLAYING;if(e==N.SEEK_START)return B.SEEKING_BEFORE_PLAYBACK}else if(a==B.BUFFERING_DURING_PLAYBACK){if(e==N.END||e==N.AD_SKIP)return B.IDLE;if(e==N.PLAY||e==N.BUFFER_STOP)return B.PLAYING;if(e==N.PAUSE_ON_BUFFERING)return B.PAUSED_DURING_BUFFERING;if(e==N.SEEK_START)return B.SEEKING_DURING_BUFFERING;if(e==N.PAUSE)return B.PAUSED}else if(a==B.BUFFERING_DURING_SEEKING){if(e==N.END||e==N.AD_SKIP)return B.IDLE;if(e==N.PLAY)return B.PLAYING;if(e==N.BUFFER_STOP)return B.SEEKING_DURING_PLAYBACK;if(e==N.PAUSE)return B.PAUSED}else if(a==B.BUFFERING_DURING_PAUSE){if(e==N.END||e==N.AD_SKIP)return B.IDLE;if(e==N.PLAY)return B.PLAYING;if(e==N.SEEK_START)return B.SEEKING_DURING_PAUSE;if(e==N.BUFFER_STOP||e==N.PAUSE)return B.PAUSED}else if(a==B.SEEKING_BEFORE_PLAYBACK){if(e==N.END||e==N.AD_SKIP)return B.IDLE;if(e==N.PAUSE)return B.PLAYBACK_NOT_STARTED;if(e==N.PLAY)return B.PLAYING;if(e==N.BUFFER)return B.BUFFERING_BEFORE_PLAYBACK}else if(a==B.SEEKING_DURING_PLAYBACK){if(e==N.END||e==N.AD_SKIP)return B.IDLE;if(e==N.PLAY)return B.PLAYING;if(e==N.PAUSE)return B.PAUSED;if(e==N.BUFFER)return B.BUFFERING_DURING_SEEKING}else if(a==B.SEEKING_DURING_BUFFERING){if(e==N.END||e==N.AD_SKIP)return B.IDLE;if(e==N.PLAY)return B.PLAYING;if(e==N.PAUSE||e==N.BUFFER_STOP)return B.PAUSED}else if(a==B.SEEKING_DURING_PAUSE){if(e==N.END||e==N.AD_SKIP)return B.IDLE;if(e==N.PLAY)return B.PLAYING;if(e==N.PAUSE||e==N.BUFFER_STOP)return B.PAUSED;if(e==N.BUFFER)return B.BUFFERING_DURING_PAUSE}else if(a==B.PAUSED_DURING_BUFFERING){if(e==N.END||e==N.AD_SKIP)return B.IDLE;if(e==N.SEEK_START)return B.SEEKING_DURING_BUFFERING;if(e==N.PAUSE)return B.PAUSED;if(e==N.PLAY||e==N.BUFFER_STOP)return B.PLAYING}return null},getCurrentState:function(){return a},newEvent:function(e,t){var n=o.eventTypeToState(e);a!=n&&(r=a,a=n,i=t)},getPreviousState:function(){return r},getLastStateChangeTimestamp:function(){return i}}),a=B.IDLE,r=null,i=NaN},X=function(r){de.extend(this,{onSeekStartWhenPausedOrBufferingDuringPause:function(e,t){var n=parseInt(t.ns_st_po);r.getPlaylist().getClip().isSeeking()?r.getPlaylist().getClip().isCollectingSeekingTime()||(r.getPlaylist().getClip().setSeekingTimestamp(e),r.getPlaylist().getClip().setCollectingSeekingTime(!0)):r.getPlaylist().getClip().incrementSeeks(),r.getPlaylist().getClip().isSeeking()||(r.getPlaylist().getClip().setSeeking(!0),r.getPlaylist().getClip().setCollectingSeekingTime(!0),r.getPlaylist().getClip().setSeekStartPosition(n),r.getPlaylist().getClip().setSeekingTimestamp(e))},onBufferWhenSeekingOrPlayBackNotStartedOrPaused:function(e,t){r.getPlaylist().setBufferingTimestamp(e),r.getPlaylist().getClip().setBufferingTimestamp(e)},onPlayWhenSeekingDuringBufferingOrSeekingDuringPause:function(e,t){var n=parseInt(t.ns_st_po);r.getPlaylist().incrementPlaySequenceCounter(),r.getPlaylist().getClip().incrementPlaySequenceCounter(),r.getPlaylist().getClip().isSeeking()&&(r.getPlaylist().getClip().isCollectingSeekingTime()&&(r.getPlaylist().getClip().addSeekingTime(e),r.getPlaylist().getClip().setCollectingSeekingTime(!1)),r.getPlaylist().getClip().addSeekingAmount(n),r.getPlaylist().getClip().setSeeking(!1)),r.getPlaylist().getClip().incrementPlayCounter(),r.getPlaylist().setPlaybackTimestamp(e),r.getPlaylist().getClip().setPlaybackTimestamp(e),r.getPlaylist().getClip().addElapsedTime(e),r.getPlaylist().getClip().setElapsedTimestamp(e),r.getPlaylist().getClip().setPlaybackStartPosition(n),r.getHeartbeat().resume(),r.getKeepAlive().resume();var i=r.getSSECore().createLabels(N.PLAY,t,e);r.getEventManager().newEvent(i)},onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause:function(e,t){r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().addBufferingTime(e)},onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause:function(e,t){r.getPlaylist().getClip().isSeeking()&&r.getPlaylist().getClip().isCollectingSeekingTime()&&(r.getPlaylist().getClip().addSeekingTime(e),r.getPlaylist().getClip().setCollectingSeekingTime(!1))},onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause:function(e,t){r.getSSECore().resetHeartbeat(),r.getSSECore().resetKeepAlive(),r.getPlaylist().getClip().addElapsedTime(e);var n=r.getSSECore().createLabels(N.END,t,e);r.getEventManager().newEvent(n),r.getPlaylist().getClip().isSeeking()&&r.getPlaylist().getClip().isCollectingSeekingTime()&&(r.getPlaylist().getClip().setSeekingTimeBeforeEnd(e-r.getPlaylist().getClip().getSeekingTimestamp()),r.getPlaylist().getClip().setCollectingSeekingTime(!1)),r.getPlaylist().storeClipPlaybackCounters(),r.getPlaylist().getClip().resetClipLifecycleLabels(),r.getPlaylist().getClip().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&de.parseBoolean(t.ns_st_pe,!1)&&r.getSSECore().resetPlaylist()},onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause:function(e,t){r.getPlaylist().getClip().isSeeking()&&r.getPlaylist().getClip().isCollectingSeekingTime()&&(r.getPlaylist().getClip().addSeekingTime(e),r.getPlaylist().getClip().setCollectingSeekingTime(!1))}})},$=function(r){de.extend(this,{onEndOrAdSkip:function(e,t){r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().addBufferingTime(e),r.getPlaylist().getClip().isSeeking()&&r.getPlaylist().getClip().isCollectingSeekingTime()&&r.getPlaylist().getClip().setSeekingTimeBeforeEnd(e-r.getPlaylist().getClip().getSeekingTimestamp()),r.getPlaylist().getClip().resetClipLifecycleLabels(),r.getPlaylist().getClip().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&de.parseBoolean(t.ns_st_pe,!1)&&r.getSSECore().resetPlaylist()},onBufferStop:function(e,t){r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().addBufferingTime(e),r.getPlaylist().getClip().isSeeking()&&r.getPlaylist().getClip().isCollectingSeekingTime()&&(r.getPlaylist().getClip().addSeekingTime(e),r.getPlaylist().getClip().setCollectingSeekingTime(!1))},onSeekStart:function(e,t){var n=parseInt(t.ns_st_po);r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().addBufferingTime(e),r.getPlaylist().getClip().isSeeking()?r.getPlaylist().getClip().isCollectingSeekingTime()||(r.getPlaylist().getClip().setSeekingTimestamp(e),r.getPlaylist().getClip().setCollectingSeekingTime(!0)):r.getPlaylist().getClip().incrementSeeks(),r.getPlaylist().getClip().isSeeking()||(r.getPlaylist().getClip().setSeeking(!0),r.getPlaylist().getClip().setCollectingSeekingTime(!0),r.getPlaylist().getClip().setSeekStartPosition(n),r.getPlaylist().getClip().setSeekingTimestamp(e))},onPause:function(e,t){r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().addBufferingTime(e),r.getPlaylist().getClip().isSeeking()&&r.getPlaylist().getClip().isCollectingSeekingTime()&&(r.getPlaylist().getClip().addSeekingTime(e),r.getPlaylist().getClip().setCollectingSeekingTime(!1))},onPlay:function(e,t){var n=parseInt(t.ns_st_po);r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().addBufferingTime(e),r.getPlaylist().getClip().isSeeking()&&(r.getPlaylist().getClip().isCollectingSeekingTime()&&(r.getPlaylist().getClip().addSeekingTime(e),r.getPlaylist().getClip().setCollectingSeekingTime(!1)),r.getPlaylist().getClip().addSeekingAmount(n),r.getPlaylist().getClip().setSeeking(!1)),r.getPlaylist().isPlaylistStarted()||(r.getPlaylist().setPlaylistStarted(!0),r.getPlaylist().incrementPlaybackCounter()),r.getPlaylist().incrementPlaySequenceCounter(),r.getPlaylist().getClip().setClipStarted(!0),r.getPlaylist().getClip().setPlaybackStarted(!0),r.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==r.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(r.getPlaylist().getClip().getLabels().ns_st_pn)<=r.getPlaylist().getClip().getLowestPartNumberPlayed())&&(r.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(r.getPlaylist().getClip().getLabels().ns_st_pn)),r.getPlaylist().getClip().incrementAssetPlaybackCounter(),r.getPlaylist().getClip().setPlaySequenceCounter(0),r.getPlaylist().getClip().resetAssetPlaybackCounters()),r.getPlaylist().getClip().incrementPlaySequenceCounter(),r.getPlaylist().getClip().incrementPlayCounter(),r.getPlaylist().setPlaybackTimestamp(e),r.getPlaylist().getClip().setPlaybackTimestamp(e),r.getPlaylist().getClip().setElapsedTimestamp(e),r.getPlaylist().getClip().setPlaybackStartPosition(n),r.getSSECore().isLoadingTimeSent()||(t.ns_st_lt=r.getSSECore().getLoadTimeOffset()+e-r.getSSECore().getInitTimestamp()+"",r.getSSECore().setLoadingTimeSent(!0)),r.getHeartbeat().resume(),r.getKeepAlive().resume();var i=r.getSSECore().createLabels(N.PLAY,t,e);r.getEventManager().newEvent(i)}})},Z=function(r){de.extend(this,{onEndAndSkip:function(e,t){r.getSSECore().resetHeartbeat(),r.getSSECore().resetKeepAlive(),r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().addBufferingTime(e),r.getPlaylist().getClip().addElapsedTime(e);var n=r.getSSECore().createLabels(N.END,t,e);r.getEventManager().newEvent(n),r.getPlaylist().getClip().isSeeking()&&r.getPlaylist().getClip().isCollectingSeekingTime()&&(r.getPlaylist().getClip().setSeekingTimeBeforeEnd(e-r.getPlaylist().getClip().getSeekingTimestamp()),r.getPlaylist().getClip().setCollectingSeekingTime(!1)),r.getPlaylist().storeClipPlaybackCounters(),r.getPlaylist().getClip().resetClipLifecycleLabels(),r.getPlaylist().getClip().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&de.parseBoolean(t.ns_st_pe,!1)&&r.getSSECore().resetPlaylist()},onPause:function(e,t){r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().addBufferingTime(e)},onPlay:function(e,t){var n=parseInt(t.ns_st_po);r.getPlaylist().incrementPlaySequenceCounter(),r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().incrementPlaySequenceCounter(),r.getPlaylist().getClip().addBufferingTime(e),r.getPlaylist().getClip().isSeeking()&&(r.getPlaylist().getClip().isCollectingSeekingTime()&&(r.getPlaylist().getClip().addSeekingTime(e),r.getPlaylist().getClip().setCollectingSeekingTime(!1)),r.getPlaylist().getClip().addSeekingAmount(n),r.getPlaylist().getClip().setSeeking(!1)),r.getPlaylist().getClip().incrementPlayCounter(),r.getPlaylist().setPlaybackTimestamp(e),r.getPlaylist().getClip().setPlaybackTimestamp(e),r.getPlaylist().getClip().addElapsedTime(e),r.getPlaylist().getClip().setElapsedTimestamp(e),r.getPlaylist().getClip().setPlaybackStartPosition(n),r.getHeartbeat().resume(),r.getKeepAlive().resume();var i=r.getSSECore().createLabels(N.PLAY,t,e);r.getEventManager().newEvent(i)}})},ee=function(r){de.extend(this,{onPauseOnBuffering:function(e,t){var n=parseInt(t.ns_st_po);r.getSSECore().stopPausedOnBufferingTimer(),r.getHeartbeat().pause(),r.getSSECore().resetKeepAlive(),r.getPlaylist().addPlaybackTime(e),r.getPlaylist().getClip().addPlaybackTime(e),r.getPlaylist().getClip().addElapsedTime(e),r.getPlaylist().getClip().setElapsedTimestamp(e),r.getPlaylist().getClip().addInterval(n),r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().addBufferingTime(e),r.getPlaylist().incrementPauses(),r.getPlaylist().getClip().incrementPauses();var i=r.getSSECore().createLabels(N.PAUSE,t,e);r.getEventManager().newEvent(i),r.getPlaylist().setBufferingTimestamp(e),r.getPlaylist().getClip().setBufferingTimestamp(e),r.getPlaylist().getClip().setPlaybackTimeOffset(n)},onBufferStop:function(e,t){r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().addBufferingTime(e)},onEndOrAdSkip:function(e,t){var n=parseInt(t.ns_st_po);r.getSSECore().resetHeartbeat(),r.getSSECore().resetKeepAlive(),r.getSSECore().stopPausedOnBufferingTimer(),r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().addBufferingTime(e),r.getPlaylist().getClip().addPlaybackTime(e),r.getPlaylist().getClip().addElapsedTime(e),r.getPlaylist().getClip().addInterval(n);var i=r.getSSECore().createLabels(N.END,t,e);r.getEventManager().newEvent(i),r.getPlaylist().getClip().resetClipLifecycleLabels(),r.getPlaylist().getClip().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&de.parseBoolean(t.ns_st_pe,!1)&&r.getSSECore().resetPlaylist()},onSeekStart:function(e,t){var n=parseInt(t.ns_st_po);r.getHeartbeat().pause(),r.getSSECore().resetKeepAlive(),r.getSSECore().stopPausedOnBufferingTimer(),r.getPlaylist().addPlaybackTime(e),r.getPlaylist().getClip().addPlaybackTime(e),r.getPlaylist().getClip().addElapsedTime(e),r.getPlaylist().getClip().setElapsedTimestamp(e),r.getPlaylist().getClip().addInterval(n),r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().addBufferingTime(e),r.getPlaylist().getClip().incrementSeeks(),r.getPlaylist().getClip().setSeeking(!0),r.getPlaylist().getClip().setCollectingSeekingTime(!0),r.getPlaylist().getClip().setSeekStartPosition(n),r.getPlaylist().getClip().setSeekingTimestamp(e),r.getPlaylist().incrementPauses(),r.getPlaylist().getClip().incrementPauses();var i=r.getSSECore().createLabels(N.PAUSE,t,e);r.getEventManager().newEvent(i)},onPause:function(e,t){var n=parseInt(t.ns_st_po);r.getSSECore().stopPausedOnBufferingTimer(),r.getPlaylist().addPlaybackTime(e),r.getPlaylist().getClip().addPlaybackTime(e),r.getPlaylist().getClip().addElapsedTime(e),r.getPlaylist().getClip().setElapsedTimestamp(e),r.getPlaylist().getClip().addInterval(n),r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().addBufferingTime(e),r.getPlaylist().incrementPauses(),r.getPlaylist().getClip().incrementPauses();var i=r.getSSECore().createLabels(N.PAUSE,t,e);r.getEventManager().newEvent(i)},onPlay:function(e,t){r.getSSECore().stopPausedOnBufferingTimer(),r.getPlaylist().incrementPlaySequenceCounter(),r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().incrementPlaySequenceCounter(),r.getPlaylist().getClip().addBufferingTime(e)}})},te=function(r){de.extend(this,{onEndOrAdSkip:function(e,t){r.getSSECore().resetHeartbeat(),r.getSSECore().resetKeepAlive(),r.getSSECore().stopPausedOnBufferingTimer(),r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().addBufferingTime(e),r.getPlaylist().getClip().addElapsedTime(e);var n=r.getSSECore().createLabels(N.END,t,e);r.getEventManager().newEvent(n),r.getPlaylist().getClip().isSeeking()&&r.getPlaylist().getClip().isCollectingSeekingTime()&&(r.getPlaylist().getClip().setSeekingTimeBeforeEnd(e-r.getPlaylist().getClip().getSeekingTimestamp()),r.getPlaylist().getClip().setCollectingSeekingTime(!1)),r.getPlaylist().storeClipPlaybackCounters(),r.getPlaylist().getClip().resetClipLifecycleLabels(),r.getPlaylist().getClip().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&de.parseBoolean(t.ns_st_pe,!1)&&r.getSSECore().resetPlaylist()},onPause:function(e,t){r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().addBufferingTime(e),r.getPlaylist().incrementPauses(),r.getPlaylist().getClip().incrementPauses(),r.getPlaylist().getClip().isSeeking()&&r.getPlaylist().getClip().isCollectingSeekingTime()&&(r.getPlaylist().getClip().addSeekingTime(e),r.getPlaylist().getClip().setCollectingSeekingTime(!1))},onPlay:function(e,t){var n=parseInt(t.ns_st_po);r.getPlaylist().addBufferingTime(e),r.getPlaylist().incrementPlaySequenceCounter(),r.getPlaylist().getClip().incrementPlaySequenceCounter(),r.getPlaylist().getClip().addBufferingTime(e),r.getPlaylist().getClip().isSeeking()&&(r.getPlaylist().getClip().isCollectingSeekingTime()&&(r.getPlaylist().getClip().addSeekingTime(e),r.getPlaylist().getClip().setCollectingSeekingTime(!1)),r.getPlaylist().getClip().addSeekingAmount(n),r.getPlaylist().getClip().setSeeking(!1)),r.getPlaylist().getClip().incrementPlayCounter(),r.getPlaylist().setPlaybackTimestamp(e),r.getPlaylist().getClip().setPlaybackTimestamp(e),r.getPlaylist().getClip().addElapsedTime(e),r.getPlaylist().getClip().setElapsedTimestamp(e),r.getPlaylist().getClip().setPlaybackStartPosition(n),r.getHeartbeat().resume(),r.getKeepAlive().resume();var i=r.getSSECore().createLabels(N.PLAY,t,e);r.getEventManager().newEvent(i)}})},ne=function(r){de.extend(this,{onBuffer:function(e,t){r.getPlaylist().getClip().setSeekingTime(r.getPlaylist().getClip().getSeekingTimeBeforeEnd()),r.getPlaylist().setBufferingTimestamp(e),r.getPlaylist().getClip().setBufferingTimestamp(e)},onSeekStart:function(e,t){var n=parseInt(t.ns_st_po);r.getPlaylist().getClip().setSeekingTime(r.getPlaylist().getClip().getSeekingTimeBeforeEnd()),r.getPlaylist().getClip().incrementSeeks(),r.getPlaylist().getClip().setSeeking(!0),r.getPlaylist().getClip().setCollectingSeekingTime(!0),r.getPlaylist().getClip().setSeekStartPosition(n),r.getPlaylist().getClip().setSeekingTimestamp(e)},onPlay:function(e,t){var n=parseInt(t.ns_st_po);r.getPlaylist().getClip().setSeekingTime(r.getPlaylist().getClip().getSeekingTimeBeforeEnd()),r.getPlaylist().getClip().isSeeking()&&(r.getPlaylist().getClip().addSeekingAmount(n),r.getPlaylist().getClip().setSeeking(!1)),r.getPlaylist().isPlaylistStarted()||(r.getPlaylist().setPlaylistStarted(!0),r.getPlaylist().incrementPlaybackCounter()),r.getPlaylist().incrementPlaySequenceCounter(),r.getPlaylist().getClip().setClipStarted(!0),r.getPlaylist().getClip().setPlaybackStarted(!0),r.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==r.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(r.getPlaylist().getClip().getLabel("ns_st_pn"))<=r.getPlaylist().getClip().getLowestPartNumberPlayed())&&(r.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(r.getPlaylist().getClip().getLabel("ns_st_pn"))),r.getPlaylist().getClip().incrementAssetPlaybackCounter(),r.getPlaylist().getClip().setPlaySequenceCounter(0),r.getPlaylist().getClip().resetAssetPlaybackCounters()),r.getPlaylist().getClip().incrementPlaySequenceCounter(),r.getPlaylist().getClip().incrementPlayCounter(),r.getPlaylist().setPlaybackTimestamp(e),r.getPlaylist().getClip().setPlaybackTimestamp(e),r.getPlaylist().getClip().setElapsedTimestamp(e),r.getPlaylist().getClip().setPlaybackStartPosition(n),r.getSSECore().isLoadingTimeSent()||(t.ns_st_lt=r.getSSECore().getLoadTimeOffset()+e-r.getSSECore().getInitTimestamp()+"",r.getSSECore().setLoadingTimeSent(!0)),r.getHeartbeat().resume(),r.getKeepAlive().resume();var i=r.getSSECore().createLabels(N.PLAY,t,e);r.getEventManager().newEvent(i)}})},ie=function(r){de.extend(this,{onEndOrAdSkip:function(e,t){r.getSSECore().resetHeartbeat(),r.getSSECore().resetKeepAlive(),r.getPlaylist().getClip().addElapsedTime(e);var n=r.getSSECore().createLabels(N.END,t,e);r.getEventManager().newEvent(n),r.getPlaylist().getClip().isSeeking()&&r.getPlaylist().getClip().isCollectingSeekingTime()&&(r.getPlaylist().getClip().setSeekingTimeBeforeEnd(e-r.getPlaylist().getClip().getSeekingTimestamp()),r.getPlaylist().getClip().setSeeking(!1)),r.getPlaylist().storeClipPlaybackCounters(),r.getPlaylist().getClip().resetClipLifecycleLabels(),r.getPlaylist().getClip().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&de.parseBoolean(t.ns_st_pe,!1)&&r.getSSECore().resetPlaylist()},onPlay:function(e,t){var n=parseInt(t.ns_st_po);r.getPlaylist().incrementPlaySequenceCounter(),r.getPlaylist().getClip().isSeeking()&&(r.getPlaylist().getClip().isCollectingSeekingTime()&&(r.getPlaylist().getClip().addSeekingTime(e),r.getPlaylist().getClip().setCollectingSeekingTime(!1)),r.getPlaylist().getClip().addSeekingAmount(n),r.getPlaylist().getClip().setSeeking(!1)),r.getPlaylist().getClip().incrementPlayCounter(),r.getPlaylist().getClip().incrementPlaySequenceCounter(),r.getPlaylist().setPlaybackTimestamp(e),r.getPlaylist().getClip().setPlaybackTimestamp(e),r.getPlaylist().getClip().addElapsedTime(e),r.getPlaylist().getClip().setElapsedTimestamp(e),r.getPlaylist().getClip().setPlaybackStartPosition(n),r.getHeartbeat().resume(),r.getKeepAlive().resume();var i=r.getSSECore().createLabels(N.PLAY,t,e);r.getEventManager().newEvent(i)}})},re=function(r){de.extend(this,{onEndOrAdSkip:function(e,t){r.getSSECore().resetHeartbeat(),r.getSSECore().resetKeepAlive(),r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().addBufferingTime(e),r.getPlaylist().getClip().addElapsedTime(e);var n=r.getSSECore().createLabels(N.END,t,e);r.getEventManager().newEvent(n),r.getPlaylist().getClip().isSeeking()&&r.getPlaylist().getClip().isCollectingSeekingTime()&&(r.getPlaylist().getClip().setSeekingTimeBeforeEnd(e-r.getPlaylist().getClip().getSeekingTimestamp()),r.getPlaylist().getClip().setCollectingSeekingTime(!1)),r.getPlaylist().storeClipPlaybackCounters(),r.getPlaylist().getClip().resetClipLifecycleLabels(),r.getPlaylist().getClip().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&de.parseBoolean(t.ns_st_pe,!1)&&r.getSSECore().resetPlaylist()},onBufferStop:function(e,t){var n=parseInt(t.ns_st_po);r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().addBufferingTime(e),r.getPlaylist().setPlaybackTimestamp(e),r.getPlaylist().getClip().setPlaybackTimestamp(e),r.getPlaylist().getClip().addElapsedTime(e),r.getPlaylist().getClip().setElapsedTimestamp(e),r.getPlaylist().getClip().setPlaybackStartPosition(n),r.getHeartbeat().resume(),r.getKeepAlive().resume();var i=r.getSSECore().createLabels(N.PLAY,t,e);r.getEventManager().newEvent(i)},onSeekStart:function(e,t){var n=parseInt(t.ns_st_po);r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().addBufferingTime(e),r.getPlaylist().getClip().isSeeking()?r.getPlaylist().getClip().isCollectingSeekingTime()||(r.getPlaylist().getClip().setSeekingTimestamp(e),r.getPlaylist().getClip().setCollectingSeekingTime(!0)):r.getPlaylist().getClip().incrementSeeks(),r.getPlaylist().getClip().isSeeking()||(r.getPlaylist().getClip().setSeeking(!0),r.getPlaylist().getClip().setCollectingSeekingTime(!0),r.getPlaylist().getClip().setSeekStartPosition(n),r.getPlaylist().getClip().setSeekingTimestamp(e))},onPause:function(e,t){r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().addBufferingTime(e),r.getPlaylist().incrementPauses(),r.getPlaylist().getClip().incrementPauses()},onPlay:function(e,t){var n=parseInt(t.ns_st_po);r.getPlaylist().incrementPlaySequenceCounter(),r.getPlaylist().getClip().incrementPlaySequenceCounter(),r.getPlaylist().addBufferingTime(e),r.getPlaylist().getClip().addBufferingTime(e),r.getPlaylist().getClip().incrementPlayCounter(),r.getPlaylist().setPlaybackTimestamp(e),r.getPlaylist().getClip().setPlaybackTimestamp(e),r.getPlaylist().getClip().addElapsedTime(e),r.getPlaylist().getClip().setElapsedTimestamp(e),r.getPlaylist().getClip().setPlaybackStartPosition(n),r.getHeartbeat().resume(),r.getKeepAlive().resume();var i=r.getSSECore().createLabels(N.PLAY,t,e);r.getEventManager().newEvent(i)}})},ae=function(r){de.extend(this,{onEndOrAdSkip:function(e,t){r.getPlaylist().getClip().isSeeking()&&r.getPlaylist().getClip().isCollectingSeekingTime()&&(r.getPlaylist().getClip().setSeekingTimeBeforeEnd(e-r.getPlaylist().getClip().getSeekingTimestamp()),r.getPlaylist().getClip().setCollectingSeekingTime(!1)),r.getPlaylist().storeClipPlaybackCounters(),r.getPlaylist().getClip().resetClipLifecycleLabels(),r.getPlaylist().getClip().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&de.parseBoolean(t.ns_st_pe,!1)&&r.getSSECore().resetPlaylist()},onSeekStart:function(e,t){var n=parseInt(t.ns_st_po);r.getPlaylist().getClip().isSeeking()?r.getPlaylist().getClip().setSeekingTimestamp(e):r.getPlaylist().getClip().incrementSeeks(),r.getPlaylist().getClip().isSeeking()||(r.getPlaylist().getClip().setSeeking(!0),r.getPlaylist().getClip().setCollectingSeekingTime(!0),r.getPlaylist().getClip().setSeekStartPosition(n),r.getPlaylist().getClip().setSeekingTimestamp(e))},onPlay:function(e,t){var n=parseInt(t.ns_st_po);r.getPlaylist().getClip().isSeeking()&&(r.getPlaylist().getClip().addSeekingAmount(n),r.getPlaylist().getClip().setSeeking(!1)),r.getPlaylist().isPlaylistStarted()||(r.getPlaylist().setPlaylistStarted(!0),r.getPlaylist().incrementPlaybackCounter()),r.getPlaylist().incrementPlaySequenceCounter(),r.getPlaylist().getClip().setClipStarted(!0),r.getPlaylist().getClip().setPlaybackStarted(!0),r.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==r.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(r.getPlaylist().getClip().getLabels().ns_st_pn)<=r.getPlaylist().getClip().getLowestPartNumberPlayed())&&(r.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(r.getPlaylist().getClip().getLabels().ns_st_pn)),r.getPlaylist().getClip().incrementAssetPlaybackCounter(),r.getPlaylist().getClip().setPlaySequenceCounter(0),r.getPlaylist().getClip().resetAssetPlaybackCounters()),r.getPlaylist().getClip().incrementPlaySequenceCounter(),r.getPlaylist().getClip().incrementPlayCounter(),r.getPlaylist().setPlaybackTimestamp(e),r.getPlaylist().getClip().setPlaybackTimestamp(e),r.getPlaylist().getClip().setElapsedTimestamp(e),r.getPlaylist().getClip().setPlaybackStartPosition(n),r.getSSECore().isLoadingTimeSent()||(t.ns_st_lt=r.getSSECore().getLoadTimeOffset()+e-r.getSSECore().getInitTimestamp()+"",r.getSSECore().setLoadingTimeSent(!0)),r.getHeartbeat().resume(),r.getKeepAlive().resume();var i=r.getSSECore().createLabels(N.PLAY,t,e);r.getEventManager().newEvent(i)}})},oe=function(r){de.extend(this,{onEndOrAdSkip:function(e,t){var n=parseInt(t.ns_st_po);r.getSSECore().resetHeartbeat(),r.getSSECore().resetKeepAlive(),r.getPlaylist().addPlaybackTime(e),r.getPlaylist().getClip().addPlaybackTime(e),r.getPlaylist().getClip().addElapsedTime(e),r.getPlaylist().getClip().addInterval(n);var i=r.getSSECore().createLabels(N.END,t,e);r.getEventManager().newEvent(i),r.getPlaylist().getClip().resetClipLifecycleLabels(),r.getPlaylist().getClip().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&de.parseBoolean(t.ns_st_pe,!1)&&r.getSSECore().resetPlaylist()},onBuffer:function(e,t){r.getSSECore().isPauseOnBufferingEnabled()&&r.getSSECore().startPausedOnBufferingTimer(e,t),r.getPlaylist().getClip().incrementBufferCount(),r.getPlaylist().setBufferingTimestamp(e),r.getPlaylist().getClip().setBufferingTimestamp(e)},onSeekStart:function(e,t){var n=parseInt(t.ns_st_po);r.getHeartbeat().pause(),r.getSSECore().resetKeepAlive(),r.getPlaylist().addPlaybackTime(e),r.getPlaylist().getClip().addPlaybackTime(e),r.getPlaylist().getClip().addElapsedTime(e),r.getPlaylist().getClip().setElapsedTimestamp(e),r.getPlaylist().getClip().addInterval(n),r.getPlaylist().getClip().incrementSeeks(),r.getPlaylist().getClip().setSeeking(!0),r.getPlaylist().getClip().setCollectingSeekingTime(!0),r.getPlaylist().getClip().setSeekStartPosition(n),r.getPlaylist().getClip().setSeekingTimestamp(e),r.getPlaylist().incrementPauses(),r.getPlaylist().getClip().incrementPauses();var i=r.getSSECore().createLabels(N.PAUSE,t,e);r.getEventManager().newEvent(i)},onPause:function(e,t){var n=parseInt(t.ns_st_po);r.getHeartbeat().pause(),r.getSSECore().resetKeepAlive(),r.getPlaylist().addPlaybackTime(e),r.getPlaylist().getClip().addPlaybackTime(e),r.getPlaylist().getClip().addElapsedTime(e),r.getPlaylist().getClip().setElapsedTimestamp(e),r.getPlaylist().getClip().addInterval(n),r.getPlaylist().incrementPauses(),r.getPlaylist().getClip().incrementPauses();var i=r.getSSECore().createLabels(N.PAUSE,t,e);r.getEventManager().newEvent(i)}})},se=function(r){de.extend(this,{onEndOrAdSkip:function(e,t){r.getPlaylist().getClip().isSeeking()&&r.getPlaylist().getClip().isCollectingSeekingTime()&&(r.getPlaylist().getClip().setSeekingTimeBeforeEnd(e-r.getPlaylist().getClip().getSeekingTimestamp()),r.getPlaylist().getClip().setCollectingSeekingTime(!1)),r.getPlaylist().storeClipPlaybackCounters(),r.getPlaylist().getClip().resetClipLifecycleLabels(),r.getPlaylist().getClip().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&de.parseBoolean(t.ns_st_pe,!1)&&r.getSSECore().resetPlaylist()},onPause:function(e,t){r.getPlaylist().getClip().isSeeking()&&r.getPlaylist().getClip().isCollectingSeekingTime()&&(r.getPlaylist().getClip().addSeekingTime(e),r.getPlaylist().getClip().setCollectingSeekingTime(!1))},onPlay:function(e,t){var n=parseInt(t.ns_st_po);r.getPlaylist().getClip().isSeeking()&&(r.getPlaylist().getClip().isCollectingSeekingTime()&&(r.getPlaylist().getClip().addSeekingTime(e),r.getPlaylist().getClip().setCollectingSeekingTime(!1)),r.getPlaylist().getClip().addSeekingAmount(n),r.getPlaylist().getClip().setSeeking(!1)),r.getPlaylist().isPlaylistStarted()||(r.getPlaylist().setPlaylistStarted(!0),r.getPlaylist().incrementPlaybackCounter()),r.getPlaylist().incrementPlaySequenceCounter(),r.getPlaylist().getClip().setClipStarted(!0),r.getPlaylist().getClip().setPlaybackStarted(!0),r.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==r.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(r.getPlaylist().getClip().getLabels().ns_st_pn)<=r.getPlaylist().getClip().getLowestPartNumberPlayed())&&(r.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(r.getPlaylist().getClip().getLabels().ns_st_pn)),r.getPlaylist().getClip().incrementAssetPlaybackCounter(),r.getPlaylist().getClip().setPlaySequenceCounter(0),r.getPlaylist().getClip().resetAssetPlaybackCounters()),r.getPlaylist().getClip().incrementPlaySequenceCounter(),r.getPlaylist().getClip().incrementPlayCounter(),r.getPlaylist().setPlaybackTimestamp(e),r.getPlaylist().getClip().setPlaybackTimestamp(e),r.getPlaylist().getClip().setElapsedTimestamp(e),r.getPlaylist().getClip().setPlaybackStartPosition(n),r.getSSECore().isLoadingTimeSent()||(t.ns_st_lt=r.getSSECore().getLoadTimeOffset()+e-r.getSSECore().getInitTimestamp()+"",r.getSSECore().setLoadingTimeSent(!0)),r.getHeartbeat().resume(),r.getKeepAlive().resume();var i=r.getSSECore().createLabels(N.PLAY,t,e);r.getEventManager().newEvent(i)}})},le=function(n){de.extend(this,{onPause:function(e,t){n.getPlaylist().incrementPauses(),n.getPlaylist().getClip().incrementPauses(),n.getPlaylist().getClip().isSeeking()&&n.getPlaylist().getClip().isCollectingSeekingTime()&&(n.getPlaylist().getClip().addSeekingTime(e),n.getPlaylist().getClip().setCollectingSeekingTime(!1))}})},ce=function(r){de.extend(this,{onEndOrAdSkip:function(e,t){parseInt(t.ns_st_po),r.getSSECore().resetHeartbeat(),r.getSSECore().resetKeepAlive(),r.getPlaylist().getClip().addElapsedTime(e);var n=r.getSSECore().createLabels(N.END,t,e);r.getEventManager().newEvent(n),r.getPlaylist().getClip().isSeeking()&&r.getPlaylist().getClip().isCollectingSeekingTime()&&(r.getPlaylist().getClip().setSeekingTimeBeforeEnd(e-r.getPlaylist().getClip().getSeekingTimestamp()),r.getPlaylist().getClip().setCollectingSeekingTime(!1)),r.getPlaylist().storeClipPlaybackCounters(),r.getPlaylist().getClip().resetClipLifecycleLabels(),r.getPlaylist().getClip().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&de.parseBoolean(t.ns_st_pe,!1)&&r.getSSECore().resetPlaylist()},onPlay:function(e,t){var n=parseInt(t.ns_st_po);r.getPlaylist().incrementPlaySequenceCounter(),r.getPlaylist().getClip().incrementPlaySequenceCounter(),r.getPlaylist().getClip().isSeeking()&&(r.getPlaylist().getClip().isCollectingSeekingTime()&&(r.getPlaylist().getClip().addSeekingTime(e),r.getPlaylist().getClip().setCollectingSeekingTime(!1)),r.getPlaylist().getClip().addSeekingAmount(n),r.getPlaylist().getClip().setSeeking(!1)),r.getPlaylist().getClip().incrementPlayCounter(),r.getPlaylist().setPlaybackTimestamp(e),r.getPlaylist().getClip().setPlaybackTimestamp(e),r.getPlaylist().getClip().addElapsedTime(e),r.getPlaylist().getClip().setElapsedTimestamp(e),r.getPlaylist().getClip().setPlaybackStartPosition(n),r.getSSECore().isLoadingTimeSent()||(t.ns_st_lt=r.getSSECore().getLoadTimeOffset()+e-r.getSSECore().getInitTimestamp()+"",r.getSSECore().setLoadingTimeSent(!0)),r.getHeartbeat().resume(),r.getKeepAlive().resume();var i=r.getSSECore().createLabels(N.PLAY,t,e);r.getEventManager().newEvent(i)}})},f=function(){function d(e){var t=p.getStateMachine().getCurrentState();if(t==B.IDLE||t==B.PLAYBACK_NOT_STARTED||t==B.BUFFERING_BEFORE_PLAYBACK||t==B.SEEKING_BEFORE_PLAYBACK){if(e==N.PLAY)return!0}else if(t==B.PLAYING){if(e==N.END||e==N.AD_SKIP||e==N.SEEK_START||e==N.PAUSE)return!0}else if(t==B.PAUSED||t==B.BUFFERING_DURING_PAUSE||t==B.SEEKING_DURING_PLAYBACK||t==B.SEEKING_DURING_BUFFERING||t==B.SEEKING_DURING_PAUSE){if(e==N.END||e==N.AD_SKIP||e==N.PLAY)return!0}else if(t==B.BUFFERING_DURING_PLAYBACK){if(e==N.PAUSE_ON_BUFFERING||e==N.END||e==N.AD_SKIP||e==N.SEEK_START||e==N.PAUSE||e==N.PLAY)return!0}else if(t==B.BUFFERING_DURING_SEEKING){if(e==N.END||e==N.AD_SKIP||e==N.PAUSE||e==N.PLAY)return!0}else if(t==B.PAUSED_DURING_BUFFERING&&(e==N.END||e==N.AD_SKIP||e==N.BUFFER_STOP||e==N.PLAY))return!0;return!1}var p,g,f,h,_,m,v,y,C,P,b,S,A,T,t,n,e,i,a,r,E,I,o,s,w,k,D=this,l={},c=U,O=H;de.extend(D,{createLabels:function(e,t,n){var i={};if("undefined"!=typeof document){var r=document;i.c7=r.URL,i.c8=r.title,i.c9=r.referrer}return null!=t&&de.extend(i,t),i.ns_ts=null!=i.ns_ts?i.ns_ts:+new Date+"",i.ns_st_ev=null!=i.ns_st_ev?i.ns_st_ev:N.toString(e),i.ns_st_mp=null!=i.ns_st_mp?i.ns_st_mp:x,i.ns_st_mv=null!=i.ns_st_mv?i.ns_st_mv:L,i.ns_st_ub=null!=i.ns_st_ub?i.ns_st_ub:"0",i.ns_st_br=null!=i.ns_st_br?i.ns_st_br:"0",i.ns_st_pn=null!=i.ns_st_pn?i.ns_st_pn:"1",i.ns_st_tp=null!=i.ns_st_tp?i.ns_st_tp:"1",i.ns_st_it=null!=i.ns_st_it?i.ns_st_it:M.toString(M.SINGLE_CLIP),i.ns_st_sv=null!=i.ns_st_sv?i.ns_st_sv:L,i.ns_st_smv=null!=i.ns_st_smv?i.ns_st_smv:R,i.ns_type=null!=i.ns_type?i.ns_type:"hidden",i.ns_st_ec=null!=i.ns_st_ec?i.ns_st_ec:p.getEventManager().getEventCounter()+"",i.ns_st_po=null!=i.ns_st_po?i.ns_st_po:p.getPlaylist().getPlaylist().getClip().getExpectedPlaybackPosition(n)+"",i.ns_st_ki=null!=i.ns_st_ki?i.ns_st_ki:p.getKeepAlive().getInterval()+"",p.getPlaylist().createLabels(i),p.getPlaylist().getClip().createLabels(i),de.extend(i,D.getLabels()),de.extend(i,t),{eventType:e,eventLabels:i}},newEvent:function(e,t,n,i){D.stopDelayedTransitionTimer();var r,a,o=p.getStateMachine().getCurrentState(),s=p.getStateMachine().eventTypeToState(e);if(null!=s&&s!=o)if(!D.isThrottlingEnabled()||o!=B.PLAYING&&o!=B.PAUSED||s!=B.PLAYING&&s!=B.PAUSED||i){n.ns_st_po||(p.getStateMachine().getCurrentState()==B.PLAYING&&e==N.BUFFER||p.getStateMachine().getCurrentState()==B.BUFFERING_DURING_PLAYBACK&&e==N.BUFFER_STOP?n.ns_st_po=p.getPlaylist().getClip().getPlaybackTimeOffset()+(t-p.getPlaylist().getClip().getPlaybackTimestamp())+"":n.ns_st_po=p.getPlaylist().getClip().getExpectedPlaybackPosition(t)+""),function(e,t,n){var i=p.getStateMachine().getCurrentState();e==N.AD_SKIP&&!n.hasOwnProperty("ns_st_ui")&&d(e)?n.ns_st_ui="skip":e==N.SEEK_START&&!n.hasOwnProperty("ns_st_ui")&&d(e)&&(n.ns_st_ui="seek"),i==B.IDLE?e==N.BUFFER?g.onBuffer(t,n):e==N.SEEK_START?g.onSeekStart(t,n):e==N.PLAY&&g.onPlay(t,n):i==B.PLAYBACK_NOT_STARTED?e==N.END||e==N.AD_SKIP?h.onEndOrAdSkip(t,n):e==N.SEEK_START?h.onSeekStart(t,n):e==N.PLAY?h.onPlay(t,n):e==N.BUFFER&&T.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(t,n):i==B.PLAYING?e==N.END||e==N.AD_SKIP?_.onEndOrAdSkip(t,n):e==N.BUFFER?_.onBuffer(t,n):e==N.SEEK_START?_.onSeekStart(t,n):e==N.PAUSE&&_.onPause(t,n):i==B.PAUSED?e==N.END||e==N.AD_SKIP?f.onEndOrAdSkip(t,n):e==N.PLAY?f.onPlay(t,n):e==N.BUFFER?T.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(t,n):e==N.SEEK_START&&T.onSeekStartWhenPausedOrBufferingDuringPause(t,n):i==B.BUFFERING_BEFORE_PLAYBACK?e==N.END||e==N.AD_SKIP?m.onEndOrAdSkip(t,n):e==N.BUFFER_STOP?m.onBufferStop(t,n):e==N.SEEK_START?m.onSeekStart(t,n):e==N.PAUSE?m.onPause(t,n):e==N.PLAY&&m.onPlay(t,n):i==B.BUFFERING_DURING_PLAYBACK?e==N.PAUSE_ON_BUFFERING?v.onPauseOnBuffering(t,n):e==N.BUFFER_STOP?v.onBufferStop(t,n):e==N.END||e==N.AD_SKIP?v.onEndOrAdSkip(t,n):e==N.SEEK_START?v.onSeekStart(t,n):e==N.PAUSE?v.onPause(t,n):e==N.PLAY&&v.onPlay(t,n):i==B.BUFFERING_DURING_SEEKING?e==N.END||e==N.AD_SKIP?y.onEndOrAdSkip(t,n):e==N.PAUSE?y.onPause(t,n):e==N.PLAY?y.onPlay(t,n):e==N.BUFFER_STOP&&T.onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause(t,n):i==B.BUFFERING_DURING_PAUSE?e==N.END||e==N.AD_SKIP?C.onEndAndSkip(t,n):e==N.PAUSE?C.onPause(t,n):e==N.PLAY?C.onPlay(t,n):e==N.SEEK_START?T.onSeekStartWhenPausedOrBufferingDuringPause(t,n):e==N.BUFFER_STOP&&T.onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause(t,n):i==B.SEEKING_BEFORE_PLAYBACK?e==N.END||e==N.AD_SKIP?b.onEndOrAdSkip(t,n):e==N.PAUSE?b.onPause(t,n):e==N.PLAY?b.onPlay(t,n):e==N.BUFFER&&T.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(t,n):i==B.SEEKING_DURING_PLAYBACK?e==N.END||e==N.AD_SKIP?A.onEndOrAdSkip(t,n):e==N.PLAY?A.onPlay(t,n):e==N.BUFFER?T.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(t,n):e==N.PAUSE&&T.onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause(t,n):i==B.SEEKING_DURING_BUFFERING?e==N.PAUSE?S.onPause(t,n):e==N.BUFFER?T.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(t,n):e==N.PLAY?T.onPlayWhenSeekingDuringBufferingOrSeekingDuringPause(t,n):e==N.END||e==N.AD_SKIP?T.onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause(t,n):e==N.BUFFER_STOP&&T.onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause(t,n):i==B.PAUSED_DURING_BUFFERING?e==N.END||e==N.AD_SKIP?P.onEndOrAdSkip(t,n):e==N.BUFFER_STOP?P.onBufferStop(t,n):e==N.SEEK_START?P.onSeekStart(t,n):e==N.PAUSE?P.onPause(t,n):e==N.PLAY&&P.onPlay(t,n):i==B.SEEKING_DURING_PAUSE&&(e==N.BUFFER?T.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(t,n):e==N.PLAY?T.onPlayWhenSeekingDuringBufferingOrSeekingDuringPause(t,n):e==N.PAUSE?T.onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause(t,n):e==N.END||e==N.AD_SKIP?T.onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause(t,n):e==N.BUFFER_STOP&&T.onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause(t,n)),d(e)&&p.getPlaylist().setFirstEventSent(!0)}(e,t,n);var l=0;isNaN(p.getStateMachine().getLastStateChangeTimestamp())||(l=t-p.getStateMachine().getLastStateChangeTimestamp()),p.getStateMachine().newEvent(e,t);for(var c=0,u=I.length;c<u;c++)I[c](o,s,n,l)}else E=p.getPlatformAPI().setTimeout((r=e,a=n,function(){D.newEvent(r,t,a,!0)}),O)},newPseudoEvent:function(e,t,n){if(e!=N.LOAD&&e!=N.ENGAGE||p.getStateMachine().getCurrentState()==B.IDLE){e!=N.ERROR||n.ns_st_er||(n.ns_st_er=F.UNKNOWN_VALUE),p.getStateMachine().getCurrentState()!=B.IDLE&&p.getStateMachine().getCurrentState()!=B.PLAYBACK_NOT_STARTED&&p.getStateMachine().getCurrentState()!=B.SEEKING_BEFORE_PLAYBACK&&p.getStateMachine().getCurrentState()!=B.BUFFERING_BEFORE_PLAYBACK&&(p.getPlaylist().getClip().addElapsedTime(t),p.getPlaylist().getClip().setElapsedTimestamp(t));var i,r,a,o=!0,s=!1;switch(e){case N.BIT_RATE:i="ns_st_br",r="ns_st_pbr",s=!0;break;case N.PLAYBACK_RATE:i="ns_st_rt",r="ns_st_prt",s=!0;break;case N.VOLUME:i="ns_st_vo",r="ns_st_pvo",s=!0;break;case N.WINDOW_STATE:i="ns_st_ws",r="ns_st_pws",s=!0;break;case N.AUDIO:i="ns_st_at",s=!(r="ns_st_pat");break;case N.VIDEO:i="ns_st_vt",s=!(r="ns_st_pvt");break;case N.SUBS:i="ns_st_tt",s=!(r="ns_st_ptt");break;case N.CDN:i="ns_st_cdn",s=!(r="ns_st_pcdn");break;default:o=!1}if(o&&n.hasOwnProperty(i)&&(s?(D.getLabels().hasOwnProperty(i)&&(a=D.getLabels()[i],n[r]=a),D.setLabel(i,n[i])):(p.getPlaylist().getClip().getLabels().hasOwnProperty(i)&&(a=p.getPlaylist().getClip().getLabels()[i],n[r]=a),p.getPlaylist().getClip().setLabel(i,n[i]))),!o||p.getStateMachine().getCurrentState()==B.PLAYING||p.getStateMachine().getCurrentState()==B.BUFFERING_DURING_PLAYBACK){n.ns_st_po||(n.ns_st_po=p.getPlaylist().getClip().getExpectedPlaybackPosition(t)+""),p.getStateMachine().getCurrentState()!=B.PLAYING&&p.getStateMachine().getCurrentState()!=B.BUFFERING_DURING_PLAYBACK||(p.getPlaylist().addPlaybackTime(t),p.getPlaylist().setPlaybackTimestamp(t),p.getPlaylist().getClip().addPlaybackTime(t),p.getPlaylist().getClip().setPlaybackTimestamp(t),p.getPlaylist().getClip().addInterval(parseInt(n.ns_st_po)),p.getPlaylist().getClip().setPlaybackStartPosition(parseInt(n.ns_st_po))),p.getStateMachine().getCurrentState()!=B.BUFFERING_BEFORE_PLAYBACK&&p.getStateMachine().getCurrentState()!=B.BUFFERING_DURING_PAUSE&&p.getStateMachine().getCurrentState()!=B.BUFFERING_DURING_PLAYBACK&&p.getStateMachine().getCurrentState()!=B.BUFFERING_DURING_SEEKING||(p.getPlaylist().addBufferingTime(t),p.getPlaylist().setBufferingTimestamp(t),p.getPlaylist().getClip().addBufferingTime(t),p.getPlaylist().getClip().setBufferingTimestamp(t));var l=D.createLabels(e,n,t);p.getEventManager().newEvent(l)}}},getState:function(){return p.getStateMachine().getCurrentState()},addListener:function(e){I.push(e)},removeListener:function(e){I.splice(de.indexOf(e,I),1)},getLabel:function(e){return o[e]},getLabels:function(){return o},setLabel:function(e,t){null==t?delete o[e]:o[e]=t},setLabels:function(e){for(var t in e)e.hasOwnProperty(t)&&D.setLabel(t,e[t])},getPlatformAPI:function(){return p.getAppCore()?p.getAppCore().getPlatformAPI():u},getExports:function(){return l},isProperlyInitialized:function(){var e=p.getAppCore().getAppContext(),t=p.getAppCore().getSalt(),n=p.getAppCore().getPixelURL();return e&&n&&t},setImplementationType:function(e){p.getStateMachine().getCurrentState()!=B.IDLE||e!=M.SINGLE_CLIP&&e!=M.SEGMENTED&&e!=M.REDUCED||p.getPlaylist().setLabel("ns_st_it",M.toString(e))},setThrottlingDelay:function(e){O=e},getThrottlingDelay:function(){return O},isThrottlingEnabled:function(){return r},setThrottlingEnabled:function(e){r=e},isLoadingTimeSent:function(){return t},setLoadingTimeSent:function(e){t=e},getLoadTimeOffset:function(){return n},setLoadTimeOffset:function(e){n=e},getInitTimestamp:function(){return e},setPauseOnBufferingInterval:function(e){c=e},getPauseOnBufferingInterval:function(){return c},isPauseOnBufferingEnabled:function(){return i},setPauseOnBufferingEnabled:function(e){i=e},startPausedOnBufferingTimer:function(i,r){D.stopPausedOnBufferingTimer(),a=D.getPlatformAPI().setTimeout(function(){var e={},t=de.fixEventTime(e),n=parseInt(r.ns_st_po);e.ns_st_po=n+t-i+"",D.newEvent(N.PAUSE_ON_BUFFERING,t,e)},c)},stopPausedOnBufferingTimer:function(){null!=a&&(D.getPlatformAPI().clearTimeout(a),a=null)},stopDelayedTransitionTimer:function(){E&&(D.getPlatformAPI().clearTimeout(E),E=null)},setPixelURL:function(e){if(null==e||0==e.length)return null;var t=decodeURIComponent||unescape,n=e.indexOf("?");if(0<=n){if(n<e.length-1){for(var i=e.substring(n+1).split("&"),r=0,a=i.length;r<a;r++){var o=i[r].split("=");2==o.length?D.setLabel(o[0],t(o[1])):1==o.length&&D.setLabel(V,t(o[0]))}e=e.substring(0,n+1)}}else e+="?";return s=e},getPixelURL:function(){return s||("undefined"!=typeof ns_p&&"string"==typeof ns_p.src?s=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?s=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null)},getSseSM:function(){return p},resetPlaylist:function(e){var t=p.getPlaylist();p.setPlaylist(new G),G.resetPlaylist(t,p.getPlaylist(),e)},resetHeartbeat:function(){p.getHeartbeat().pause();var e=p.getHeartbeat().getIntervals();p.setHeartbeat(new J(p)),p.getHeartbeat().setIntervals(e)},resetKeepAlive:function(){p.getKeepAlive().pause();var e=p.getKeepAlive().getInterval();p.setKeepAlive(new z(p)),p.getKeepAlive().setInterval(e)}}),k=de.isBrowser()?(w=window,document):(w={},{location:{href:""},title:"",URL:"",referrer:"",cookie:""}),de.extend(D,{prepareUrl:function(e,t){for(var n,i=w.encodeURIComponent||escape,r=[],a=Y,o=e.split("?"),s=o[0],l=o[1].split("&"),c=0,u=l.length;c<u;c++){var d=l[c].split("="),p=unescape(d[0]),g=unescape(d[1]);p&&(t[p]=g)}for(var f={},h=0,_=a.length;h<_;h++){var m=a[h];if(t.hasOwnProperty(m)){var v=t[m];void 0!==v&&null!=v&&(f[m]=!0,r.push(i(m)+"="+i(t[m])))}}for(var y in t)if(t.hasOwnProperty(y)){if(f[y])continue;var C=t[y];void 0!==C&&null!=C&&r.push(i(y)+"="+i(t[y]))}n=(n=s+"?"+r.join("&"))+(n.indexOf("&c8=")<0?"&c8="+i(k.title):"")+(n.indexOf("&c7=")<0?"&c7="+i(k.URL):"")+(n.indexOf("&c9=")<0?"&c9="+i(k.referrer):"");var P=de.browserAcceptsLargeURLs()?q:j;if(n.length>P&&0<n.indexOf("&")){var b=n.substr(0,P-8).lastIndexOf("&");n=(n.substring(0,b)+"&ns_cut="+i(n.substring(b+1))).substr(0,P)}return n},viewNotify:function(e,t){var n=e||"",g="undefined",i=w.comScore||w.sitestat||function(e){var t,n,i,r,a,o="comScore=",s=k.cookie,l="",c="indexOf",u=de.browserAcceptsLargeURLs()?q:j,d="&ns_",p=w.encodeURIComponent||escape;if(s[c](o)+1)for(r=0,a=(i=s.split(";")).length;r<a;r++)(n=i[r][c](o))+1&&(l="&"+unescape(i[r].substring(n+o.length)));(e+=d+"_t="+ +new Date+d+"c="+(k.characterSet||k.defaultCharset||"")+l).length>u&&0<e.indexOf("&")&&(t=e.substr(0,u-8).lastIndexOf("&"),e=(e.substring(0,t)+d+"cut="+p(e.substring(t+1))).substr(0,u)),D.getPlatformAPI().httpGet(e),typeof ns_p==g&&(ns_p={src:e}),ns_p.lastMeasurement=e};if(typeof t!=g){var r=[],a=w.encodeURIComponent||escape;for(var o in t)t.hasOwnProperty(o)&&r.push(a(o)+"="+a(t[o]));/[\?\&]$/.test(n)||(n+="&"),n+=r.join("&")}return i(n)}}),p=new ue(D),de.getNamespace().comScore?(l=de.getNamespace().comScore.exports,p.setAppCore(l.c())):p.setAppCore(null),p.setKeepAlive(new z(p)),p.setHeartbeat(new J(p)),p.setEventManager(new W(p)),p.setStateMachine(new Q),p.setPlaylist(new G),o={},g=new ne(p),f=new ie(p),h=new ae(p),_=new oe(p),m=new $(p),v=new ee(p),y=new te(p),C=new Z(p),P=new re(p),b=new se(p),S=new le(p),A=new ce(p),T=new X(p),t=!1,n=0,e=+new Date,r=!(i=!0),I=[]},ue=function(e){var t,n,i,r,a,o;de.extend(this,{getAppCore:function(){return t},getSSECore:function(){return e},getEventManager:function(){return n},getStateMachine:function(){return i},getHeartbeat:function(){return r},getKeepAlive:function(){return a},getPlaylist:function(){return o},setAppCore:function(e){t=e},setKeepAlive:function(e){a=e},setHeartbeat:function(e){r=e},setEventManager:function(e){n=e},setStateMachine:function(e){i=e},setPlaylist:function(e){o=e}})},c=function(e,t){function n(){i&&c.getSseSM().getStateMachine().getCurrentState()!=B.IDLE&&u.end()}var i,c,u=this,d=p;de.extend(this,{isProperlyInitialized:function(){return c.isProperlyInitialized()},reset:function(e){var t=c;t.getSseSM().getKeepAlive().pause(),t.getSseSM().getHeartbeat().pause(),c=new f,G.resetPlaylist(t.getSseSM().getPlaylist(),c.getSseSM().getPlaylist(),e)},setPauseOnBufferingInterval:function(e){c.setPauseOnBufferingInterval(e)},getPauseOnBufferingInterval:function(){return c.getPauseOnBufferingInterval()},setKeepAliveInterval:function(e){c.getSseSM().getKeepAlive().setInterval(e)},getKeepAliveInterval:function(){return c.getSseSM().getKeepAlive().getInterval()},setHeartbeatIntervals:function(e){c.getSseSM().getHeartbeat().setIntervals(e)},play:function(e,t){u.notify(N.PLAY,e,t)},pause:function(e,t){u.notify(N.PAUSE,e,t)},end:function(e,t){u.notify(N.END,e,t)},bufferStart:function(e,t){u.notify(N.BUFFER,e,t)},bufferStop:function(e,t){u.notify(N.BUFFER_STOP,e,t)},load:function(e,t){u.notify(N.LOAD,e,t)},engage:function(e,t){u.notify(N.ENGAGE,e,t)},seekStart:function(e,t){u.notify(N.SEEK_START,e,t)},skipAd:function(e,t){u.notify(N.AD_SKIP,e,t)},callToAction:function(e,t){u.notify(N.CTA,e,t)},error:function(e,t){u.notify(N.ERROR,e,t)},transferPlayback:function(e,t){u.notify(N.TRANSFER,e,t)},drmFail:function(e,t){u.notify(N.DRM_FAILED,e,t)},drmApprove:function(e,t){u.notify(N.DRM_APPROVED,e,t)},drmDeny:function(e,t){u.notify(N.DRM_DENIED,e,t)},changeBitrate:function(e,t,n){if(null!=e){var i=n||{};i.ns_st_br=e+"",u.notify(N.BIT_RATE,i,t)}},changePlaybackRate:function(e,t,n){if(null!=e){var i=n||{};i.ns_st_rt=e+"",u.notify(N.PLAYBACK_RATE,i,t)}},changeVolume:function(e,t,n){if(null!=e){var i=n||{};i.ns_st_vo=e+"",u.notify(N.VOLUME,i,t)}},changeWindowState:function(e,t,n){if(null!=e){var i=n||{};i.ns_st_ws=e+"",u.notify(N.WINDOW_STATE,i,t)}},changeAudio:function(e,t,n){if(null!=e){var i=n||{};i.ns_st_at=e+"",u.notify(N.AUDIO,i,t)}},changeVideo:function(e,t,n){if(null!=e){var i=n||{};i.ns_st_vt=e+"",u.notify(N.VIDEO,i,t)}},changeSubtitle:function(e,t,n){if(null!=e){var i=n||{};i.ns_st_tt=e+"",u.notify(N.SUBS,i,t)}},changeCDN:function(e,t,n){if(null!=e){var i=n||{};i.ns_st_cdn=e+"",u.notify(N.CDN,i,t)}},notify:function(e){var t,n;if(t="object"==typeof arguments[1]?arguments[1]:"object"==typeof arguments[2]?arguments[2]:{},n="number"==typeof arguments[1]?arguments[1]:"number"==typeof arguments[2]?arguments[2]:NaN,N.toString(e)){t=de.jsonObjectToStringDictionary(t);var i=de.fixEventTime(t);t.ns_st_po||isNaN(n)||(t.ns_st_po=de.getInteger(n,0)+""),t.ns_st_po&&c.getSseSM().getPlaylist().getClip().setPlaybackTimeOffset(parseInt(t.ns_st_po)),e==N.PLAY||e==N.PAUSE||e==N.BUFFER||e==N.END||e==N.SEEK_START||e==N.AD_SKIP||e==N.BUFFER_STOP?c.newEvent(e,i,t):c.newPseudoEvent(e,i,t)}},getLabels:function(){return c.getLabels()},getState:function(){return c.getSseSM().getStateMachine().getCurrentState()},setLabels:function(e){c.setLabels(e)},getLabel:function(e){return c.getLabel(e)},setLabel:function(e,t){c.setLabel(e,t)},getLoadTimeOffset:function(){return c.getLoadTimeOffset()},setLoadTimeOffset:function(e){c.setLoadTimeOffset(e)},setPixelURL:function(e){return c.setPixelURL(e)},getPixelURL:function(){return c.getPixelURL()},setImplementationType:function(e){c.setImplementationType(e)},isPauseOnBufferingEnabled:function(){return c.isPauseOnBufferingEnabled()},setPauseOnBufferingEnabled:function(e){c.setPauseOnBufferingEnabled(e)},isThrottlingEnabled:function(){return c.isThrottlingEnabled()},setThrottlingEnabled:function(e){c.setThrottlingEnabled(e)},setThrottlingDelay:function(e){c.setThrottlingDelay(e)},getThrottlingDelay:function(){return c.getThrottlingDelay()},setPlaybackIntervalMergeTolerance:function(e){c.getSseSM().getPlaylist().getClip().setPlaybackIntervalMergeTolerance(e)},getPlaybackIntervalMergeTolerance:function(){return c.getSseSM().getPlaylist().getClip().getPlaybackIntervalMergeTolerance()},setClip:function(e,t,n){if(void 0===n&&(n=!0),e=de.jsonObjectToStringDictionary(e),n&&c.getSseSM().getStateMachine().getCurrentState()!==B.IDLE&&u.end(),c.getSseSM().getStateMachine().getCurrentState()!=B.IDLE)return!1;var i="",r=0;if(null!=e.ns_st_cn)i=e.ns_st_cn;else for(var a=0;a<d.length;a++)e[d[a]]&&(i+=d[a]+":"+e[d[a]]+";");var o=c.getSseSM().getPlaylist(),s=o.getClip();r=s.isClipStarted()?(o.hashExists(s.getHash())||(o.storeHash(s.getHash()),o.storeClipNumber(s.getHash(),s.getClipNumber())),o.storeClipPlaybackCounters(),o.hashExists(i)?o.getClipNumber(i):de.exists(e.ns_st_cn)?parseInt(e.ns_st_cn):o.getMaxClipNumber()+1):o.hashExists(i)?o.getClipNumber(i):s.getClipNumber(),o.resetClip(),(s=o.getClip()).setHash(i),s.setClipNumber(r),s.setLabels(e);var l=o.getStoredClipRegisters(i);return l&&(s.setClipStarted(!0),s.setSegmentPlaybackCounter(l.segmentPlaybackCounter),s.setClipLoadCounter(l.clipLoadCounter),s.setAssetPlaybackCounter(l.assetPlaybackCounter),s.setLowestPartNumberPlayed(l.lowestPartNumberPlayed),s.setSeeking(l.seeking),s.setSeekingTimeBeforeEnd(l.seekingTimeBeforeEnd),s.setSeekStartPosition(l.seekingStartPosition),s.setClipPlaybackIntervals(l.clipPlaybackIntervals),s.setUniquePlaybackInterval(l.uniquePlaybackInterval),s.setLongestPlaybackInterval(l.longestPlaybackInterval),s.setVideoTrack(l.videoTrack),s.setAudioTrack(l.audioTrack),s.setSubtitleTrack(l.subtitleTrack),s.setCDN(l.cdn),s.setPlaySequenceCounter(l.playSequenceCounter),s.setPreviousUniquePlaybackInterval(l.uniquePlaybackInterval),s.setPreviousEventIndependentUniquePlaybackInterval(l.uniquePlaybackInterval),s.setPreviousLongestPlaybackInterval(l.longestPlaybackInterval)),s.incrementClipLoadCounter(),s.isClipStarted()&&t&&(o.incrementPlayCounter(),o.incrementPlaybackCounter()),t&&o.setPlaySequenceCounter(0),!0},setPlaylist:function(e,t){return void 0===t&&(t=!0),e=de.jsonObjectToStringDictionary(e),t&&c.getSseSM().getStateMachine().getCurrentState()!==B.IDLE&&u.end(),c.getSseSM().getStateMachine().getCurrentState()==B.IDLE&&(c.getSseSM().getPlaylist().isPlaylistStarted()&&c.resetPlaylist(),c.getSseSM().getPlaylist().setLabels(e),!0)},importState:function(){},exportState:function(){return{}},getVersion:function(){return L},addListener:function(e){c.addListener(e)},removeListener:function(e){c.removeListener(e)},getClip:function(){return c.getSseSM().getPlaylist().getClip()},getPlaylist:function(){return c.getSseSM().getPlaylist()},setHttpGet:function(e){"function"==typeof e&&(c.getPlatformAPI().httpGet=e)},setHttpPost:function(e){"function"==typeof e&&(c.getPlatformAPI().httpPost=e)},setExitEndEventEnabled:function(e){i=e},isExitEndEventEnabled:function(){return i},getPlatformAPI:function(){return c.getPlatformAPI()}}),de.extend(u,{customNotify:function(e,t){u.notify(N.CUSTOM,e,t)},viewNotify:function(e,t){(e=e||u.getPixelURL())&&c.viewNotify(e,t)}}),de.isBrowser()&&(window.addEventListener?(window.addEventListener("beforeunload",n),window.addEventListener("unload",n)):window.attachEvent&&(window.attachEvent("onbeforeunload",n),window.attachEvent("onunload",n))),c=new f,i=!0,e&&u.setLabels(e),t&&u.setPixelURL(t)};function d(){var n,i,r,t,a,o,s,l,c,u,d=this;de.extend(this,{resetClip:function(){var e=n;n=new g,g.resetClip(e,n)},hashExists:function(e){return null!=o[e]},storeHash:function(e){o[e]={}},removeHash:function(e){delete o[e]},storeClipPlaybackCounters:function(){for(var e in o)if(o.hasOwnProperty(e)&&o[e].clipNumber===n.getClipNumber()){de.extend(o[e],{segmentPlaybackCounter:n.getSegmentPlaybackCounter(),clipLoadCounter:n.getClipLoadCounter(),assetPlaybackCounter:n.getAssetPlaybackCounter(),lowestPartNumberPlayed:n.getLowestPartNumberPlayed(),seeking:n.isSeeking(),seekingTimeBeforeEnd:n.getSeekingTimeBeforeEnd(),seekingStartPosition:n.getSeekStartPosition(),clipPlaybackIntervals:n.getClipPlaybackIntervals(),uniquePlaybackInterval:n.getUniquePlaybackInterval(),longestPlaybackInterval:n.getLongestPlaybackInterval(),playSequenceCounter:n.getPlaySequenceCounter(),videoTrack:n.getVideoTrack(),audioTrack:n.getAudioTrack(),subtitleTrack:n.getSubtitleTrack(),cdn:n.getCDN()});break}},getStoredClipRegisters:function(e){return o[e]},getClipNumber:function(e){return o[e].clipNumber},getMaxClipNumber:function(){return s},storeClipNumber:function(e,t){o[e].clipNumber=t,s<t&&(s=t)},setLabels:function(e){null!=e&&de.extend(t,e)},getLabels:function(){return t},setLabel:function(e,t){var n={};n[e]=t,d.setLabels(n)},getLabel:function(e){return t[e]},getClip:function(){return n},createLabels:function(e){var t=e||{};return l||(t.ns_st_pb=null!=t.ns_st_pb?t.ns_st_pb:"1"),de.extend(t,d.getLabels()),n.isPlaybackStarted()&&(t.ns_st_ppc=c+"",t.ns_st_psq=u+""),t},incrementPlayCounter:function(){d.setLabel("ns_st_sp",parseInt(d.getLabel("ns_st_sp"))+1+"")},incrementPauses:function(){d.setLabel("ns_st_pp",d.getPauses()+1+"")},addPlaybackTime:function(e){if(!isNaN(r)){var t=d.getPlaybackTime();t+=e-r,d.setPlaybackTime(t),r=NaN}},addBufferingTime:function(e){if(!isNaN(i)){var t=d.getBufferingTime();t+=e-i,d.setBufferingTime(t),i=NaN}},getBufferingTime:function(){return parseInt(d.getLabel("ns_st_bp"))},setBufferingTime:function(e){d.setLabel("ns_st_bp",e+"")},getPlaybackTime:function(){return parseInt(d.getLabel("ns_st_pa"))},setBufferingTimestamp:function(e){i=e},getBufferingTimestamp:function(){return i},setPlaybackTime:function(e){d.setLabel("ns_st_pa",e+"")},setPlaybackTimestamp:function(e){r=e},getPlaybackTimestamp:function(){return r},getPauses:function(){return parseInt(d.getLabel("ns_st_pp"))},setPauses:function(e){d.setLabel("ns_st_pp",e+"")},isPlaylistStarted:function(){return a},setPlaylistStarted:function(e){a=e},getPlaybackCounter:function(){return c},incrementPlaybackCounter:function(){c++},setFirstEventSent:function(e){l=e},setPlaySequenceCounter:function(e){u=e},incrementPlaySequenceCounter:function(){u++}}),n=new g,(t={ns_st_bp:"0",ns_st_pa:"0",ns_st_pp:"0",ns_st_sp:"1"}).ns_st_id=+new Date+"",r=i=NaN,l=a=!(o={}),u=c=s=0}function h(){var t,n,a,i,o,s,r,l,c,u,d,p,g,f,h,_,m,v,y,C,P,b,S,A,T,E,I,w,k,D,O,N,B,M,L,R,x=this,U=K;de.extend(this,{getHash:function(){return t},setHash:function(e){t=e},setPlaybackIntervalMergeTolerance:function(e){U=e},getPlaybackIntervalMergeTolerance:function(){return U},setLabels:function(e){null!=e&&de.extend(k,e)},getLabels:function(){return k},setLabel:function(e,t){var n={};n[e]=t,x.setLabels(n)},getLabel:function(e){return k[e]},getClipNumber:function(){return parseInt(x.getLabel("ns_st_cn"))},setClipNumber:function(e){x.setLabel("ns_st_cn",e+"")},getPartNumber:function(){return parseInt(x.getLabel("ns_st_pn"))},createLabels:function(e){var t,n,i,r=e||{};return r.ns_st_dbt=x.getBufferingTime()-P+"",P=x.getBufferingTime(),r.ns_st_det=x.getElapsedTime()-c+"",c=x.getElapsedTime(),r.ns_st_dupc=x.getUniquePlaybackInterval()-f+"",f=x.getUniquePlaybackInterval(),parseInt(r.ns_st_dupc)<0&&(r.ns_st_dupc="0"),t=de.exists(r.ns_st_upc)?parseInt(r.ns_st_upc):x.getUniquePlaybackInterval(),r.ns_st_iupc=t-h+"",h=t,parseInt(r.ns_st_iupc)<0&&(r.ns_st_iupc="0"),r.ns_st_dupa=x.getAssetUniquePlaybackInterval()-_+"",_=x.getAssetUniquePlaybackInterval(),parseInt(r.ns_st_dupa)<0&&(r.ns_st_dupa="0"),n=de.exists(r.ns_st_upa)?parseInt(r.ns_st_upa):x.getAssetUniquePlaybackInterval(),r.ns_st_iupa=n-m+"",m=n,parseInt(r.ns_st_iupa)<0&&(r.ns_st_iupa="0"),r.ns_st_dlpc=x.getLongestPlaybackInterval()-v+"",v=x.getLongestPlaybackInterval(),parseInt(r.ns_st_dlpc)<0&&(r.ns_st_dlpc="0"),r.ns_st_dlpa=x.getAssetLongestPlaybackInterval()-y+"",y=x.getAssetLongestPlaybackInterval(),parseInt(r.ns_st_dlpa)<0&&(r.ns_st_dlpa="0"),i=de.exists(r.ns_st_pt)?parseInt(r.ns_st_pt):x.getPlaybackTime(),r.ns_st_ipt=i-s+"",s=i,r.ns_st_dpt=x.getPlaybackTime()-o+"",o=x.getPlaybackTime(),r.ns_st_dpc=x.getPauses()-D+"",D=x.getPauses(),r.ns_st_dskc=x.getSeeks()-O+"",O=x.getSeeks(),r.ns_st_dbc=x.getBuffers()-N+"",N=x.getBuffers(),r.ns_st_dskt=x.getSeekingTime()-A+"",A=x.getSeekingTime(),r.ns_st_dska=x.getSeekingAmount()-I+"",I=x.getSeekingAmount(),de.extend(r,x.getLabels()),x.setSeekingDirection(0),a&&(r.ns_st_spc=B+"",r.ns_st_apc=M+"",r.ns_st_sq=L+"",r.ns_st_asq=R+""),a||de.parseBoolean(r.ns_st_sc)||(r.ns_st_sc="1"),r},getVideoTrack:function(){return x.getLabel("ns_st_vt")},setVideoTrack:function(e){x.setLabel("ns_st_vt",e+"")},getAudioTrack:function(){return x.getLabel("ns_st_at")},setAudioTrack:function(e){x.setLabel("ns_st_at",e+"")},getSubtitleTrack:function(){return x.getLabel("ns_st_tt")},setSubtitleTrack:function(e){x.setLabel("ns_st_tt",e+"")},getCDN:function(){return x.getLabel("ns_st_cdn")},setCDN:function(e){x.setLabel("ns_st_cdn",e+"")},getClipPlaybackIntervals:function(){return d},setClipPlaybackIntervals:function(e){d=e},getAssetPlaybackIntervals:function(){return p},getUniquePlaybackInterval:function(){return parseInt(x.getLabel("ns_st_upc"))},getAssetUniquePlaybackInterval:function(){return parseInt(x.getLabel("ns_st_upa"))},setAssetUniquePlaybackInterval:function(e){x.setLabel("ns_st_upa",e+"")},setUniquePlaybackInterval:function(e){x.setLabel("ns_st_upc",e+"")},getLongestPlaybackInterval:function(){return parseInt(x.getLabel("ns_st_lpc"))},setLongestPlaybackInterval:function(e){x.setLabel("ns_st_lpc",e+"")},getAssetLongestPlaybackInterval:function(){return parseInt(x.getLabel("ns_st_lpa"))},setAssetLongestPlaybackInterval:function(e){x.setLabel("ns_st_lpa",e+"")},incrementPauses:function(){x.setLabel("ns_st_pc",x.getPauses()+1+"")},incrementSeeks:function(){x.setLabel("ns_st_skc",x.getSeeks()+1+"")},incrementPlayCounter:function(){L++},getPlayCounter:function(){return L},getBufferingTime:function(){return parseInt(x.getLabel("ns_st_bt"))},setBufferingTime:function(e){x.setLabel("ns_st_bt",e+"")},addBufferingTime:function(e){if(!isNaN(C)){var t=x.getBufferingTime();t+=e-C,x.setBufferingTime(t),C=NaN}},setPlaybackStartPosition:function(e){g=parseInt(e)},getPlaybackStartPosition:function(){return g},addInterval:function(e){isNaN(g)||isNaN(e)||(d=de.addNewPlaybackInterval(d,g,e,U),p=de.addNewPlaybackInterval(p,g,e,U),function(){var e,t,n=0;for(e=0;e<d.length;e++)n+=Math.abs(d[e].end-d[e].start);x.setUniquePlaybackInterval(n);var i=0;for(e=0;e<d.length;e++)i<(t=Math.abs(d[e].end-d[e].start))&&(i=t);x.setLongestPlaybackInterval(i);var r=0;for(e=0;e<p.length;e++)r+=Math.abs(p[e].end-p[e].start);x.setAssetUniquePlaybackInterval(r);var a=0;for(e=0;e<p.length;e++)a<(t=Math.abs(p[e].end-p[e].start))&&(a=t);x.setAssetLongestPlaybackInterval(a)}(),g=NaN)},getElapsedTime:function(){return parseInt(x.getLabel("ns_st_et"))},setElapsedTime:function(e){x.setLabel("ns_st_et",e+"")},addElapsedTime:function(e){if(!isNaN(l)){var t=x.getElapsedTime();t+=e-l,x.setElapsedTime(t),l=NaN}},getElapsedTimestamp:function(){return l},setElapsedTimestamp:function(e){l=e},addPlaybackTime:function(e){if(!isNaN(i)){var t=x.getPlaybackTime();t+=e-i,x.setPlaybackTime(t),i=NaN}},getPlaybackTime:function(){return parseInt(x.getLabel("ns_st_pt"))},getExpectedPlaybackPosition:function(e){return isNaN(i)||(r+=e-i),r},setPlaybackTimeOffset:function(e){r=e},getPlaybackTimeOffset:function(){return r},setPlaybackTime:function(e){x.setLabel("ns_st_pt",e+"")},getPlaybackTimestamp:function(){return i},setPlaybackTimestamp:function(e){i=e},setPreviousPlaybackTime:function(e){o=e},setPreviousPlaybackTimestamp:function(e){e},getBufferingTimestamp:function(){return C},setBufferingTimestamp:function(e){C=e},getPauses:function(){return parseInt(x.getLabel("ns_st_pc"))},setPauses:function(e){x.setLabel("ns_st_pc",e+"")},getSeeks:function(){return parseInt(x.getLabel("ns_st_skc"))},setSeeks:function(e){x.setLabel("ns_st_skc",e+"")},setSeeking:function(e){b=e},isSeeking:function(){return b},setCollectingSeekingTime:function(e){E=e},isCollectingSeekingTime:function(){return E},setClipStarted:function(e){n=e},isClipStarted:function(){return n},setPlaybackStarted:function(e){a=e},isPlaybackStarted:function(){return a},setSeekingTimestamp:function(e){S=e},getSeekingTimestamp:function(){return S},addSeekingTime:function(e){if(!isNaN(S)){var t=x.getSeekingTime();t+=e-S,x.setSeekingTime(t),S=NaN}},getSeekingTime:function(){return parseInt(x.getLabel("ns_st_skt"))},setSeekingTime:function(e){x.setLabel("ns_st_skt",e+"")},setSeekingTimeBeforeEnd:function(e){w=e},getSeekingTimeBeforeEnd:function(){return w},setSeekStartPosition:function(e){T=e},getSeekStartPosition:function(){return T},setSeekingAmount:function(e){x.setLabel("ns_st_ska",e+"")},getSeekingAmount:function(){return parseInt(x.getLabel("ns_st_ska"))},addSeekingAmount:function(e){var t,n=x.getSeekingAmount();n+=Math.abs(e-T),x.setSeekingAmount(n),T==e?t=0:e<T?t=-1:T<e&&(t=1),x.setSeekingDirection(t),T=0},getSeekingDirection:function(){return parseInt(x.getLabel("ns_st_skd"))},setSeekingDirection:function(e){x.setLabel("ns_st_skd",e+"")},resetClipLifecycleLabels:function(){k.ns_st_pt="0",s=o=0,k.ns_st_bt="0",P=0,k.ns_st_bc="0",N=0,k.ns_st_pc="0",L=D=0,k.ns_st_upa="0",m=_=0,k.ns_st_et="0",c=0,k.ns_st_lpa="0",y=0,k.ns_st_skt="0",A=0,k.ns_st_ska="0",I=0,k.ns_st_skc="0",O=0},incrementSegmentPlaybackCounter:function(){B++},incrementClipLoadCounter:function(){x.setLabel("ns_st_sc",x.getClipLoadCounter()+1+"")},incrementAssetPlaybackCounter:function(){M++},setPreviousUniquePlaybackInterval:function(e){f=e},setPreviousEventIndependentUniquePlaybackInterval:function(e){h=e},setPreviousLongestPlaybackInterval:function(e){v=e},resetAssetPlaybackCounters:function(){p=[],x.setAssetUniquePlaybackInterval(0),m=_=0,x.setAssetLongestPlaybackInterval(0),y=0},setSegmentPlaybackCounter:function(e){B=e},setClipLoadCounter:function(e){x.setLabel("ns_st_sc",e+"")},setAssetPlaybackCounter:function(e){M=e},setLowestPartNumberPlayed:function(e){u=e},getSegmentPlaybackCounter:function(){return B},getClipLoadCounter:function(){return parseInt(x.getLabel("ns_st_sc"))},getAssetPlaybackCounter:function(){return M},getLowestPartNumberPlayed:function(){return u},getBuffers:function(){return parseInt(x.getLabel("ns_st_bc"))},incrementBufferCount:function(){x.setLabel("ns_st_bc",x.getBuffers()+1+"")},getPreviousBufferingTime:function(){return P},setPlaySequenceCounter:function(e){R=e},incrementPlaySequenceCounter:function(){R++},getPlaySequenceCounter:function(){return R}}),n=a=!(k={ns_st_pt:"0",ns_st_bt:"0",ns_st_bc:"0",ns_st_pc:"0",ns_st_cl:"0",ns_st_pn:"1",ns_st_tp:"1",ns_st_skc:"0",ns_st_et:"0",ns_st_cn:"1",ns_st_sc:"0",ns_st_ska:"0",ns_st_skd:"0",ns_st_skt:"0",ns_st_upc:"0",ns_st_lpc:"0",ns_st_upa:"0",ns_st_lpa:"0",ns_st_ub:"0",ns_st_br:"0"}),t=F.UNKNOWN_VALUE,d=[],S=C=g=l=i=NaN,E=b=!(p=[]),R=L=M=B=N=O=D=I=A=w=T=P=y=v=m=_=h=f=s=c=u=o=r=0}return e=c,r={},o=a=-1,de.extend(e,{activeIndex:o,newInstance:v,new:v,destroyInstance:y,destroy:y,newPlaylist:function(e){return e=e||{},_().setPlaylist(e),_().getPlaylist()},newClip:function(e,t,n){return e=e||{},"number"==typeof t&&(e.ns_st_cn=t+""),_().setClip(e,n),_().getClip()},notify:function(e,t,n){return void 0!==e&&(n=n||null,t=t||{},_().notify(e,t,n))},setLabels:function(e){void 0!==e&&_().setLabels(e)},getLabels:function(){return _().getLabels()},setPlaylistLabels:function(e){void 0!==e&&_().getPlaylist().setLabels(e)},getPlaylistLabels:function(){return _().getPlaylist().getLabels()},setClipLabels:function(e){void 0!==e&&_().getClip().setLabels(e)},getClipLabels:function(){return _().getClip().getLabels()},resetInstance:function(e){return _().reset(e||{})},resetPlaylist:function(e){return _().getPlaylist().reset(e||{})},resetClip:function(e){return _().getClip().reset(e||{})},viewEvent:function(e){return e=e||{},_().viewNotify(null,e)},customEvent:function(e,t){return 2<arguments.length&&(e=t,t=arguments[2]),e=e||{},"number"==typeof t&&(e.ns_st_po=t+""),_().customNotify(e,t)},exportState:function(){return _().exportState()},importState:function(e){_().importState(e)}}),c.PlayerEvents=N,c.InternalStates=B,c.ImplementationType=M,c;function _(e,t){return r[o]||v(e,t)}function m(){o=-1;for(var e=0;e<=a;e++)if(r.hasOwnProperty(e+"")){o=e;break}return C.StreamSense.activeIndex=o}function v(e,t){return t=t||null,(e=e||null)&&"object"==typeof e&&(t=e,e=null),r[++a]=new C.StreamSense(t,e),m(),r[a]}function y(){var e=!1,t=o;if("number"==typeof arguments[0]&&isFinite(arguments[0]))t=arguments[0];else if(arguments[0]instanceof C.StreamSense)for(var n in r)if(r.hasOwnProperty(n)&&r[n]===arguments[0]){t=n;break}return r.hasOwnProperty(t+"")&&(e=r[t],delete r[t],e.reset(),m()),e}}(),C.StreamingTag=C.StreamingTag||(f=C.StreamSense,C.StreamSense.PlayerEvents,h=C.StreamSense.InternalStates||null,_=C.StreamSense.ImplementationType||null,m=null!=C.StreamSense.InternalStates&&null!=C.StreamSense.ImplementationType,t.ContentType={LongFormOnDemand:"12",ShortFormOnDemand:"11",Live:"13",UserGeneratedLongFormOnDemand:"22",UserGeneratedShortFormOnDemand:"21",UserGeneratedLive:"23",Bumper:"99",Other:"00"},t.AdType={LinearOnDemandPreRoll:"11",LinearOnDemandMidRoll:"12",LinearOnDemandPostRoll:"13",LinearLive:"21",BrandedOnDemandPreRoll:"31",BrandedOnDemandMidRoll:"32",BrandedOnDemandPostRoll:"33",BrandedOnDemandContent:"34",BrandedOnDemandLive:"35",Other:"00"},t),C;function t(t){function n(e){for(var t in de.exists(e)||(e={}),p)p.hasOwnProperty(t)&&!de.exists(e[p[t]])&&("ns_st_ci"==p[t]?e.ns_st_ci="0":e[p[t]]="*null");return e}function i(e,t,n){if(de.exists(e)&&de.exists(t)&&de.exists(n)){var i=t[e],r=n[e];return de.exists(i)&&de.exists(r)&&i===r}return!1}function r(e){o++,e=n(e);var t={ns_st_cn:o+"",ns_st_pn:"1",ns_st_tp:"1",ns_st_ad:"1"};de.extend(t,e),c.setClip(t),c.play(),l=!1}function a(e,t){e=n(e),g==d.None&&(g=t),l&&g==t&&function(e){for(var t in p)if(p.hasOwnProperty(t)&&!i(p[t],s,e))return!1;return!0}(e)?(c.getClip().setLabels(e),c.getState()!=h.PLAYING&&c.play()):function(e){var t={ns_st_cn:++o+"",ns_st_pn:"1",ns_st_tp:"0"};de.extend(t,e),c.setClip(t),s=e,c.play()}(e),l=!0,g=t}var o=0,s=null,l=!1,c=null,u=!1,d={None:0,AudioContent:1,VideoContent:2},p=["ns_st_ci","c3","c4","c6","ns_st_st","ns_st_pu","ns_st_pr","ns_st_ep","ns_st_sn","ns_st_en","ns_st_ct"],g=d.None;de.extend(this,{playAdvertisement:function(){if(c){u&&console&&console.warn("Calling deprecated function 'playAdvertisement'. Please call 'playVideoAdvertisement' or 'playAudioAdvertisement' functions instead.");r({ns_st_ct:"va"})}},playVideoAdvertisement:function(e,t){if(c){var n={ns_st_ct:"va"};t?n.ns_st_ct="va"+t:u&&console&&console.warn("Calling 'playVideoAdvertisement' without specifying the media type as a second parameter."),e&&de.extend(n,e),r(n)}},playAudioAdvertisement:function(e,t){if(c){var n={ns_st_ct:"aa"};t?n.ns_st_ct="aa"+t:u&&console&&console.warn("Calling 'playAudioAdvertisement' without specifying the media type as a second parameter."),e&&de.extend(n,e),r(n)}},playContentPart:function(e){if(c){u&&console&&console.warn("Calling deprecated function 'playContentPart'. Please call 'playVideoContentPart' or 'playAudioContentPart' functions instead.");var t={ns_st_ct:"vc"};e&&de.extend(t,e),a(t,d.VideoContent)}},playVideoContentPart:function(e,t){if(c){var n={ns_st_ct:"vc"};t?n.ns_st_ct="vc"+t:u&&console&&console.warn("Calling 'playVideoContentPart' without specifying the media type as a second parameter."),e&&de.extend(n,e),a(n,d.VideoContent)}},playAudioContentPart:function(e,t){if(c){var n={ns_st_ct:"ac"};t?n.ns_st_ct="ac"+t:u&&console&&console.warn("Calling 'playAudioContentPart' without specifying the media type as a second parameter."),e&&de.extend(n,e),a(n,d.AudioContent)}},stop:function(){c&&c.pause()}}),function(){if(m)if(de.getNamespace().comScore)(c=new f).setImplementationType(_.REDUCED);else if(de.exists(t))if(u=de.isTrue(t.debug),de.exists(t.customerC2)&&0<t.customerC2.length){var e=t.secure?"https://sb":"http"+("s"==document.location.href.charAt(4)?"s://sb":"://b");(c=new f).setPixelURL(e+".scorecardresearch.com/p?c1=2"),c.setLabel("c2",t.customerC2),c.setImplementationType(_.REDUCED)}else u&&console&&console.log("Warning: customerC2 is not provided (or incorrect) in the StreamingTag configuration.")}()}}),window.CBC||(window.CBC={}),(CBC=CBC||window.CBC).APP||(CBC.APP={}),CBC.APP.AB||(CBC.APP.AB={}),CBC.APP.ANA||(CBC.APP.ANA={}),CBC.APP.ANA.DISPATCHERS||(CBC.APP.ANA.DISPATCHERS={}),CBC.APP.ANA.DISPATCHERS.Amplitude||(CBC.APP.ANA.DISPATCHERS.Amplitude={}),CBC.APP.ANA.DISPATCHERS.FBPIXEL||(CBC.APP.ANA.DISPATCHERS.FBPIXEL={}),CBC.APP.ANA.DISPATCHERS.MirRoar||(CBC.APP.ANA.DISPATCHERS.MirRoar={}),CBC.APP.ANA.FORMATTERS||(CBC.APP.ANA.FORMATTERS={}),CBC.APP.ANA.FORMATTERS.Amplitude||(CBC.APP.ANA.FORMATTERS.Amplitude={}),CBC.APP.ANA.FORMATTERS.Common||(CBC.APP.ANA.FORMATTERS.Common={}),CBC.APP.ANA.FORMATTERS.MirRoar||(CBC.APP.ANA.FORMATTERS.MirRoar={}),CBC.APP.ANA.LIBRARY||(CBC.APP.ANA.LIBRARY={}),CBC.APP.ANA.LIBRARY.Amplitude||(CBC.APP.ANA.LIBRARY.Amplitude={}),CBC.APP.ANA.LIBRARY.FBPIXEL||(CBC.APP.ANA.LIBRARY.FBPIXEL={}),CBC.APP.ANA.VALIDATORS||(CBC.APP.ANA.VALIDATORS={}),CBC.APP.ANA.VALIDATORS.Amplitude||(CBC.APP.ANA.VALIDATORS.Amplitude={}),CBC.APP.ANA.VALIDATORS.Common||(CBC.APP.ANA.VALIDATORS.Common={}),CBC.APP.ANA.VALIDATORS.FBPIXEL||(CBC.APP.ANA.VALIDATORS.FBPIXEL={}),CBC.APP.ANA.VALIDATORS.MirRoar||(CBC.APP.ANA.VALIDATORS.MirRoar={}),CBC.APP.ANA.VARS||(CBC.APP.ANA.VARS={}),CBC.APP.ANA.WEBABTESTS||(CBC.APP.ANA.WEBABTESTS={}),CBC.APP.COMSCORE||(CBC.APP.COMSCORE={}),CBC.APP.CXENSE||(CBC.APP.CXENSE={}),CBC.APP.DMP||(CBC.APP.DMP={}),CBC.APP.DMP.LOTAME||(CBC.APP.DMP.LOTAME={}),CBC.APP.PubSub||(CBC.APP.PubSub={}),CBC.APP.readJS||(CBC.APP.readJS={}),CBC.APP.SC||(CBC.APP.SC={}),CBC.APP.SC.DTM||(CBC.APP.SC.DTM={}),CBC.APP.SC.DTM.DATA||(CBC.APP.SC.DTM.DATA={}),CBC.APP.SC.DTM.formatted||(CBC.APP.SC.DTM.formatted={}),CBC.APP.SC.EventTracker||(CBC.APP.SC.EventTracker={}),CBC.APP.ANA.LinkTracker||(CBC.APP.ANA.LinkTracker={}),CBC.APP.SC.LOCALGEO||(CBC.APP.SC.LOCALGEO={}),CBC.APP.SC.masterSwitch||(CBC.APP.SC.masterSwitch={}),CBC.APP.SC.metadataWhitelist||(CBC.APP.SC.metadataWhitelist={}),CBC.APP.SC.PageTracker||(CBC.APP.SC.PageTracker={}),CBC.APP.SC.Subscribers||(CBC.APP.SC.Subscribers={}),CBC.APP.SC.UTIL||(CBC.APP.SC.UTIL={}),CBC.APP.versions||(CBC.APP.versions={}),CBC.APP.versions["cbc-stats-top"]="2.76.0",CBC.APP.version||(CBC.APP.version=function(){return{"cbc-stats-top.js":CBC.APP.versions["cbc-stats-top"],"cbc-stats-bottom.js":CBC.APP.versions["cbc-stats-bottom"]}});var CryptoJS=CryptoJS||function(s){function n(){}var e={},t=e.lib={},i=t.Base={extend:function(e){n.prototype=this;var t=new n;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=t.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var r=0;r<e;r++)t[i+r>>>2]|=(n[r>>>2]>>>24-r%4*8&255)<<24-(i+r)%4*8;else if(65535<n.length)for(r=0;r<e;r+=4)t[i+r>>>2]=n[r>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=s.ceil(t/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(4294967296*s.random()|0);return new l.init(t,e)}}),r=e.enc={},a=r.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++){var r=t[i>>>2]>>>24-i%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new l.init(n,t/2)}},o=r.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++)n.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new l.init(n,t)}},c=r.Utf8={stringify:function(e){try{return decodeURIComponent(escape(o.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return o.parse(unescape(encodeURIComponent(e)))}},u=t.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,i=t.sigBytes,r=this.blockSize,a=i/(4*r);if(e=(a=e?s.ceil(a):s.max((0|a)-this._minBufferSize,0))*r,i=s.min(4*e,i),e){for(var o=0;o<e;o+=r)this._doProcessBlock(n,o);o=n.splice(0,e),t.sigBytes-=i}return new l.init(o,i)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});t.Hasher=u.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(e,t){return new n.init(t).finalize(e)}},_createHmacHelper:function(n){return function(e,t){return new d.HMAC.init(n,t).finalize(e)}}});var d=e.algo={};return e}(Math);!function(){var e,t=(e=CryptoJS).lib,r=t.Base,a=t.WordArray;(e=e.x64={}).Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),e.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],i=0;i<t;i++){var r=e[i];n.push(r.high),n.push(r.low)}return a.create(n,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length,i=0;i<n;i++)t[i]=t[i].clone();return e}})}(),function(s){for(var e=CryptoJS,l=(t=e.lib).WordArray,i=t.Hasher,n=e.x64.Word,t=e.algo,u=[],d=[],p=[],r=1,a=0,o=0;o<24;o++){u[r+5*a]=(o+1)*(o+2)/2%64;var c=(2*r+3*a)%5;r=a%5,a=c}for(r=0;r<5;r++)for(a=0;a<5;a++)d[r+5*a]=a+(2*r+3*a)%5*5;for(r=1,a=0;a<24;a++){for(var g=c=o=0;g<7;g++){if(1&r){var f=(1<<g)-1;f<32?c^=1<<f:o^=1<<f-32}r=128&r?r<<1^113:r<<1}p[a]=n.create(o,c)}var h=[];for(r=0;r<25;r++)h[r]=n.create();t=t.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new n.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,i=this.blockSize/2,r=0;r<i;r++){var a=16711935&((a=e[t+2*r])<<8|a>>>24)|4278255360&(a<<24|a>>>8),o=16711935&((o=e[t+2*r+1])<<8|o>>>24)|4278255360&(o<<24|o>>>8),s=n[r];s.high^=o,s.low^=a}for(i=0;i<24;i++){for(r=0;r<5;r++){for(var l=a=0,c=0;c<5;c++)a^=(s=n[r+5*c]).high,l^=s.low;(s=h[r]).high=a,s.low=l}for(r=0;r<5;r++)for(s=h[(r+4)%5],o=(a=h[(r+1)%5]).high,c=a.low,a=s.high^(o<<1|c>>>31),l=s.low^(c<<1|o>>>31),c=0;c<5;c++)(s=n[r+5*c]).high^=a,s.low^=l;for(o=1;o<25;o++)r=(s=n[o]).high,s=s.low,l=(c=u[o])<32?(a=r<<c|s>>>32-c,s<<c|r>>>32-c):(a=s<<c-32|r>>>64-c,r<<c-32|s>>>64-c),(s=h[d[o]]).high=a,s.low=l;for(s=h[0],r=n[0],s.high=r.high,s.low=r.low,r=0;r<5;r++)for(c=0;c<5;c++)s=n[o=r+5*c],a=h[o],o=h[(r+1)%5+5*c],l=h[(r+2)%5+5*c],s.high=a.high^~o.high&l.high,s.low=a.low^~o.low&l.low;s=n[0],r=p[i],s.high^=r.high,s.low^=r.low}},_doFinalize:function(){var e=(i=this._data).words,t=8*i.sigBytes,n=32*this.blockSize;e[t>>>5]|=1<<24-t%32,e[(s.ceil((t+1)/n)*n>>>5)-1]|=128,i.sigBytes=4*e.length,this._process();for(var i=this._state,r=(t=(e=this.cfg.outputLength/8)/8,n=[],0);r<t;r++){var a=16711935&((a=(o=i[r]).high)<<8|a>>>24)|4278255360&(a<<24|a>>>8),o=16711935&((o=o.low)<<8|o>>>24)|4278255360&(o<<24|o>>>8);n.push(o),n.push(a)}return new l.init(n,e)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}}),e.SHA3=i._createHelper(t),e.HmacSHA3=i._createHmacHelper(t)}(Math),CBC.APP.SC.DTM.formatted={adobe:{},amplitude:{},chartbeat:{},comscore:{},cxense:{},googlecloud:{},lotame:{},raw:{}},CBC.APP.SC.state={},CBC.APP.SC.state.referrer={},CBC.APP.SC.UTIL=function(){"use strict";var e,c=[],t={console:!1};return{init:function(e){},getElementById:function(e){var t=document.getElementById(e);return{el:t,tags:function(e){return t.getElementsByTagName(e)}}},typecheck:function(e){return{element:!!e.nodeType,array:!(!e.length||!e.pop),function:e instanceof Function,object:e instanceof Object,string:"string"==typeof e,number:"number"==typeof e,boolean:"boolean"==typeof e,undefined:void 0===e}},getAnchor:function(e){return this.findParentTag(e,"a")},addListener:function(e){var t=e.element;if(!this.typecheck(t).element)return!1;function n(e){e=CBC.APP.SC.UTIL.getEventObject(e),i&&e.preventDefault(),r&&e.stopPropagation(),a&&o?s.call(a,e,o):a?s.call(a,e):o?s.call(t,e,o):s.call(t,e)}var i=e.preventDefault,r=e.stopPropagation,a=e.obj,o=e.params,s=e.callback,l=e.type;return c.push({type:l,element:t,callback:s,localCallback:n}),t.addEventListener?(t.addEventListener(l,n,!1),!0):t.attachEvent?t.attachEvent("on"+l,n):void(t["on"+l]=n)},getEventObject:function(e){return{originalEvent:e=e||window.event,target:e.target||e.srcElement,charCode:e.charCode||e.keyCode,type:e.type,layerX:e.layerX||e.offsetX,layerY:e.layerY||e.offsetY,clientX:e.clientX,clientY:e.clientY,fromElement:"mouseover"===e.type?e.fromElement||e.relatedTarget:null,toElement:"mouseout"===e.type?e.toElement||e.relatedTarget:null,preventDefault:function(){this.originalEvent.preventDefault?this.originalEvent.preventDefault():this.originalEvent.returnValue=!1},stopPropagation:function(){this.originalEvent.stopPropagation?this.originalEvent.stopPropagation():this.originalEvent.cancelBubble=!0}}},stripHTML:function(e){var t="";return 50<(e=(e=/<img .*?(\/>|>)/i.test(e)?(t=/<img .*?(?:\/>|>)/i.exec(e)[0],/alt="[^"]+?"/.test(t)?/alt="(.*?)"/i.exec(t)[1]:/src="(.*\/|)(.*?)"/i.exec(t)[2]):(e=e.replace(/<.*?>/g,"")).replace("/&amp;/i","")).replace(/["]/g,"")).length&&(e=e.substr(0,50)),e},findParentTag:function(e,t){if(e.nodeName===t.toUpperCase())return e;for(;"BODY"!==e.nodeName&&(e=e.parentNode)&&e.nodeName!==t.toUpperCase(););return e&&"BODY"!==e.nodeName?e:null},debug:function(e){Boolean(CBC.APP.SC.DEBUG)&&"undefined"!=typeof console&&"function"==typeof console.log&&console.log(e)},debugListeners:function(){for(var e=0;e<c.length;e++)console.log(c[e])},arrayFromArguments:function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t},queryStringToObj:function(e){for(var t=e.split(/[;&]/),n={},i=0;i<t.length;i++){var r=t[i].split("="),a=unescape(r[0].toLowerCase()),o=unescape(r[1]).replace(/\+/g," ");0<a.length&&0<o.length&&(n[a]=o)}return n},getRadioPopupParams:function(){var e={},t={cbc_radio_one:"radio1",cbc_radio_2:"radio2"},n=window.location.href.match("(#/?|\\?)(.*$)");n&&2<n.length&&(e=this.queryStringToObj(n[2]));var i="contentarea=radio";e.networkkey&&(i+="&subsection1="+(t[e.networkkey]?t[e.networkkey]:e.networkkey));return i+="&subsection2=liveradio",i+="&contenttype=page"},isExternallyHosted:function(){var e=document.location.pathname;return window.spoofed_pathname&&(e=window.spoofed_pathname),!!e.toLowerCase().match(/^\/g\/stats\/ext.html/g)},makeRequest:function(e,t,n,i,r,a,o,s){var l=new XMLHttpRequest;l.open(e,encodeURI(t)),a&&(l.withCredentials=!0),o&&Object.keys(o).forEach(function(e){l.setRequestHeader(e,o[e])}),s&&s.timeout&&(l.timeout=s.timeout,l.ontimeout=s.cb),l.onload=function(){200===l.status||201===l.status?i.success(l,r):(i.failure(l,r),console&&console.log("Request failed.  Returned status of "+l.status))},l.send(n)},makeGETRequest:function(e,t,n,i,r,a){this.makeRequest("GET",e,void 0,t,n,i,r,a)},makePOSTRequest:function(e,t,n,i,r,a,o){this.makeRequest("POST",e,t,n,i,r,a,o)},makePUTRequest:function(e,t,n,i,r,a,o){this.makeRequest("PUT",e,t,n,i,r,a,o)},setCookie:function(e,t,n,i){var r=new Date;r.setTime(r.getTime()+864e5*n);var a="expires="+r.toUTCString(),o="";void 0!==i&&(o=";domain="+i),document.cookie=e+"="+encodeURIComponent(t)+";"+a+";path=/"+o},getCookie:function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""},expireCookie:function(e,t){this.setCookie(e,"value",0,t)},getUuid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},requiredExists:function(){},concatSubsections:function(){var e,t=CBC.APP.SC.DTM.DATA,n={},i=[];for(e=0;e<5;e++)if("string"==typeof t["subsection"+(e+1)]&&i.push(t["subsection"+(e+1)]),"string"==typeof i[e]){var r=i.slice(0,e+1);n["subsection"+(e+1)]=t.contentarea+":"+r.join(":")}return n},sendDataToUIE:function(e){try{var t=CBC.APP.SC.UTIL.createUIEPayload(e);if(!t["cbc:gem_id"]&&!t["cbc:adestra_id"])return!1;t&&this.makePUTRequest(window.CBC.APP.SC.masterSwitch.idexchange.endpoint+"ids",JSON.stringify(t),{success:function(e,t){CBC.APP.SC.UTIL.console("sendDataToUIE: Success!")},failure:function(e,t){CBC.APP.SC.UTIL.console("sendDataToUIEs: Failure!")}},"",!0)}catch(e){CBC.APP.SC.UTIL.console("sendDataToUIE: "+e)}},removeGemID:function(e){if(e.user&&e.user.id&&e.user.id.gem){var t=e;return delete t.user.id.gem,0===Object.keys(t.user).length?delete t.user:0===Object.keys(t.user.id).length&&delete t.user.id,t}return e},removeCBCPlusID:function(){try{CBC.APP.SC.masterSwitch&&CBC.APP.SC.masterSwitch.switches.idexchange&&CBC.APP.SC.masterSwitch.idexchange&&CBC.APP.SC.masterSwitch.idexchange.endpoint&&this.makePOSTRequest(CBC.APP.SC.masterSwitch.idexchange.endpoint+"logout","",{success:function(e,t){CBC.APP.SC.UTIL.console("setCBCPlusID: logout success!")},failure:function(e,t){CBC.APP.SC.UTIL.console("setCBCPlusID: logout failure! Error: "+e.responseText)}},"",!0)}catch(e){CBC.APP.SC.UTIL.console("setCBCPlusID: "+e)}},setReferrerPillar:function(){var e=CBC.APP.SC.UTIL.getCookie("referrerPillar");CBC.APP.SC.DTM.formatted.raw.referrer.pillar=e||"noReferrer";var t=CBC.APP.SC.DTM.DATA.pillar?CBC.APP.SC.DTM.DATA.pillar:"legacy";CBC.APP.SC.UTIL.setCookie("referrerPillar",t,365,".cbc.ca")},getReferringDepartment:function(){return CBC.APP.SC.UTIL.getCookie("referringDepartment")},setReferringDepartment:function(e){CBC.APP.SC.UTIL.setCookie("referringDepartment",e,365,".cbc.ca")},validateDepartment:function(){var e=CBC.APP.SC.DTM.formatted.raw.department;if(e){var t=CBC.APP.SC.UTIL.getMetadataWhitelist(),n=t.metadata.whitelist.department.level1,i=t.metadata.whitelist.department.level2,r=t.metadata.whitelist.department.level3,a=Object.keys(n),o=Object.keys(i),s=Object.keys(r),l=e.level1?CBC.APP.SC.UTIL.normalize(e.level1):"",c=e.level2?CBC.APP.SC.UTIL.normalize(e.level2):"",u=e.level3?CBC.APP.SC.UTIL.normalize(e.level3):"";if(e.level1&&-1===a.indexOf(l))return!1;if(e.level2){if(-1===o.indexOf(c))return!1;if(!(-1!==i[c].indexOf(l)))return!1}if(e.level3){if(-1===s.indexOf(u))return!1;if(!(-1!==r[u].indexOf(c)))return!1}return!0}return!1},initReferringDepartmentStatus:function(){CBC.APP.SC.state.referrer.department||(CBC.APP.SC.state.referrer.department={}),CBC.APP.SC.state.referrer.department.STREAMED="",CBC.APP.SC.state.referrer.department.WATCHED=""},getReferringDepartmentStatus:function(){return CBC.APP.SC.state.referrer.department},setReferringDepartmentStatus:function(e,t){/^(STREAMED|WATCHED)?/.test(e.toUpperCase())&&(CBC.APP.SC.state.referrer.department[e.toUpperCase()]=t)},setFormattedLayer:function(){var e=CBC.APP.SC.UTIL.getMetadataWhitelist();if(CBC.APP.SC.DTM.formatted.raw=JSON.parse(JSON.stringify(CBC.APP.SC.DTM.DATA)),CBC.APP.SC.DTM.formatted.raw.referrer)if("string"==typeof CBC.APP.SC.DTM.formatted.raw.referrer){var t=CBC.APP.SC.DTM.formatted.raw.referrer;CBC.APP.SC.DTM.formatted.raw.referrer={},CBC.APP.SC.DTM.formatted.raw.refererr.url=t}else CBC.APP.SC.DTM.formatted.raw.referrer.url=CBC.APP.SC.DTM.formatted.raw.referrer.url||this.getReferrer(document);else CBC.APP.SC.DTM.formatted.raw.referrer={},CBC.APP.SC.DTM.formatted.raw.referrer.url=this.getReferrer(document);var n=new RegExp("^\\d{2}\\/\\d{2}\\/\\d{4} \\d{2}:\\d{2}:\\d{2}$");if(CBC.APP.SC.DTM.formatted.raw.publishedTime&&n.test(CBC.APP.SC.DTM.formatted.raw.publishedTime)){var i=new Date(CBC.APP.SC.DTM.formatted.raw.publishedTime.replace(/(\d{2})\/(\d{2})\/(\d{4})/,"$3-$2-$1").replace(/\s+/,"T").concat("Z"));CBC.APP.SC.DTM.formatted.raw.publishedTime=i.getTime()}if(CBC.APP.SC.DTM.formatted.raw.updatedTime&&n.test(CBC.APP.SC.DTM.formatted.raw.updatedTime)){var r=new Date(CBC.APP.SC.DTM.formatted.raw.updatedTime.replace(/(\d{2})\/(\d{2})\/(\d{4})/,"$3-$2-$1").replace(/\s+/,"T").concat("Z"));CBC.APP.SC.DTM.formatted.raw.updatedTime=r.getTime()}if(/^https?:\/\/(gem|watch).*/.test(document.location.href)&&"object"===_typeof2(CBC.APP.SC.DTM.formatted.raw.title)&&void 0!==CBC.APP.SC.DTM.formatted.raw.subsection4&&(CBC.APP.SC.DTM.formatted.raw.titleObject=JSON.parse(JSON.stringify(CBC.APP.SC.DTM.formatted.raw.title)),CBC.APP.SC.DTM.formatted.raw.title=CBC.APP.SC.DTM.formatted.raw.subsection4),void 0===CBC.APP.SC.DTM.formatted.raw.contentid&&("string"==typeof CBC.APP.SC.DTM.formatted.raw.url?CBC.APP.SC.DTM.formatted.raw.contentid=this.getContentID(CBC.APP.SC.DTM.formatted.raw.url):CBC.APP.SC.DTM.formatted.raw.contentid=this.getContentID(document.location.href),""===CBC.APP.SC.DTM.formatted.raw.contentid&&delete CBC.APP.SC.DTM.formatted.raw.contentid),CBC.APP.SC.DTM.formatted.raw.embedtypes&&e.metadata.whitelist.content.embedded.media){var a=e.metadata.whitelist.content.embedded.media,o=CBC.APP.SC.UTIL.getembeddedMediaWhitelistArray(a),s=CBC.APP.SC.DTM.formatted.raw.embedtypes,l=o.filter(function(e){return s.includes(e)});l.sort(),CBC.APP.SC.DTM.formatted.raw.embedtypes=l.join("-")}if(CBC.APP.SC.DTM.formatted.raw.sponsor){var c=CBC.APP.SC.DTM.formatted.raw.sponsor.name;e.metadata.whitelist.sponsor.name[c]?CBC.APP.SC.DTM.formatted.raw.sponsor.name=c:delete CBC.APP.SC.DTM.formatted.raw.sponsor}if(CBC.APP.SC.DTM.formatted.raw.partner){var u=CBC.APP.SC.DTM.formatted.raw.partner.name;e.metadata.whitelist.partner.name[u]||delete CBC.APP.SC.DTM.formatted.raw.partner}this.setReferrerPillar();var d=this.getReferringDepartment().split(":");if(""!=d[0]){CBC.APP.SC.DTM.formatted.raw.referrer.department={};for(var p=0;p<d.length;++p){var g="level"+(p+1);CBC.APP.SC.DTM.formatted.raw.referrer.department[g]=d[p]}}else CBC.APP.SC.DTM.formatted.raw.referrer.department={level1:"noReferrer"};if(this.validateDepartment()){var f=CBC.APP.SC.DTM.formatted.raw.department,h=[f.level1,f.level2,f.level3];this.setReferringDepartment(h.filter(function(e){return e}).join(":"))}else this.setReferringDepartment("noReferrer");if(CBC.APP.SC.LOCALGEO&&CBC.APP.SC.LOCALGEO.geo&&(CBC.APP.SC.DTM.formatted.raw.geo=CBC.APP.SC.DTM.formatted.raw.geo||{},CBC.APP.SC.DTM.formatted.raw.geo.timezone=CBC.APP.SC.LOCALGEO.geo.timezone?CBC.APP.SC.LOCALGEO.geo.timezone:void 0,CBC.APP.SC.DTM.formatted.raw.geo.country=CBC.APP.SC.LOCALGEO.geo.country?CBC.APP.SC.LOCALGEO.geo.country:void 0,CBC.APP.SC.DTM.formatted.raw.geo.city=CBC.APP.SC.LOCALGEO.geo.city?CBC.APP.SC.LOCALGEO.geo.city:void 0,CBC.APP.SC.DTM.formatted.raw.geo.region=CBC.APP.SC.LOCALGEO.geo.region?CBC.APP.SC.LOCALGEO.geo.region:void 0),CBC.APP.SC.DTM.formatted.raw.contentcms&&(CBC.APP.SC.DTM.formatted.raw.contentcms=this.normalize(CBC.APP.SC.DTM.formatted.raw.contentcms),e.metadata.whitelist.content.cms[CBC.APP.SC.DTM.formatted.raw.contentcms]||delete CBC.APP.SC.DTM.formatted.raw.contentcms),CBC.APP.SC.DTM.formatted.raw.appname){if(CBC.APP.SC.DTM.formatted.raw.appname=this.normalize(CBC.APP.SC.DTM.formatted.raw.appname),!CBC.APP.ANA.VALIDATORS.Common.validateAppName(CBC.APP.SC.DTM.formatted.raw.appname)&&CBC.APP.SC.DTM.formatted.raw.pillar){var _=CBC.APP.SC.UTIL.determineAppName(CBC.APP.SC.DTM.formatted.raw.pillar,window);_?CBC.APP.SC.DTM.formatted.raw.appname=_:delete CBC.APP.SC.DTM.formatted.raw.appname}}else{var m=CBC.APP.SC.UTIL.determineAppName(CBC.APP.SC.DTM.formatted.raw.pillar,window);m&&(CBC.APP.SC.DTM.formatted.raw.appname=m)}var v=JSON.parse(JSON.stringify(CBC.APP.SC.DTM.formatted.raw));void 0!==v.sponsor&&void 0===v.sponsor.name&&delete v.sponsor,CBC.APP.SC.DTM.formatted.adobe=JSON.parse(JSON.stringify(v)),CBC.APP.SC.DTM.formatted.amplitude=JSON.parse(JSON.stringify(v)),CBC.APP.SC.DTM.formatted.chartbeat=JSON.parse(JSON.stringify(v)),CBC.APP.SC.DTM.formatted.comscore=JSON.parse(JSON.stringify(v)),CBC.APP.SC.DTM.formatted.lotame=JSON.parse(JSON.stringify(v)),CBC.APP.SC.DTM.formatted.MirRoar=JSON.parse(JSON.stringify(v));for(var y=JSON.parse(JSON.stringify(v)),C=["blogarchivetitle","contentarea","contenttype","hierarchy","originaltitle","pillar","spa","syndicate","title"],P=0;P<C.length;P+=1)"string"==typeof CBC.APP.SC.DTM.formatted.adobe[C[P]]&&(CBC.APP.SC.DTM.formatted.adobe[C[P]]=this.normalize(CBC.APP.SC.DTM.formatted.adobe[C[P]].replace(/\+/g,"-").replace(/[^a-zA-Z0-9-_ .$]/g,"")));for(var b=["author","authors","keywords"],S=0;S<b.length;S+=1)"string"==typeof CBC.APP.SC.DTM.formatted.adobe[b[S]]&&(CBC.APP.SC.DTM.formatted.adobe[b[S]]=this.normalize(CBC.APP.SC.DTM.formatted.adobe[b[S]].replace(/, /g,",")));for(var A=["subsection1","subsection2","subsection3","subsection4"],T=0;T<A.length;T+=1)"string"==typeof CBC.APP.SC.DTM.formatted.adobe[A[T]]&&(CBC.APP.SC.DTM.formatted.adobe[A[T]]=this.normalize(CBC.APP.SC.DTM.formatted.adobe[A[T]],"_"));var E=["name","position"];if(CBC.APP.SC.DTM.formatted.adobe.feature)for(var I=0;I<E.length;I+=1)CBC.APP.SC.DTM.formatted.adobe.feature[E[I]]&&"string"==typeof CBC.APP.SC.DTM.formatted.adobe.feature[E[I]]&&(CBC.APP.SC.DTM.formatted.adobe.feature[E[I]]=this.normalize(CBC.APP.SC.DTM.formatted.adobe.feature[E[I]].replace(/\+/g,"-").replace(/[^a-zA-Z0-9-_ .$]/g,"")));var w=["level1","level2","level3"];if(CBC.APP.SC.DTM.formatted.adobe.department)for(var k=0;k<w.length;k+=1)CBC.APP.SC.DTM.formatted.adobe.department[w[k]]&&"string"==typeof CBC.APP.SC.DTM.formatted.adobe.department[w[k]]&&(CBC.APP.SC.DTM.formatted.adobe.department[w[k]]=this.normalize(CBC.APP.SC.DTM.formatted.adobe.department[w[k]].replace(/\+/g,"-").replace(/[^a-zA-Z0-9-_ .$]/g,"")));if(CBC.APP.SC.DTM.formatted.adobe.referrer.department)for(var D=0;D<w.length;D+=1)CBC.APP.SC.DTM.formatted.adobe.referrer.department[w[D]]&&"string"==typeof CBC.APP.SC.DTM.formatted.adobe.referrer.department[w[D]]&&(CBC.APP.SC.DTM.formatted.adobe.referrer.department[w[D]]=this.normalize(CBC.APP.SC.DTM.formatted.adobe.referrer.department[w[D]].replace(/\+/g,"-").replace(/[^a-zA-Z0-9-_ .$]/g,"")));if(void 0!==CBC.APP.SC.DTM.formatted.raw&&(void 0!==CBC.APP.SC.DTM.formatted.raw.url&&(CBC.APP.SC.DTM.formatted.chartbeat.url=CBC.APP.SC.DTM.formatted.raw.url.replace("cbc.ca/beta/","cbc.ca/")),void 0!==CBC.APP.SC.DTM.formatted.raw.authors&&(CBC.APP.SC.DTM.formatted.chartbeat.authors=CBC.APP.SC.DTM.formatted.raw.authors.toLowerCase().replace(/, /g,",").replace(/\s/g,"-"))),void 0!==CBC.APP.SC.DTM.formatted.raw&&CBC.APP.SC.syndicate){var O=CBC.APP.SC.syndicate;O=O.replace(/\s/g,"-").toLowerCase(),CBC.APP.SC.DTM.formatted.comscore.syndicate=O}var N=Array.isArray(y.keywords)?CBC.APP.SC.UTIL.formatKeywordsData(y.keywords):{};function B(e){return"string"==typeof e?e.toLowerCase():""}CBC.APP.SC.DTM.formatted.cxense={authors:y.authors,contentarea:B(y.contentarea),contentcms:y.contentcms,contentid:y.contentid,contenttype:B(y.contenttype),embedtypes:y.embedtypes,experimentsContent:y.experiments?y.experiments.content:"",keywords:"string"==typeof y.keywords?y.keywords:"",keywordsCollections:N.collections,keywordsCompany:N.company,keywordsLocation:N.location,keywordsOrganization:N.organization,keywordsPerson:N.person,keywordsSubject:N.subject,mediaDuration:y.media?y.media.duration:"",mediaId:y.media?y.media.id:"",mediaLiveondemand:y.media?y.media.liveondemand:"",mediaSport:y.media?y.media.sport:"",mediaShow:y.media?y.media.show:"",mediaAudiovideo:y.media?y.media.audiovideo:"",originaltitle:y.originaltitle,partnerName:y.partner?y.partner.name:"",pillar:y.pillar,publishedTime:y.publishedTime,sponsorName:y.sponsor?y.sponsor.name:"",socialCommentsEnabled:y.social&&y.social.comments?y.social.comments.enabled:"",socialCommentsLoaded:y.social&&y.social.comments?y.social.comments.loaded:"",socialCommentsTotal:y.social&&y.social.comments?y.social.comments.total:"",subsection1:B(y.subsection1),subsection2:B(y.subsection2),subsection3:B(y.subsection3),subsection4:B(y.subsection4),title:y.title,updatedTime:y.updatedTime,url:y.url,wordcount:y.wordcount},Object.keys(CBC.APP.SC.DTM.formatted.cxense).forEach(function(e){void 0!==CBC.APP.SC.DTM.formatted.cxense[e]&&""!==CBC.APP.SC.DTM.formatted.cxense[e]&&"(not specified)"!==CBC.APP.SC.DTM.formatted.cxense[e]||delete CBC.APP.SC.DTM.formatted.cxense[e]}),this.generateGoogleCloudPayload(),"object"===_typeof2(CBC.APP.SC.DTM.DATA.keywords)&&this.setGoogleCloudContentTags(JSON.stringify(CBC.APP.SC.DTM.DATA.keywords))},getembeddedMediaWhitelistArray:function(e){var t=[],n=0;for(n in e)!0===e[n]&&t.push(n);return t},getContentID:function(e){var t=/-[\d]\.[\d]+$/.exec(e);return"object"===_typeof2(t)&&null!==t&&0<t.length?t[0].substr(1):""},getGemID:function(){return CBC.APP.SC.DTM.DATA.user&&CBC.APP.SC.DTM.DATA.user.id&&CBC.APP.SC.DTM.DATA.user.id.gem?CBC.APP.SC.DTM.DATA.user.id.gem:null},getReferrer:function(e){var t=e.referrer;return 0<CBC.APP.SC.PageTracker.getVal("pageviewcount")&&(t=CBC.APP.SC.state.referrer.url),CBC.APP.SC.state.referrer.url=e.location.href,t},clearDataLayer:function(){CBC.APP.SC.DTM.DATA={},this.clearFormattedDataLayer()},clearFormattedDataLayer:function(){CBC.APP.SC.DTM.formatted={adobe:{},amplitude:{},chartbeat:{},comscore:{},cxense:{},googlecloud:{},lotame:{},raw:{}}},normalize:function(e,t){return t=void 0===t?"-":t,e.replace(/\s+/g,t).toLowerCase()},sanitize:function(e){return e.replace(/[\W_]+/g,"")},splitQuery:function(e,t,n){for(var i={},r=e.split("&"),a=0;a<r.length;a++){var o=r[a].split("="),s=o[0],l=o[1];if(t){if(!t[o[0]])continue;s=t[o[0]]}n&&n[o[1]]&&(l=n[o[1]]),i[s]=l}return i},getCBCUserProperties:function(){var e=this.getCookie("cbclocal");if(e)return this.splitQuery(e,{radio:"location.radio",news:"location.news",tv:"location.tv",region:"location.region",weather:"location.weather"},void 0)},getPolopolyDimension:function(e,t){for(var n=JSON.parse(e),i={},r=0;r<n.length;r++){var a=n[r];i[a.name]=[];for(var o=0;o<a.entities.length;o++){var s=a.entities[o];i[a.name].push(t(s.name))}}return i},setGoogleCloudContentTags:function(e){var t=(0,this.getPolopolyDimension)(e,this.sanitize);"object"===_typeof2(CBC.APP.SC.DTM.formatted.googlecloud.content)&&(t.Person&&(CBC.APP.SC.DTM.formatted.googlecloud.content.tags.person=t.Person),t.Location&&(CBC.APP.SC.DTM.formatted.googlecloud.content.tags.location=t.Location),t.Subject&&(CBC.APP.SC.DTM.formatted.googlecloud.content.tags.subject=t.Subject),t.Company&&(CBC.APP.SC.DTM.formatted.googlecloud.content.tags.company=t.Company))},generateGoogleCloudPayload:function(){var e={session:{},user:{},device:{},content:{}};e.content.tags={};var t=this.getCookie("cbc-session");e.session.id=t||this.getUuid(),e.session.isLoggedIn=!!(window.viafoura&&window.viafoura.users&&window.viafoura.users.current)&&"guest"!==window.viafoura.users.current().user_privilege,e.session.startTime="",e.user.id="";var n=(window.navigator.userAgent||window.navigator.vendor||window.opera).toLowerCase(),i=CBC.APP.SC.Detectizr(n);e.device.type=i.device.type,e.device.os=i.os.name,e.content.id=CBC.APP.SC.DTM.formatted.raw.contentid,e.content.area=CBC.APP.SC.DTM.formatted.raw.contentarea,e.content.subsection1=CBC.APP.SC.DTM.formatted.raw.subsection1,e.content.subsection2=CBC.APP.SC.DTM.formatted.raw.subsection2,e.content.subsection3=CBC.APP.SC.DTM.formatted.raw.subsection3,e.content.subsection4=CBC.APP.SC.DTM.formatted.raw.subsection4,e.content.authors=CBC.APP.SC.DTM.formatted.raw.authors?CBC.APP.SC.DTM.formatted.raw.authors.split(","):"",e.content.title=CBC.APP.SC.DTM.formatted.raw.title,e.content.url=CBC.APP.SC.DTM.formatted.raw.url,e.content.source="polopoly",e.content.publicationDate=CBC.APP.SC.DTM.formatted.raw.publishedTime,e.content.lastUpdatedDate=CBC.APP.SC.DTM.formatted.raw.updatedTime,e.content.tags.person=[],e.content.tags.location=[],e.referrer=CBC.APP.SC.DTM.formatted.raw.referrer.url||document.referrer,e.verb="",e.eventTimestamp=Date.now(),CBC.APP.SC.DTM.formatted.googlecloud=e},sendVisitorUserIDs:function(e){this.makePUTRequest(window.CBC.APP.SC.masterSwitch.idexchange.endpoint+"ids",JSON.stringify(e),{success:function(e,t){console.log("sendVisitorUserIDs: Success!")},failure:function(e,t){console.log("sendVisitorUserIDs: Failure!")}},"",!0)},createUIEPayload:function(e){if(void 0!==window.CBC.APP.SC.masterSwitch&&void 0!==window.CBC.APP.SC.masterSwitch.switches&&void 0!==window.CBC.APP.SC.masterSwitch.switches.idexchange&&window.CBC.APP.SC.masterSwitch.switches.idexchange&&window.CBC.APP.SC.masterSwitch.idexchange.endpoint){var t={};return e&&e.user&&e.user.id&&(e.user.id.gem&&(t["cbc:gem_id"]=[e.user.id.gem.toString()]),e.user.id.adestra&&(t["cbc:adestra_id"]=[e.user.id.adestra.toString()])),t["@context"]={cbc:CBC.APP.SC.masterSwitch.idexchange.context},window.s_cbc_sitecatalyst.visitor.getMarketingCloudVisitorID()&&(t["cbc:adobe_id"]=[window.s_cbc_sitecatalyst.visitor.getMarketingCloudVisitorID().toString()]),this.getCookie("cX_P")&&(t["cbc:cxense_id"]=[this.getCookie("cX_P").toString()]),window.localStorage.getItem("lr-user-uid")&&(t["cbc:loginradius_id"]=[window.localStorage.getItem("lr-user-uid").toString()]),CBC.APP.DMP&&CBC.APP.DMP.LOTAME&&CBC.APP.DMP.LOTAME.profileId&&(t["cbc:lotame_id"]=[CBC.APP.DMP.LOTAME.profileId.toString()]),window.viafoura&&window.viafoura.users&&window.viafoura.users.current&&window.viafoura.users.current().id&&(t["cbc:viafoura_id"]=[window.viafoura.users.current().id.toString()]),t}return!1},setDefaultValue:function(e,t){return t=null==t?"":t,null==e?t:e},getLocationHref:function(e){return e.location.href},getLocationHost:function(e){return e.location.host},getDoNotTrackValue:function(){return!!(window.navigator.doNotTrack&&"unspecified"!==window.navigator.doNotTrack||window.doNotTrack)},getCookiesEnabledValue:function(){return!!window.navigator.cookieEnabled},getQueryStringFromURL:function(e){return e&&e.location?e.location.search:""},determineAppName:function(e,t){var n=this.getLocationHost(t),i=this.getLocationHref(t),r=CBC.APP.SC.UTIL.getQueryStringFromURL(t),a=CBC.APP.SC.DTM&&CBC.APP.SC.DTM.DATA&&CBC.APP.SC.DTM.DATA.url?CBC.APP.SC.DTM.DATA.url:"",o=!1;if("feed"===e&&(o="ocelot"),"listen"===e&&(-1<i.indexOf("cbc.ca/listen")||-1<a.indexOf("cbc.ca/listen")?o="listen-web-app":(-1<n.indexOf("cbcmusic")||-1<a.indexOf("cbcmusic"))&&(o="music-web-app")),"watch"===e&&(-1<n.indexOf("gem.cbc.ca")||-1<n.indexOf("gem.qa.nm.cbc.ca")||-1<a.indexOf("gem.cbc.ca")||-1<a.indexOf("gem.qa.nm.cbc.ca")?o="ott-web-app":(-1<n.indexOf("watch.cbc.ca")||-1<n.indexOf("watch.qa.nm.cbc.ca")||-1<a.indexOf("watch.cbc.ca")||-1<a.indexOf("watch.qa.nm.cbc.ca"))&&(o="ott-web-app")),(-1<n.indexOf("responsive.cbc.ca")||-1<n.indexOf("cbchelp.cbc.ca")||-1<a.indexOf("responsive.cbc.ca")||-1<a.indexOf("cbchelp.cbc.ca"))&&(o="zendesk"),!(-1<n.indexOf("cbc.ca")||-1<a.indexOf("cbc.ca")||this.isExternallyHosted())||/^(feed|watch|listen|)$/.test(e)||o||(o="cbcca-web"),-1<r.indexOf("webview=true")&&-1<r.indexOf("appname=")){var s=this.queryStringToObj(r.substring(1));CBC.APP.SC.UTIL.getMetadataWhitelist().metadata.whitelist.webviewapps[s.appname]&&(o=s.appname)}return o},determineWebViewFeatureName:function(e){var t=CBC.APP.SC.UTIL.getQueryStringFromURL(e),n=!1;if(-1<t.indexOf("webview=true")&&-1<t.indexOf("featurename=")){var i=CBC.APP.SC.UTIL.queryStringToObj(t.substring(1));n=i.featurename?i.featurename:n}return n},formatKeywordsData:function(e){for(var t,n={},i=0;i<e.length;i+=1)if(0<e[i].entities.length){t=[];for(var r=0;r<e[i].entities.length;r+=1)-1===t.indexOf(e[i].entities[r].name)&&t.push(e[i].entities[r].name);n[e[i].name.toLowerCase()]=t}return n},generateAdCampaignList:function(t,e,n,i){var r=1<arguments.length&&void 0!==e?e:{},a=2<arguments.length?n:void 0,o=3<arguments.length&&void 0!==i?i:6,s=new Date(a),l=s.getFullYear(),c=s.getMonth(),u=s.getDate(),d=new Date(l,c,u);d.setMonth(d.getMonth()-o);var p=d.getTime();r=r||{};var g=Object.keys(r);return 0<g.length?g.forEach(function(e){r[t]=a,r[e]<p&&delete r[e]}):r[t]=a,r},uniqueArray:function(e){for(var t=e.concat(),n=0;n<t.length;++n)for(var i=n+1;i<t.length;++i)t[n]===t[i]&&t.splice(i--,1);return t},populateScannedMetadata:function(e,t){var n={},i=this.getAnchor(e);if(i){var r=i.href.match(/(?:)\.cbc(music)?\.ca\/([^/]+)/),a=i.href,o=i.getAttribute("data-contentid");if(r&&a&&o&&"number"==typeof t)return n.content={area:/^\.cbcmusic\.ca\//.test(r)?"music":r[0].trim().replace(/\.cbc(music)?\.ca\//,""),title:e.textContent,url:a,type:"headline",id:o,cms:"polopoly"},n.time={engaged:t},n.referrer={url:document.URL},n.app={name:"ocelot",pillar:"feed"},n}return!1},sendScanned:function(e,t){var n=this.populateScannedMetadata(e,t);return CBC.APP.SC.EventTracker.trackEvent("SCANNED",n),n},populateOTTMediaMetadata:function(e){var t=e.content&&e.content.media?e.content.media:{},n=CBC.APP.SC.DTM.formatted.amplitude,i={app:{name:"ott-web-app",pillar:"watch"},content:{media:{audiovideo:t.audiovideo?t.audiovideo:"",liveondemand:t.liveondemand?t.liveondemand:"",type:t.type?t.type:"",genre:t.genre?t.genre:"",show:t.show?t.show:"",sport:t.sport?t.sport:"",region:t.region?t.region:"",publishedtime:t.airdate&&"nan"!==t.airdate?t.airdate:"",seasonnumber:t.seasonnumber&&"nan"!==t.seasonnumber?t.seasonnumber:"",episodenumber:t.episodenumber&&"nan"!==t.episodenumber?t.episodenumber:"",length:t.length?t.length:""},area:t.contentarea?t.contentarea:"",cms:"ibm-cloud-video",id:n.contentid,tier:n.contenttier?n.contenttier:"free",title:t.streamtitle?t.streamtitle:"",url:n.url},referrer:{url:n.referrer.url,pillar:n.referrer.pillar},user:{tier:n.userTier}};t.partnername&&CBC.APP.SC.UTIL.getMetadataWhitelist().metadata.whitelist.partner.name[t.partnername]&&(i.content.partner={},i.content.partner.name=t.partnername);t.sponsorname&&CBC.APP.SC.UTIL.getMetadataWhitelist().metadata.whitelist.sponsor.name[t.sponsorname]&&(i.sponsor={},i.sponsor.name=t.sponsorname);return e.feature&&(i.feature={},e.feature.name&&(i.feature.name=e.feature.name),e.feature.position&&(i.feature.position=e.feature.position)),""===CBC.APP.SC.UTIL.getReferringDepartmentStatus().STREAMED&&(CBC.APP.SC.UTIL.setReferringDepartmentStatus("STREAMED",i.content.id),i.referrer.department={},i.referrer.department.level1=CBC.APP.SC.DTM.formatted.amplitude.referrer.department.level1||"",i.referrer.department.level2=CBC.APP.SC.DTM.formatted.amplitude.referrer.department.level2||"",i.referrer.department.level3=CBC.APP.SC.DTM.formatted.amplitude.referrer.department.level3||"",Object.keys(i.referrer.department).forEach(function(e){""===i.referrer.department[e]&&delete i.referrer.department[e]})),Object.keys(i.content.media).forEach(function(e){""===i.content.media[e]&&delete i.content.media[e]}),Object.keys(i.content).forEach(function(e){""===i.content[e]&&delete i.content[e]}),i},getQueryStringParameterValue:function(e,t){if("string"!=typeof e)return CBC.APP.SC.UTIL.console("getQueryStringParameter: invalid parameterName"),!1;void 0===t&&(t=window.document.URL);var n=new RegExp(e+"=([^&\\s]*)"),i=t.match(n);return null===i?(CBC.APP.SC.UTIL.console("getQueryStringParameter: parameter does not exist"),null):i[1]},getMetadataWhitelist:function(){return CBC.APP.SC.metadataWhitelist},setCBCPlusIDPromise:function(){return new Promise(function(n,i){try{CBC.APP.SC.masterSwitch&&CBC.APP.SC.masterSwitch.switches.idexchange&&CBC.APP.SC.masterSwitch.idexchange&&CBC.APP.SC.masterSwitch.idexchange.endpoint&&CBC.APP.SC.UTIL.makePOSTRequest(CBC.APP.SC.masterSwitch.idexchange.endpoint+"login",JSON.stringify(CBC.APP.SC.UTIL.createUIEPayload()),{success:function(e,t){CBC.APP.SC.UTIL.console("setCBCPlusID: login success!"),CBC.APP.PubSub.publish("UIEAlert"),CBC.APP.SC.UTIL.sendVisitorUserIDsPromise(CBC.APP.SC.UTIL.createUIEPayload()).then(function(e){n(!0)}).catch(function(){CBC.APP.SC.UTIL.console("error in create sendVisitorUserIDsPromise")})},failure:function(e,t){CBC.APP.SC.UTIL.console("setCBCPlusID: login failure! Error: "+e.responseText),i("UIE failure")}},"",!0)}catch(e){CBC.APP.SC.UTIL.console("setCBCPlusID: "+e),i(e)}})},setCBCVisitorIDPromise:function(e,t){var r=this,a=0<arguments.length&&void 0!==e?e:null,o=1<arguments.length&&void 0!==t?t:null;return new Promise(function(n,i){try{CBC.APP.SC.masterSwitch&&CBC.APP.SC.masterSwitch.switches&&CBC.APP.SC.masterSwitch.switches.idexchange&&CBC.APP.SC.masterSwitch.switches.idexchange&&CBC.APP.SC.masterSwitch.idexchange&&CBC.APP.SC.masterSwitch.idexchange.endpoint?r.makeGETRequest(CBC.APP.SC.masterSwitch.idexchange.endpoint+"current_user",{success:function(e,t){CBC.APP.SC.UTIL.console("setCBCVisitorID: current_user success!"),CBC.APP.SC.UTIL.getCookie("cbc_visitor")?(CBC.APP.PubSub.publish("UIEAlert"),window.amplitude.getInstance("stats").init("f5b7aa101ec24385b731affd4a2f5ed0",a,{deviceId:CBC.APP.SC.UTIL.getCookie("cbc_visitor"),domain:".cbc.ca"},o)):window.amplitude.getInstance("stats").init("f5b7aa101ec24385b731affd4a2f5ed0",a,{domain:".cbc.ca"},o),CBC.APP.SC.UTIL.sendVisitorUserIDsPromise(CBC.APP.SC.UTIL.createUIEPayload()).then(function(e){n(!0)}).catch(function(){CBC.APP.SC.UTIL.console("error in create sendVisitorUserIDsPromise")})},failure:function(e,t){CBC.APP.SC.UTIL.console("setCBCVisitorID: current_user failure! Error: "+e.responseText),i("CBCVisitorID Error")}},"",!0):i("Visitor Promise ID has not been set")}catch(e){CBC.APP.SC.UTIL.console("setCBCVisitorID: "+e),i(e)}})},sendVisitorUserIDsPromise:function(e){return new Promise(function(n,i){CBC.APP.SC.UTIL.makePUTRequest(window.CBC.APP.SC.masterSwitch.idexchange.endpoint+"ids",JSON.stringify(e),{success:function(e,t){n(!0)},failure:function(e,t){i(!1)}},"",!0)})},returnURL:function(){return window.location.href},console:(e=function(){t.console&&console.log(arguments)},n.toString=function(){return e.toString()},n),inDebugMode:function(){document.location.href.match(/statsDebug=true/)&&(t.console=!0)},masterSwitchMetaPromise:function(){return new Promise(function(t,n){var e="//www.cbc.ca/network/includes/stats/master-switch.json";CBC.APP.SC.UTIL.makeGETRequest(e,{success:function(e){CBC.APP.SC.masterSwitch=JSON.parse(e.responseText),t(CBC.APP.SC.masterSwitch)},failure:function(e){n(e.failure.message)}},{success:{uri:e},failure:{message:"unable to communicate"}})})},getEpochTime:function(){var e=new Date;return Math.round(e.getTime()/1e3)}};function n(){return e.apply(this,arguments)}}(),CBC.APP.SC.UTIL.getUserTests=function(){if(!CBC.APP.ANA.WEBABTESTS)return null;var e=CBC.APP.ANA.WEBABTESTS.tests,t=e.length;if(!t)return[];for(var n=[],i=0;i<t;++i)if(e[i].id&&e[i].type&&e[i].variants&&Array.isArray(e[i].variants)){var r=e[i].variants.length;if(r)for(var a=0;a<r;++a){var o={},s=e[i].id;o.id=s||"";var l=e[i].variants[a].id;if(l){var c=l.substr(0,l.indexOf("|")),u=l.substr(l.indexOf("|")+1);o.variant=c===s&&u?u:""}else o.variant="";o.content=e[i].variants[a].content||"",o.interface=e[i].type.interface||"",o.label=e[i].variants[a].label||"",o.id&&o.variant&&o.content&&o.interface&&o.label&&n.push(o)}}return n},CBC.APP.ANA.FORMATTERS.Common=function(){"use strict";function i(e,t,n){var i=2<arguments.length&&void 0!==n?n:void 0;return"function"!=typeof i?t||(e||i):i(e,t)}return{setPayloadProperty:i,formatAuthenticated:function(e,t){return t||"boolean"==typeof t?Boolean(t):Boolean(e)},formatAuthors:function(e,t){var n=i(e,t);return n&&Array.isArray(n)?n:n&&"string"==typeof n?n.split(","):void 0},formatEmbeddedTypes:function(e,t){return e?{media:e}:void 0},formatKeywords:function(e,t){return e&&Array.isArray(e)?CBC.APP.SC.UTIL.formatKeywordsData(e):"string"==typeof e?e:void 0},formatEpisodeSeasonNumber:function(e,t){var n="nan";if(e&&t&&/^(E|S)$/i.test(t)){var i=/^E$/i.test(t)?/^(E|e)?[0-9]+$/:/^(S|s)?[0-9]+$/,r=/^E$/i.test(t)?"e":"s";i.test(e)&&(1===(n=e.toString().toLowerCase()).length?n="".concat(r,"0").concat(n):2===n.length&&n.charAt(0)===r?n="".concat(r,"0").concat(n.charAt(1)):n.charAt(0)!==r&&(n="".concat(r).concat(n)))}return n},formatGeoTimezone:function(e,t){var n=t||e;return n&&n.timezone?{geo:{timezone:n.timezone}}:void 0},formatTimeEngaged:function(e,t){return"number"==typeof t&&0<t?{engaged:t}:void 0},formatUserInterests:function(e,t){var n={},i=t?JSON.parse(JSON.stringify(t)):{};return i.explicit&&(n.explicit={},Array.isArray(i.explicit.yes)&&i.explicit.yes.length&&(n.explicit.yes=i.explicit.yes.map(function(e){return e.toLowerCase()})),Array.isArray(i.explicit.no)&&i.explicit.no.length&&(n.explicit.no=i.explicit.no.map(function(e){return e.toLowerCase()}))),i.implicit&&(n.implicit={},Array.isArray(i.implicit.yes)&&i.implicit.yes.length&&(n.implicit.yes=i.implicit.yes.map(function(e){return e.toLowerCase()})),Array.isArray(i.implicit.no)&&i.implicit.no.length&&(n.implicit.no=i.implicit.no.map(function(e){return e.toLowerCase()}))),Object.keys(n).length?n:void 0}}}(),CBC.APP.ANA.FORMATTERS.Amplitude=function(){"use strict";function a(e,t,n){var i=2<arguments.length&&void 0!==n?n:void 0;return CBC.APP.ANA.FORMATTERS.Common.setPayloadProperty(e,t,i)}function n(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatEpisodeSeasonNumber(e,t)}function o(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatAuthenticated(e,t)}function s(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatAuthors(e,t)}function l(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatEmbeddedTypes(e,t)}function c(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatKeywords(e,t)}function u(e,t){return n(t,"E")}function d(e,t){return n(t,"S")}function p(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatGeoTimezone(e,t)}function g(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatTimeEngaged(e,t)}function f(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatUserInterests(e,t)}var r=[];var v=function(e,t){i(),h(),CBC.APP.ANA.DISPATCHERS.Amplitude.dispatch(e,t)},y=function(){var e=CBC.APP.SC.UTIL.getCookie("cbc_plus");return!!e&&(window.amplitude.getInstance("stats").setUserId(e),!0)},C=function(){return window.amplitude.getInstance("stats").setUserId(null),!0},P=function(e){window.amplitude.getInstance("stats").setUserProperties(e)},b=function(e,t,n){if(void 0===window.amplitude||void 0===(new window.amplitude.Identify)[e])return r.push([e,t,n]),!1;var i=(new window.amplitude.Identify)[e](t,n);return window.amplitude.getInstance("stats").identify(i),i},i=function(){var e=CBC.APP.SC.UTIL.getCookie("cbc_plus"),t=CBC.APP.SC.UTIL.getCookie("cbc_visitor");return e?(CBC.APP.ANA.FORMATTERS.Amplitude.mUP("set","user.id",e),e):!!t&&(CBC.APP.ANA.FORMATTERS.Amplitude.mUP("setOnce","user.id",t),t)},h=function(){var e="set",t="authenticated";return CBC.APP.SC.UTIL.getCookie("cbc_plus")?void 0!==CBC.APP.SC.DTM.DATA&&"premium"===CBC.APP.SC.DTM.DATA.userTier&&(t="premium"):(e="setOnce",t="free"),CBC.APP.ANA.FORMATTERS.Amplitude.mUP(e,"user.tier",t),t},S=function(e){if("true"!==window.CBC.APP.SC.UTIL.getQueryStringParameterValue("webview",e))return CBC.APP.SC.UTIL.debug("checkWebView: not a webview"),!1;var t=window.CBC.APP.SC.UTIL.getQueryStringParameterValue("appname",e);if(window.CBC.APP.SC.UTIL.getMetadataWhitelist().metadata.whitelist.webviewapps[t]){var n=window.CBC.APP.SC.UTIL.getQueryStringParameterValue("udid",e);return n?(CBC.APP.SC.UTIL.debug("checkWebView: setting deviceId"),CBC.APP.ANA.FORMATTERS.Amplitude.sDID(n),n):(CBC.APP.SC.UTIL.debug("checkWebView: no deviceId passed"),!1)}return CBC.APP.SC.UTIL.debug("checkWebView: not a whitelisted app"),!1},A=function(e){e.content&&delete e.content.wordcount},T=function(e){e.content&&delete e.content.embedded};return{setPayloadProperty:a,formatAuthenticated:o,formatAuthors:s,formatEmbeddedTypes:l,formatKeywords:c,formatEpisodeNumber:u,formatSeasonNumber:d,formatGeoTimezone:p,formatTimeEngaged:g,formatUserInterests:f,formatSignal:function(t,e){if("string"!=typeof t)return CBC.APP.SC.UTIL.debug("EventTracker - Warning: did not send an event name: "+t),!1;if("object"!==_typeof2(e))return CBC.APP.SC.UTIL.debug("EventTracker - Warning: event properties must be sent as an object: "+e),!1;if(!function(e){var t=e.toUpperCase();return Boolean(CBC.APP.SC.EventTracker.getValidEvents()[t])}(t))return CBC.APP.SC.UTIL.debug("EventTracker - Warning: not a valid event: "+t),!1;var n,i=t.toUpperCase(),r={};if(!["STREAMED","SCANNED","WATCHED","LISTENED"].includes(i)&&"object"===_typeof2(CBC.APP.SC.DTM.formatted)&&"object"===_typeof2(CBC.APP.SC.DTM.formatted.amplitude)&&0<Object.keys(CBC.APP.SC.DTM.formatted.amplitude).length?r=Object.keys(e).length<1?(CBC.APP.SC.UTIL.debug("set up event properties from DTM object if eventProperties object is empty"),CBC.APP.ANA.FORMATTERS.Amplitude.formatAmplitude({dl:CBC.APP.SC.DTM.formatted.amplitude})):(CBC.APP.SC.UTIL.debug("merge the 2 objects ep and dl together"),CBC.APP.ANA.FORMATTERS.Amplitude.formatAmplitude({ep:e,dl:CBC.APP.SC.DTM.formatted.amplitude})):["STREAMED","WATCHED"].includes(i)&&CBC.APP.SC.DTM.formatted&&CBC.APP.SC.DTM.formatted.amplitude&&"watch"===CBC.APP.SC.DTM.formatted.amplitude.pillar?r=e&&Object.keys(e).length?CBC.APP.SC.UTIL.populateOTTMediaMetadata(e):CBC.APP.ANA.FORMATTERS.Amplitude.formatAmplitude({dl:CBC.APP.SC.DTM.formatted.amplitude}):"object"===_typeof2(e)&&(CBC.APP.SC.UTIL.debug("setting eventProps to default eventProperties argument"),r=e),"START WEB SESSION"===i||"LOADED"===i){var a=window.CBC.APP.SC.UTIL.getQueryStringParameterValue("cmp");a&&(r.referrer||(r.referrer={}),r.referrer.campaign=a,P({referrer:{campaign:a}})),S(window.document.URL)}if("LOADED"===i){var o=CBC.APP.SC.UTIL.determineWebViewFeatureName(window);if(o){var s=CBC.APP.ANA.VALIDATORS.Common.getFeatureNameRegex(),l=!0,c=!1,u=void 0;try{for(var d,p=s[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var g=d.value;if(RegExp(g).test(o)){r.feature||(r.feature={}),r.feature.name=o;break}}}catch(e){c=!0,u=e}finally{try{l||null==p.return||p.return()}finally{if(c)throw u}}}}if(CBC.APP.SC.UTIL.getCBCUserProperties()&&P(CBC.APP.SC.UTIL.getCBCUserProperties()),Object.keys(r).length<1)return CBC.APP.SC.UTIL.debug("EventTracker - Amplitude - Warning: no event properties were sent"),!1;if("READ"===i){if("index"===r.content.type)return CBC.APP.SC.UTIL.debug("READ validation failed, content = index"),!1;"comments"===r.content.type&&(r.content.cms||(r.content.cms="polopoly"),r.referrer.department&&delete r.referrer.department,r.referrer.pillar&&delete r.referrer.pillar),["story","segment","blogentry"].includes(CBC.APP.SC.DTM.DATA.contenttype)||A(r)}else if("VIEWED AD"===i){if("displayad"===r.content.type){var f=CBC.APP.SC.UTIL.getCookie("stats_ad.campaigns.seen"),h={};f&&(h=JSON.parse(f));var _=CBC.APP.SC.UTIL.generateAdCampaignList(r.content.id,h,(new Date).getTime());CBC.APP.SC.UTIL.setCookie("stats_ad.campaigns.seen",JSON.stringify(_)),b("set","ad.campaigns.seen",Object.keys(_))}}else if("LOADED"===i)["story","segment","blogentry"].includes(CBC.APP.SC.DTM.DATA.contenttype)||(A(r),T(r));else if("PLAYED"===i&&!CBC.APP.ANA.VALIDATORS.Common.validatePlayedContentType(r))return CBC.APP.SC.UTIL.debug("Amplitude payload failed PLAYED validation: "+JSON.stringify(r)),!1;"LOADED"!==i&&"READ"!==i&&A(r),"LOADED"!==i&&T(r),CBC.APP.AB&&CBC.APP.AB.Testing&&("STREAMED"===t.replace(" ","-").toUpperCase()&&r.content&&(!r.content.media||"video"!==r.content.media.audiovideo&&"audio"!==r.content.media.audiovideo?"video"!==r.content.area&&"audio"!==r.content.area||(n={audiovideo:r.content.area}):n={audiovideo:r.content.media.audiovideo}),CBC.APP.AB.Testing.viewStateChange(t.replace(" ","-").toUpperCase(),n));if(["LOADED","READ","STREAMED","WATCHED"].includes(i)||(r.sponsor&&delete r.sponsor,r.content&&r.content.partner&&delete r.content.partner),r.sponsor&&r.sponsor.id&&delete r.sponsor.id,r.partner&&r.partner.id&&delete r.partner.id,r.user&&r.user.reason){var m=CBC.APP.SC.UTIL.getMetadataWhitelist().metadata.whitelist;("SUBSCRIBED"!==i&&"UNSUBSCRIBED"!==i||"SUBSCRIBED"===i&&!0!==m.user.reason.SUBSCRIBED[r.user.reason])&&delete r.user.reason}return r=CBC.APP.SC.UTIL.removeGemID(r),"SIGNED IN"===t?CBC.APP.SC.UTIL.setCBCPlusIDPromise().then(function(e){y(),v(t,r)},function(e){console.log(e),v(t,r)}):("SIGNED OUT"===t&&C(),v(t,r)),r},formatAmplitude:function(e){var t={},n={};if("object"!==_typeof2(e.dl)&&"object"!==_typeof2(e.ep))return{};"object"===_typeof2(e.dl)&&(t=JSON.parse(JSON.stringify(e.dl))),t.department=t.department||{},t.partner=t.partner||{},t.referrer=t.referrer||{},t.referrer.department=t.referrer.department||{},t.sponsor=t.sponsor||{},"object"===_typeof2(e.ep)&&(n=JSON.parse(JSON.stringify(e.ep))),n.app=n.app||{},n.content=n.content||{},n.content.media=n.content.media||{},n.content.partner=n.content.partner||{},n.department=n.department||{},n.feature=n.feature||{},n.referrer=n.referrer||{},n.referrer.department=n.referrer.department||{},n.sponsor=n.sponsor||{},n.time=n.time||{},n.user=n.user||{};var i={app:{name:a(t.appname,n.app.name),pillar:a(t.pillar,n.app.pillar,"legacy"),version:a(null,n.app.version)},content:{area:a(t.contentarea,n.content.area,"misc"),authenticated:a(t.authenticated,n.content.authenticated,o),authors:a(t.authors,n.content.authors,s),cms:a(t.contentcms,n.content.cms),embedded:a(t.embedtypes,null,l),id:a(t.contentid,n.content.id),keywords:a(t.keywords,null,c),media:{audiovideo:a(null,n.content.media.audiovideo),episodenumber:a(null,n.content.media.episodenumber,u),genre:a(null,n.content.media.genre),length:a(null,n.content.media.length),liveondemand:a(null,n.content.media.liveondemand),publishedtime:a(null,n.content.media.publishedtime),region:a(null,n.content.media.region),seasonnumber:a(null,n.content.media.seasonnumber,d),show:a(null,n.content.media.show),sport:a(null,n.content.media.sport),type:a(null,n.content.media.type)},partner:{name:a(t.partner.name,n.content.partner.name)},publishedtime:a(t.publishedTime,n.content.publishedtime),originaltitle:a(t.originaltitle,n.content.originaltitle),subsection1:a(t.subsection1,n.content.subsection1),subsection2:a(t.subsection2,n.content.subsection2),subsection3:a(t.subsection3,n.content.subsection3),subsection4:a(t.subsection4,n.content.subsection4),title:a(t.title,n.content.title,document.title),type:a(t.contenttype,n.content.type,"page"),updatedtime:a(t.updatedTime,n.content.updatedtime),url:a(t.url,n.content.url,document.location.href),wordcount:a(t.wordcount,n.content.wordcount)},custom:a(null,n.custom),department:{level1:a(t.department.level1,n.department.level1),level2:a(t.department.level2,n.department.level2),level3:a(t.department.level3,n.department.level3)},device:a(t.geo,n.geo,p),feature:{instance:a(null,n.feature.instance),name:a(null,n.feature.name),position:a(null,n.feature.position),value:a(null,n.feature.value)},referrer:{campaign:a(t.referrer.campaign,n.referrer.campaign),department:{level1:a(t.referrer.department.level1,n.referrer.department.level1),level2:a(t.referrer.department.level2,n.referrer.department.level2),level3:a(t.referrer.department.level3,n.referrer.department.level3)},pillar:a(t.referrer.pillar,n.referrer.pillar),source:a(null,n.referrer.source),url:a(t.referrer.url,n.referrer.url)},sponsor:{name:a(t.sponsor.name,n.sponsor.name)},time:a(null,n.time.engaged,g),user:{interests:a(null,n.user.interests,f),reason:a(null,n.user.reason,function(e,t){return t?t.toLowerCase():void 0}),selection:a(null,n.user.selection,function(e,t){return t?t.toLowerCase():void 0}),subscriptions:void 0}},r=JSON.parse(JSON.stringify(i,function(e,t){return""===t||null===t||Array.isArray(t)&&!t.length||"object"===_typeof2(t)&&!Object.keys(t).length?void 0:t}));return(r=JSON.parse(JSON.stringify(r,function(e,t){return""===t||null===t||Array.isArray(t)&&!t.length||"object"===_typeof2(t)&&!Object.keys(t).length?void 0:t}))).content&&r.content.media&&"nan"===r.content.media.episodenumber&&"nan"===r.content.media.seasonnumber&&2===Object.keys(r.content.media).length&&(delete r.content.media,Object.keys(r.content).length||delete r.content),r},sUID:y,sDID:function(e){return"string"==typeof e&&e?(CBC.APP.SC.UTIL.debug("setDeviceID: setting device id to: "+e),window.amplitude.getInstance("stats").setDeviceId(e),e):(CBC.APP.SC.UTIL.debug("setDeviceID: invalid device id specified"),!1)},sUP:P,mUP:b,uUT:h,uUID:i,cWV:S,executeUPQueue:function(){if(r.length){for(var e=0;e<r.length;e++)b(r[e][0],r[e][1],r[e][2]);r=[]}}}}(),CBC.APP.ANA.FORMATTERS.MirRoar=function(){"use strict";function a(e,t,n){var i=2<arguments.length&&void 0!==n?n:void 0;return CBC.APP.ANA.FORMATTERS.Common.setPayloadProperty(e,t,i)}function n(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatEpisodeSeasonNumber(e,t)}function o(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatAuthenticated(e,t)}function s(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatAuthors(e,t)}function l(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatEmbeddedTypes(e,t)}function c(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatKeywords(e,t)}function u(e,t){return n(t,"E")}function d(e,t){return n(t,"S")}function p(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatGeoTimezone(e,t)}function g(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatTimeEngaged(e,t)}function f(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatUserInterests(e,t)}function _(e){var t={},n={};if("object"!==_typeof2(e.dl)&&"object"!==_typeof2(e.ep))return{};"object"===_typeof2(e.dl)&&(t=JSON.parse(JSON.stringify(e.dl))),t.department=t.department||{},t.geo=t.geo||{},t.partner=t.partner||{},t.referrer=t.referrer||{},t.referrer.department=t.referrer.department||{},t.sponsor=t.sponsor||{},"object"===_typeof2(e.ep)&&(n=JSON.parse(JSON.stringify(e.ep))),n.app=n.app||{},n.content=n.content||{},n.content.media=n.content.media||{},n.content.partner=n.content.partner||{},n.department=n.department||{},n.feature=n.feature||{},n.referrer=n.referrer||{},n.referrer.department=n.referrer.department||{},n.sponsor=n.sponsor||{},n.time=n.time||{},n.user=n.user||{};var i={user_id:null!=h()||null!=y()?h()?h():y():null,event_properties:{app:{name:a(t.appname,n.app.name),pillar:a(t.pillar,n.app.pillar,"legacy"),version:a(null,n.app.version)},content:{area:a(t.contentarea,n.content.area,"misc"),cms:a(t.contentcms,n.content.cms),department:{level1:a(t.department.level1,n.department.level1),level2:a(t.department.level2,n.department.level2),level3:a(t.department.level3,n.department.level3)},id:a(t.contentid,n.content.id),embedded:a(t.embedtypes,null,l),keywords:a(t.keywords,null,c),partner:{name:a(t.partner.name,n.content.partner.name)},authenticated:a(t.authenticated,n.content.authenticated,o),authors:a(t.authors,n.content.authors,s),publishedtime:a(t.publishedTime,n.content.publishedtime),originaltitle:a(t.originaltitle,n.content.originaltitle),subsection1:a(t.subsection1,n.content.subsection1),subsection2:a(t.subsection2,n.content.subsection2),subsection3:a(t.subsection3,n.content.subsection3),subsection4:a(t.subsection4,n.content.subsection4),title:a(t.title,n.content.title,document.title),type:a(t.contenttype,n.content.type,"page"),updatedtime:a(t.updatedTime,n.content.updatedtime),url:a(t.url,n.content.url,document.location.href),wordcount:a(t.wordcount,n.content.wordcount),media:{audiovideo:a(null,n.content.media.audiovideo),episodenumber:a(null,n.content.media.episodenumber,u),genre:a(null,n.content.media.genre),length:a(null,n.content.media.length),liveondemand:a(null,n.content.media.liveondemand),publishedtime:a(null,n.content.media.publishedtime),region:a(null,n.content.media.region),seasonnumber:a(null,n.content.media.seasonnumber,d),show:a(null,n.content.media.show),sport:a(null,n.content.media.sport),type:a(null,n.content.media.type)}},feature:{instance:a(null,n.feature.instance),name:a(null,n.feature.name),position:a(null,n.feature.position),value:a(null,n.feature.value)},referrer:{campaign:a(t.referrer.campaign,n.referrer.campaign),department:{level1:a(t.referrer.department.level1,n.referrer.department.level1),level2:a(t.referrer.department.level2,n.referrer.department.level2),level3:a(t.referrer.department.level3,n.referrer.department.level3)},pillar:a(t.referrer.pillar,n.referrer.pillar),source:a(null,n.referrer.source),url:a(t.referrer.url,n.referrer.url)},sponsor:{name:a(t.sponsor.name,n.sponsor.name)}},custom:a(null,n.custom),device:a(t.geo,n.geo,p),country:a(t.geo,n.geo,function(){return CBC.APP.ANA.FORMATTERS.MirRoar.formatLocations(t.geo,n.geo,"country")}),region:a(t.geo,n.geo,function(){return CBC.APP.ANA.FORMATTERS.MirRoar.formatLocations(t.geo,n.geo,"region")}),city:a(t.geo,n.geo,function(){return CBC.APP.ANA.FORMATTERS.MirRoar.formatLocations(t.geo,n.geo,"city")}),timeengaged:a(null,n.time.engaged,g),time:CBC.APP.ANA.FORMATTERS.MirRoar.getTimeStamp(),session_id:a(CBC.APP.ANA.VARS.sessionID,CBC.APP.SC.UTIL.getCookie("cbc-session")),user_properties:{user:{interests:a(null,n.user.interests,f),id:{cbcvisitor:y(),cbcplus:h()},reason:a(null,n.user.reason,function(e,t){return t?t.toLowerCase():void 0}),selection:a(null,n.user.selection,function(e,t){return t?t.toLowerCase():void 0}),subscriptions:void 0,tier:function(){var e="authenticated";return h()?void 0!==CBC.APP.SC.DTM.DATA&&"premium"===CBC.APP.SC.DTM.DATA.userTier&&(e="premium"):e="free",e}()}}},r=JSON.parse(JSON.stringify(i,function(e,t){return""===t||null===t||Array.isArray(t)&&!t.length||"object"===_typeof2(t)&&!Object.keys(t).length?void 0:t}));return(r=JSON.parse(JSON.stringify(r,function(e,t){return""===t||null===t||Array.isArray(t)&&!t.length||"object"===_typeof2(t)&&!Object.keys(t).length?void 0:t}))).event_properties.content&&r.event_properties.content.media&&"nan"===r.event_properties.content.media.episodenumber&&"nan"===r.event_properties.content.media.seasonnumber&&2===Object.keys(r.event_properties.content.media).length&&(delete r.event_properties.content.media,Object.keys(r.event_properties.content).length||delete r.event_properties.content),r}function m(e){e.event_properties&&e.event_properties.content&&e.event_properties.content.wordcount&&delete e.event_properties.content.wordcount}function v(e){e.event_properties&&e.event_properties.content&&e.event_properties.content.embedded&&delete e.event_properties.content.embedded}var h=function(){var e=null;return CBC.APP.SC.UTIL.getCookie("cbc_plus")&&(e=CBC.APP.SC.UTIL.getCookie("cbc_plus")),e},y=function(){var e=null;return CBC.APP.SC.UTIL.getCookie("cbc_visitor")&&(e=CBC.APP.SC.UTIL.getCookie("cbc_visitor")),e};return{setPayloadProperty:a,formatAuthenticated:o,formatAuthors:s,formatEmbeddedTypes:l,formatKeywords:c,formatEpisodeNumber:u,formatSeasonNumber:d,formatGeoTimezone:p,formatLocations:function(e,t,n){var i=t&&t[n]?t:e;return i&&i[n]?i[n]:void 0},formatTimeEngaged:g,formatUserInterests:f,formatMirRoar:_,formatSignal:function(e,t){var n=JSON.parse(JSON.stringify(t));if("string"!=typeof e)return CBC.APP.SC.UTIL.debug("EventTracker - Warning: did not send an event name: "+e),!1;if("object"!==_typeof2(n))return CBC.APP.SC.UTIL.debug("EventTracker - Warning: event properties must be sent as an object: "+n),!1;var i=e.toUpperCase(),r={};if(r=Object.keys(n).length<1?(CBC.APP.SC.UTIL.debug("set up event properties from DTM object if mirEventProperties object is empty"),_({dl:CBC.APP.SC.DTM.formatted.MirRoar})):(CBC.APP.SC.UTIL.debug("merge the 2 objects ep and dl together"),_({ep:n,dl:CBC.APP.SC.DTM.formatted.MirRoar})),"START WEB SESSION"===i||"LOADED"===i){var a=window.CBC.APP.SC.UTIL.getQueryStringParameterValue("cmp");a&&(r.referrer||(r.referrer={}),r.referrer.campaign=a)}var o=function(e){if("true"!==window.CBC.APP.SC.UTIL.getQueryStringParameterValue("webview",e))return CBC.APP.SC.UTIL.debug("checkWebView: not a webview"),!1;var t=window.CBC.APP.SC.UTIL.getQueryStringParameterValue("appname",e);if(window.CBC.APP.SC.UTIL.getMetadataWhitelist().metadata.whitelist.webviewapps[t]){var n=window.CBC.APP.SC.UTIL.getQueryStringParameterValue("udid",e);return n?(CBC.APP.SC.UTIL.debug("checkWebView: setting deviceId"),n):(CBC.APP.SC.UTIL.debug("checkWebView: no deviceId passed"),!1)}return CBC.APP.SC.UTIL.debug("checkWebView: not a whitelisted app"),!1}(window.document.URL);if(o&&(r.device_id=o),function(e,t){t.event_type=e}(i,r),"LOADED"===i){var s=CBC.APP.SC.UTIL.determineWebViewFeatureName(window);if(s){var l=CBC.APP.ANA.VALIDATORS.Common.getFeatureNameRegex(),c=!0,u=!1,d=void 0;try{for(var p,g=l[Symbol.iterator]();!(c=(p=g.next()).done);c=!0){var f=p.value;if(RegExp(f).test(s)){r.event_properties.feature||(r.event_properties.feature={}),r.event_properties.feature.name=s;break}}}catch(e){u=!0,d=e}finally{try{c||null==g.return||g.return()}finally{if(u)throw d}}}}if(Object.keys(r).length<1)return CBC.APP.SC.UTIL.debug("EventTracker - Warning: no event properties were sent"),!1;if("READ"===i){if("index"===r.event_properties.content.type)return CBC.APP.SC.UTIL.debug("READ validation failed, content = index"),!1;"comments"===r.event_properties.content.type&&(r.event_properties.content.cms||(r.event_properties.content.cms="polopoly"),r.event_properties.referrer.department&&delete r.event_properties.referrer.department,r.event_properties.referrer.pillar&&delete r.event_properties.referrer.pillar),["story","segment","blogentry"].includes(CBC.APP.SC.DTM.DATA.contenttype)||m(r)}else if("LOADED"===i)["story","segment","blogentry"].includes(CBC.APP.SC.DTM.DATA.contenttype)||(m(r),v(r));else if("PLAYED"===i&&!CBC.APP.ANA.VALIDATORS.Common.validatePlayedContentType(r))return CBC.APP.SC.UTIL.debug("mir payload failed PLAYED validation: "+JSON.stringify(r)),!1;if("LOADED"!==i&&"READ"!==i&&m(r),"LOADED"!==i&&v(r),["LOADED","READ","STREAMED","WATCHED"].includes(i)||(r.event_properties.sponsor&&delete r.event_properties.sponsor,r.event_properties.content&&r.event_properties.content.partner&&delete r.event_properties.content.partner),r.event_properties.sponsor&&r.event_properties.sponsor.id&&delete r.event_properties.sponsor.id,r.event_properties.content.partner&&r.event_properties.content.partner.id&&delete r.event_properties.content.partner.id,r.user&&r.user.reason){var h=CBC.APP.SC.UTIL.getMetadataWhitelist().metadata.whitelist;("SUBSCRIBED"!==i&&"UNSUBSCRIBED"!==i||"SUBSCRIBED"===i&&!0!==h.user.reason.SUBSCRIBED[r.user.reason])&&delete r.user.reason}return["STREAMED","WATCHED"].includes(i)&&((r.event_properties.content&&r.event_properties.content.media&&"nan"==r.event_properties.content.media.episodenumber||"nan"==r.event_properties.content.media.seasonnumber)&&(r.event_properties.content.media.episodenumber&&delete r.event_properties.content.media.episodenumber,r.event_properties.content.media.seasonnumber&&delete r.event_properties.content.media.seasonnumber),r.event_properties.content&&r.event_properties.content.media&&"nan"==r.event_properties.content.media.publishedTime&&delete r.event_properties.content.media.publishedTime,"watch"==r.event_properties.app.pillar&&"ott-web-app"==r.event_properties.app.name&&(r.event_properties.content.cms="ibm-cloud-video")),CBC.APP.ANA.DISPATCHERS.MirRoar.dispatch(r),r},getCBCPlusID:h,getCBCVisitorID:y,getTimeStamp:function(){return(new Date).getTime()}}}(),function(){"use strict";try{CBC.APP.SC.masterSwitch=JSON.parse('{"switches":{"adobe":true,"amplitude":true,"comscore":true,"conductrics":true,"cxense":true,"facebook":true,"googlecloud":true,"idexchange":true,"legacysclt":true,"MirRoar":true},"amplitude":{"eventshash":{"COMMENTED":true,"READ":true,"SCANNED":true,"LISTENED":true,"SHARED":true,"ENTERED":true,"SUBMITTED":true,"SIGNED IN":true,"SIGNED OUT":true,"SUBSCRIBED":true,"UNSUBSCRIBED":true,"SELECTED":true,"SEARCHED":true,"FAVOURITED":true,"UNFAVOURITED":true,"OPENED":true,"PLAYED":true,"CLOSED":true,"RESIZED":true,"NEXT":true,"PREVIOUS":true,"OPTED IN":true,"OPTED OUT":true,"ONBOARDED":true,"LOADED":true,"LOADED MORE":true,"STREAMED":true,"VIEWED AD":true,"START WEB SESSION":true,"SET PREFERENCE":true,"WATCHED":true},"sponsorverbs":{"LOADED":true,"READ":true,"STREAMED":true,"WATCHED":true},"partnerverbs":{"LOADED":true,"READ":true,"STREAMED":true,"WATCHED":true}},"googlecloud":{"url":"//ess.data.cbc.ca/v0/set"},"idexchange":{"endpoint":"https://uie.data.cbc.ca/v0/","context":"http://vocab.data.cbc.ca/"},"omniture":{"saccount":"cbc-production","watch":"cbc-production"}}')}catch(e){CBC.APP.SC.DEBUG&&console.log("ERROR: Master switch ESI not working. Using AJAX.");var t="//www.cbc.ca/network/includes/stats/master-switch.json";CBC.APP.SC.UTIL.makeGETRequest(t,{success:function(e,t){CBC.APP.SC.masterSwitch=JSON.parse(e.responseText)},failure:function(e,t){console.log("ERROR: Unable to talk to config URL: "+t.failure.uri)}},{success:{uri:t},failure:{uri:t}},0,0,{timeout:2e3,cb:function(){console.log("ERROR: AJAX request for //www.cbc.ca/network/includes/stats/master-switch.json timed out.")}})}}(),function(){"use strict";try{CBC.APP.SC.metadataWhitelist=JSON.parse('{"metadata":{"whitelist":{"content":{"area":{"arts":true,"comedy":true,"homepage":true,"kids":true,"lifestyle":true,"listen":true,"misc":true,"music":true,"news":true,"podcasts":true,"radio":true,"sports":true,"subscriptions":true,"tv":true,"video":true},"cms":{"alan":true,"audio-db":true,"broadcast-schedule-api":true,"expression-engine":true,"ibm-cloud-video":true,"ibm-video-cloud":true,"mpx":true,"neuro":true,"polopoly":true,"program-guide":true,"scoop":true},"embedded":{"media":{"audio":true,"photo":true,"photogallery":true,"video":true}},"media":{"audiovideo":{"audio":true,"video":true},"genre":{"animation":true,"arts":true,"arts-entertainment":true,"books":true,"business":true,"comedy":true,"documentary":true,"drama":true,"environment-nature":true,"factual-reality":true,"health":true,"lifestyle":true,"music":true,"music-blues":true,"music-celtic":true,"music-classical":true,"music-country":true,"music-electronic":true,"music-folk":true,"music-hip-hop":true,"music-indigenous":true,"music-jazz":true,"music-j-pop":true,"music-k-pop":true,"music-latin":true,"music-other":true,"music-pop":true,"music-r&b-soul":true,"music-reggae":true,"music-rock":true,"music-singer-songwriter":true,"music-soca":true,"music-world":true,"news":true,"politics":true,"society-culture":true,"sports":true,"technology":true},"live":{"streams-24-7":{"video":{"cbc-news-calgary":true,"cbc-news-charlottetown":true,"cbc-news-edmonton":true,"cbc-news-fredericton":true,"cbc-news-halifax":true,"cbc-news-montreal":true,"cbc-news-network":true,"cbc-news-ottawa":true,"cbc-news-regina":true,"cbc-news-st-johns":true,"cbc-news-toronto":true,"cbc-news-vancouver":true,"cbc-news-windsor":true,"cbc-news-winnipeg":true,"cbc-news-yellowknife":true},"audio":{"music-atlantic":true,"music-central":true,"music-eastern":true,"music-mountain":true,"music-pacific":true,"radio-one-barrie":true,"radio-one-calgary":true,"radio-one-charlottetown":true,"radio-one-cornerbrook":true,"radio-one-edmonton":true,"radio-one-fredericton":true,"radio-one-goose-bay":true,"radio-one-grand-falls":true,"radio-one-halifax":true,"radio-one-inuvik":true,"radio-one-iqaluit":true,"radio-one-kamloops":true,"radio-one-kewlowna":true,"radio-one-kingston":true,"radio-one-kitchener-waterloo":true,"radio-one-london":true,"radio-one-moncton":true,"radio-one-montreal":true,"radio-one-north-quebec":true,"radio-one-ottawa":true,"radio-one-peterborough":true,"radio-one-prince-george":true,"radio-one-quebec-city":true,"radio-one-regina":true,"radio-one-saint-john":true,"radio-one-saskatoon":true,"radio-one-st-johns":true,"radio-one-sudbury":true,"radio-one-sydney":true,"radio-one-thunderbay":true,"radio-one-toronto":true,"radio-one-vancouver":true,"radio-one-victoria":true,"radio-one-whitehorse":true,"radio-one-windsor":true,"radio-one-winnipeg":true,"radio-one-yellowknife":true}}},"liveondemand":{"linear":true,"live":true,"on-demand":true},"show":{"watch":{"7-second-shake-ups":true,"21-thunder":true,"1001-nuits":true,"about-sex":true,"absolutely-canadian":true,"according-to-kids":true,"ackley-bridge":true,"addison":true,"africa-britain-a-forgotten-history":true,"africa-with-ade-adepitan":true,"air-farce":true,"air-farce-new-years-eve-2019":true,"alias-grace":true,"almost-never":true,"anaanas-tent":true,"anaanas-tent-inuktitut":true,"anne-with-an-e":true,"ari-cui-cui":true,"ariana-grande-live-in-london":true,"art-death-taxes":true,"art-hurts":true,"art-is-my-country":true,"arthur":true,"artzooka":true,"ashbridge":true,"asian-heritage-month":true,"at-the-table":true,"back-in-time-for-christmas":true,"back-in-time-for-dinner":true,"back-in-time-for-dinner-uk":true,"back-in-time-for-school":true,"back-in-time-for-tea":true,"back-in-time-for-tea-new":true,"back-in-time-for-the-weekend":true,"back-in-time-for-winter":true,"backstage-pass":true,"baghdad-central":true,"banished":true,"baroness-von-sketch-show":true,"barracuda":true,"battle-of-the-blades":true,"beccas-bunch":true,"becoming-canadian":true,"being-erica":true,"bellevue":true,"best-laid-plans":true,"big-block-singsong":true,"bit-playas":true,"black-cop":true,"black-history-month":true,"blackstone":true,"blue-note-records-beyond-the-notes":true,"bollywood-the-worlds-biggest-film-industry":true,"bondi-vet":true,"bookaboo":true,"born-to-kill":true,"brand-canada":true,"brassic":true,"brigade-animo":true,"britannia":true,"broad-appeal-living-with-es":true,"burden-of-truth":true,"butterfly":true,"but-im-chris-jericho":true,"calgary-stampede":true,"camelot":true,"can-adoo-d-aday":true,"canada-150":true,"canada-a-peoples-history":true,"canada-the-story-of-us":true,"canada-votes-ask-cbc-news":true,"canada-votes-cbc-explains":true,"canada-reads":true,"canadas-a-drag":true,"canadas-smartest-person":true,"canadas-smartest-person-junion":true,"canadian-feature-films":true,"canadian-history":true,"canadian-improv-games":true,"canadian-reflections":true,"canadian-screen-awards":true,"catastrophe":true,"catch-the-dream-bios-with-adam-beach":true,"canadas-smartest-person-junior":true,"cavendish":true,"caught":true,"cbc-arts-presents-queer-pride-inside-a-buddies-in-bad-times-cabaret":true,"cbc-arts-exhibitionists":true,"cbc-arts-specials":true,"cbc-docs-pov":true,"cbc-kids-5-hour-free-for-all":true,"cbc-kids-celebrates-indigenous-month":true,"cbc-kids-news":true,"cbc-news-america-votes-with-carole-mac-neil":true,"cbc-music-first-play-live":true,"cbc-music-junos-sessions":true,"cbc-music-live":true,"cbc-music-the-mix":true,"cbc-music-the-radar":true,"cbc-music-specials":true,"cbc-news-coping-with-covid":true,"cbc-news-specials":true,"cebl-championship-2019":true,"cebl-summer-series-2020":true,"celebrating-indigenous-storytellers":true,"celebrating-pride-month":true,"cest-comme-ca-que-je-taime":true,"charley-pride-im-just-me":true,"chewing-gum":true,"chicken-girls":true,"chirp":true,"clearwater-farm":true,"clearwater-farm-kids-challenge":true,"coming-in":true,"coping-with-covid":true,"commonwealth-games":true,"cooking-with-joy":true,"coronation-street":true,"coronavirus-is-your-house-clean-enough":true,"coroner":true,"coyotes-crazy-smart-science-show":true,"cracked":true,"crash-gallery":true,"crawford":true,"da-kink-in-my-hair":true,"da-vincis-city-hall":true,"da-vincis-inquest":true,"daisy-the-gumboot-kids":true,"daniel-tigers-neighbourhood":true,"dans-la-toile":true,"das-boot":true,"daryn-jones-live":true,"david-attenboroughs-great-barrier-reef":true,"decoys":true,"detention-adventure":true,"diggstown":true,"disrupting-design":true,"docs-special":true,"doc-zone":true,"docs-special-presentation":true,"documentary-now":true,"documentary-specials":true,"docs-specials":true,"does-it-fart":true,"dogs-behaving-badly":true,"dot":true,"downton-abbey":true,"dragons-den":true,"drakes-plan":true,"dreaming-of-a-jewish-christmas":true,"due-south":true,"durham-county":true,"eadweard":true,"earthling-house-huntress":true,"edgemont":true,"elizabeth":true,"elvis-goes-there":true,"embarrassing-pets":true,"emerald-code":true,"emerald-code-decoded":true,"emerald-code-ste-mily":true,"endlings":true,"escape-to-the-chateau":true,"escape-to-the-chateau-diy":true,"escape-to-the-chateau-designing-the-dream":true,"escape-to-the-chateau-restoring-the-dream":true,"escape-to-the-chateau-the-great-outdoors":true,"escape-to-the-country":true,"everything-indigenous":true,"extraordinary-canadians":true,"faits-divers":true,"family-feud-canada":true,"farm-crime":true,"federal-election-2019-leaders-english-debate":true,"federal-election-2019-leaders-french-debate":true,"films":true,"find-me-in-paris":true,"firsthand":true,"forage":true,"fortitude":true,"fortunate-son":true,"four-in-the-morning":true,"frankie-drake-mysteries":true,"freaks-geeks":true,"fred-penners-place":true,"fridge-wars":true,"from-the-vaults":true,"from-the-vaults-music-archive-series":true,"further-back-in-time-for-dinner":true,"future-history":true,"gameface":true,"gary-and-his-demons":true,"genese":true,"global-goal-unite-for-our-future":true,"good-people-with-mark-sakamoto":true,"grace-beside-me":true,"grand-designs":true,"grand-designs-australia":true,"grand-designs-house-of-the-year":true,"greyzone":true,"halifax-comedy-festival":true,"hang-ups":true,"hannah-gadsbys-nakedy-nudes":true,"hannah-gadsbys-oz":true,"hatching-matching-dispatching":true,"heartland":true,"hello-goodbye":true,"hey-lady":true,"high-arctic-haulers":true,"holiday-programming":true,"holiday-rap-battles":true,"hollow-in-the-land":true,"holy-baloney":true,"hoop-talks":true,"hope-works":true,"how-to-buy-a-baby":true,"hudson":true,"human-town":true,"i-ship-it":true,"in-our-backyard-climate-change":true,"in-the-long-run":true,"in-the-making":true,"in-the-studio-with-steven-sabados":true,"inside-an-athletes-head":true,"interrupt-this-program":true,"intelligence":true,"jackie-robinson":true,"jade-of-death":true,"jamie-and-jimmys-food-fight-club":true,"jamies-15-minute-meals":true,"jamies-30-minute-meals":true,"jamies-christmas-with-bells-on":true,"jamies-cracking-christmas":true,"jamies-super-food":true,"jamies-super-food-family-classics":true,"jaxon-and-songs-maple-mystery":true,"jensplaining":true,"jessie-the-gumboot-kids":true,"jekyll-and-hyde":true,"jiggi-jump":true,"jet-age":true,"jonah":true,"junior-baking-show":true,"junos-365-songwriters-circle":true,"just-for-laughs-gags":true,"just-for-laughs-galas":true,"karena-kaseys-foreign-flavours":true,"keep-calm-and-decolonize":true,"keep-contains-asset":true,"keep-exact-asset":true,"keep-series-sit":true,"keep-starts-with-asset":true,"keep-starts-with-asset-promoted":true,"kenny-vs-spenny":true,"kids-block-test":true,"kids-in-the-hall":true,"kims-convenience":true,"kims-convenience-korean-subtitles":true,"kingdom-force":true,"kiri":true,"kiri-and-lou":true,"land-and-sea-network":true,"land-and-sea-nfld":true,"late-night-in-the-studio":true,"lazoo":true,"les-beaux-malaises":true,"life-with-derek":true,"line-of-duty":true,"little-dog":true,"little-dorrit":true,"little-women":true,"local-news-specials":true,"local-specials":true,"looking-for-alaska":true,"lost-home-movies-of-the-nazis":true,"love-letters-from-everest":true,"love-monster":true,"luther":true,"maamuitaau":true,"madiba":true,"made-in-canada":true,"malory-towers":true,"man-of-the-kitchen":true,"mansbridge-one-on-one":true,"marchlands":true,"marketplace":true,"meet-your-maker":true,"mehdi-et-val":true,"michael-every-day":true,"michael-tuesdays-thursdays":true,"michael-moone-boy":true,"mighty-mustangs":true,"mind-fudge":true,"mings-dynasty":true,"misfits":true,"miss-persona-psa":true,"moblees":true,"mohawk-girls":true,"molly-of-denali":true,"moon-and-me":true,"moone-boy":true,"mother-father-son":true,"mr-d":true,"mr-student-body-president":true,"murdoch-mysterie":true,"murdoch-mysteries":true,"my-90-year-old-roommate":true,"my-big-family-farm":true,"my-family-and-the-galapagos":true,"my-grandparents-war":true,"my-mad-fat-diary":true,"my-kitchen-can-be-anything":true,"nadiyas-asian-odyssey":true,"nadiyas-family-favourites":true,"nadiyas-food-adventure":true,"narcoleap":true,"national-idigenous-history-month":true,"national-treasure":true,"newborn-moms":true,"nfb":true,"nikola-tesla-and-the-end-of-the-world":true,"nirvanna-the-band-the-show":true,"normal-people":true,"northern-rescue":true,"off-kilter":true,"oh-canada-retro-favourites":true,"ollie-the-boy-who-became-what-he-ate":true,"olympics":true,"on-the-ropes":true,"one-world-together-at-home":true,"ordeal-by-innocence":true,"pan-american-games":true,"paralympics":true,"par-ici-la-magie":true,"paralympic-super-series-rewind-on-cbc":true,"paul-o-grady-for-the-love-of-dogs":true,"paul-o-grady-for-the-love-of-dogs-india":true,"paul-ogrady-for-the-love-of-animals-india":true,"paul-ogradys-animal-orphans":true,"pen-15":true,"portlandia":true,"power-politics":true,"power-politics-with-vassy-kapelos":true,"pride-collection":true,"prime-minister-justin-trudeau-answer-kids-questions-about-covid-19":true,"puppy-school":true,"pure":true,"pure-uk":true,"q-with-tom-power":true,"queens":true,"queer-self-portraits":true,"rachel-khoos-kitchen-notebook-cosmopolitan-cook":true,"rachel-khoos-kitchen-notebook-melbourne":true,"raised-by-wolves":true,"rbc-training-ground":true,"re-play":true,"recap":true,"red-bull":true,"red-button":true,"red-ruby":true,"reel-east-coast":true,"republic-of-doyle":true,"remy-boo":true,"rick-mercer-report":true,"riftworld-chronicles":true,"road-to-the-olympic":true,"rock-n-roll-rhymes":true,"ronny-chieng-international-student":true,"ruby-skye-p-i":true,"save-me":true,"safe-harbour":true,"save-me-uk":true,"save-with-jamie":true,"schitts-creek":true,"scotiabank-giller-prize":true,"scout-the-gumboot-kids":true,"searchlight":true,"secret-life-of":true,"secret-life-of-farm-animals":true,"secrets-of-the-royals-inside-the-crown":true,"seen-heard":true,"serie-noire":true,"shitty-boyfriends":true,"shoot-the-messenger":true,"short-docs":true,"short-film-face-off":true,"sick-of-it":true,"skindigenous":true,"slings-arrows":true,"small-talk":true,"snapshots":true,"space-dragon-and-kim":true,"splatalot":true,"ss-gb":true,"staying-home-staying-healthy":true,"stella-and-sam":true,"still-standing":true,"strange-empire":true,"stratford-presents":true,"stockholm":true,"street-legal":true,"stronger-together-tous-ensemble":true,"succulent-six":true,"sunshine-kings":true,"super-agent-jon-le-bon":true,"taken":true,"take-my-wife":true,"talent-drivers":true,"tall-boyz":true,"teepee-time":true,"teepee-time-mikmaq":true,"terrific-women":true,"the-410":true,"the-a-word":true,"the-abc-murders":true,"the-adventures-of-napkin-man":true,"the-adventures-of-paddington":true,"the-amazing-gayl-pile":true,"the-art-of-the-steal":true,"the-art-show":true,"the-artists":true,"the-beautiful-lie":true,"the-best-of-george":true,"the-biggest-little-railway-in-the-world":true,"the-book-of-negroes":true,"the-detectives":true,"the-dog-house":true,"the-durrells":true,"the-englishmans-boy":true,"the-family-law":true,"the-fifth-estate":true,"the-filmmakers":true,"the-furchester-hotel":true,"the-future-of-film-showcase":true,"the-goods":true,"the-great-british-baking-show":true,"the-great-british-baking-show-masterclass":true,"the-great-canadian-baking-show":true,"the-great-human-odyssey":true,"the-hunting":true,"the-investigators":true,"the-journey-home-midnight-sun":true,"the-juno-awards":true,"the-last-post":true,"the-little-drummer-girl":true,"the-little-paris-kitchen-cooking-with-rachel-khoo":true,"the-loch":true,"the-long-song":true,"the-mile-enders":true,"the-miniaturist":true,"the-misadventures-of-romesh-ranganath":true,"the-moblees":true,"the-move":true,"the-national":true,"the-national-presents-face-to-face-with-the-federal-leaders":true,"the-nature-of-things":true,"the-neddeaus-of-duqesne-island":true,"the-new-wave-of-standup":true,"the-newsroom":true,"the-next-step":true,"the-ninth":true,"the-oland-murder":true,"the-passionate-eye":true,"the-plateaus":true,"the-reluctant-landlord":true,"the-romeo-section":true,"the-secret":true,"the-secret-path":true,"the-slap":true,"the-solutioneers":true,"the-solutioneers-future-minds":true,"the-solutioneers-vlogs":true,"the-sounds":true,"the-special-needs-hotel":true,"the-stats-of-life":true,"the-story-of-rugby":true,"the-strange-chores":true,"the-studio-k-show":true,"the-sunday-scrum":true,"the-thrillusionists":true,"the-tudors":true,"the-tunnel":true,"the-victim":true,"the-weekly":true,"the-whole-truths":true,"the-woodstock-diaries":true,"the-wild-canadian-year":true,"the-writers-block":true,"the-wrong-mans":true,"the-art-works":true,"this-art-works":true,"this-blows":true,"this-country":true,"this-hour-has-22-minutes":true,"this-life":true,"this-time-with-alan-partridge":true,"through-our-eyes-indigenous-short-docs":true,"thunderbirds-are-go":true,"thunder-blanket":true,"timewasters":true,"tom-greens-snow-jam":true,"top-of-the-lake":true,"top-of-the-lake-china-girl":true,"top-ten-event":true,"total-eclipse":true,"toxic-beauty":true,"transformatruc":true,"travel-man-48-hours-in":true,"trickster":true,"trigonometry":true,"triplets-of-belleville":true,"true-and-the-rainbow-kingdom":true,"true-dating-stories":true,"true-north":true,"true-north-calling":true,"trust-me":true,"ultimate-greatness":true,"uncle":true,"under-new-management":true,"undercover":true,"unspeakable":true,"urban-indigenous-proud-shorts":true,"utopia-falls":true,"vanity-fair":true,"versailles":true,"vet-on-the-hill":true,"wallander":true,"wandering-wenda":true,"war-of-the-worlds":true,"warigami":true,"warrior-women-with-lupita-nyongo":true,"we-are-canada":true,"were-funny-that-way-the-virtual-pride-special":true,"what-would-sal-do":true,"whatre-you-at-with-tom-power":true,"when-calls-the-heart":true,"white-house-farm-murders":true,"why-slavery":true,"wild-bill":true,"wild-canada":true,"winnipeg-comedy-festival":true,"winston-rowntrees-peoplewatching":true,"wisting":true,"world-chase-tag":true,"worlds-fastest-gamers":true,"workin-moms":true,"x-company":true,"you-cant-ask-that":true,"you-me":true,"young-and-promising":true,"young-drunk-punk":true,"zoe-valentine":true},"listen":{"--inuit-unikkaangit":true,"-wiihteh---cree":true,"25-best-canadian-debut-albums":true,"35-under-35-canadian-jazz-artists":true,"4korners-raptors-dj-mix-explicit":true,"2050-degrees-of-change":true,"90s-pop":true,"90s-rock":true,"a-new-day":true,"adult-alternative":true,"adult-pop":true,"african-icons":true,"afrobeat":true,"after-the-deadline":true,"afterdark":true,"afternoon-drive":true,"airplay":true,"alberta-at-noon":true,"albertanoon-from-cbc-radio-highlights":true,"all-in-a-day":true,"all-in-a-weekend":true,"all-in-a-weekend-montreal":true,"all-points-west":true,"alone-a-love-story":true,"alt-country":true,"ambushed":true,"arabic-classics":true,"as-it-happens":true,"as-it-happens-from-cbc-radio":true,"as-maple-as":true,"as-me-with-sinad":true,"ashumiyi":true,"asking-for-it":true,"atlantic-voice":true,"bachmans-guitarchives":true,"back-story":true,"backstage":true,"ballet":true,"baroque":true,"bc-today":true,"because-news":true,"because-news-from-cbc-radio":true,"beethoven":true,"ben-heppners-opera-gems":true,"best-of-drive":true,"best-operas-ever":true,"bhangra-plus":true,"big-band":true,"big-city-small-world":true,"blue-sky":true,"blues-canada":true,"blues-classics":true,"bodies-of-work":true,"bollywood-idols":true,"bossa-brazil":true,"boushie":true,"brainwashed":true,"breakaway":true,"burden-of-truth":true,"calgary-eyeopener":true,"campus":true,"canada-reads":true,"canadian-chanson":true,"canadian-classical-performers":true,"canadian-composers":true,"canadian-country":true,"canadian-electronic":true,"canadian-hip-hop":true,"canadian-love-songs":true,"canadian-metal":true,"canadian-songwriter":true,"cape-bretons-information-morning-from-cbc-radio-nova-scotia-highlights":true,"carrie-low-versus":true,"caught---70s-rock":true,"cbc-books":true,"cbc-kids":true,"cbc-music-festival-2019":true,"cbc-music-festival-2020":true,"cbc-music-live-sessions-and-concerts":true,"cbc-music-top-20":true,"cbc-newfoundland-morning":true,"cbc-news-at-issue":true,"cbc-news-hourly-edition":true,"cbc-news-the-house":true,"cbc-news-the-pollcast":true,"cbc-news-the-world-at-six":true,"cbc-news-the-world-this-hour":true,"cbc-news-world-report":true,"cbc-radio-3":true,"cbc-radio-specials":true,"cbc-records":true,"cbc-tvs-crawford":true,"celtic":true,"central-morning":true,"centre-stage":true,"cest-formidable":true,"chamber":true,"chill-out":true,"choral":true,"choral-concert":true,"chosen-family":true,"christmas-sing-in":true,"cinq-a-six":true,"classic-country":true,"classic-prog":true,"classic-soul":true,"classical-britain":true,"classical-france":true,"classical-germany":true,"classical-hits-from-the-toybox":true,"classical-holidays":true,"classical-in-love":true,"classical-italy":true,"classical-music-for-celebration":true,"classical-music-for-reflection":true,"classical-russia":true,"classical-serenity":true,"colin-james-blues":true,"columnists-from-cbc-radio":true,"comedy-factory-from-cbc-radio":true,"cost-of-living":true,"country-christmas":true,"cross-country-checkup":true,"cross-country-checkup-from-cbc-radio":true,"cross-talk":true,"day-6":true,"day-6-from-cbc-radio":true,"daybreak-alberta":true,"daybreak-kamloops":true,"daybreak-montreal":true,"daybreak-north":true,"daybreak-south":true,"deep-trouble":true,"definitely-not-the-opera":true,"dehcho-dene-south-slavey":true,"denesuline-yatia":true,"diggstown":true,"disco":true,"drake--co.":true,"dub":true,"east-coast-music-hour":true,"escaping-nxivm":true,"essential-classics":true,"edmonton-am":true,"eli-glasner-on-film-from-cbc-radio":true,"evil-by-design":true,"eyou-dipjimoon-cree":true,"fault-lines":true,"film-scores":true,"first-day-back":true,"flights-of-fancy-":true,"folk-classics":true,"frankies-jazz":true,"fresh-air":true,"front-burner":true,"funk":true,"garden-talk":true,"glasner-on-film":true,"go-the-distance":true,"golden-era":true,"gospel":true,"hard-to-stomach":true,"haunted-halloween":true,"heartland":true,"here-and-now-toronto":true,"heroes-hustlers-and-horsemen":true,"hip-hop":true,"hit-musicals":true,"homerun":true,"hot-air":true,"hot-country":true,"hunting-warhead":true,"ideas":true,"in-concert-revival-hour":true,"in-town-and-out":true,"inappropriate-questions":true,"india-roots":true,"indie":true,"indigenous-canada":true,"indigenous-hip-hop-explicit":true,"indigenous-music-awards-nominees":true,"information-morning---cape-breton":true,"information-morning---fredericton":true,"information-morning-fredericton-from-cbc-radio-new-brunswick-highlights":true,"information-morning---moncton":true,"information-morning-moncton-from-cbc-radio-new-brunswick-highlights":true,"information-morning---ns":true,"information-morning-from-cbc-radio-nova-scotia-highlights":true,"information-morning---saint-john":true,"information-radio---mb":true,"inside-the-junos":true,"island-morning":true,"island-vibe":true,"jazz-in-love":true,"jazz-loves-christmas":true,"jazz-loves-hip-hop":true,"jazz-loves-pop":true,"jazz-masters":true,"jazz-songbook":true,"jazz-with-laila-biali":true,"jets-stream":true,"jukebox-favourites":true,"julie-nesrallahs-tempo":true,"juno-adult-alternative-album-of-the-year":true,"juno-album-of-the-year":true,"juno-alternative-album-of-the-year":true,"juno-artist-of-the-year":true,"juno-blues-album-of-the-year":true,"juno-breakthrough-artist-of-the-year":true,"juno-breakthrough-group-of-the-year":true,"juno-childrens-album-of-the-year":true,"juno-classical-album-of-the-year-large-ensemble":true,"juno-classical-album-of-the-year-solochamber":true,"juno-classical-album-of-the-year-vocal-or-choral-performance":true,"juno-contemporary-christiangospel":true,"juno-contemporary-roots-album-of-the-year":true,"juno-country-album-of-the-year":true,"juno-electronic-album-of-the-year":true,"juno-fan-choice":true,"juno-francophone-album-of-the-year":true,"juno-group-of-the-year":true,"juno-hall-of-fame":true,"juno-heavy-metalhard-music-album-of-the-year":true,"juno-indigenous-music-album-of-the-year":true,"juno-instrumental-album-of-the-year":true,"juno-international-album-of-the-year":true,"juno-jazz-album-of-the-year-group":true,"juno-jazz-album-of-the-year-solo":true,"juno-pop-album-of-the-year":true,"juno-rap-recording-of-the-year":true,"juno-rbsoul-recording-of-the-year":true,"juno-reggae-recording-of-the-year":true,"juno-rock-album-of-the-year":true,"juno-single-of-the-year":true,"juno-songwriter-of-the-year":true,"juno-traditional-roots-album-of-the-year":true,"juno-vocal-jazz-album-of-the-year":true,"juno-world-music-album-of-the-year":true,"k-pop-idols":true,"key-of-a":true,"killers-j-pod-on-the-brink":true,"kiwew":true,"labrador-morning":true,"labrador-morning-from-cbc-radio-nfld.-and-labrador-highlights":true,"latin-jazz":true,"laugh-out-loud":true,"laugh-out-loud-from-cbc-radio":true,"legotsedeh-north-slavey":true,"lets-go":true,"life-jolt":true,"london-morning":true,"love-me":true,"lullaby-rock":true,"mainstreet-cape-breton":true,"mainstreet-halifax-from-cbc-radio":true,"mainstreet-ns":true,"mainstreet-pei":true,"maritime-connection":true,"maritime-noon":true,"maritime-noon-from-cbc-radio-highlights":true,"marvins-room":true,"marvins-room-rb":true,"masters-of-reinvention-pandemic-rising":true,"meditation":true,"meet-the-riders":true,"metal":true,"metro-morning":true,"metro-morning-from-cbc-radio-toronto-highlights":true,"mic-drop":true,"mid-century-modern":true,"midday-cafe":true,"missing-murdered-finding-cleo":true,"modern-masters":true,"montreal-jazz-festival":true,"montreapolis":true,"more-with-anna-maria-tremonti":true,"morning-north":true,"morning-north-from-cbc-radio-sudbury-highlights":true,"motown-in-love":true,"movie-magic":true,"muddied-water":true,"music-comes-alive":true,"music-from-the-crypt":true,"my-playlist":true,"new-fire":true,"new-wave":true,"north-by-northwest":true,"north-by-northwest-from-cbc-radio-british-columbia-highlights":true,"northwind":true,"now-or-never":true,"off-guard":true,"old-school":true,"on-drugs":true,"on-the-coast":true,"on-the-go":true,"on-the-island":true,"on-the-ledge":true,"ontario-morning-from-cbc-radio":true,"ontario-today":true,"ontario-today-phone-ins-from-cbc-radio":true,"orchestral":true,"other-peoples-problems":true,"ottawa-morning":true,"out-in-the-open":true,"party-lines":true,"pei-pulse":true,"personal-best":true,"phil-dwyers-jazz-canada":true,"piano":true,"picking-up-the-pieces":true,"players-own-voice":true,"playme":true,"podcast-playlist":true,"podcast-playlist-from-cbc-radio":true,"polaris-picks":true,"polaris-prize-shortlist-special":true,"pop-40":true,"pop-canada":true,"pop-chat":true,"pop-christmas":true,"power-and-politics":true,"powwow":true,"pride":true,"punk":true,"pyc-podcast":true,"q":true,"q-the-podcast-from-cbc-radio":true,"q-with-tom-power":true,"quadriga":true,"quebec-am":true,"quirks-and-quarks":true,"quirks-and-quarks-from-cbc-radio":true,"radio-active":true,"radio-noon-manitoba":true,"radio-noon-montreal":true,"radio-noon-quebec":true,"radio-west":true,"randy-bachmans-vinyl-tap":true,"rb-canada":true,"recall":true,"recall-how-to-start-a-revolution":true,"reclaimed":true,"reggae":true,"renaissance-splendour":true,"rewind":true,"rich-terfrys-off-ramp":true,"roadtrip":true,"rock":true,"rock-canada":true,"rock-classics":true,"rockabilly":true,"round-dance":true,"saddest-songs":true,"salsa":true,"sanctioned-the-arrest-of-a-telecom-giant":true,"saskatchewan-weekend":true,"saskatoon-morning":true,"saturday-afternoon-at-the-opera-best-operas-ever":true,"searchlight":true,"seasonal-favourites":true,"seat-at-the-table":true,"secrets-of-the-fifth-estate":true,"shift---nb":true,"sickboy":true,"singer-songwriter":true,"ska-essentials":true,"sleepover":true,"slumtown":true,"smooth-hits":true,"smooth-jazz":true,"soca":true,"sold":true,"someone-knows-something":true,"sonica":true,"south-asian-mix":true,"spark":true,"spark-from-cbc-radio":true,"spin-reduxit-from-cbc-radio-new-brunswick":true,"sports-talk":true,"st-johns-morning-show":true,"strombo":true,"summer-songs":true,"sunday-edition":true,"superior-morning":true,"tai-asks-why":true,"tapestry":true,"tapestry-from-cbc-radio":true,"this-is-that":true,"trails-end":true,"the-70s":true,"the-80s":true,"the-afternoon-edition---sask":true,"the-band-played-on":true,"the-base":true,"the-best-of-the-disruptors":true,"the-bridge":true,"the-broadcast":true,"the-candy-palmater-show":true,"the-cbc-election-pollcast":true,"the-comedy-factory":true,"the-current":true,"the-current-weekly":true,"the-debaters":true,"the-doc-project":true,"the-dose":true,"the-early-edition":true,"the-early-edition-from-cbc-radio-british-columbia-highlights":true,"the-eyeopener-from-cbc-radio-calgary-highlights":true,"the-fridge-light":true,"the-homestretch":true,"the-hook":true,"the-house":true,"the-house-from-cbc-radio":true,"the-in-concert-revival-hour":true,"the-irrelevant-show":true,"the-ledge":true,"the-life-game":true,"the-loop":true,"the-morning-edition---k-w":true,"the-morning-edition---sask":true,"the-morning-edition-from-cbc-radio-saskatchewan-highlights":true,"the-next-150":true,"the-next-call":true,"the-next-chapter":true,"the-next-chapter-from-cbc-radio":true,"the-pit":true,"the-political-panel-from-cbc-news-new-brunswick":true,"the-secret-life-of-canada":true,"the-shadows":true,"the-st-johns-morning-show-from-cbc-radio-nfld-and-labrador-highlights":true,"the-story-from-here":true,"the-story-store":true,"the-strombo-show":true,"the-sunday-edition":true,"the-sunday-magazine":true,"the-trailbreaker":true,"the-village":true,"the-weekend-morning-show-manitoba":true,"the-weekender":true,"the-world-this-weekend":true,"they--us":true,"this-is-my-music":true,"this-is-not-a-drake-podcast":true,"tide-godi-tlicho":true,"tom-allen-presents":true,"tom-powers-deep-roots":true,"tony-ho":true,"trickster":true,"tusaavik":true,"tuttavik-inuktitut":true,"uncover":true,"under-the-covers":true,"under-the-influence":true,"under-the-influence-from-cbc-radio":true,"unlocking-brysons-brain":true,"unlocking-the-fountain":true,"unreserved":true,"unspeakable":true,"up-north":true,"up-to-speed":true,"utopia-falls":true,"venturing-out":true,"vinyl-cafe":true,"walking-wascana":true,"weekend-am":true,"weekend-mornings":true,"weekend-morning-manitoba":true,"west-of-centre":true,"what-on-earth":true,"white-coat-black-art":true,"white-coat-black-art-on-cbc-radio":true,"windsor-morning":true,"winnipeg-famous":true,"winschgaoug-cree":true,"wiretap":true,"women-who-have-changed-music":true,"woodstock":true,"workout-mix":true,"world":true,"world-on-fire":true,"writers-and-company":true,"writers-and-company-from-cbc-radio":true,"yukon-morning":true}},"sport":{"alpine-skiing":true,"aquatics":true,"archery":true,"athletics":true,"badminton":true,"baseball":true,"basketball":true,"beach-volleyball":true,"biathlon":true,"bmx":true,"boccia":true,"bobsleigh":true,"boxing":true,"canoe-kayak":true,"cross-country-skiing":true,"curling":true,"cycling":true,"diving":true,"equestrian":true,"fencing":true,"figure-skating":true,"football":true,"freestyle-skiing":true,"golf":true,"gymnastics":true,"handball":true,"hockey":true,"judo":true,"lacrosse":true,"luge":true,"marathon":true,"nordic-combined":true,"para-ice-hockey":true,"pentathlon":true,"rodeo":true,"rowing":true,"rugby":true,"sailing":true,"shooting":true,"skateboarding":true,"skeleton":true,"ski-jumping":true,"sliding":true,"soccer":true,"softball":true,"snowboarding":true,"speed-skating":true,"swimming":true,"table-tennis":true,"taekwondo":true,"tennis":true,"track-and-field":true,"trampoline":true,"triathlon":true,"volleyball":true,"waterpolo":true,"wheelchair-basketball":true,"weightlifting":true,"wheelchair-curling":true,"wheelchair-rugby":true,"wrestling":true,"youth-olympics":true},"streamtype":{"linear":true,"live":true,"on-demand":true},"type":{"broadcast":true,"excerpt":true,"event-coverage":true,"full-program":true,"interview":true,"raw-video":true,"raw-audio":true,"tutorial":true}},"tier":{"authenticated":true,"free":true,"premium":true},"type":{"album":true,"artist":true,"audioclip":true,"authorbio":true,"bio":true,"blogentry":true,"comments":true,"episode":true,"error":true,"feature":true,"game":true,"index":true,"newsletter":true,"page":true,"photogallery":true,"podcast":true,"recipe":true,"schedule":true,"segment":true,"sponsoredcontent":true,"story":true,"videoclip":true}},"app":{"pillar":{"feed":true,"legacy":true,"legacyee":true,"listen":true,"lwf":true,"watch":true},"name":{"ci-amazon-alexa":true,"ci-google-assistant":true,"ci-microsoft-cortana":true,"fia":true,"gamp":true,"kids-fantasy-hockey-web-app":true,"kids-web-app":true,"listen-web-app":true,"lite-web-app":true,"music-android-app":true,"music-ios-app":true,"music-tvos-app":true,"music-web-app":true,"news-android-app":true,"news-android-tv-app":true,"news-ios-app":true,"news-tvos-app":true,"newsletter-web-app":true,"ocelot":true,"ott-android-app":true,"ott-ios-app":true,"ott-web-app":true,"radio-android-app":true,"radio-ios-app":true,"sports-android-app":true,"sports-ios-app":true}},"user":{"tier":{"authenticated":true,"free":true,"premium":true},"reason":{"SUBSCRIBED":{"promotion":true}}},"sponsor":{"name":{"Air Transat":true,"Athabasca University":true,"athabasca-university":true,"Brita":true,"Calm Radio":true,"Canadian Tire":true,"Club Med":true,"CMC Markets":true,"Cogeco":true,"college-universel":true,"Dell Technologies":true,"District Central":true,"Encorp":true,"Gillette":true,"IBM":true,"LCBO":true,"Mastercard":true,"National Gallery of Canada":true,"Oasis":true,"Ontario - Trillium Gift of Life":true,"Product Care Recycling":true,"SAQ":true,"The Salvation Army":true,"ThePowerMBA":true,"Tim Hortons":true,"Tourism Whistler":true,"toyota":true,"Travel Alberta":true,"tvo":true,"Whirlpool":true}},"partner":{"name":{"amplitude-test":true}},"department":{"level3":{"arts":["unscripted"],"comedy":["scripted","unscripted"],"digital-originals":["scripted","unscripted"],"drama":["scripted"],"docs":["unscripted"],"factual":["unscripted"],"life":["unscripted"]},"level2":{"books":["radio"],"british-columbia":["local-services"],"business":["news"],"calgary":["local-services"],"edmonton":["local-services"],"entertainment":["news"],"hamilton":["local-services"],"health":["news"],"indigenous":["local-services"],"kamloops":["local-services"],"kids":["programming"],"kitchener-waterloo":["local-services"],"london":["local-services"],"manitoba":["local-services"],"montreal":["local-services"],"music":["radio"],"new-brunswick":["local-services"],"nfld-&-labrador":["local-services"],"north":["local-services"],"nova-scotia":["local-services"],"opinion":["news"],"ottawa":["local-services"],"pei":["local-services"],"podcast":["radio"],"politics":["news"],"saskatchewan":["local-services"],"saskatoon":["local-services"],"scripted":["programming"],"sudbury":["local-services"],"talk":["radio"],"thunder-bay":["local-services"],"technology":["news"],"toronto":["local-services"],"unscripted":["programming"],"windsor":["local-services"]},"level1":{"digital-archives":true,"homepage":true,"local-services":true,"news":true,"programming":true,"radio":true,"sports":true,"watch":true}},"feature":{"name":{"carousel":true,"content-package":true,"media-embed":true,"media-player":true,"media-playlist-player":true,"more-link":true,"radio-bar":true,"swimlane":true,"vertical-card-list":true},"instance":{"closed-captions":true,"LIVE NOW":true,"News":true,"Arts and Entertainment":true,"Breaking News":true,"Business":true,"Canada":true,"BC":true,"Calgary":true,"Edmonton":true,"Hamilton":true,"Kitchener-Waterloo":true,"London":true,"Manitoba":true,"Maritimes":true,"Montreal":true,"NB":true,"NL":true,"North":true,"NS":true,"Ottawa":true,"PEI":true,"Saskatchewan":true,"Saskatoon":true,"Sudbury":true,"Thunder Bay":true,"Toronto":true,"Windsor":true,"Consumer Life":true,"Health":true,"Indigenous":true,"Local News Shows":true,"Politics":true,"World":true,"Technology and Science":true,"TV Shows":true,"Must Watch":true,"Sports":true,"Aquatics":true,"Baseball":true,"Basketball":true,"Calgary Stampede":true,"Canoe-Kayak":true,"Commonwealth Games":true,"Cricket":true,"Curling":true,"Cycling":true,"Diving":true,"Field Hockey":true,"Figure Skating":true,"Football":true,"Golf":true,"Gymnastics":true,"Hockey":true,"Judo":true,"Olympic Sports":true,"Paralympics":true,"Road to the Olympic Games":true,"Rowing":true,"Rugby":true,"Show Jumping":true,"Skiing":true,"Sliding":true,"Snowboarding":true,"Soccer":true,"Softball":true,"Speed Skating":true,"Surfing":true,"Tennis":true,"Track and Field":true,"Volleyball":true,"Arts":true,"Life":true,"Archives":true,"Music":true,"Docs":true,"My Local":true,"rec-sys":true,"trending":true,"primary-headline":true,"primary-visual":true,"primary-related":true,"secondary-related":true},"position":{"0":true,"1":true,"2":true,"3":true,"4":true,"5":true,"6":true,"7":true,"8":true,"9":true,"10":true},"value":{"off":true,"on":true}},"webviewapps":{"news-ios-app":true,"news-android-app":true,"sports-ios-app":true,"sports-android-app":true,"listen-ios-app":true,"listen-android-app":true}}}}')}catch(e){CBC.APP.SC.DEBUG&&console.log("ERROR: Metadata whitelist ESI not working. Using AJAX.");var t="//www.cbc.ca/network/includes/stats/metadata-whitelist.json";CBC.APP.SC.UTIL.makeGETRequest(t,{success:function(e,t){CBC.APP.SC.metadataWhitelist=JSON.parse(e.responseText)},failure:function(e,t){console.log("ERROR: Unable to talk to metadata whitelist URL: "+t.failure.uri)}},{success:{uri:t},failure:{uri:t}},0,0,{timeout:2e3,cb:function(){console.log("ERROR: AJAX request for //www.cbc.ca/network/includes/stats/metadata-whitelist.json timed out.")}})}}(),function(){"use strict";try{CBC.APP.SC.LOCALGEO=JSON.parse('{"disclaimer":"be a good citizen and store this output in the device session cache","network":{"bandwidth":"5000","throughput":"vhigh"},"geo":{"city":"HAMILTON","continent":"NA","country":"CA","region":"ON","timezone":"EST","latitude":"43.25","longitude":"-79.83"}}')}catch(e){CBC.APP.SC.DEBUG&&console.log("ERROR: Geo ESI not working. Using AJAX.");var t="//www.cbc.ca/network/includes/stats/geo.json";CBC.APP.SC.UTIL.makeGETRequest(t,{success:function(e,t){CBC.APP.SC.LOCALGEO=JSON.parse(e.responseText)},failure:function(e,t){console.log("ERROR: Unable to talk to config URL: "+t.failure.uri)}},{success:{uri:t},failure:{uri:t}},0,0,{timeout:500,cb:function(){console.log("ERROR: AJAX request for //www.cbc.ca/network/includes/stats/geo.json timed out.")}})}}(),function(){"use strict";try{CBC.APP.ANA.WEBABTESTS=JSON.parse('{"map":{"main-search":0,"video-swim-lane":1,"<conductrics-agent-id3>":2,"<conductrics-agent-id4>":3},"tests":[{"id":"a-t4PnTbGTSf","scope":{"url":"www.cbc.ca/search","domnode":"<not-applicable>"},"type":{"archetype":"content-lineup","interface":"conductrics-api"},"variants":[{"id":"a-t4PnTbGTSf|A","label":"status-quo","content":{"title":1,"keyword":1,"_all":1,"cbc-publishedtime":30},"curatedby":"machine"},{"id":"a-t4PnTbGTSf|B","label":"keyword-boost-5","content":{"cbc-keywords":5,"cbc-keywordscollections":5,"cbc-keywordscompany":5,"cbc-keywordslocation":5,"cbc-keywordsorganization":5,"cbc-keywordsperson":5,"cbc-keywordssubject":5,"cbc-publishedtime":30},"curatedby":"machine"},{"id":"a-t4PnTbGTSf|C","label":"keyword-boost-10","content":{"cbc-keywords":10,"cbc-keywordscollections":10,"cbc-keywordscompany":10,"cbc-keywordslocation":10,"cbc-keywordsorganization":10,"cbc-keywordsperson":10,"cbc-keywordssubject":10,"cbc-publishedtime":30},"curatedby":"machine"}]},{"id":"undefined","scope":{"url":"www.cbc.ca/search","domnode":"<not-applicable>"},"type":{"archetype":"content-lineup","interface":"conductrics-api"},"variants":[{"id":"undefined|A","label":"qa boost 1","content":{"title":3,"keyword":5,"_all":1},"curatedby":"machine"},{"id":"undefined|B","label":"qa boost 2","content":{"title":1,"keyword":1,"_all":1,"cbc-publishedtime":30},"curatedby":"machine"}]},{"id":"<conductrics-agent-id3>","scope":{"url":"www.cbc.ca/news/canada/(british-columbia|calgary|edmonton|toronto)$","domnode":".featuredArea"},"type":{"archetype":"content-lineup","interface":"conductrics-api"},"variants":[{"id":"<conductrics-agent-id3>|A","label":"no-change","content":"<api-endpoint-for-list>","curatedby":"human"},{"id":"<conductrics-agent-id3>|B","label":"stream-team-ess","content":"<api-endpoint-for-list>","curatedby":"machine"}]},{"id":"<conductrics-agent-id4>","scope":{"url":"www.cbc.ca/news/canada/toronto/([a-z0-9-]+)([0-9.]+)$","domnode":".trending.detailTrending"},"type":{"archetype":"content-lineup","interface":"conductrics-api"},"variants":[{"id":"<conductrics-agent-id4>|A","label":"trending","content":"<api-endpoint-for-list>","curatedby":"machine"},{"id":"<conductrics-agent-id4>|B","label":"stream-team-ess","content":"<api-endpoint-for-list>","curatedby":"machine"}]},{"id":"a-i1HqVWpHEq","scope":{"url":"www.cbc.ca/search","domnode":"<not-applicable>"},"type":{"archetype":"content-lineup","interface":"conductrics-api"},"variants":[{"id":"a-i1HqVWpHEq|A","label":"keyword-boost","content":{"title":3,"keyword":5,"_all":1},"curatedby":"machine"},{"id":"a-i1HqVWpHEq|B","label":"status-quo-2","content":{"title":1,"keyword":1,"_all":1,"cbc-publishedtime":30},"curatedby":"machine"},{"id":"a-i1HqVWpHEq|C","label":"keyword-dropped","content":{"title":5,"_all":1},"curatedby":"machine"}]}]}')}catch(e){CBC.APP.SC.DEBUG&&console.log("ERROR: Web AB Tests ESI not working. Using AJAX.");var t="//www.cbc.ca/network/includes/stats/web-ab-tests.json";CBC.APP.SC.UTIL.makeGETRequest(t,{success:function(e,t){CBC.APP.ANA.WEBABTESTS=JSON.parse(e.responseText)},failure:function(e,t){console.log("ERROR: Unable to talk to config URL: "+t.failure.uri)}},{success:{uri:t},failure:{uri:t}},0,0,{timeout:500,cb:function(){console.log("ERROR: AJAX request for //www.cbc.ca/network/includes/stats/web-ab-tests.json timed out.")}})}}(),function(){if("function"==typeof window.CustomEvent)return;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}(),CBC.APP.SC.DEBUG=!1;var s_account=s_account||"",ottTest=new RegExp(/^https?:\/\/(gem|watch).*/);s_account=void 0!==window.CBC.APP.SC.masterSwitch&&void 0!==window.CBC.APP.SC.masterSwitch.omniture&&void 0!==window.CBC.APP.SC.masterSwitch.omniture.saccount?void 0!==window.CBC.APP.SC.masterSwitch.omniture.watch&&ottTest.test(document.location.href)?s_account||window.CBC.APP.SC.masterSwitch.omniture.watch:s_account||window.CBC.APP.SC.masterSwitch.omniture.saccount:(ottTest.test(document.location.href),s_account||"cbc-production");var s_cbc_sitecatalyst=window.s_gi(s_account),__org_id__="951720B3535680CB0A490D45@AdobeOrg",__trackingServer__="metrics.cbc.ca",__trackingServerSecure__="smetrics.cbc.ca",e=function(){"use strict";function k(e){return(k="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)})(e)}function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t,n){var i=null==e?void 0:e[t];return void 0===i?n:i}function n(e,t){if(e===t)return 0;var n=e.toString().split("."),i=t.toString().split(".");return function(e){for(var t=/^\d+$/,n=0,i=e.length;n<i;n++)if(!t.test(e[n]))return!1;return!0}(n.concat(i))?(function(e,t){for(;e.length<t.length;)e.push("0");for(;t.length<e.length;)t.push("0")}(n,i),function(e,t){for(var n=0;n<e.length;n++){var i=parseInt(e[n],10),r=parseInt(t[n],10);if(r<i)return 1;if(i<r)return-1}return 0}(n,i)):NaN}function i(e){this.name=this.constructor.name,this.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}function t(){function t(e,t){var n=F(e);return n.length?n.every(function(e){return!!t[e]}):function(t){var e=Object.keys(t);return!!e.length&&e.every(function(e){return!0===t[e]})}(t)}function i(){D(w),k(ge),C(y.status,y.permissions),v.set(y.permissions,{optInCookieDomain:l,optInStorageExpiry:c}),P.execute(Se)}function e(n){return function(e,t){if(!V(e))throw new Error("[OptIn] Invalid category(-ies). Please use the `OptIn.Categories` enum.");return k(pe),Object.assign(w,j(F(e),n)),t||i(),y}}var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=n.doesOptInApply,a=n.previousPermissions,o=n.preOptInApprovals,s=n.isOptInStorageEnabled,l=n.optInCookieDomain,c=n.optInStorageExpiry,u=n.isIabContext,d=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).cookies,p=function(e){return U(e,"function")?e():e}(a);K(p,"Invalid `previousPermissions`!"),K(o,"Invalid `preOptInApprovals`!");var g,f,h,_,m,v=function(e,t){var n=0<arguments.length&&void 0!==e?e:{},i=n.isEnabled,r=n.cookieName,a=(1<arguments.length&&void 0!==t?t:{}).cookies;return i&&r&&a?{remove:function(){a.remove(r)},get:function(){var e=a.get(r),t={};try{t=JSON.parse(e)}catch(e){t={}}return t},set:function(e,t){t=t||{},a.set(r,JSON.stringify(e),{domain:t.optInCookieDomain||"",cookieLifetime:t.optInStorageExpiry||3419e4,expires:!0})}}:{get:be,set:be,remove:be}}({isEnabled:!!s,cookieName:"adobeujs-optin"},{cookies:d}),y=this,C=function(e){var r={};return e.on=function(e,t,n){if(!t||"function"!=typeof t)throw new Error("[ON] Callback should be a function.");r.hasOwnProperty(e)||(r[e]=[]);var i=r[e].push({callback:t,context:n})-1;return function(){r[e].splice(i,1),r[e].length||delete r[e]}},e.off=function(e,t){r.hasOwnProperty(e)&&(r[e]=r[e].filter(function(e){if(e.callback!==t)return e}))},e.publish=function(e){if(r.hasOwnProperty(e)){var t=[].slice.call(arguments,1);r[e].slice(0).forEach(function(e){e.callback.apply(e.context,t)})}},e.publish}(y),P=x(),b=q(p),S=q(o),A=v.get(),T={},E=(m=A,H(b)||m&&H(m)?ge:de),I=(g=S,f=b,h=A,_=j(me,!r),r?Object.assign({},_,g,f,h):_),w=function(e){return JSON.parse(JSON.stringify(e))}(I),k=function(e){return E=e},D=function(e){return I=e};y.deny=e(!1),y.approve=e(!0),y.denyAll=y.deny.bind(y,me),y.approveAll=y.approve.bind(y,me),y.isApproved=function(e){return t(e,y.permissions)},y.isPreApproved=function(e){return t(e,S)},y.fetchPermissions=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=t?y.on(ge,e):be;return!r||r&&y.isComplete||o?e(y.permissions):t||P.add(Se,function(){return e(y.permissions)}),n},y.complete=function(){y.status===pe&&i()},y.registerPlugin=function(e){if(!e||!e.name||"function"!=typeof e.onRegister)throw new Error("[OptIn#registerPlugin] Plugin is invalid.");T[e.name]||(T[e.name]=e).onRegister.call(e,y)},y.execute=function(u){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.command,n=e.params,i=void 0===n?{}:n,r=e.callback,a=void 0===r?be:r;if(!t||-1===t.indexOf("."))throw new Error("[OptIn.execute] Please provide a valid command.");try{var o=t.split("."),s=u[o[0]],l=o[1];if(!s||"function"!=typeof s[l])throw new Error("Make sure the plugin and API name exist.");var c=Object.assign(i,{callback:a});s[l].call(s,c)}catch(e){ve.error("[execute] Something went wrong: "+e.message)}}}(T),Object.defineProperties(y,{permissions:{get:function(){return I}},status:{get:function(){return E}},Categories:{get:function(){return fe}},doesOptInApply:{get:function(){return!!r}},isPending:{get:function(){return y.status===de}},isComplete:{get:function(){return y.status===ge}},__plugins:{get:function(){return Object.keys(T)}},isIabContext:{get:function(){return u}}})}function u(e,t){if(void 0===t)return e;var n=setTimeout(function(){n=null,e.call(e,new i("The call took longer than you wanted!"))},t);return function(){n&&(clearTimeout(n),e.apply(e,arguments))}}function r(){if(window.__cmp)return window.__cmp;var e=window;if(e!==window.top){for(var a;!a;){e=e.parent;try{e.frames.__cmpLocator&&(a=e)}catch(e){}if(e===window.top)break}if(a){var o={};return window.__cmp=function(e,t,n){var i=Math.random()+"",r={__cmpCall:{command:e,parameter:t,callId:i}};o[i]=n,a.postMessage(r,"*")},window.addEventListener("message",function(e){var t=e.data;if("string"==typeof t)try{t=JSON.parse(e.data)}catch(e){}if(t.__cmpReturn){var n=t.__cmpReturn;o[n.callId]&&(o[n.callId](n.returnValue,n.success),delete o[n.callId])}},!1),window.__cmp}ve.error("__cmp not found")}else ve.error("__cmp not found")}var D="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Object.assign=Object.assign||function(e){for(var t,n,i=1;i<arguments.length;++i)for(t in n=arguments[i])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e};function f(a){function i(){}this.getMarketingCloudVisitorID=function(e){e=e||i;var t=this.findField(S.MCMID,e),n=function(n,i){var r=this;return function(){var e=a(0,n),t={};return t[n]=e,r.setStateAndPublish(t),i(e),e}}.call(this,S.MCMID,e);return void 0!==t?t:n()},this.getVisitorValues=function(t){this.getMarketingCloudVisitorID(function(e){t({MCMID:e})})}}function h(){function r(){}Object.keys(T).forEach(function(i){this[T[i]]=function(e){e=e||r;var t=this.findField(i,e),n=function(e,t){var n=this;return function(){return n.callbackRegistry.add(e,t),n.messageParent(A.GETSTATE),""}}.call(this,i,e);return void 0!==t?t:n()}},this),Object.keys(E).forEach(function(e){this[E[e]]=function(){return this.findField(e,r)||{}}},this)}function _(){Object.keys(I).forEach(function(t){this[I[t]]=function(e){this.callbackRegistry.add(t,e)}},this)}function O(a,o){this.parse=function(e){try{var n={};return e.data.split("|").forEach(function(e,t){void 0!==e&&(n[Q[t]]=2!==t?e:JSON.parse(e))}),n}catch(e){}},this.isInvalid=function(e){var t=this.parse(e);if(!t||Object.keys(t).length<2)return!0;var n=a!==t.orgID,i=!o||e.origin!==o,r=-1===Object.keys(z).indexOf(t.prefix);return n||i||r},this.send=function(e,t,n){var i=t+"|"+a;n&&n===Object(n)&&(i+="|"+JSON.stringify(n));try{e.postMessage(i,o)}catch(e){}}}function d(e,t,n,i){function r(e){Object.assign(u,e)}function a(e){if(!g.isInvalid(e)){p=!1;var t=g.parse(e);u.setStateAndPublish(t.state)}}function o(e){!p&&d&&(p=!0,g.send(i,e))}function s(){r(new f(n._generateID)),u.getMarketingCloudVisitorID(),u.callbackRegistry.executeAll(u.state,!0),D.removeEventListener("message",l)}function l(e){if(!g.isInvalid(e)){var t=g.parse(e);p=!1,D.clearTimeout(u._handshakeTimeout),D.removeEventListener("message",l),r(new h(u)),D.addEventListener("message",a),u.setStateAndPublish(t.state),u.callbackRegistry.hasCallbacks()&&o(X.GETSTATE)}}function c(){Object.keys(n).forEach(function(e){0!==e.indexOf("_")&&"function"==typeof n[e]&&(u[e]=function(){})}),u.getSupplementalDataID=n.getSupplementalDataID,u.isAllowed=function(){return!0}}var u=this,d=t.whitelistParentDomain;u.state={ALLFIELDS:{}},u.version=n.version,u.marketingCloudOrgID=e,u.cookieDomain=n.cookieDomain||"";var p=!(u._instanceType="child"),g=new O(e,d);u.callbackRegistry=w(),u.init=function(){D.s_c_in||(D.s_c_il=[],D.s_c_in=0),u._c="Visitor",u._il=D.s_c_il,u._in=D.s_c_in,u._il[u._in]=u,D.s_c_in++,c(),r(new _(u)),d&&postMessage?(D.addEventListener("message",l),o(X.HANDSHAKE),u._handshakeTimeout=setTimeout(s,250)):s()},u.findField=function(e,t){if(void 0!==u.state[e])return t(u.state[e]),u.state[e]},u.messageParent=o,u.setStateAndPublish=function(e){Object.assign(u.state,e),Object.assign(u.state.ALLFIELDS,e),u.callbackRegistry.executeAll(u.state)}}function N(a,i){function t(r){return function e(t){var n=function(){var n=[];return a._loading&&Object.keys(a._loading).forEach(function(e){if(a._loading[e]){var t=te[e];n.push(t)}}),n.length?n:null}();if(n){var i=ee[n[0]];a[i](e,!0)}else r()}}function n(e,t){var n=function(){var i={};return Object.keys(Z).forEach(function(e){var t=Z[e],n=a[t]();J.isValueEmpty(n)||(i[e]=n)}),i}();i.send(e,t,n)}function r(e){(function(t){var n=a.setCustomerIDs;a.setCustomerIDs=function(e){n.call(a,e),i.send(t,$.PARENTSTATE,{CUSTOMERIDS:a.getCustomerIDs()})}})(e),n(e,$.HANDSHAKE)}return function(e){i.isInvalid(e)||(i.parse(e).prefix===$.HANDSHAKE?r:function(e){t(function(){n(e,$.PARENTSTATE)})()})(e.source)}}function B(i,r){var a={},o=0,s=Object.keys(i).length;Object.keys(i).forEach(function(e){var t=i[e];if(t.fn){var n=t.args||[];n.unshift(function(t){return function(e){a[t]=e,++o===s&&r(a)}}(e)),t.fn.apply(t.context||null,n)}})}function M(e){var t;!e&&D.location&&(e=D.location.hostname);var n,i=(t=e).split(".");for(n=i.length-2;0<=n;n--)if(t=i.slice(n).join("."),ne.set("test","cookie",{domain:t}))return ne.remove("test",{domain:t}),t;return""}function L(e){var t,n,i="0123456789",r="",a="",o=8,s=10,l=10;if(1==e){for(i+="ABCDEF",t=0;t<16;t++)n=Math.floor(Math.random()*o),r+=i.substring(n,n+1),n=Math.floor(Math.random()*o),a+=i.substring(n,n+1),o=16;return r+"-"+a}for(t=0;t<19;t++)n=Math.floor(Math.random()*s),r+=i.substring(n,n+1),0===t&&9==n?s=3:(1==t||2==t)&&10!=s&&n<2?s=10:2<t&&(s=10),n=Math.floor(Math.random()*l),a+=i.substring(n,n+1),0===t&&9==n?l=3:(1==t||2==t)&&10!=l&&n<2?l=10:2<t&&(l=10);return r+a}function R(i,e){return{corsMetadata:(t="none",n=!0,"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?t="XMLHttpRequest":"undefined"!=typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(n=!1),0<Object.prototype.toString.call(D.HTMLElement).indexOf("Constructor")&&(n=!1)),{corsType:t,corsCookiesEnabled:n}),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new D[this.corsMetadata.corsType]},fireCORS:function(a,e,t){var o=this;e&&(a.loadErrorHandler=e);try{var n=this.getCORSInstance();n.open("get",a.corsUrl+"&ts="+(new Date).getTime(),!0),"XMLHttpRequest"===this.corsMetadata.corsType&&(n.withCredentials=!0,n.timeout=i.loadTimeout,n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){4===this.readyState&&200===this.status&&function(e){var t;try{if((t=JSON.parse(e))!==Object(t))return o.handleCORSError(a,null,"Response is not JSON")}catch(e){return o.handleCORSError(a,e,"Error parsing response as JSON")}try{for(var n=a.callback,i=D,r=0;r<n.length;r++)i=i[n[r]];i(t)}catch(e){o.handleCORSError(a,e,"Error forming callback function")}}(this.responseText)}),n.onerror=function(e){o.handleCORSError(a,e,"onerror")},n.ontimeout=function(e){o.handleCORSError(a,e,"ontimeout")},n.send(),i._log.requests.push(a.corsUrl)}catch(e){this.handleCORSError(a,e,"try-catch")}},handleCORSError:function(e,t,n){i.CORSErrors.push({corsData:e,error:t,description:n}),e.loadErrorHandler&&("ontimeout"===n?e.loadErrorHandler(!0):e.loadErrorHandler(!1))}};var t,n}function x(){var i={};return i.callbacks=Object.create(null),i.add=function(e,t){if(!function(e){return"function"==typeof e||e instanceof Array&&e.length}(t))throw new Error("[callbackRegistryFactory] Make sure callback is a function or an array of functions.");i.callbacks[e]=i.callbacks[e]||[];var n=i.callbacks[e].push(t)-1;return function(){i.callbacks[e].splice(n,1)}},i.execute=function(e,t){if(i.callbacks[e]){t=(t=void 0===t?[]:t)instanceof Array?t:[t];try{for(;i.callbacks[e].length;){var n=i.callbacks[e].shift();"function"==typeof n?n.apply(null,t):n instanceof Array&&n[1].apply(n[0],t)}delete i.callbacks[e]}catch(e){}}},i.executeAll=function(n,e){(e||n&&!function(e){return e===Object(e)&&0===Object.keys(e).length}(n))&&Object.keys(i.callbacks).forEach(function(e){var t=void 0!==n[e]?n[e]:"";i.execute(e,t)},i)},i.hasCallbacks=function(){return Boolean(Object.keys(i.callbacks).length)},i}function a(){}function o(i,r,e){return e()?function(){if(function(e){var t=window.console;return!!t&&"function"==typeof t[e]}(i)){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console[i].apply(console,[r].concat(t))}}:a}function U(e,t){return k(e)===t}function F(e,t){return e instanceof Array?e:U(e,"string")?[e]:t||[]}function V(e){return!(!e||ye(e))&&F(e).every(function(e){return-1<me.indexOf(e)})}function j(e,n){return e.reduce(function(e,t){return e[t]=n,e},{})}function q(e){if(Pe(e))return e;try{return JSON.parse(e)}catch(e){return{}}}function H(e){return void 0===e||(Pe(e)?V(Object.keys(e)):Ce(e))}function K(e,t){H(e)||ve.error("".concat(t))}function p(t){return Object.keys(t).map(function(e){return t[e]})}var s,l,g,m,v,y={HANDSHAKE:"HANDSHAKE",GETSTATE:"GETSTATE",PARENTSTATE:"PARENTSTATE"},C={MCMID:"getMarketingCloudVisitorID",MCAID:"getAnalyticsVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",ALLFIELDS:"getVisitorValues"},P={MCMID:"getMarketingCloudVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",MCAID:"getAnalyticsVisitorID",CUSTOMERIDS:"getCustomerIDs",ALLFIELDS:"getVisitorValues"},b={MC:"MCMID",A:"MCAID",AAM:"MCAAMB"},Y={MCMID:"MCMID",MCOPTOUT:"MCOPTOUT",MCAID:"MCAID",MCAAMLH:"MCAAMLH",MCAAMB:"MCAAMB"},G={UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2},W={GLOBAL:"global"},S={MCMID:"MCMID",MCAID:"MCAID",MCAAMB:"MCAAMB",MCAAMLH:"MCAAMLH",MCOPTOUT:"MCOPTOUT",CUSTOMERIDS:"CUSTOMERIDS"},A=y,T=C,E={CUSTOMERIDS:"getCustomerIDs"},I=C,J=((m=(v={exports:{}}).exports).isObjectEmpty=function(e){return e===Object(e)&&0===Object.keys(e).length},m.isValueEmpty=function(e){return""===e||m.isObjectEmpty(e)},m.getIeVersion=function(){if(document.documentMode)return document.documentMode;for(var e=7;4<e;e--){var t=document.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return t=null,e;t=null}return null},m.encodeAndBuildRequest=function(e,t){return e.map(encodeURIComponent).join(t)},m.isObject=function(e){return null!==e&&"object"===k(e)&&!1===Array.isArray(e)},m.defineGlobalNamespace=function(){return window.adobe=m.isObject(window.adobe)?window.adobe:{},window.adobe},m.pluck=function(n,e){return e.reduce(function(e,t){return n[t]&&(e[t]=n[t]),e},Object.create(null))},m.parseOptOut=function(e,t,n){t||(t=n,e.d_optout&&e.d_optout instanceof Array&&(t=e.d_optout.join(",")));var i=parseInt(e.d_ottl,10);return isNaN(i)&&(i=7200),{optOut:t,d_ottl:i}},void(m.normalizeBoolean=function(e){var t=e;return"true"===e?t=!0:"false"===e&&(t=!1),t}),v.exports),w=(J.isObjectEmpty,J.isValueEmpty,J.getIeVersion,J.encodeAndBuildRequest,J.isObject,J.defineGlobalNamespace,J.pluck,J.parseOptOut,J.normalizeBoolean,function(){return{callbacks:{},add:function(e,t){this.callbacks[e]=this.callbacks[e]||[];var n=this.callbacks[e].push(t)-1,i=this;return function(){i.callbacks[e].splice(n,1)}},execute:function(e,t){if(this.callbacks[e]){t=(t=void 0===t?[]:t)instanceof Array?t:[t];try{for(;this.callbacks[e].length;){var n=this.callbacks[e].shift();"function"==typeof n?n.apply(null,t):n instanceof Array&&n[1].apply(n[0],t)}delete this.callbacks[e]}catch(e){}}},executeAll:function(n,e){(e||n&&!J.isObjectEmpty(n))&&Object.keys(this.callbacks).forEach(function(e){var t=void 0!==n[e]?n[e]:"";this.execute(e,t)},this)},hasCallbacks:function(){return Boolean(Object.keys(this.callbacks).length)}}}),z=y,Q={0:"prefix",1:"orgID",2:"state"},X=y,$=y,Z=P,ee=C,te=b,ne={get:function(e){e=encodeURIComponent(e);var t=(";"+document.cookie).split(" ").join(";"),n=t.indexOf(";"+e+"="),i=n<0?n:t.indexOf(";",n+1);return n<0?"":decodeURIComponent(t.substring(n+2+e.length,i<0?t.length:i))},set:function(e,t,n){var i=c(n,"cookieLifetime"),r=c(n,"expires"),a=c(n,"domain"),o=c(n,"secure")?"Secure":"";if(r&&"SESSION"!==i&&"NONE"!==i){var s=""!==t?parseInt(i||0,10):-60;if(s)(r=new Date).setTime(r.getTime()+1e3*s);else if(1===r){var l=(r=new Date).getYear();r.setYear(l+2+(l<1900?1900:0))}}else r=0;return e&&"NONE"!==i?(document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; path=/;"+(r?" expires="+r.toGMTString()+";":"")+(a?" domain="+a+";":"")+o,this.get(e)===t):0},remove:function(e,t){var n=c(t,"domain");n=n?" domain="+n+";":"",document.cookie=encodeURIComponent(e)+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"+n}},ie=function(e,t){return n(e,t)<0},re=function(e,t){return 0!==n(e,t)},ae=!!D.postMessage,oe=function(e,t,n){var i=1;t&&(ae?n.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(n.location=t.replace(/#.*$/,"")+"#"+ +new Date+i+++"&"+e))},se=function(t,n){var e;try{ae&&(t&&(e=function(e){if("string"==typeof n&&e.origin!==n||"[object Function]"===Object.prototype.toString.call(n)&&!1===n(e.origin))return!1;t(e)}),D.addEventListener?D[t?"addEventListener":"removeEventListener"]("message",e):D[t?"attachEvent":"detachEvent"]("onmessage",e))}catch(t){}},le={POST_MESSAGE_ENABLED:!!D.postMessage,DAYS_BETWEEN_SYNC_ID_CALLS:1,MILLIS_PER_DAY:864e5,ADOBE_MC:"adobe_mc",ADOBE_MC_SDID:"adobe_mc_sdid",VALID_VISITOR_ID_REGEX:/^[0-9a-fA-F\-]+$/,ADOBE_MC_TTL_IN_MIN:5,VERSION_REGEX:/vVersion\|((\d+\.)?(\d+\.)?(\*|\d+))(?=$|\|)/,FIRST_PARTY_SERVER_COOKIE:"s_ecid"},ce={audienceManagerServer:{},audienceManagerServerSecure:{},cookieDomain:{},cookieLifetime:{},cookieName:{},doesOptInApply:{},disableThirdPartyCalls:{},discardTrackingServerECID:{},idSyncAfterIDCallResult:{},idSyncAttachIframeOnWindowLoad:{},idSyncContainerID:{},idSyncDisable3rdPartySyncing:{},disableThirdPartyCookies:{},idSyncDisableSyncs:{},disableIdSyncs:{},idSyncIDCallResult:{},idSyncSSLUseAkamai:{},isCoopSafe:{},isIabContext:{},isOptInStorageEnabled:{},loadSSL:{},loadTimeout:{},marketingCloudServer:{},marketingCloudServerSecure:{},optInCookieDomain:{},optInStorageExpiry:{},overwriteCrossDomainMCIDAndAID:{},preOptInApprovals:{},previousPermissions:{},resetBeforeVersion:{},sdidParamExpiry:{},serverState:{},sessionCookieName:{},secureCookie:{},takeTimeoutMetrics:{},trackingServer:{},trackingServerSecure:{},whitelistIframeDomains:{},whitelistParentDomain:{}},ue={getConfigNames:function(){return Object.keys(ce)},getConfigs:function(){return ce},normalizeConfig:function(e){return"function"!=typeof e?e:e()}},de="pending",pe="changed",ge="complete",fe={AAM:"aam",ADCLOUD:"adcloud",ANALYTICS:"aa",CAMPAIGN:"campaign",ECID:"ecid",LIVEFYRE:"livefyre",TARGET:"target",VIDEO_ANALYTICS:"videoaa"},he=(e(s={},fe.AAM,565),e(s,fe.ECID,565),s),_e=(e(l={},fe.AAM,[1,2,5]),e(l,fe.ECID,[1,2,5]),l),me=(g=fe,Object.keys(g).map(function(e){return g[e]})),ve=new function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return!0};this.log=o("log",e,t),this.warn=o("warn",e,t),this.error=o("error",e,t)}("[ADOBE OPT-IN]"),ye=function(e){return"[object Array]"===Object.prototype.toString.call(e)&&!e.length},Ce=function(e){try{var t=JSON.parse(e);return!!e&&U(e,"string")&&V(Object.keys(t))}catch(e){return!1}},Pe=function(e){return null!==e&&U(e,"object")&&!1===Array.isArray(e)},be=function(){};(i.prototype=Object.create(Error.prototype)).constructor=i;var Se="fetchPermissions";t.Categories=fe,t.TimeoutError=i;function Ae(e,t){return"SHA-256"!==t&&"SHA256"!==t&&"sha256"!==t&&"sha-256"!==t||(e=function e(t){function n(e,t){return e>>>t|e<<32-t}for(var i,r,a=Math.pow,o=a(2,32),s="",l=[],c=8*t.length,u=e.h=e.h||[],d=e.k=e.k||[],p=d.length,g={},f=2;p<64;f++)if(!g[f]){for(i=0;i<313;i+=f)g[i]=f;u[p]=a(f,.5)*o|0,d[p++]=a(f,1/3)*o|0}for(t+="";t.length%64-56;)t+="\0";for(i=0;i<t.length;i++){if((r=t.charCodeAt(i))>>8)return;l[i>>2]|=r<<(3-i)%4*8}for(l[l.length]=c/o|0,l[l.length]=c,r=0;r<l.length;){var h=l.slice(r,r+=16),_=u;for(u=u.slice(0,8),i=0;i<64;i++){var m=h[i-15],v=h[i-2],y=u[0],C=u[4],P=u[7]+(n(C,6)^n(C,11)^n(C,25))+(C&u[5]^~C&u[6])+d[i]+(h[i]=i<16?h[i]:h[i-16]+(n(m,7)^n(m,18)^m>>>3)+h[i-7]+(n(v,17)^n(v,19)^v>>>10)|0);(u=[P+((n(y,2)^n(y,13)^n(y,22))+(y&u[1]^y&u[2]^u[1]&u[2]))|0].concat(u))[4]=u[4]+P|0}for(i=0;i<8;i++)u[i]=u[i]+_[i]|0}for(i=0;i<8;i++)for(r=3;r+1;r--){var b=u[i]>>8*r&255;s+=(b<16?0:"")+b.toString(16)}return s}(e)),e}function Te(e){return String(e).trim().toLowerCase()}var Ee=Object.freeze({OptIn:t,IabPlugin:function(){var e=this;function a(e,t){var n=1<arguments.length&&void 0!==t?t:{};return s[e]=n}e.name="iabPlugin",e.version="0.0.1";var o=x(),s={allConsentData:null};e.fetchConsentData=function(e){var t=u(e.callback,e.timeout);i({callback:t})},e.isApproved=function(e){var r=e.callback,a=e.category,t=e.timeout;if(s.allConsentData)return r(null,c(a,s.allConsentData.vendorConsents,s.allConsentData.purposeConsents));var n=u(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.vendorConsents,i=t.purposeConsents;r(e,c(a,n,i))},t);i({category:a,callback:n})},e.onRegister=function(a){var o=Object.keys(he);e.fetchConsentData({callback:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.purposeConsents,i=t.gdprApplies,r=t.vendorConsents;!e&&i&&r&&n&&(o.forEach(function(e){var t=c(e,r,n);a[t?"approve":"deny"](e,!0)}),a.complete())}})};var i=function(e){var t=e.callback;if(s.allConsentData)return t(null,s.allConsentData);o.add("FETCH_CONSENT_DATA",t);var r={};n(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.purposeConsents,n=e.gdprApplies,i=e.vendorConsents;(1<arguments.length?arguments[1]:void 0)&&a("allConsentData",r={purposeConsents:t,gdprApplies:n,vendorConsents:i}),l(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(1<arguments.length?arguments[1]:void 0)&&(r.consentString=e.consentData,a("allConsentData",r)),o.execute("FETCH_CONSENT_DATA",[null,s.allConsentData])})})},l=function(e){var t=r();t&&t("getConsentData",null,e)},n=function(e){var t=function(e){return p(e).filter(function(e,t,n){return n.indexOf(e)===t})}(he),n=r();n&&n("getVendorConsents",t,e)},c=function(e,t,n){var i=2<arguments.length&&void 0!==n?n:{};return!!(1<arguments.length&&void 0!==t?t:{})[he[e]]&&_e[e].every(function(e){return i[e]})}}}),Ie=Ee.OptIn;J.defineGlobalNamespace(),window.adobe.OptInCategories=Ie.Categories;function we(i,n,e){function t(e){var i=e;return function(e){var t=e||h.location.href;try{var n=g._extractParamFromUri(t,i);if(n)return E.parsePipeDelimetedKeyValues(n)}catch(e){}}}function r(e){e=e||{},g._supplementalDataIDCurrent=e.supplementalDataIDCurrent||"",g._supplementalDataIDCurrentConsumed=e.supplementalDataIDCurrentConsumed||{},g._supplementalDataIDLast=e.supplementalDataIDLast||"",g._supplementalDataIDLastConsumed=e.supplementalDataIDLastConsumed||{}}function a(e){var t,n=e.reduce(function(e,t){var n=t[0],i=t[1];return null!=i&&i!==S&&(e=function(e,t,n){return(n=n?n+="|":n)+(e+"=")+encodeURIComponent(t)}(n,i,e)),e},"");return(t=(t=n)?t+="|":t)+"TS="+E.getTimestampInSeconds()}function d(){return g.configs.isIabContext?c.optIn.isApproved(c.optIn.Categories.ECID)&&u:c.optIn.isApproved(c.optIn.Categories.ECID)}function o(e,t){if(u=!0,e)throw new Error("[IAB plugin] : "+e);t.gdprApplies&&(f=t.consentString),g.init(),l()}function s(){c.optIn.isApproved(c.optIn.Categories.ECID)&&(g.configs.isIabContext?c.optIn.execute({command:"iabPlugin.fetchConsentData",callback:o}):(g.init(),l()))}function l(){c.optIn.off("complete",s)}if(!e||e.split("").reverse().join("")!==i)throw new Error("Please use `Visitor.getInstance` to instantiate Visitor.");var g=this,c=window.adobe,f="",u=!1,p=!1;g.version="4.4.0";var h=D,_=h.Visitor;function m(e){return!Object.prototype[e]}_.version=g.version,_.AuthState=G,_.OptOut=W,h.s_c_in||(h.s_c_il=[],h.s_c_in=0),g._c="Visitor",g._il=h.s_c_il,g._in=h.s_c_in,g._il[g._in]=g,h.s_c_in++,g._instanceType="regular",g._log={requests:[]},g.marketingCloudOrgID=i,g.cookieName="AMCV_"+i,g.sessionCookieName="AMCVS_"+i,g.cookieDomain=M(),g.loadSSL=0<=h.location.protocol.toLowerCase().indexOf("https"),g.loadTimeout=3e4,g.CORSErrors=[],g.marketingCloudServer=g.audienceManagerServer="dpm.demdex.net",g.sdidParamExpiry=30;var v=null,y="MCMID",C="MCAID",P="AAM",b="MCAAMB",S="NONE",A=R(g);g.FIELDS=Y,g.cookieRead=function(e){return ne.get(e)},g.cookieWrite=function(e,t,n){var i=g.cookieLifetime?(""+g.cookieLifetime).toUpperCase():"",r=!1;return g.configs&&g.configs.secureCookie&&"https:"===location.protocol&&(r=!0),ne.set(e,""+t,{expires:n,domain:g.cookieDomain,cookieLifetime:i,secure:r})},g.resetState=function(e){e?g._mergeServerState(e):r()},g._isAllowedDone=!1,g._isAllowedFlag=!1,g.isAllowed=function(){return g._isAllowedDone||(g._isAllowedDone=!0,(g.cookieRead(g.cookieName)||g.cookieWrite(g.cookieName,"T",1))&&(g._isAllowedFlag=!0)),"T"===g.cookieRead(g.cookieName)&&g._helpers.removeCookie(g.cookieName),g._isAllowedFlag},g.setMarketingCloudVisitorID=function(e){g._setMarketingCloudFields(e)},g._use1stPartyMarketingCloudServer=!1,g.getMarketingCloudVisitorID=function(e,t){g.marketingCloudServer&&g.marketingCloudServer.indexOf(".demdex.net")<0&&(g._use1stPartyMarketingCloudServer=!0);var n=g._getAudienceManagerURLData("_setMarketingCloudFields"),i=n.url;return g._getRemoteField(y,i,e,t,n)},g.getVisitorValues=function(e,t){var n={MCMID:{fn:g.getMarketingCloudVisitorID,args:[!0],context:g},MCOPTOUT:{fn:g.isOptedOut,args:[void 0,!0],context:g},MCAID:{fn:g.getAnalyticsVisitorID,args:[!0],context:g},MCAAMLH:{fn:g.getAudienceManagerLocationHint,args:[!0],context:g},MCAAMB:{fn:g.getAudienceManagerBlob,args:[!0],context:g}},i=t&&t.length?J.pluck(n,t):n;B(i,e)},g._currentCustomerIDs={},g._customerIDsHashChanged=!1,g._newCustomerIDsHash="",g.setCustomerIDs=function(e,t){if(!g.isOptedOut()&&e){if(!J.isObject(e)||J.isObjectEmpty(e))return!1;var n,i,r;for(n in g._readVisitor(),e)if(m(n)&&(t=(i=e[n]).hasOwnProperty("hashType")?i.hashType:t,i))if("object"===k(i)){var a={};if(i.id){if(t){if(!(r=Ae(Te(i.id),t)))return;i.id=r,a.hashType=t}a.id=i.id}null!=i.authState&&(a.authState=i.authState),g._currentCustomerIDs[n]=a}else if(t){if(!(r=Ae(Te(i),t)))return;g._currentCustomerIDs[n]={id:r,hashType:t}}else g._currentCustomerIDs[n]={id:i};var o=g.getCustomerIDs(),s=g._getField("MCCIDH"),l="";for(n in s=s||0,o)m(n)&&(l+=(l?"|":"")+n+"|"+((i=o[n]).id?i.id:"")+(i.authState?i.authState:""));g._newCustomerIDsHash=String(g._hash(l)),g._newCustomerIDsHash!==s&&(g._customerIDsHashChanged=!0,g._mapCustomerIDs(function(){g._customerIDsHashChanged=!1}))}},g.getCustomerIDs=function(){g._readVisitor();var e,t,n={};for(e in g._currentCustomerIDs)m(e)&&(t=g._currentCustomerIDs[e],n[e]||(n[e]={}),t.id&&(n[e].id=t.id),null!=t.authState?n[e].authState=t.authState:n[e].authState=_.AuthState.UNKNOWN,t.hashType&&(n[e].hashType=t.hashType));return n},g.setAnalyticsVisitorID=function(e){g._setAnalyticsFields(e)},g.getAnalyticsVisitorID=function(t,e,n){if(!E.isTrackingServerPopulated()&&!n)return g._callCallback(t,[""]),"";var i="";if(n||(i=g.getMarketingCloudVisitorID(function(e){g.getAnalyticsVisitorID(t,!0)})),i||n){var r=n?g.marketingCloudServer:g.trackingServer,a="";g.loadSSL&&(n?g.marketingCloudServerSecure&&(r=g.marketingCloudServerSecure):g.trackingServerSecure&&(r=g.trackingServerSecure));var o={};if(r){var s="http"+(g.loadSSL?"s":"")+"://"+r+"/id",l="d_visid_ver="+g.version+"&mcorgid="+encodeURIComponent(g.marketingCloudOrgID)+(i?"&mid="+encodeURIComponent(i):"")+(g.idSyncDisable3rdPartySyncing||g.disableThirdPartyCookies?"&d_coppa=true":""),c=["s_c_il",g._in,"_set"+(n?"MarketingCloud":"Analytics")+"Fields"];a=s+"?"+l+"&callback=s_c_il%5B"+g._in+"%5D._set"+(n?"MarketingCloud":"Analytics")+"Fields",o.corsUrl=s+"?"+l,o.callback=c}return o.url=a,g._getRemoteField(n?y:C,a,t,e,o)}return""},g.getAudienceManagerLocationHint=function(t,e){if(g.getMarketingCloudVisitorID(function(e){g.getAudienceManagerLocationHint(t,!0)})){var n=g._getField(C);if(!n&&E.isTrackingServerPopulated()&&(n=g.getAnalyticsVisitorID(function(e){g.getAudienceManagerLocationHint(t,!0)})),n||!E.isTrackingServerPopulated()){var i=g._getAudienceManagerURLData(),r=i.url;return g._getRemoteField("MCAAMLH",r,t,e,i)}}return""},g.getLocationHint=g.getAudienceManagerLocationHint,g.getAudienceManagerBlob=function(t,e){if(g.getMarketingCloudVisitorID(function(e){g.getAudienceManagerBlob(t,!0)})){var n=g._getField(C);if(!n&&E.isTrackingServerPopulated()&&(n=g.getAnalyticsVisitorID(function(e){g.getAudienceManagerBlob(t,!0)})),n||!E.isTrackingServerPopulated()){var i=g._getAudienceManagerURLData(),r=i.url;return g._customerIDsHashChanged&&g._setFieldExpire(b,-1),g._getRemoteField(b,r,t,e,i)}}return""},g._supplementalDataIDCurrent="",g._supplementalDataIDCurrentConsumed={},g._supplementalDataIDLast="",g._supplementalDataIDLastConsumed={};var T=!(g.getSupplementalDataID=function(e,t){g._supplementalDataIDCurrent||t||(g._supplementalDataIDCurrent=g._generateID(1));var n=g._supplementalDataIDCurrent;return g._supplementalDataIDLast&&!g._supplementalDataIDLastConsumed[e]?(n=g._supplementalDataIDLast,g._supplementalDataIDLastConsumed[e]=!0):n&&(g._supplementalDataIDCurrentConsumed[e]&&(g._supplementalDataIDLast=g._supplementalDataIDCurrent,g._supplementalDataIDLastConsumed=g._supplementalDataIDCurrentConsumed,g._supplementalDataIDCurrent=n=t?"":g._generateID(1),g._supplementalDataIDCurrentConsumed={}),n&&(g._supplementalDataIDCurrentConsumed[e]=!0)),n});g._liberatedOptOut=null,g.getOptOut=function(e,t){var n=g._getAudienceManagerURLData("_setMarketingCloudFields"),i=n.url;if(d())return g._getRemoteField("MCOPTOUT",i,e,t,n);if(g._registerCallback("liberatedOptOut",e),null!==g._liberatedOptOut)return g._callAllCallbacks("liberatedOptOut",[g._liberatedOptOut]),T=!1,g._liberatedOptOut;if(T)return null;T=!0;var r="liberatedGetOptOut";return n.corsUrl=n.corsUrl.replace(/dpm\.demdex\.net\/id\?/,"dpm.demdex.net/optOutStatus?"),n.callback=[r],D[r]=function(e){if(e===Object(e)){var t,n,i=J.parseOptOut(e,t,S);t=i.optOut,n=1e3*i.d_ottl,g._liberatedOptOut=t,setTimeout(function(){g._liberatedOptOut=null},n)}g._callAllCallbacks("liberatedOptOut",[t]),T=!1},A.fireCORS(n),null},g.isOptedOut=function(n,i,e){i=i||_.OptOut.GLOBAL;var t=g.getOptOut(function(e){var t=e===_.OptOut.GLOBAL||0<=e.indexOf(i);g._callCallback(n,[t])},e);return t?t===_.OptOut.GLOBAL||0<=t.indexOf(i):null},g._fields=null,g._fieldsExpired=null,g._hash=function(e){var t,n=0;if(e)for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n},g._generateID=L,g._generateLocalMID=function(){var e=g._generateID(0);return w.isClientSideMarketingCloudVisitorID=!0,e},g._callbackList=null,g._callCallback=function(e,t){try{"function"==typeof e?e.apply(h,t):e[1].apply(e[0],t)}catch(e){}},g._registerCallback=function(e,t){t&&(null==g._callbackList&&(g._callbackList={}),null==g._callbackList[e]&&(g._callbackList[e]=[]),g._callbackList[e].push(t))},g._callAllCallbacks=function(e,t){if(null!=g._callbackList){var n=g._callbackList[e];if(n)for(;0<n.length;)g._callCallback(n.shift(),t)}},g._addQuerystringParam=function(e,t,n,i){var r=encodeURIComponent(t)+"="+encodeURIComponent(n),a=E.parseHash(e),o=E.hashlessUrl(e);if(-1===o.indexOf("?"))return o+"?"+r+a;var s=o.split("?"),l=s[0]+"?",c=s[1];return l+E.addQueryParamAtLocation(c,r,i)+a},g._extractParamFromUri=function(e,t){var n=new RegExp("[\\?&#]"+t+"=([^&#]*)").exec(e);if(n&&n.length)return decodeURIComponent(n[1])},g._parseAdobeMcFromUrl=t(le.ADOBE_MC),g._parseAdobeMcSdidFromUrl=t(le.ADOBE_MC_SDID),g._attemptToPopulateSdidFromUrl=function(e){var t=g._parseAdobeMcSdidFromUrl(e),n=1e9;t&&t.TS&&(n=E.getTimestampInSeconds()-t.TS),t&&t.SDID&&t.MCORGID===i&&n<g.sdidParamExpiry&&(g._supplementalDataIDCurrent=t.SDID,g._supplementalDataIDCurrentConsumed.SDID_URL_PARAM=!0)},g._attemptToPopulateIdsFromUrl=function(){var e=g._parseAdobeMcFromUrl();if(e&&e.TS){var t=E.getTimestampInSeconds()-e.TS;if(Math.floor(t/60)>le.ADOBE_MC_TTL_IN_MIN||e.MCORGID!==i)return;!function(e){function t(e,t,n){e&&e.match(le.VALID_VISITOR_ID_REGEX)&&(n===y&&(p=!0),t(e))}t(e[y],g.setMarketingCloudVisitorID,y),g._setFieldExpire(b,-1),t(e[C],g.setAnalyticsVisitorID)}(e)}},g._mergeServerState=function(e){if(e)try{if(i=e,(e=E.isObject(i)?i:JSON.parse(i))[g.marketingCloudOrgID]){var t=e[g.marketingCloudOrgID];n=t.customerIDs,E.isObject(n)&&g.setCustomerIDs(n),r(t.sdid)}}catch(e){throw new Error("`serverState` has an invalid format.")}var n,i},g._timeout=null,g._loadData=function(e,t,n,i){t=g._addQuerystringParam(t,"d_fieldgroup",e,1),i.url=g._addQuerystringParam(i.url,"d_fieldgroup",e,1),i.corsUrl=g._addQuerystringParam(i.corsUrl,"d_fieldgroup",e,1),w.fieldGroupObj[e]=!0,i===Object(i)&&i.corsUrl&&"XMLHttpRequest"===A.corsMetadata.corsType&&A.fireCORS(i,n,e)},g._clearTimeout=function(e){null!=g._timeout&&g._timeout[e]&&(clearTimeout(g._timeout[e]),g._timeout[e]=0)},g._settingsDigest=0,g._getSettingsDigest=function(){if(!g._settingsDigest){var e=g.version;g.audienceManagerServer&&(e+="|"+g.audienceManagerServer),g.audienceManagerServerSecure&&(e+="|"+g.audienceManagerServerSecure),g._settingsDigest=g._hash(e)}return g._settingsDigest},g._readVisitorDone=!1,g._readVisitor=function(){if(!g._readVisitorDone){g._readVisitorDone=!0;var e,t,n,i,r,a,o=g._getSettingsDigest(),s=!1,l=g.cookieRead(g.cookieName),c=new Date;if(l||p||g.discardTrackingServerECID||(l=g.cookieRead(le.FIRST_PARTY_SERVER_COOKIE)),null==g._fields&&(g._fields={}),l&&"T"!==l)for((l=l.split("|"))[0].match(/^[\-0-9]+$/)&&(parseInt(l[0],10)!==o&&(s=!0),l.shift()),l.length%2==1&&l.pop(),e=0;e<l.length;e+=2)n=(t=l[e].split("-"))[0],i=l[e+1],a=1<t.length?(r=parseInt(t[1],10),0<t[1].indexOf("s")):(r=0,!1),s&&("MCCIDH"===n&&(i=""),0<r&&(r=c.getTime()/1e3-60)),n&&i&&(g._setField(n,i,1),0<r&&(g._fields["expire"+n]=r+(a?"s":""),(c.getTime()>=1e3*r||a&&!g.cookieRead(g.sessionCookieName))&&(g._fieldsExpired||(g._fieldsExpired={}),g._fieldsExpired[n]=!0)));!g._getField(C)&&E.isTrackingServerPopulated()&&(l=g.cookieRead("s_vi"))&&(1<(l=l.split("|")).length&&0<=l[0].indexOf("v1")&&(0<=(e=(i=l[1]).indexOf("["))&&(i=i.substring(0,e)),i&&i.match(le.VALID_VISITOR_ID_REGEX)&&g._setField(C,i)))}},g._appendVersionTo=function(e){var t="vVersion|"+g.version,n=e?g._getCookieVersion(e):null;return n?re(n,g.version)&&(e=e.replace(le.VERSION_REGEX,t)):e+=(e?"|":"")+t,e},g._writeVisitor=function(){var e,t,n=g._getSettingsDigest();for(e in g._fields)m(e)&&g._fields[e]&&"expire"!==e.substring(0,6)&&(t=g._fields[e],n+=(n?"|":"")+e+(g._fields["expire"+e]?"-"+g._fields["expire"+e]:"")+"|"+t);n=g._appendVersionTo(n),g.cookieWrite(g.cookieName,n,1)},g._getField=function(e,t){return null==g._fields||!t&&g._fieldsExpired&&g._fieldsExpired[e]?null:g._fields[e]},g._setField=function(e,t,n){null==g._fields&&(g._fields={}),g._fields[e]=t,n||g._writeVisitor()},g._getFieldList=function(e,t){var n=g._getField(e,t);return n?n.split("*"):null},g._setFieldList=function(e,t,n){g._setField(e,t?t.join("*"):"",n)},g._getFieldMap=function(e,t){var n=g._getFieldList(e,t);if(n){var i,r={};for(i=0;i<n.length;i+=2)r[n[i]]=n[i+1];return r}return null},g._setFieldMap=function(e,t,n){var i,r=null;if(t)for(i in r=[],t)m(i)&&(r.push(i),r.push(t[i]));g._setFieldList(e,r,n)},g._setFieldExpire=function(e,t,n){var i=new Date;i.setTime(i.getTime()+1e3*t),null==g._fields&&(g._fields={}),g._fields["expire"+e]=Math.floor(i.getTime()/1e3)+(n?"s":""),t<0?(g._fieldsExpired||(g._fieldsExpired={}),g._fieldsExpired[e]=!0):g._fieldsExpired&&(g._fieldsExpired[e]=!1),n&&(g.cookieRead(g.sessionCookieName)||g.cookieWrite(g.sessionCookieName,"1"))},g._findVisitorID=function(e){return e&&("object"===k(e)&&(e=e.d_mid?e.d_mid:e.visitorID?e.visitorID:e.id?e.id:e.uuid?e.uuid:""+e),e&&"NOTARGET"===(e=e.toUpperCase())&&(e=S),e&&(e===S||e.match(le.VALID_VISITOR_ID_REGEX))||(e="")),e},g._setFields=function(e,t){if(g._clearTimeout(e),null!=g._loading&&(g._loading[e]=!1),w.fieldGroupObj[e]&&w.setState(e,!1),"MC"===e){!0!==w.isClientSideMarketingCloudVisitorID&&(w.isClientSideMarketingCloudVisitorID=!1);var n=g._getField(y);if(!n||g.overwriteCrossDomainMCIDAndAID){if(!(n="object"===k(t)&&t.mid?t.mid:g._findVisitorID(t))){if(g._use1stPartyMarketingCloudServer&&!g.tried1stPartyMarketingCloudServer)return g.tried1stPartyMarketingCloudServer=!0,void g.getAnalyticsVisitorID(null,!1,!0);n=g._generateLocalMID()}g._setField(y,n)}n&&n!==S||(n=""),"object"===k(t)&&((t.d_region||t.dcs_region||t.d_blob||t.blob)&&g._setFields(P,t),g._use1stPartyMarketingCloudServer&&t.mid&&g._setFields("A",{id:t.id})),g._callAllCallbacks(y,[n])}if(e===P&&"object"===k(t)){var i=604800;null!=t.id_sync_ttl&&t.id_sync_ttl&&(i=parseInt(t.id_sync_ttl,10));var r=I.getRegionAndCheckIfChanged(t,i);g._callAllCallbacks("MCAAMLH",[r]);var a=g._getField(b);(t.d_blob||t.blob)&&(a=(a=t.d_blob)||t.blob,g._setFieldExpire(b,i),g._setField(b,a)),a=a||"",g._callAllCallbacks(b,[a]),!t.error_msg&&g._newCustomerIDsHash&&g._setField("MCCIDH",g._newCustomerIDsHash)}if("A"===e){var o=g._getField(C);o&&!g.overwriteCrossDomainMCIDAndAID||((o=g._findVisitorID(t))?o!==S&&g._setFieldExpire(b,-1):o=S,g._setField(C,o)),o&&o!==S||(o=""),g._callAllCallbacks(C,[o])}if(g.idSyncDisableSyncs||g.disableIdSyncs)I.idCallNotProcesssed=!0;else{I.idCallNotProcesssed=!1;var s={};s.ibs=t.ibs,s.subdomain=t.subdomain,I.processIDCallData(s)}if(t===Object(t)){var l,c;d()&&g.isAllowed()&&(l=g._getField("MCOPTOUT"));var u=J.parseOptOut(t,l,S);l=u.optOut,c=u.d_ottl,g._setFieldExpire("MCOPTOUT",c,!0),g._setField("MCOPTOUT",l),g._callAllCallbacks("MCOPTOUT",[l])}},g._loading=null,g._getRemoteField=function(n,e,t,i,r){var a,o="",s=E.isFirstPartyAnalyticsVisitorIDCall(n);if(d()&&g.isAllowed())if(g._readVisitor(),!(!(o=g._getField(n,!0==={MCAAMLH:!0,MCAAMB:!0}[n]))||g._fieldsExpired&&g._fieldsExpired[n])||g.disableThirdPartyCalls&&!s)o||(n===y?(g._registerCallback(n,t),o=g._generateLocalMID(),g.setMarketingCloudVisitorID(o)):n===C?(g._registerCallback(n,t),o="",g.setAnalyticsVisitorID(o)):i=!(o=""));else if(n===y||"MCOPTOUT"===n?a="MC":"MCAAMLH"===n||n===b?a=P:n===C&&(a="A"),a)return!e||null!=g._loading&&g._loading[a]||(null==g._loading&&(g._loading={}),g._loading[a]=!0,g._loadData(a,e,function(e){if(!g._getField(n)){e&&w.setState(a,!0);var t="";n===y?t=g._generateLocalMID():a===P&&(t={error_msg:"timeout"}),g._setFields(a,t)}},r)),g._registerCallback(n,t),o||(e||g._setFields(a,{id:S}),"");return n!==y&&n!==C||o!==S||(i=!(o="")),t&&i&&g._callCallback(t,[o]),o},g._setMarketingCloudFields=function(e){g._readVisitor(),g._setFields("MC",e)},g._mapCustomerIDs=function(e){g.getAudienceManagerBlob(e,!0)},g._setAnalyticsFields=function(e){g._readVisitor(),g._setFields("A",e)},g._setAudienceManagerFields=function(e){g._readVisitor(),g._setFields(P,e)},g._getAudienceManagerURLData=function(e){var t=g.audienceManagerServer,n="",i=g._getField(y),r=g._getField(b,!0),a=g._getField(C),o=a&&a!==S?"&d_cid_ic=AVID%01"+encodeURIComponent(a):"";if(g.loadSSL&&g.audienceManagerServerSecure&&(t=g.audienceManagerServerSecure),t){var s,l,c=g.getCustomerIDs();if(c)for(s in c)m(s)&&(l=c[s],o+="&d_cid_ic="+encodeURIComponent(s)+"%01"+encodeURIComponent(l.id?l.id:"")+(l.authState?"%01"+l.authState:""));e=e||"_setAudienceManagerFields";var u="http"+(g.loadSSL?"s":"")+"://"+t+"/id",d="d_visid_ver="+g.version+(f&&-1!==u.indexOf("demdex.net")?"&gdpr=1&gdpr_force=1&gdpr_consent="+f:"")+"&d_rtbd=json&d_ver=2"+(!i&&g._use1stPartyMarketingCloudServer?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(g.marketingCloudOrgID)+"&d_nsid="+(g.idSyncContainerID||0)+(i?"&d_mid="+encodeURIComponent(i):"")+(g.idSyncDisable3rdPartySyncing||g.disableThirdPartyCookies?"&d_coppa=true":"")+(!0===v?"&d_coop_safe=1":!1===v?"&d_coop_unsafe=1":"")+(r?"&d_blob="+encodeURIComponent(r):"")+o,p=["s_c_il",g._in,e];return{url:n=u+"?"+d+"&d_cb=s_c_il%5B"+g._in+"%5D."+e,corsUrl:u+"?"+d,callback:p}}return{url:n}},g.appendVisitorIDsTo=function(e){try{var t=[[y,g._getField(y)],[C,g._getField(C)],["MCORGID",g.marketingCloudOrgID]];return g._addQuerystringParam(e,le.ADOBE_MC,a(t))}catch(t){return e}},g.appendSupplementalDataIDTo=function(e,t){if(!(t=t||g.getSupplementalDataID(E.generateRandomString(),!0)))return e;try{var n=a([["SDID",t],["MCORGID",g.marketingCloudOrgID]]);return g._addQuerystringParam(e,le.ADOBE_MC_SDID,n)}catch(t){return e}};var E={parseHash:function(e){var t=e.indexOf("#");return 0<t?e.substr(t):""},hashlessUrl:function(e){var t=e.indexOf("#");return 0<t?e.substr(0,t):e},addQueryParamAtLocation:function(e,t,n){var i=e.split("&");return n=null!=n?n:i.length,i.splice(n,0,t),i.join("&")},isFirstPartyAnalyticsVisitorIDCall:function(e,t,n){return e===C&&(t=t||g.trackingServer,n=n||g.trackingServerSecure,!("string"!=typeof(i=g.loadSSL?n:t)||!i.length)&&i.indexOf("2o7.net")<0&&i.indexOf("omtrdc.net")<0);var i},isObject:function(e){return Boolean(e&&e===Object(e))},removeCookie:function(e){ne.remove(e,{domain:g.cookieDomain})},isTrackingServerPopulated:function(){return!!g.trackingServer||!!g.trackingServerSecure},getTimestampInSeconds:function(){return Math.round((new Date).getTime()/1e3)},parsePipeDelimetedKeyValues:function(e){return e.split("|").reduce(function(e,t){var n=t.split("=");return e[n[0]]=decodeURIComponent(n[1]),e},{})},generateRandomString:function(e){e=e||5;for(var t="",n="abcdefghijklmnopqrstuvwxyz0123456789";e--;)t+=n[Math.floor(Math.random()*n.length)];return t},normalizeBoolean:function(e){return"true"===e||"false"!==e&&e},parseBoolean:function(e){return"true"===e||"false"!==e&&null},replaceMethodsWithFunction:function(e,t){for(var n in e)e.hasOwnProperty(n)&&"function"==typeof e[n]&&(e[n]=t);return e}};g._helpers=E;var I=function(f,t){var r=D.document;return{THROTTLE_START:3e4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:null,onPagePixels:[],iframeHost:null,getIframeHost:function(e){if("string"==typeof e){var t=e.split("/");return t[0]+"//"+t[2]}},subdomain:null,url:null,getUrl:function(){var e,t="http://fast.",n="?d_nsid="+f.idSyncContainerID+"#"+encodeURIComponent(r.location.origin);return this.subdomain||(this.subdomain="nosubdomainreturned"),f.loadSSL&&(t=f.idSyncSSLUseAkamai?"https://fast.":"https://"),e=t+this.subdomain+".demdex.net/dest5.html"+n,this.iframeHost=this.getIframeHost(e),this.id="destination_publishing_iframe_"+this.subdomain+"_"+f.idSyncContainerID,e},checkDPIframeSrc:function(){var e="?d_nsid="+f.idSyncContainerID+"#"+encodeURIComponent(r.location.href);"string"==typeof f.dpIframeSrc&&f.dpIframeSrc.length&&(this.id="destination_publishing_iframe_"+(f._subdomain||this.subdomain||(new Date).getTime())+"_"+f.idSyncContainerID,this.iframeHost=this.getIframeHost(f.dpIframeSrc),this.url=f.dpIframeSrc+e)},idCallNotProcesssed:null,doAttachIframe:!1,startedAttachingIframe:!1,iframeHasLoaded:null,iframeIdChanged:null,newIframeCreated:null,originalIframeHasLoadedAlready:null,iframeLoadedCallbacks:[],regionChanged:!1,timesRegionChanged:0,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:le.POST_MESSAGE_ENABLED?null:100,onPageDestinationsFired:[],jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,readyToAttachIframePreliminary:function(){return!(f.idSyncDisableSyncs||f.disableIdSyncs||f.idSyncDisable3rdPartySyncing||f.disableThirdPartyCookies||f.disableThirdPartyCalls)},readyToAttachIframe:function(){return this.readyToAttachIframePreliminary()&&(this.doAttachIframe||f._doAttachIframe)&&(this.subdomain&&"nosubdomainreturned"!==this.subdomain||f._subdomain)&&this.url&&!this.startedAttachingIframe},attachIframe:function(){function e(){(i=r.createElement("iframe")).sandbox="allow-scripts allow-same-origin",i.title="Adobe ID Syncing iFrame",i.id=n.id,i.name=n.id+"_name",i.style.cssText="display: none; width: 0; height: 0;",i.src=n.url,n.newIframeCreated=!0,t(),r.body.appendChild(i)}function t(e){i.addEventListener("load",function(){i.className="aamIframeLoaded",n.iframeHasLoaded=!0,n.fireIframeLoadedCallbacks(e),n.requestToProcess()})}this.startedAttachingIframe=!0;var n=this,i=r.getElementById(this.id);i?"IFRAME"!==i.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==i.className?(this.originalIframeHasLoadedAlready=!1,t("The destination publishing iframe already exists from a different library, but hadn't loaded yet.")):(this.originalIframeHasLoadedAlready=!0,this.iframeHasLoaded=!0,this.iframe=i,this.fireIframeLoadedCallbacks("The destination publishing iframe already exists from a different library, and had loaded alresady."),this.requestToProcess())):e(),this.iframe=i},fireIframeLoadedCallbacks:function(t){this.iframeLoadedCallbacks.forEach(function(e){"function"==typeof e&&e({message:t||"The destination publishing iframe was attached and loaded successfully."})}),this.iframeLoadedCallbacks=[]},requestToProcess:function(e){function t(){i.jsonForComparison.push(e),i.jsonWaiting.push(e),i.processSyncOnPage(e)}var n,i=this;if(e===Object(e)&&e.ibs)if(n=JSON.stringify(e.ibs||[]),this.jsonForComparison.length){var r,a,o,s=!1;for(r=0,a=this.jsonForComparison.length;r<a;r++)if(o=this.jsonForComparison[r],n===JSON.stringify(o.ibs||[])){s=!0;break}s?this.jsonDuplicates.push(e):t()}else t();if((this.receivedThirdPartyCookiesNotification||!le.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length){var l=this.jsonWaiting.shift();this.process(l),this.requestToProcess()}f.idSyncDisableSyncs||f.disableIdSyncs||!this.iframeHasLoaded||!this.messages.length||this.sendingMessages||(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){i.messageSendingInterval=le.POST_MESSAGE_ENABLED?null:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},getRegionAndCheckIfChanged:function(e,t){var n=f._getField("MCAAMLH"),i=e.d_region||e.dcs_region;return n?i&&(f._setFieldExpire("MCAAMLH",t),f._setField("MCAAMLH",i),parseInt(n,10)!==i&&(this.regionChanged=!0,this.timesRegionChanged++,f._setField("MCSYNCSOP",""),f._setField("MCSYNCS",""),n=i)):(n=i)&&(f._setFieldExpire("MCAAMLH",t),f._setField("MCAAMLH",n)),n=n||""},processSyncOnPage:function(e){var t,n,i,r;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(i=0;i<n;i++)(r=t[i]).syncOnPage&&this.checkFirstPartyCookie(r,"","syncOnPage")},process:function(e){var t,n,i,r,a,o=encodeURIComponent,s=!1;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(s=!0,i=0;i<n;i++)r=t[i],a=[o("ibs"),o(r.id||""),o(r.tag||""),J.encodeAndBuildRequest(r.url||[],","),o(r.ttl||""),"","",r.fireURLSync?"true":"false"],r.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(a.join("|")):r.fireURLSync&&this.checkFirstPartyCookie(r,a.join("|")));s&&this.jsonProcessed.push(e)},checkFirstPartyCookie:function(e,t,n){var i="syncOnPage"===n,r=i?"MCSYNCSOP":"MCSYNCS";f._readVisitor();var a,o,s=f._getField(r),l=!1,c=!1,u=Math.ceil((new Date).getTime()/le.MILLIS_PER_DAY);s?(a=s.split("*"),l=(o=this.pruneSyncData(a,e.id,u)).dataPresent,c=o.dataValid,l&&c||this.fireSync(i,e,t,a,r,u)):(a=[],this.fireSync(i,e,t,a,r,u))},pruneSyncData:function(e,t,n){var i,r,a,o=!1,s=!1;for(r=0;r<e.length;r++)i=e[r],a=parseInt(i.split("-")[1],10),i.match("^"+t+"-")?(o=!0,n<a?s=!0:(e.splice(r,1),r--)):a<=n&&(e.splice(r,1),r--);return{dataPresent:o,dataValid:s}},manageSyncsSize:function(e){if(e.join("*").length>this.MAX_SYNCS_LENGTH)for(e.sort(function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)});e.join("*").length>this.MAX_SYNCS_LENGTH;)e.shift()},fireSync:function(e,t,n,i,u,r){var d=this;if(e){if("img"===t.tag){var a,o,s,l,c=t.url,p=f.loadSSL?"https:":"http:";for(a=0,o=c.length;a<o;a++){s=c[a],l=/^\/\//.test(s);var g=new Image;g.addEventListener("load",function(o,s,l,c){return function(){d.onPagePixels[o]=null,f._readVisitor();var e,t,n,i,r=f._getField(u),a=[];if(r)for(t=0,n=(e=r.split("*")).length;t<n;t++)(i=e[t]).match("^"+s.id+"-")||a.push(i);d.setSyncTrackingData(a,s,l,c)}}(this.onPagePixels.length,t,u,r)),g.src=(l?p:"")+s,this.onPagePixels.push(g)}}}else this.addMessage(n),this.setSyncTrackingData(i,t,u,r)},addMessage:function(e){var t=encodeURIComponent(f._enableErrorReporting?"---destpub-debug---":"---destpub---");this.messages.push((le.POST_MESSAGE_ENABLED?"":t)+e)},setSyncTrackingData:function(e,t,n,i){e.push(t.id+"-"+(i+Math.ceil(t.ttl/60/24))),this.manageSyncsSize(e),f._setField(n,e.join("*"))},sendMessages:function(){var e,t=this,n="",i=encodeURIComponent;this.regionChanged&&(n=i("---destpub-clear-dextp---"),this.regionChanged=!1),this.messages.length?le.POST_MESSAGE_ENABLED?(e=n+i("---destpub-combined---")+this.messages.join("%01"),this.postMessage(e),this.messages=[],this.sendingMessages=!1):(e=this.messages.shift(),this.postMessage(n+e),setTimeout(function(){t.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1},postMessage:function(e){oe(e,this.url,this.iframe.contentWindow),this.messagesPosted.push(e)},receiveMessage:function(e){var t,n=/^---destpub-to-parent---/;"string"==typeof e&&n.test(e)&&("canSetThirdPartyCookies"===(t=e.replace(n,"").split("|"))[0]&&(this.canSetThirdPartyCookies="true"===t[1],this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(e))},processIDCallData:function(e){(null==this.url||e.subdomain&&"nosubdomainreturned"===this.subdomain)&&("string"==typeof f._subdomain&&f._subdomain.length?this.subdomain=f._subdomain:this.subdomain=e.subdomain||"",this.url=this.getUrl()),e.ibs instanceof Array&&e.ibs.length&&(this.doAttachIframe=!0),this.readyToAttachIframe()&&(f.idSyncAttachIframeOnWindowLoad?!t.windowLoaded&&"complete"!==r.readyState&&"loaded"!==r.readyState||this.attachIframe():this.attachIframeASAP()),"function"==typeof f.idSyncIDCallResult?f.idSyncIDCallResult(e):this.requestToProcess(e),"function"==typeof f.idSyncAfterIDCallResult&&f.idSyncAfterIDCallResult(e)},canMakeSyncIDCall:function(e,t){return f._forceSyncIDCall||!e||t-e>le.DAYS_BETWEEN_SYNC_ID_CALLS},attachIframeASAP:function(){var t=this;!function e(){t.startedAttachingIframe||(r.body?t.attachIframe():setTimeout(e,30))}()}}}(g,_);g._destinationPublishing=I,g.timeoutMetricsLog=[];var w={isClientSideMarketingCloudVisitorID:null,MCIDCallTimedOut:null,AnalyticsIDCallTimedOut:null,AAMIDCallTimedOut:null,fieldGroupObj:{},setState:function(e,t){switch(e){case"MC":!1===t?!0!==this.MCIDCallTimedOut&&(this.MCIDCallTimedOut=!1):this.MCIDCallTimedOut=t;break;case"A":!1===t?!0!==this.AnalyticsIDCallTimedOut&&(this.AnalyticsIDCallTimedOut=!1):this.AnalyticsIDCallTimedOut=t;break;case P:!1===t?!0!==this.AAMIDCallTimedOut&&(this.AAMIDCallTimedOut=!1):this.AAMIDCallTimedOut=t}}};g.isClientSideMarketingCloudVisitorID=function(){return w.isClientSideMarketingCloudVisitorID},g.MCIDCallTimedOut=function(){return w.MCIDCallTimedOut},g.AnalyticsIDCallTimedOut=function(){return w.AnalyticsIDCallTimedOut},g.AAMIDCallTimedOut=function(){return w.AAMIDCallTimedOut},g.idSyncGetOnPageSyncInfo=function(){return g._readVisitor(),g._getField("MCSYNCSOP")},g.idSyncByURL=function(e){if(!g.isOptedOut()){var t=function(e){var t=e.minutesToLive,n="";return(g.idSyncDisableSyncs||g.disableIdSyncs)&&(n=n||"Error: id syncs have been disabled"),"string"==typeof e.dpid&&e.dpid.length||(n=n||"Error: config.dpid is empty"),"string"==typeof e.url&&e.url.length||(n=n||"Error: config.url is empty"),void 0===t?t=20160:(t=parseInt(t,10),(isNaN(t)||t<=0)&&(n=n||"Error: config.minutesToLive needs to be a positive number")),{error:n,ttl:t}}(e||{});if(t.error)return t.error;var n,i,r=e.url,a=encodeURIComponent,o=I;return r=r.replace(/^https:/,"").replace(/^http:/,""),n=J.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],","),i=["ibs",a(e.dpid),"img",a(r),t.ttl,"",n],o.addMessage(i.join("|")),o.requestToProcess(),"Successfully queued"}},g.idSyncByDataSource=function(e){if(!g.isOptedOut())return e===Object(e)&&"string"==typeof e.dpuuid&&e.dpuuid.length?(e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid,g.idSyncByURL(e)):"Error: config or config.dpuuid is empty"},function(l,c){l.publishDestinations=function(e){var t=arguments[1],n=arguments[2];try{n="function"==typeof n?n:e.callback}catch(e){n=function(){}}var i=c;if(i.readyToAttachIframePreliminary()){if("string"==typeof e){if(!e.length)return void n({error:"subdomain is not a populated string."});if(!(t instanceof Array&&t.length))return void n({error:"messages is not a populated array."});var r=!1;if(t.forEach(function(e){"string"==typeof e&&e.length&&(i.addMessage(e),r=!0)}),!r)return void n({error:"None of the messages are populated strings."})}else{if(!J.isObject(e))return void n({error:"Invalid parameters passed."});var a=e;if("string"!=typeof(e=a.subdomain)||!e.length)return void n({error:"config.subdomain is not a populated string."});var o=a.urlDestinations;if(!(o instanceof Array&&o.length))return void n({error:"config.urlDestinations is not a populated array."});var s=[];o.forEach(function(e){J.isObject(e)&&(e.hideReferrer?e.message&&i.addMessage(e.message):s.push(e))}),function n(){s.length&&setTimeout(function(){var e=new Image,t=s.shift();e.src=t.url,i.onPageDestinationsFired.push(t),n()},100)}()}i.iframe?(n({message:"The destination publishing iframe is already attached and loaded."}),i.requestToProcess()):!l.subdomain&&l._getField("MCMID")?(i.subdomain=e,i.doAttachIframe=!0,i.url=i.getUrl(),i.readyToAttachIframe()?(i.iframeLoadedCallbacks.push(function(e){n({message:"Attempted to attach and load the destination publishing iframe through this API call. Result: "+(e.message||"no result")})}),i.attachIframe()):n({error:"Encountered a problem in attempting to attach and load the destination publishing iframe through this API call."})):i.iframeLoadedCallbacks.push(function(e){n({message:"Attempted to attach and load the destination publishing iframe through normal Visitor API processing. Result: "+(e.message||"no result")})})}else n({error:"The destination publishing iframe is disabled in the Visitor library."})}}(g,I),g._getCookieVersion=function(e){e=e||g.cookieRead(g.cookieName);var t=le.VERSION_REGEX.exec(e);return t&&1<t.length?t[1]:null},g._resetAmcvCookie=function(e){var t=g._getCookieVersion();t&&!ie(t,e)||E.removeCookie(g.cookieName)},g.setAsCoopSafe=function(){v=!0},g.setAsCoopUnsafe=function(){v=!1},function(){if(g.configs=Object.create(null),E.isObject(n))for(var e in n)m(e)&&(g[e]=n[e],g.configs[e]=n[e])}(),[["getMarketingCloudVisitorID"],["setCustomerIDs",void 0],["getAnalyticsVisitorID"],["getAudienceManagerLocationHint"],["getLocationHint"],["getAudienceManagerBlob"]].forEach(function(e){var t=e[0],n=2===e.length?e[1]:"",i=g[t];g[t]=function(e){return d()&&g.isAllowed()?i.apply(g,arguments):("function"==typeof e&&g._callCallback(e,[n]),n)}}),g.init=function(){if(!(!g.configs.doesOptInApply||c.optIn.isComplete&&d()))return c.optIn.fetchPermissions(s,!0);!function(){if(E.isObject(n)){g.idSyncContainerID=g.idSyncContainerID||0,v="boolean"==typeof g.isCoopSafe?g.isCoopSafe:E.parseBoolean(g.isCoopSafe),g.resetBeforeVersion&&g._resetAmcvCookie(g.resetBeforeVersion),g._attemptToPopulateIdsFromUrl(),g._attemptToPopulateSdidFromUrl(),g._readVisitor();var e=g._getField("MCIDTS"),t=Math.ceil((new Date).getTime()/le.MILLIS_PER_DAY);g.idSyncDisableSyncs||g.disableIdSyncs||!I.canMakeSyncIDCall(e,t)||(g._setFieldExpire(b,-1),g._setField("MCIDTS",t)),g.getMarketingCloudVisitorID(),g.getAudienceManagerLocationHint(),g.getAudienceManagerBlob(),g._mergeServerState(g.serverState)}else g._attemptToPopulateIdsFromUrl(),g._attemptToPopulateSdidFromUrl()}(),function(){if(!g.idSyncDisableSyncs&&!g.disableIdSyncs){I.checkDPIframeSrc();h.addEventListener("load",function(){_.windowLoaded=!0,function(){var e=I;e.readyToAttachIframe()&&e.attachIframe()}()});try{se(function(e){I.receiveMessage(e.data)},I.iframeHost)}catch(e){}}}(),g.whitelistIframeDomains&&le.POST_MESSAGE_ENABLED&&(g.whitelistIframeDomains=g.whitelistIframeDomains instanceof Array?g.whitelistIframeDomains:[g.whitelistIframeDomains],g.whitelistIframeDomains.forEach(function(e){var t=new O(i,e),n=N(g,t);se(n,e)}))}}we.config=ue;var ke=D.Visitor=we,De=Ee.OptIn,Oe=Ee.IabPlugin;return ke.getInstance=function(i,e){if(!i)throw new Error("Visitor requires Adobe Marketing Cloud Org ID.");i.indexOf("@")<0&&(i+="@AdobeOrg");var t=function(){var e=D.s_c_il;if(e)for(var t=0;t<e.length;t++){var n=e[t];if(n&&"Visitor"===n._c&&n.marketingCloudOrgID===i)return n}}();if(t)return t;var r,n=function(r){if(J.isObject(r))return Object.keys(r).filter(function(e){return""!==r[e]}).reduce(function(e,t){var n="doesOptInApply"!==t?r[t]:ue.normalizeConfig(r[t]),i=J.normalizeBoolean(n);return e[t]=i,e},Object.create(null))}(e);r=n||{},D.adobe.optIn=D.adobe.optIn||function(){var e=J.pluck(r,["doesOptInApply","previousPermissions","preOptInApprovals","isOptInStorageEnabled","optInStorageExpiry","isIabContext"]),t=r.optInCookieDomain||r.cookieDomain;t=(t=t||M())===window.location.hostname?"":t,e.optInCookieDomain=t;var n=new De(e,{cookies:ne});if(e.isIabContext){var i=new Oe(window.__cmp);n.registerPlugin(i)}return n}();var a=i.split("").reverse().join(""),o=new ke(i,null,a);J.isObject(n)&&n.cookieDomain&&(o.cookieDomain=n.cookieDomain),D.s_c_il.splice(--D.s_c_in,1);var s=J.getIeVersion();if("number"==typeof s&&s<10)return o._helpers.replaceMethodsWithFunction(o,function(){});var l,c=function(){try{return D.self!==D.parent}catch(e){return 1}}()&&((l=o).cookieWrite("TEST_AMCV_COOKIE","T",1),"T"!==l.cookieRead("TEST_AMCV_COOKIE")||(l._helpers.removeCookie("TEST_AMCV_COOKIE"),0))&&D.parent?new d(i,n,o,D.parent):new ke(i,n,a);return o=null,c.init(),c},D.addEventListener?D.addEventListener("load",Ne):D.attachEvent&&D.attachEvent("onload",Ne),ke.codeLoadEnd=(new Date).getTime(),ke;function Ne(){ke.windowLoaded=!0}}(),visitor=Visitor.getInstance(__org_id__,{trackingServer:__trackingServer__,trackingServerSecure:__trackingServerSecure__}),s_cbc_sitecatalyst_init=function(e){if(e.charSet="UTF-8",e.currencyCode="CAD",e.trackDownloadLinks=!1,e.trackExternalLinks=!1,e.trackInlineStats=!0,e.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx,asx",e.linkInternalFilters="javascript:,cbc.ca",e.linkLeaveQueryString=!1,e.linkTrackVars="None",e.linkTrackEvents="None",e.ssl=!0,e.usePlugins=!0,e.doPlugins=function(e){},e.c_r=e.Util.cookieRead,e.c_w=e.Util.cookieWrite,e.getValOnce=new Function("v","c","e","var s=this,k=s.c_r(c),a=new Date;e=e?e:0;if(v){a.setTime(a.getTime()+e*86400000);s.c_w(c,v,e?a:0);}return v==k?'':v"),e.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),e.apl=function(e,t,n,i){var r=0;if(e=e||"",i){var a,o,s=this.split(e,n);for(a=0;a<s.length;a++)o=s[a],r=r||(1==i?o==t:o.toLowerCase()==t.toLowerCase())}return r||(e=e?e+n+t:t),e},e.getNewRepeat=new Function("d","cn","var s=this,e=new Date(),cval,sval,ct=e.getTime();d=d?d:30;cn=cn?cn:'s_nr';e.setTime(ct+d*24*60*60*1000);cval=s.c_r(cn);if(cval.length==0){s.c_w(cn,ct+'-New',e);return'New';}sval=s.split(cval,'-');if(ct-sval[0]<30*60*1000&&sval[1]=='New'){s.c_w(cn,ct+'-New',e);return'New';}else{s.c_w(cn,ct+'-Repeat',e);return'Repeat';}"),e.visitor=Visitor.getInstance(__org_id__),e.visitorNamespace="cbcca",e.trackingServer=__trackingServer__,e.trackingServerSecure=__trackingServerSecure__,e.maxDelay="3000",window.CBC.APP.SC.UTIL.getQueryStringParameterValue("webview",window.document.url)){var t=window.CBC.APP.SC.UTIL.getQueryStringParameterValue("appname",window.document.url);if(window.CBC.APP.SC.UTIL.getMetadataWhitelist().metadata.whitelist.webviewapps[t]){var n=window.CBC.APP.SC.UTIL.getQueryStringParameterValue("udid",window.document.url);n&&(e.visitorID=n)}}};function AppMeasurement(e){var g=this;g.version="2.17.0";var d=window;d.s_c_in||(d.s_c_il=[],d.s_c_in=0),g._il=d.s_c_il,g._in=d.s_c_in,g._il[g._in]=g,d.s_c_in++,g._c="s_c";var f=d.AppMeasurement.ec;f=f||null;var t,n,i,p=d;try{for(t=p.parent,n=p.location;t&&t.location&&n&&""+t.location!=""+n&&p.location&&""+t.location!=""+p.location&&t.location.host==n.host;)t=(p=t).parent}catch(e){}g.C=function(e){try{console.log(e)}catch(e){}},g.Pa=function(e){return""+parseInt(e)==""+e},g.replace=function(e,t,n){return!e||e.indexOf(t)<0?e:e.split(t).join(n)},g.escape=function(e){var t,n;if(!e)return e;for(e=encodeURIComponent(e),t=0;t<7;t++)n="+~!*()'".substring(t,t+1),0<=e.indexOf(n)&&(e=g.replace(e,n,"%"+n.charCodeAt(0).toString(16).toUpperCase()));return e},g.unescape=function(e){if(!e)return e;e=0<=e.indexOf("+")?g.replace(e,"+"," "):e;try{return decodeURIComponent(e)}catch(e){}return unescape(e)},g.Kb=function(){var e,t=d.location.hostname,n=g.fpCookieDomainPeriods;if(n=n||g.cookieDomainPeriods,t&&!g.Ia&&!/^[0-9.]+$/.test(t)&&(n=2<(n=n?parseInt(n):2)?n:2,0<=(e=t.lastIndexOf(".")))){for(;0<=e&&1<n;)e=t.lastIndexOf(".",e-1),n--;g.Ia=0<e?t.substring(e):t}return g.Ia},g.c_r=g.cookieRead=function(e){e=g.escape(e);var t=" "+g.d.cookie,n=t.indexOf(" "+e+"="),i=n<0?n:t.indexOf(";",n);return"[[B]]"!=(e=n<0?"":g.unescape(t.substring(n+2+e.length,i<0?t.length:i)))?e:""},g.c_w=g.cookieWrite=function(e,t,n){var i,r=g.Kb(),a=g.cookieLifetime;return t=""+t,a=a?(""+a).toUpperCase():"",n&&"SESSION"!=a&&"NONE"!=a&&((i=""!=t?parseInt(a||0):-60)?(n=new Date).setTime(n.getTime()+1e3*i):1===n&&(i=(n=new Date).getYear(),n.setYear(i+2+(i<1900?1900:0)))),e&&"NONE"!=a?(g.d.cookie=g.escape(e)+"="+g.escape(""!=t?t:"[[B]]")+"; path=/;"+(n&&"SESSION"!=a?" expires="+n.toUTCString()+";":"")+(r?" domain="+r+";":""),g.cookieRead(e)==t):0},g.Hb=function(){var e=g.Util.getIeVersion();"number"==typeof e&&e<10&&(g.unsupportedBrowser=!0,g.ub(g,function(){}))},g.ub=function(e,t){for(var n in e)e.hasOwnProperty(n)&&"function"==typeof e[n]&&(e[n]=t)},g.K=[],g.ea=function(e,t,n){if(g.Ja)return 0;g.maxDelay||(g.maxDelay=250);var i=0,r=(new Date).getTime()+g.maxDelay,a=g.d.visibilityState,o=["webkitvisibilitychange","visibilitychange"];if((a=a||g.d.webkitVisibilityState)&&"prerender"==a){if(!g.fa)for(g.fa=1,n=0;n<o.length;n++)g.d.addEventListener(o[n],function(){var e=g.d.visibilityState;"visible"==(e=e||g.d.webkitVisibilityState)&&(g.fa=0,g.delayReady())});i=1,r=0}else n||g.u("_d")&&(i=1);return i&&(g.K.push({m:e,a:t,t:r}),g.fa||setTimeout(g.delayReady,g.maxDelay)),i},g.delayReady=function(){var e,t=(new Date).getTime(),n=0;for(g.u("_d")?n=1:g.ya();0<g.K.length;){if(e=g.K.shift(),n&&!e.t&&e.t>t){g.K.unshift(e),setTimeout(g.delayReady,parseInt(g.maxDelay/2));break}g.Ja=1,g[e.m].apply(g,e.a),g.Ja=0}},g.setAccount=g.sa=function(e){var t,n;if(!g.ea("setAccount",arguments))if(g.account=e,g.allAccounts)for(t=g.allAccounts.concat(e.split(",")),g.allAccounts=[],t.sort(),n=0;n<t.length;n++)0!=n&&t[n-1]==t[n]||g.allAccounts.push(t[n]);else g.allAccounts=e.split(",")},g.foreachVar=function(e,t){var n,i,r,a,o="";for(r=i="",g.lightProfileID?(n=g.O,(o=g.lightTrackVars)&&(o=","+o+","+g.ka.join(",")+",")):(n=g.g,(g.pe||g.linkType)&&(o=g.linkTrackVars,i=g.linkTrackEvents,g.pe&&(r=g.pe.substring(0,1).toUpperCase()+g.pe.substring(1),g[r]&&(o=g[r].ac,i=g[r].$b))),o=o&&","+o+","+g.F.join(",")+",",i&&o&&(o+=",events,")),t=t&&","+t+",",i=0;i<n.length;i++)r=n[i],(a=g[r])&&(!o||0<=o.indexOf(","+r+","))&&(!t||0<=t.indexOf(","+r+","))&&e(r,a)},g.o=function(e,t,n,i,r){var a,o,s,l,c="",u=0;if("contextData"==e&&(e="c"),t){for(a in t)if(!(Object.prototype[a]||r&&a.substring(0,r.length)!=r)&&t[a]&&(!n||0<=n.indexOf(","+(i?i+".":"")+a+","))){if(s=!1,u)for(o=0;o<u.length;o++)if(a.substring(0,u[o].length)==u[o]){s=!0;break}if(!s&&(""==c&&(c+="&"+e+"."),o=t[a],r&&(a=a.substring(r.length)),0<a.length))if(0<(s=a.indexOf(".")))o=a.substring(0,s),(u=u||[]).push(s=(r||"")+o+"."),c+=g.o(o,t,n,i,s);else if("boolean"==typeof o&&(o=o?"true":"false"),o){if("retrieveLightData"==i&&r.indexOf(".contextData.")<0)switch(s=a.substring(0,4),l=a.substring(4),a){case"transactionID":a="xact";break;case"channel":a="ch";break;case"campaign":a="v0";break;default:g.Pa(l)&&("prop"==s?a="c"+l:"eVar"==s?a="v"+l:"list"==s?a="l"+l:"hier"==s&&(a="h"+l,o=o.substring(0,255)))}c+="&"+g.escape(a)+"="+g.escape(o)}}""!=c&&(c+="&."+e)}return c},g.usePostbacks=0,g.Nb=function(){var e,t,n,i,r,a,o,s,l="",c="",u="",d=i="",p=g.T();if(g.lightProfileID?(e=g.O,(c=g.lightTrackVars)&&(c=","+c+","+g.ka.join(",")+",")):(e=g.g,(g.pe||g.linkType)&&(c=g.linkTrackVars,u=g.linkTrackEvents,g.pe&&(i=g.pe.substring(0,1).toUpperCase()+g.pe.substring(1),g[i]&&(c=g[i].ac,u=g[i].$b))),c=c&&","+c+","+g.F.join(",")+",",u&&(u=","+u+",",c&&(c+=",events,")),g.events2&&(d+=(""!=d?",":"")+g.events2)),p&&p.getCustomerIDs){if(i=f,r=p.getCustomerIDs())for(t in r)Object.prototype[t]||"object"==_typeof2(n=r[t])&&(i=i||{},n.id&&(i[t+".id"]=n.id),n.authState&&(i[t+".as"]=n.authState));i&&(l+=g.o("cid",i))}for(g.AudienceManagement&&g.AudienceManagement.isReady()&&(l+=g.o("d",g.AudienceManagement.getEventCallConfigParams())),t=0;t<e.length;t++){if(i=e[t],r=g[i],n=i.substring(0,4),a=i.substring(4),r||("events"==i&&d?(r=d,d=""):"marketingCloudOrgID"==i&&p&&g.V("ECID")&&(r=p.marketingCloudOrgID)),r&&(!c||0<=c.indexOf(","+i+","))){switch(i){case"customerPerspective":i="cp";break;case"marketingCloudOrgID":i="mcorgid";break;case"supplementalDataID":i="sdid";break;case"timestamp":i="ts";break;case"dynamicVariablePrefix":i="D";break;case"visitorID":i="vid";break;case"marketingCloudVisitorID":i="mid";break;case"analyticsVisitorID":i="aid";break;case"audienceManagerLocationHint":i="aamlh";break;case"audienceManagerBlob":i="aamb";break;case"authState":i="as";break;case"pageURL":i="g",255<r.length&&(g.pageURLRest=r.substring(255),r=r.substring(0,255));break;case"pageURLRest":i="-g";break;case"referrer":i="r";break;case"vmk":case"visitorMigrationKey":i="vmt";break;case"visitorMigrationServer":i="vmf",g.ssl&&g.visitorMigrationServerSecure&&(r="");break;case"visitorMigrationServerSecure":i="vmf",!g.ssl&&g.visitorMigrationServer&&(r="");break;case"charSet":i="ce";break;case"visitorNamespace":i="ns";break;case"cookieDomainPeriods":i="cdp";break;case"cookieLifetime":i="cl";break;case"variableProvider":i="vvp";break;case"currencyCode":i="cc";break;case"channel":i="ch";break;case"transactionID":i="xact";break;case"campaign":i="v0";break;case"latitude":i="lat";break;case"longitude":i="lon";break;case"resolution":i="s";break;case"colorDepth":i="c";break;case"javascriptVersion":i="j";break;case"javaEnabled":i="v";break;case"cookiesEnabled":i="k";break;case"browserWidth":i="bw";break;case"browserHeight":i="bh";break;case"connectionType":i="ct";break;case"homepage":i="hp";break;case"events":if(d&&(r+=(""!=r?",":"")+d),u)for(a=r.split(","),r="",n=0;n<a.length;n++)0<=(s=(o=a[n]).indexOf("="))&&(o=o.substring(0,s)),0<=(s=o.indexOf(":"))&&(o=o.substring(0,s)),0<=u.indexOf(","+o+",")&&(r+=(r?",":"")+a[n]);break;case"events2":r="";break;case"contextData":l+=g.o("c",g[i],c,i),r="";break;case"lightProfileID":i="mtp";break;case"lightStoreForSeconds":i="mtss",g.lightProfileID||(r="");break;case"lightIncrementBy":i="mti",g.lightProfileID||(r="");break;case"retrieveLightProfiles":i="mtsr";break;case"deleteLightProfiles":i="mtsd";break;case"retrieveLightData":g.retrieveLightProfiles&&(l+=g.o("mts",g[i],c,i)),r="";break;default:g.Pa(a)&&("prop"==n?i="c"+a:"eVar"==n?i="v"+a:"list"==n?i="l"+a:"hier"==n&&(i="h"+a,r=r.substring(0,255)))}r&&(l+="&"+i+"="+("pev"!=i.substring(0,3)?g.escape(r):r))}"pev3"==i&&g.e&&(l+=g.e)}return g.ja&&(l+="&lrt="+g.ja,g.ja=null),l},g.B=function(e){var t=e.tagName;return"undefined"!=""+e.hc||"undefined"!=""+e.Wb&&"HTML"!=(""+e.Wb).toUpperCase()?"":("SHAPE"==(t=t&&t.toUpperCase?t.toUpperCase():"")&&(t=""),t&&(("INPUT"==t||"BUTTON"==t)&&e.type&&e.type.toUpperCase?t=e.type.toUpperCase():!t&&e.href&&(t="A")),t)},g.La=function(e){var t,n,i,r=d.location,a=e.href?e.href:"";return t=a.indexOf(":"),n=a.indexOf("?"),i=a.indexOf("/"),a&&(t<0||0<=n&&n<t||0<=i&&i<t)&&(n=e.protocol&&1<e.protocol.length?e.protocol:r.protocol?r.protocol:"",t=r.pathname.lastIndexOf("/"),a=(n?n+"//":"")+(e.host?e.host:r.host?r.host:"")+("/"!=a.substring(0,1)?r.pathname.substring(0,t<0?0:t)+"/":"")+a),a},g.L=function(e){var t,n,i=g.B(e),r="",a=0;return i&&(t=e.protocol,n=e.onclick,!e.href||"A"!=i&&"AREA"!=i||n&&t&&!(t.toLowerCase().indexOf("javascript")<0)?n?(r=g.replace(g.replace(g.replace(g.replace(""+n,"\r",""),"\n",""),"\t","")," ",""),a=2):"INPUT"==i||"SUBMIT"==i?(e.value?r=e.value:e.innerText?r=e.innerText:e.textContent&&(r=e.textContent),a=3):"IMAGE"==i&&e.src&&(r=e.src):r=g.La(e),r)?{id:r.substring(0,100),type:a}:0},g.fc=function(e){for(var t=g.B(e),n=g.L(e);e&&!n&&"BODY"!=t;)(e=e.parentElement?e.parentElement:e.parentNode)&&(t=g.B(e),n=g.L(e));return n&&"BODY"!=t||(e=0),e&&(0<=(t=e.onclick?""+e.onclick:"").indexOf(".tl(")||0<=t.indexOf(".trackLink("))&&(e=0),e},g.Vb=function(){var e,t,n,i,r=g.linkObject,a=g.linkType,o=g.linkURL;if(g.la=1,r||(g.la=0,r=g.clickObject),r){for(e=g.B(r),t=g.L(r);r&&!t&&"BODY"!=e;)(r=r.parentElement?r.parentElement:r.parentNode)&&(e=g.B(r),t=g.L(r));if(t&&"BODY"!=e||(r=0),r&&!g.linkObject){var s=r.onclick?""+r.onclick:"";(0<=s.indexOf(".tl(")||0<=s.indexOf(".trackLink("))&&(r=0)}}else g.la=1;if(!o&&r&&(o=g.La(r)),o&&!g.linkLeaveQueryString&&(0<=(n=o.indexOf("?"))&&(o=o.substring(0,n))),!a&&o){var l,c=0,u=0;if(g.trackDownloadLinks&&g.linkDownloadFileTypes)for(n=(s=o.toLowerCase()).indexOf("?"),i=s.indexOf("#"),0<=n?0<=i&&i<n&&(n=i):n=i,0<=n&&(s=s.substring(0,n)),n=g.linkDownloadFileTypes.toLowerCase().split(","),i=0;i<n.length;i++)(l=n[i])&&s.substring(s.length-(l.length+1))=="."+l&&(a="d");if(g.trackExternalLinks&&!a&&(s=o.toLowerCase(),g.Oa(s)&&(g.linkInternalFilters||(g.linkInternalFilters=d.location.hostname),n=0,g.linkExternalFilters?(n=g.linkExternalFilters.toLowerCase().split(","),c=1):g.linkInternalFilters&&(n=g.linkInternalFilters.toLowerCase().split(",")),n))){for(i=0;i<n.length;i++)l=n[i],0<=s.indexOf(l)&&(u=1);u?c&&(a="e"):c||(a="e")}}g.linkObject=r,g.linkURL=o,g.linkType=a,(g.trackClickMap||g.trackInlineStats)&&(g.e="",r&&(a=g.pageName,o=1,r=r.sourceIndex,a||(a=g.pageURL,o=0),d.s_objectID&&(t.id=d.s_objectID,r=t.type=1),a&&t&&t.id&&e&&(g.e="&pid="+g.escape(a.substring(0,255))+(o?"&pidt="+o:"")+"&oid="+g.escape(t.id.substring(0,100))+(t.type?"&oidt="+t.type:"")+"&ot="+e+(r?"&oi="+r:""))))},g.Ob=function(){var e=g.la,t=g.linkType,n=g.linkURL,i=g.linkName;if(t&&(n||i)&&("d"!=(t=t.toLowerCase())&&"e"!=t&&(t="o"),g.pe="lnk_"+t,g.pev1=n?g.escape(n):"",g.pev2=i?g.escape(i):"",e=1),g.abort&&(e=0),g.trackClickMap||g.trackInlineStats||g.Rb()){t={},n=0;var r,a,o,s=(l=g.pb())?l.split("&"):0,l=0;if(s)for(r=0;r<s.length;r++)a=s[r].split("="),i=g.unescape(a[0]).split(","),t[a=g.unescape(a[1])]=i;for(o in i=g.account.split(","),r={},g.contextData)o&&!Object.prototype[o]&&"a.activitymap."==o.substring(0,14)&&(r[o]=g.contextData[o],g.contextData[o]="");if(g.e=g.o("c",r)+(g.e?g.e:""),e||g.e){for(a in e&&!g.e&&(l=1),t)if(!Object.prototype[a])for(o=0;o<i.length;o++)for(l&&((s=t[a].join(","))==g.account&&(g.e+=("&"!=a.charAt(0)?"&":"")+a,t[a]=[],n=1)),r=0;r<t[a].length;r++)(s=t[a][r])==i[o]&&(l&&(g.e+="&u="+g.escape(s)+("&"!=a.charAt(0)?"&":"")+a+"&u=0"),t[a].splice(r,1),n=1);if(e||(n=1),n){for(a in l="",r=2,!e&&g.e&&(l=g.escape(i.join(","))+"="+g.escape(g.e),r=1),t)!Object.prototype[a]&&0<r&&0<t[a].length&&(l+=(l?"&":"")+g.escape(t[a].join(","))+"="+g.escape(a),r--);g.wb(l)}}}return e},g.pb=function(){return g.useLinkTrackSessionStorage?g.Ca()?d.sessionStorage.getItem(g.P):void 0:g.cookieRead(g.P)},g.Ca=function(){return!!d.sessionStorage},g.wb=function(e){g.useLinkTrackSessionStorage?g.Ca()&&d.sessionStorage.setItem(g.P,e):g.cookieWrite(g.P,e)},g.Pb=function(){if(!g.Zb){var e,t,n,i,r=new Date,a=p.location,o=t=e="",s="1.2",l=g.cookieWrite("s_cc","true",0)?"Y":"N",c="",u="";if(r.setUTCDate&&(s="1.3",(0).toPrecision&&(s="1.5",(r=[]).forEach))){s="1.6",t=0,e={};try{(t=new Iterator(e)).next&&(s="1.7",r.reduce&&((s="1.8").trim&&(s="1.8.1",Date.parse&&(s="1.8.2",Object.create&&(s="1.8.5")))))}catch(e){}}e=screen.width+"x"+screen.height,o=navigator.javaEnabled()?"Y":"N",t=screen.pixelDepth?screen.pixelDepth:screen.colorDepth,n=g.w.innerWidth?g.w.innerWidth:g.d.documentElement.offsetWidth,i=g.w.innerHeight?g.w.innerHeight:g.d.documentElement.offsetHeight;try{g.b.addBehavior("#default#homePage"),c=g.b.gc(a)?"Y":"N"}catch(e){}try{g.b.addBehavior("#default#clientCaps"),u=g.b.connectionType}catch(e){}g.resolution=e,g.colorDepth=t,g.javascriptVersion=s,g.javaEnabled=o,g.cookiesEnabled=l,g.browserWidth=n,g.browserHeight=i,g.connectionType=u,g.homepage=c,g.Zb=1}},g.Q={},g.loadModule=function(t,e){var n=g.Q[t];if(!n){n=d["AppMeasurement_Module_"+t]?new d["AppMeasurement_Module_"+t](g):{},g.Q[t]=g[t]=n,n.ib=function(){return n.sb},n.xb=function(e){(n.sb=e)&&(g[t+"_onLoad"]=e,g.ea(t+"_onLoad",[g,n],1)||e(g,n))};try{Object.defineProperty?Object.defineProperty(n,"onLoad",{get:n.ib,set:n.xb}):n._olc=1}catch(e){n._olc=1}}e&&(g[t+"_onLoad"]=e,g.ea(t+"_onLoad",[g,n],1)||e(g,n))},g.u=function(e){var t,n;for(t in g.Q)if(!Object.prototype[t]&&(n=g.Q[t])&&(n._olc&&n.onLoad&&(n._olc=0,n.onLoad(g,n)),n[e]&&n[e]()))return 1;return 0},g.Rb=function(){return!(!g.ActivityMap||!g.ActivityMap._c)},g.Sb=function(){var e=Math.floor(1e13*Math.random()),t=g.visitorSampling,n=g.visitorSamplingGroup,i=(n="s_vsn_"+(g.visitorNamespace?g.visitorNamespace:g.account)+(n?"_"+n:""),g.cookieRead(n));if(t){if(t*=100,!(i=i&&parseInt(i))){if(!g.cookieWrite(n,e))return 0;i=e}if(t<i%1e4)return 0}return 1},g.S=function(e,t){var n,i,r,a,o,s,l;for(l={},n=0;n<2;n++)for(i=0<n?g.Ea:g.g,r=0;r<i.length;r++)if((o=e[a=i[r]])||e["!"+a]){if(o&&!t&&("contextData"==a||"retrieveLightData"==a)&&g[a])for(s in g[a])o[s]||(o[s]=g[a][s]);g[a]||(l["!"+a]=1),l[a]=g[a],g[a]=o}return l},g.cc=function(e){var t,n,i,r;for(t=0;t<2;t++)for(n=0<t?g.Ea:g.g,i=0;i<n.length;i++)e[r=n[i]]=g[r],e[r]||"prop"!==r.substring(0,4)&&"eVar"!==r.substring(0,4)&&"hier"!==r.substring(0,4)&&"list"!==r.substring(0,4)&&"channel"!==r&&"events"!==r&&"eventList"!==r&&"products"!==r&&"productList"!==r&&"purchaseID"!==r&&"transactionID"!==r&&"state"!==r&&"zip"!==r&&"campaign"!==r&&"events2"!==r&&"latitude"!==r&&"longitude"!==r&&"ms_a"!==r&&"contextData"!==r&&"supplementalDataID"!==r&&"tnt"!==r&&"timestamp"!==r&&"abort"!==r&&"useBeacon"!==r&&"linkObject"!==r&&"clickObject"!==r&&"linkType"!==r&&"linkName"!==r&&"linkURL"!==r&&"bodyClickTarget"!==r&&"bodyClickFunction"!==r||(e["!"+r]=1)},g.Jb=function(e){var t,n,i,r,a,o,s=0,l="",c="";if(e&&255<e.length&&(0<(n=(t=""+e).indexOf("?"))&&(o=t.substring(n+1),i=0,"http://"==(r=(t=t.substring(0,n)).toLowerCase()).substring(0,7)?i+=7:"https://"==r.substring(0,8)&&(i+=8),0<(n=r.indexOf("/",i))&&(r=r.substring(i,n),a=t.substring(n),t=t.substring(0,n),0<=r.indexOf("google")?s=",q,ie,start,search_key,word,kw,cd,":0<=r.indexOf("yahoo.co")?s=",p,ei,":0<=r.indexOf("baidu.")&&(s=",wd,word,"),s&&o)))){if((e=o.split("&"))&&1<e.length){for(i=0;i<e.length;i++)0<(n=(r=e[i]).indexOf("="))&&0<=s.indexOf(","+r.substring(0,n)+",")?l+=(l?"&":"")+r:c+=(c?"&":"")+r;l&&c?o=l+"&"+c:c=""}e=t+(0<(n=253-(o.length-c.length)-t.length)?a.substring(0,n):"")+"?"+o}return e},g.bb=function(t){var e=g.d.visibilityState,n=["webkitvisibilitychange","visibilitychange"];if((e=e||g.d.webkitVisibilityState)&&"prerender"==e){if(t)for(e=0;e<n.length;e++)g.d.addEventListener(n[e],function(){var e=g.d.visibilityState;"visible"==(e=e||g.d.webkitVisibilityState)&&t()});return!1}return!0},g.ba=!1,g.H=!1,g.zb=function(){g.H=!0,g.p()},g.I=!1,g.Ab=function(e){g.marketingCloudVisitorID=e.MCMID,g.visitorOptedOut=e.MCOPTOUT,g.analyticsVisitorID=e.MCAID,g.audienceManagerLocationHint=e.MCAAMLH,g.audienceManagerBlob=e.MCAAMB,g.I=!1,g.p()},g.ab=function(e){return g.maxDelay||(g.maxDelay=250),!g.u("_d")||(e&&setTimeout(function(){e()},g.maxDelay),!1)},g.Z=!1,g.G=!1,g.ya=function(){g.G=!0,g.p()},g.isReadyToTrack=function(){var e=!0;return!(!g.mb()||!g.kb())&&(g.ob()||(e=!1),g.rb()||(e=!1),e)},g.mb=function(){return g.ba||g.H||(g.bb(g.zb)?g.H=!0:g.ba=!0),!(g.ba&&!g.H)},g.kb=function(){var e=g.va();if(e){if(!g.ra&&!g.aa)return e.fetchPermissions(g.tb,!0),!(g.aa=!0);if(!g.ra)return!1;if(!e.isApproved(e.Categories.ANALYTICS))return!1}return!0},g.V=function(e){var t=g.va();return!(t&&!t.isApproved(t.Categories[e]))},g.va=function(){return d.adobe&&d.adobe.optIn?d.adobe.optIn:null},g.Y=!0,g.ob=function(){var e=g.T();return!e||!e.getVisitorValues||(g.Y&&(g.Y=!1,g.I||(g.I=!0,e.getVisitorValues(g.Ab))),!g.I)},g.T=function(){var e=g.visitor;return e&&!e.isAllowed()&&(e=null),e},g.rb=function(){return g.Z||g.G||(g.ab(g.ya)?g.G=!0:g.Z=!0),!(g.Z&&!g.G)},g.aa=!1,g.tb=function(){g.aa=!1,g.ra=!0},g.j=f,g.q=0,g.callbackWhenReadyToTrack=function(e,t,n){var i;(i={}).Eb=e,i.Db=t,i.Bb=n,g.j==f&&(g.j=[]),g.j.push(i),0==g.q&&(g.q=setInterval(g.p,100))},g.p=function(){var e;if(g.isReadyToTrack()&&(g.yb(),g.j!=f))for(;0<g.j.length;)(e=g.j.shift()).Db.apply(e.Eb,e.Bb)},g.yb=function(){g.q&&(clearInterval(g.q),g.q=0)},g.ta=function(e){var t,n={};if(g.cc(n),e!=f)for(t in e)n[t]=e[t];g.callbackWhenReadyToTrack(g,g.Da,[n]),g.Ba()},g.Lb=function(){var e,t=g.cookieRead("s_fid"),n="",i="";e=8;var r=4;if(!t||t.indexOf("-")<0){for(t=0;t<16;t++)e=Math.floor(Math.random()*e),n+="0123456789ABCDEF".substring(e,e+1),e=Math.floor(Math.random()*r),i+="0123456789ABCDEF".substring(e,e+1),e=r=16;t=n+"-"+i}return g.cookieWrite("s_fid",t,1)||(t=0),t},g.Da=function(e){var t,n=new Date,i="s"+Math.floor(n.getTime()/108e5)%10+Math.floor(1e13*Math.random()),r=n.getYear(),a=(r="t="+g.escape(n.getDate()+"/"+n.getMonth()+"/"+(r<1900?r+1900:r)+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+" "+n.getDay()+" "+n.getTimezoneOffset()),g.T());e&&(t=g.S(e,1)),g.Sb()&&!g.visitorOptedOut&&(g.wa()||(g.fid=g.Lb()),g.Vb(),g.usePlugins&&g.doPlugins&&g.doPlugins(g),g.account&&(g.abort||(g.trackOffline&&!g.timestamp&&(g.timestamp=Math.floor(n.getTime()/1e3)),e=d.location,g.pageURL||(g.pageURL=e.href?e.href:e),g.referrer||g.Za||(e=g.Util.getQueryParam("adobe_mc_ref",null,null,!0),g.referrer=e||void 0===e?void 0===e?"":e:p.document.referrer),g.Za=1,g.referrer=g.Jb(g.referrer),g.u("_g")),g.Ob()&&!g.abort&&(a&&g.V("TARGET")&&!g.supplementalDataID&&a.getSupplementalDataID&&(g.supplementalDataID=a.getSupplementalDataID("AppMeasurement:"+g._in,!g.expectSupplementalData)),g.V("AAM")||(g.contextData["cm.ssf"]=1),g.Pb(),r+=g.Nb(),g.qb(i,r),g.u("_t"),g.referrer=""))),g.Ba(),t&&g.S(t,1)},g.t=g.track=function(e,t){t&&g.S(t),g.Y=!0,g.isReadyToTrack()?null!=g.j&&0<g.j.length?(g.ta(e),g.p()):g.Da(e):g.ta(e)},g.Ba=function(){g.abort=g.supplementalDataID=g.timestamp=g.pageURLRest=g.linkObject=g.clickObject=g.linkURL=g.linkName=g.linkType=d.s_objectID=g.pe=g.pev1=g.pev2=g.pev3=g.e=g.lightProfileID=g.useBeacon=g.referrer=0},g.Aa=[],g.registerPreTrackCallback=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);"function"==typeof e?g.Aa.push([e,t]):g.debugTracking&&g.C("DEBUG: Non function type passed to registerPreTrackCallback")},g.fb=function(e){g.ua(g.Aa,e)},g.za=[],g.registerPostTrackCallback=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);"function"==typeof e?g.za.push([e,t]):g.debugTracking&&g.C("DEBUG: Non function type passed to registerPostTrackCallback")},g.eb=function(e){g.ua(g.za,e)},g.ua=function(e,t){if("object"==_typeof2(e))for(var n=0;n<e.length;n++){var i=e[n][0],r=e[n][1].slice();if(r.unshift(t),"function"==typeof i)try{i.apply(null,r)}catch(e){g.debugTracking&&g.C(e.message)}}},g.tl=g.trackLink=function(e,t,n,i,r){return g.linkObject=e,g.linkType=t,g.linkName=n,r&&(g.bodyClickTarget=e,g.bodyClickFunction=r),g.track(i)},g.trackLight=function(e,t,n,i){return g.lightProfileID=e,g.lightStoreForSeconds=t,g.lightIncrementBy=n,g.track(i)},g.clearVars=function(){var e,t;for(e=0;e<g.g.length;e++)"prop"!=(t=g.g[e]).substring(0,4)&&"eVar"!=t.substring(0,4)&&"hier"!=t.substring(0,4)&&"list"!=t.substring(0,4)&&"channel"!=t&&"events"!=t&&"eventList"!=t&&"products"!=t&&"productList"!=t&&"purchaseID"!=t&&"transactionID"!=t&&"state"!=t&&"zip"!=t&&"campaign"!=t||(g[t]=void 0)},g.tagContainerMarker="",g.qb=function(e,t){var n=g.gb()+"/"+e+"?AQB=1&ndh=1&pf=1&"+(g.xa()?"callback=s_c_il["+g._in+"].doPostbacks&et=1&":"")+t+"&AQE=1";g.fb(n),g.cb(n),g.U()},g.gb=function(){var e=g.hb();return"http"+(g.ssl?"s":"")+"://"+e+"/b/ss/"+g.account+"/"+(g.mobile?"5.":"")+(g.xa()?"10":"1")+"/JS-"+g.version+(g.Yb?"T":"")+(g.tagContainerMarker?"-"+g.tagContainerMarker:"")},g.xa=function(){return g.AudienceManagement&&g.AudienceManagement.isReady()||0!=g.usePostbacks},g.hb=function(){var e=g.dc,t=g.trackingServer;return t?g.trackingServerSecure&&g.ssl&&(t=g.trackingServerSecure):("d1"==(e=e?(""+e).toLowerCase():"d1")?e="112":"d2"==e&&(e="122"),t=g.jb()+"."+e+".2o7.net"),t},g.jb=function(){var e=g.visitorNamespace;return e||(e=(e=g.account.split(",")[0]).replace(/[^0-9a-z]/gi,"")),e},g.Ya=/{(%?)(.*?)(%?)}/,g.bc=RegExp(g.Ya.source,"g"),g.Ib=function(e){if("object"==_typeof2(e.dests))for(var t=0;t<e.dests.length;++t){var n=e.dests[t];if("string"==typeof n.c&&"aa."==n.id.substr(0,3))for(var i=n.c.match(g.bc),r=0;r<i.length;++r){var a=i[r],o=a.match(g.Ya),s="";"%"==o[1]&&"timezone_offset"==o[2]?s=(new Date).getTimezoneOffset():"%"==o[1]&&"timestampz"==o[2]&&(s=g.Mb()),n.c=n.c.replace(a,g.escape(s))}}},g.Mb=function(){var e=new Date,t=new Date(6e4*Math.abs(e.getTimezoneOffset()));return g.k(4,e.getFullYear())+"-"+g.k(2,e.getMonth()+1)+"-"+g.k(2,e.getDate())+"T"+g.k(2,e.getHours())+":"+g.k(2,e.getMinutes())+":"+g.k(2,e.getSeconds())+(0<e.getTimezoneOffset()?"-":"+")+g.k(2,t.getUTCHours())+":"+g.k(2,t.getUTCMinutes())},g.k=function(e,t){return(Array(e+1).join(0)+t).slice(-e)},g.pa={},g.doPostbacks=function(e){if("object"==_typeof2(e))if(g.Ib(e),"object"==_typeof2(g.AudienceManagement)&&"function"==typeof g.AudienceManagement.isReady&&g.AudienceManagement.isReady()&&"function"==typeof g.AudienceManagement.passData)g.AudienceManagement.passData(e);else if("object"==_typeof2(e)&&"object"==_typeof2(e.dests))for(var t=0;t<e.dests.length;++t){var n=e.dests[t];"object"==_typeof2(n)&&"string"==typeof n.c&&"string"==typeof n.id&&"aa."==n.id.substr(0,3)&&(g.pa[n.id]=new Image,g.pa[n.id].alt="",g.pa[n.id].src=n.c)}},g.cb=function(e){g.i||g.Qb(),g.i.push(e),g.ia=g.A(),g.Wa()},g.Qb=function(){g.i=g.Tb(),g.i||(g.i=[])},g.Tb=function(){var e,t;if(g.oa()){try{(t=d.localStorage.getItem(g.ma()))&&(e=d.JSON.parse(t))}catch(e){}return e}},g.oa=function(){var e=!0;return g.trackOffline&&g.offlineFilename&&d.localStorage&&d.JSON||(e=!1),e},g.Ma=function(){var e=0;return g.i&&(e=g.i.length),g.l&&e++,e},g.U=function(){if(!g.l||(g.v&&g.v.complete&&g.v.D&&g.v.R(),!g.l))if(g.Na=f,g.na)g.ia>g.N&&g.Ua(g.i),g.qa(500);else{var e=g.Cb();0<e?g.qa(e):(e=g.Ka())&&(g.l=1,g.Ub(e),g.Xb(e))}},g.qa=function(e){g.Na||(e=e||0,g.Na=setTimeout(g.U,e))},g.Cb=function(){var e;return!g.trackOffline||g.offlineThrottleDelay<=0?0:(e=g.A()-g.Sa,g.offlineThrottleDelay<e?0:g.offlineThrottleDelay-e)},g.Ka=function(){if(0<g.i.length)return g.i.shift()},g.Ub=function(e){if(g.debugTracking){var t,n="AppMeasurement Debug: "+e;for(e=e.split("&"),t=0;t<e.length;t++)n+="\n\t"+g.unescape(e[t]);g.C(n)}},g.wa=function(){return g.marketingCloudVisitorID||g.analyticsVisitorID},g.X=!1;try{i=JSON.parse('{"x":"y"}')}catch(e){i=null}for(i&&"y"==i.x?(g.X=!0,g.W=function(e){return JSON.parse(e)}):d.$$APPMEASUREMENT_CORE&d.$.parseJSON?(g.W=function(e){return d.$.parseJSON(e)},g.X=!0):g.W=function(){return null},g.Xb=function(e){var t,n,i;if(g.lb(e)&&(n=1,t={send:function(e){g.useBeacon=!1,navigator.sendBeacon(e)?t.R():t.ga()}}),!t&&g.wa()&&2047<e.length&&(g.$a()&&(n=2,t=new XMLHttpRequest),t&&(g.AudienceManagement&&g.AudienceManagement.isReady()||0!=g.usePostbacks)&&(g.X?t.Fa=!0:t=0)),!t&&g.Xa&&(e=e.substring(0,2047)),!t&&g.d.createElement&&(0!=g.usePostbacks||g.AudienceManagement&&g.AudienceManagement.isReady())&&(t=g.d.createElement("SCRIPT"))&&"async"in t&&((i=(i=g.d.getElementsByTagName("HEAD"))&&i[0]?i[0]:g.d.body)?(t.type="text/javascript",t.setAttribute("async","async"),n=3):t=0),t||((t=new Image).alt="",t.abort||void 0===d.InstallTrigger||(t.abort=function(){t.src=f})),t.Ta=Date.now(),t.Ha=function(){try{t.D&&(clearTimeout(t.D),t.D=0)}catch(e){}},t.onload=t.R=function(){if(t.Ta&&(g.ja=Date.now()-t.Ta),g.eb(e),t.Ha(),g.Gb(),g.ca(),g.l=0,g.U(),t.Fa){t.Fa=!1;try{g.doPostbacks(g.W(t.responseText))}catch(e){}}},t.onabort=t.onerror=t.ga=function(){t.Ha(),(g.trackOffline||g.na)&&g.l&&g.i.unshift(g.Fb),g.l=0,g.ia>g.N&&g.Ua(g.i),g.ca(),g.qa(500)},t.onreadystatechange=function(){4==t.readyState&&(200==t.status?t.R():t.ga())},g.Sa=g.A(),1===n)t.send(e);else if(2===n)i=e.indexOf("?"),n=e.substring(0,i),i=(i=e.substring(i+1)).replace(/&callback=[a-zA-Z0-9_.\[\]]+/,""),t.open("POST",n,!0),t.withCredentials=!0,t.send(i);else if(t.src=e,3===n){if(g.Qa)try{i.removeChild(g.Qa)}catch(e){}i.firstChild?i.insertBefore(t,i.firstChild):i.appendChild(t),g.Qa=g.v}t.D=setTimeout(function(){t.D&&(t.complete?t.R():(g.trackOffline&&t.abort&&t.abort(),t.ga()))},5e3),g.Fb=e,g.v=d["s_i_"+g.replace(g.account,",","_")]=t,(g.useForcedLinkTracking&&g.J||g.bodyClickFunction)&&(g.forcedLinkTrackingTimeout||(g.forcedLinkTrackingTimeout=250),g.da=setTimeout(g.ca,g.forcedLinkTrackingTimeout))},g.lb=function(e){var t=!1;return navigator.sendBeacon&&(g.nb(e)?t=!0:g.useBeacon&&(t=!0)),g.vb(e)&&(t=!1),t},g.nb=function(e){return!!(e&&0<e.indexOf("pe=lnk_e"))},g.vb=function(e){return 64e3<=e.length},g.$a=function(){return"undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest},g.Gb=function(){if(g.oa()&&!(g.Ra>g.N))try{d.localStorage.removeItem(g.ma()),g.Ra=g.A()}catch(e){}},g.Ua=function(e){if(g.oa()){g.Wa();try{d.localStorage.setItem(g.ma(),d.JSON.stringify(e)),g.N=g.A()}catch(e){}}},g.Wa=function(){if(g.trackOffline)for((!g.offlineLimit||g.offlineLimit<=0)&&(g.offlineLimit=10);g.i.length>g.offlineLimit;)g.Ka()},g.forceOffline=function(){g.na=!0},g.forceOnline=function(){g.na=!1},g.ma=function(){return g.offlineFilename+"-"+g.visitorNamespace+g.account},g.A=function(){return(new Date).getTime()},g.Oa=function(e){return 0!=(e=e.toLowerCase()).indexOf("#")&&0!=e.indexOf("about:")&&0!=e.indexOf("opera:")&&0!=e.indexOf("javascript:")},g.setTagContainer=function(e){var t,n,i;for(g.Yb=e,t=0;t<g._il.length;t++)if((n=g._il[t])&&"s_l"==n._c&&n.tagContainerName==e){if(g.S(n),n.lmq)for(t=0;t<n.lmq.length;t++)i=n.lmq[t],g.loadModule(i.n);if(n.ml)for(i in n.ml)if(g[i])for(t in e=g[i],i=n.ml[i])!Object.prototype[t]&&("function"!=typeof i[t]||(""+i[t]).indexOf("s_c_il")<0)&&(e[t]=i[t]);if(n.mmq)for(t=0;t<n.mmq.length;t++)i=n.mmq[t],g[i.m]&&((e=g[i.m])[i.f]&&"function"==typeof e[i.f]&&(i.a?e[i.f].apply(e,i.a):e[i.f].apply(e)));if(n.tq)for(t=0;t<n.tq.length;t++)g.track(n.tq[t]);n.s=g;break}},g.Util={urlEncode:g.escape,urlDecode:g.unescape,cookieRead:g.cookieRead,cookieWrite:g.cookieWrite,getQueryParam:function(e,t,n,i){var r,a="";return t=t||(g.pageURL?g.pageURL:d.location),n=n||"&",e&&t?(r=(t=""+t).indexOf("?"))<0?a:(t=n+t.substring(r+1)+n,i&&(0<=t.indexOf(n+e+n)||0<=t.indexOf(n+e+"="+n))?void 0:(0<=(r=t.indexOf("#"))&&(t=t.substr(0,r)+n),(r=t.indexOf(n+e+"="))<0||(0<=(r=(t=t.substring(r+n.length+e.length+1)).indexOf(n))&&(t=t.substring(0,r)),0<t.length&&(a=g.unescape(t))),a)):a},getIeVersion:function(){if(document.documentMode)return document.documentMode;for(var e=7;4<e;e--){var t=document.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return e}return null}},g.F="supplementalDataID timestamp dynamicVariablePrefix visitorID marketingCloudVisitorID analyticsVisitorID audienceManagerLocationHint authState fid vmk visitorMigrationKey visitorMigrationServer visitorMigrationServerSecure charSet visitorNamespace cookieDomainPeriods fpCookieDomainPeriods cookieLifetime pageName pageURL customerPerspective referrer contextData currencyCode lightProfileID lightStoreForSeconds lightIncrementBy retrieveLightProfiles deleteLightProfiles retrieveLightData".split(" "),g.g=g.F.concat("purchaseID variableProvider channel server pageType transactionID campaign state zip events events2 products audienceManagerBlob tnt".split(" ")),g.ka="timestamp charSet visitorNamespace cookieDomainPeriods cookieLifetime contextData lightProfileID lightStoreForSeconds lightIncrementBy".split(" "),g.O=g.ka.slice(0),g.Ea="account allAccounts debugTracking visitor visitorOptedOut trackOffline offlineLimit offlineThrottleDelay offlineFilename usePlugins doPlugins configURL visitorSampling visitorSamplingGroup linkObject clickObject linkURL linkName linkType trackDownloadLinks trackExternalLinks trackClickMap trackInlineStats linkLeaveQueryString linkTrackVars linkTrackEvents linkDownloadFileTypes linkExternalFilters linkInternalFilters useForcedLinkTracking forcedLinkTrackingTimeout useLinkTrackSessionStorage trackingServer trackingServerSecure ssl abort mobile dc lightTrackVars maxDelay expectSupplementalData useBeacon usePostbacks registerPreTrackCallback registerPostTrackCallback bodyClickTarget bodyClickFunction AudienceManagement".split(" "),t=0;t<=250;t++)t<76&&(g.g.push("prop"+t),g.O.push("prop"+t)),g.g.push("eVar"+t),g.O.push("eVar"+t),t<6&&g.g.push("hier"+t),t<4&&g.g.push("list"+t);t="pe pev1 pev2 pev3 latitude longitude resolution colorDepth javascriptVersion javaEnabled cookiesEnabled browserWidth browserHeight connectionType homepage pageURLRest marketingCloudOrgID ms_a".split(" "),g.g=g.g.concat(t),g.F=g.F.concat(t),g.ssl=0<=d.location.protocol.toLowerCase().indexOf("https"),g.charSet="UTF-8",g.contextData={},g.offlineThrottleDelay=0,g.offlineFilename="AppMeasurement.offline",g.P="s_sq",g.Sa=0,g.ia=0,g.N=0,g.Ra=0,g.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx",g.w=d,g.d=d.document;try{if(g.Xa=!1,navigator){var r=navigator.userAgent;("Microsoft Internet Explorer"==navigator.appName||0<=r.indexOf("MSIE ")||0<=r.indexOf("Trident/")&&0<=r.indexOf("Windows NT 6"))&&(g.Xa=!0)}}catch(e){}g.ca=function(){g.da&&(d.clearTimeout(g.da),g.da=f),g.bodyClickTarget&&g.J&&g.bodyClickTarget.dispatchEvent(g.J),g.bodyClickFunction&&("function"==typeof g.bodyClickFunction?g.bodyClickFunction():g.bodyClickTarget&&g.bodyClickTarget.href&&(g.d.location=g.bodyClickTarget.href)),g.bodyClickTarget=g.J=g.bodyClickFunction=0},g.Va=function(){g.b=g.d.body,g.b?(g.r=function(e){var t,n,i,r,a;if(!(g.d&&g.d.getElementById("cppXYctnr")||e&&e["s_fe_"+g._in])){if(g.Ga){if(!g.useForcedLinkTracking)return g.b.removeEventListener("click",g.r,!0),void(g.Ga=g.useForcedLinkTracking=0);g.b.removeEventListener("click",g.r,!1)}else g.useForcedLinkTracking=0;g.clickObject=e.srcElement?e.srcElement:e.target;try{if(!g.clickObject||g.M&&g.M==g.clickObject||!(g.clickObject.tagName||g.clickObject.parentElement||g.clickObject.parentNode))g.clickObject=0;else{var o=g.M=g.clickObject;if(g.ha&&(clearTimeout(g.ha),g.ha=0),g.ha=setTimeout(function(){g.M==o&&(g.M=0)},1e4),i=g.Ma(),g.track(),i<g.Ma()&&g.useForcedLinkTracking&&e.target){for(r=e.target;r&&r!=g.b&&"A"!=r.tagName.toUpperCase()&&"AREA"!=r.tagName.toUpperCase();)r=r.parentNode;if(r&&(a=r.href,g.Oa(a)||(a=0),n=r.target,e.target.dispatchEvent&&a&&(!n||"_self"==n||"_top"==n||"_parent"==n||d.name&&n==d.name))){try{t=g.d.createEvent("MouseEvents")}catch(e){t=new d.MouseEvent}if(t){try{t.initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}catch(e){t=0}t&&(t["s_fe_"+g._in]=t.s_fe=1,e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.preventDefault(),g.bodyClickTarget=e.target,g.J=t)}}}}}catch(e){g.clickObject=0}}},g.b&&g.b.attachEvent?g.b.attachEvent("onclick",g.r):g.b&&g.b.addEventListener&&(navigator&&(0<=navigator.userAgent.indexOf("WebKit")&&g.d.createEvent||0<=navigator.userAgent.indexOf("Firefox/2")&&d.MouseEvent)&&(g.Ga=1,g.useForcedLinkTracking=1,g.b.addEventListener("click",g.r,!0)),g.b.addEventListener("click",g.r,!1))):setTimeout(g.Va,30)},g.Hb(),g.ic||(e?g.setAccount(e):g.C("Error, missing Report Suite ID in AppMeasurement initialization"),g.Va(),g.loadModule("ActivityMap"))}function s_gi(e){var t,n,i,r,a,o=window.s_c_il,s=e.split(","),l=0;if(o)for(n=0;!l&&n<o.length;){if("s_c"==(t=o[n])._c&&(t.account||t.oun))if(t.account&&t.account==e)l=1;else for(i=t.account?t.account:t.oun,i=t.allAccounts?t.allAccounts:i.split(","),r=0;r<s.length;r++)for(a=0;a<i.length;a++)s[r]==i[a]&&(l=1);n++}return l?t.setAccount&&t.setAccount(e):t=new AppMeasurement(e),t}function s_pgicq(){var e,t,n,i=window,r=i.s_giq;if(r)for(e=0;e<r.length;e++)(n=s_gi((t=r[e]).oun)).setAccount(t.un),n.setTagContainer(t.tagContainerName);i.s_giq=0}function turnOnAmplitude(){var e=window.testurl||window.document.domain;window.require&&/cbcmusic\.ca$/.test(e)||CBC.APP.ANA.LIBRARY.Amplitude.isOn()||CBC.APP.ANA.LIBRARY.Amplitude.turnOn()}if(s_cbc_sitecatalyst_init(s_cbc_sitecatalyst),AppMeasurement.getInstance=s_gi,window.s_objectID||(window.s_objectID=0),s_pgicq(),function(){var e,t;e=window,t=function(){"use strict";var _="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(e,t){return e(t={exports:{}},t.exports),t.exports}e(function(o,s){return s=s||{},function(){var R={function:!0,object:!0},e=R.object&&s&&!s.nodeType&&s,x=R["undefined"==typeof window?"undefined":_typeof2(window)]&&window||this,t=e&&R.object&&o&&!o.nodeType&&"object"==_typeof2(_)&&_;function U(e,l){e=e||x.Object(),l=l||x.Object();var c=e.Number||x.Number,u=e.String||x.String,t=e.Object||x.Object,d=e.Date||x.Date,n=e.SyntaxError||x.SyntaxError,A=e.TypeError||x.TypeError,i=e.Math||x.Math,r=e.JSON||x.JSON;"object"==_typeof2(r)&&r&&(l.stringify=r.stringify,l.parse=r.parse);var T,E,I,a=t.prototype,w=a.toString,p=new d(-0xc782b5b800cec);try{p=-109252==p.getUTCFullYear()&&0===p.getUTCMonth()&&1===p.getUTCDate()&&10==p.getUTCHours()&&37==p.getUTCMinutes()&&6==p.getUTCSeconds()&&708==p.getUTCMilliseconds()}catch(e){}function g(e){if(g[e]!==I)return g[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=g("json-stringify")&&g("json-parse");else{var n,i='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var r=l.stringify,a="function"==typeof r&&p;if(a){(n=function(){return 1}).toJSON=n;try{a="0"===r(0)&&"0"===r(new c)&&'""'==r(new u)&&r(w)===I&&r(I)===I&&r()===I&&"1"===r(n)&&"[1]"==r([n])&&"[null]"==r([I])&&"null"==r(null)&&"[null,null,null]"==r([I,w,null])&&r({a:[n,!0,!1,null,"\0\b\n\f\r\t"]})==i&&"1"===r(null,n)&&"[\n 1,\n 2\n]"==r([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==r(new d(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==r(new d(864e13))&&'"-000001-01-01T00:00:00.000Z"'==r(new d(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==r(new d(-1))}catch(e){a=!1}}t=a}if("json-parse"==e){var o=l.parse;if("function"==typeof o)try{if(0===o("0")&&!o(!1)){var s=5==(n=o(i)).a.length&&1===n.a[0];if(s){try{s=!o('"\t"')}catch(e){}if(s)try{s=1!==o("01")}catch(e){}if(s)try{s=1!==o("1.")}catch(e){}}}}catch(e){s=!1}t=s}}return g[e]=!!t}if(!g("json")){var f="[object Function]",k="[object Number]",D="[object String]",O="[object Array]",s=g("bug-string-char-index");if(!p)var N=i.floor,o=[0,31,59,90,120,151,181,212,243,273,304,334],B=function(e,t){return o[t]+365*(e-1970)+N((e-1969+(t=+(1<t)))/4)-N((e-1901+t)/100)+N((e-1601+t)/400)};if((T=a.hasOwnProperty)||(T=function(e){var n,t={};return T=(t.__proto__=null,t.__proto__={toString:1},t).toString!=w?function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(n=t.constructor,function(e){var t=(this.constructor||n).prototype;return e in this&&!(e in t&&this[e]===t[e])}),t=null,T.call(this,e)}),E=function(e,t){var n,o,i,r=0;for(i in(n=function(){this.valueOf=0}).prototype.valueOf=0,o=new n)T.call(o,i)&&r++;return n=o=null,(E=r?2==r?function(e,t){var n,i={},r=w.call(e)==f;for(n in e)r&&"prototype"==n||T.call(i,n)||!(i[n]=1)||!T.call(e,n)||t(n)}:function(e,t){var n,i,r=w.call(e)==f;for(n in e)r&&"prototype"==n||!T.call(e,n)||(i="constructor"===n)||t(n);(i||T.call(e,n="constructor"))&&t(n)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],function(e,t){var n,i,r=w.call(e)==f,a=!r&&"function"!=typeof e.constructor&&R[_typeof2(e.hasOwnProperty)]&&e.hasOwnProperty||T;for(n in e)r&&"prototype"==n||!a.call(e,n)||t(n);for(i=o.length;n=o[--i];a.call(e,n)&&t(n));}))(e,t)},!g("json-stringify")){var h={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},M=function(e,t){return("000000"+(t||0)).slice(-e)},L=function(e){for(var t='"',n=0,i=e.length,r=!s||10<i,a=r&&(s?e.split(""):e);n<i;n++){var o=e.charCodeAt(n);switch(o){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=h[o];break;default:if(o<32){t+="\\u00"+M(2,o.toString(16));break}t+=r?a[n]:e.charAt(n)}}return t+'"'};l.stringify=function(e,t,n){var i,r,a,o;if(R[_typeof2(t)]&&t)if((o=w.call(t))==f)r=t;else if(o==O){a={};for(var s,l=0,c=t.length;l<c;s=t[l++],(o=w.call(s))!=D&&o!=k||(a[s]=1));}if(n)if((o=w.call(n))==k){if(0<(n-=n%1))for(i="",10<n&&(n=10);i.length<n;i+=" ");}else o==D&&(i=n.length<=10?n:n.slice(0,10));return function n(e,t,i,r,a,o,s){var l,c,u,d,p,g,f,h,_,m,v,y,C,P,b,S;try{l=t[e]}catch(e){}if("object"==_typeof2(l)&&l)if("[object Date]"!=(c=w.call(l))||T.call(l,"toJSON"))"function"==typeof l.toJSON&&(c!=k&&c!=D&&c!=O||T.call(l,"toJSON"))&&(l=l.toJSON(e));else if(-1/0<l&&l<1/0){if(B){for(p=N(l/864e5),u=N(p/365.2425)+1970-1;B(u+1,0)<=p;u++);for(d=N((p-B(u,0))/30.42);B(u,d+1)<=p;d++);p=1+p-B(u,d),f=N((g=(l%864e5+864e5)%864e5)/36e5)%24,h=N(g/6e4)%60,_=N(g/1e3)%60,m=g%1e3}else u=l.getUTCFullYear(),d=l.getUTCMonth(),p=l.getUTCDate(),f=l.getUTCHours(),h=l.getUTCMinutes(),_=l.getUTCSeconds(),m=l.getUTCMilliseconds();l=(u<=0||1e4<=u?(u<0?"-":"+")+M(6,u<0?-u:u):M(4,u))+"-"+M(2,d+1)+"-"+M(2,p)+"T"+M(2,f)+":"+M(2,h)+":"+M(2,_)+"."+M(3,m)+"Z"}else l=null;if(i&&(l=i.call(t,e,l)),null===l)return"null";if("[object Boolean]"==(c=w.call(l)))return""+l;if(c==k)return-1/0<l&&l<1/0?""+l:"null";if(c==D)return L(""+l);if("object"==_typeof2(l)){for(P=s.length;P--;)if(s[P]===l)throw A();if(s.push(l),v=[],b=o,o+=a,c==O){for(C=0,P=l.length;C<P;C++)y=n(C,l,i,r,a,o,s),v.push(y===I?"null":y);S=v.length?a?"[\n"+o+v.join(",\n"+o)+"\n"+b+"]":"["+v.join(",")+"]":"[]"}else E(r||l,function(e){var t=n(e,l,i,r,a,o,s);t!==I&&v.push(L(e)+":"+(a?" ":"")+t)}),S=v.length?a?"{\n"+o+v.join(",\n"+o)+"\n"+b+"}":"{"+v.join(",")+"}":"{}";return s.pop(),S}}("",((s={})[""]=e,s),r,a,i,"",[])}}if(!g("json-parse")){var _,m,v=u.fromCharCode,y={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},C=function(){throw _=m=null,n()},P=function(){for(var e,t,n,i,r,a=m,o=a.length;_<o;)switch(r=a.charCodeAt(_)){case 9:case 10:case 13:case 32:_++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=s?a.charAt(_):a[_],_++,e;case 34:for(e="@",_++;_<o;)if((r=a.charCodeAt(_))<32)C();else if(92==r)switch(r=a.charCodeAt(++_)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=y[r],_++;break;case 117:for(t=++_,n=_+4;_<n;_++)48<=(r=a.charCodeAt(_))&&r<=57||97<=r&&r<=102||65<=r&&r<=70||C();e+=v("0x"+a.slice(t,_));break;default:C()}else{if(34==r)break;for(r=a.charCodeAt(_),t=_;32<=r&&92!=r&&34!=r;)r=a.charCodeAt(++_);e+=a.slice(t,_)}if(34==a.charCodeAt(_))return _++,e;C();default:if(t=_,45==r&&(i=!0,r=a.charCodeAt(++_)),48<=r&&r<=57){for(48==r&&(48<=(r=a.charCodeAt(_+1))&&r<=57)&&C(),i=!1;_<o&&(48<=(r=a.charCodeAt(_))&&r<=57);_++);if(46==a.charCodeAt(_)){for(n=++_;n<o&&(48<=(r=a.charCodeAt(n))&&r<=57);n++);n==_&&C(),_=n}if(101==(r=a.charCodeAt(_))||69==r){for(43!=(r=a.charCodeAt(++_))&&45!=r||_++,n=_;n<o&&(48<=(r=a.charCodeAt(n))&&r<=57);n++);n==_&&C(),_=n}return+a.slice(t,_)}if(i&&C(),"true"==a.slice(_,_+4))return _+=4,!0;if("false"==a.slice(_,_+5))return _+=5,!1;if("null"==a.slice(_,_+4))return _+=4,null;C()}return"$"},b=function(e,t,n){var i=S(e,t,n);i===I?delete e[t]:e[t]=i},S=function(e,t,n){var i,r=e[t];if("object"==_typeof2(r)&&r)if(w.call(r)==O)for(i=r.length;i--;)b(r,i,n);else E(r,function(e){b(r,e,n)});return n.call(e,t,r)};l.parse=function(e,t){var n,i;return _=0,m=""+e,n=function e(t){var n,i;if("$"==t&&C(),"string"==typeof t){if("@"==(s?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(n=[];"]"!=(t=P());i=i||!0)i&&(","==t?"]"==(t=P())&&C():C()),","==t&&C(),n.push(e(t));return n}if("{"==t){for(n={};"}"!=(t=P());i=i||!0)i&&(","==t?"}"==(t=P())&&C():C()),","!=t&&"string"==typeof t&&"@"==(s?t.charAt(0):t[0])&&":"==P()||C(),n[t.slice(1)]=e(P());return n}C()}return t}(P()),"$"!=P()&&C(),_=m=null,t&&w.call(t)==f?S(((i={})[""]=n,i),"",t):n}}}return l.runInContext=U,l}if(!t||t.global!==t&&t.window!==t&&t.self!==t||(x=t),e)U(x,e);else{var n=x.JSON,i=x.JSON3,r=!1,a=U(x,x.JSON3={noConflict:function(){return r||(r=!0,x.JSON=n,x.JSON3=i,n=i=null),a}});x.JSON={parse:a.parse,stringify:a.stringify}}}.call(_),s});function i(e,t){t=t||{};var n=_typeof2(e);if("string"===n&&0<e.length)return function(e){if(100<(e=String(e)).length)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return 864e5*n;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*n;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===n&&!1===isNaN(e))return t.long?function(e){return w(e,864e5,"day")||w(e,36e5,"hour")||w(e,6e4,"minute")||w(e,1e3,"second")||e+" ms"}(e):function(e){if(864e5<=e)return Math.round(e/864e5)+"d";if(36e5<=e)return Math.round(e/36e5)+"h";if(6e4<=e)return Math.round(e/6e4)+"m";if(1e3<=e)return Math.round(e/1e3)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}var p="$default_instance",u=2,t=4096,s=1e3,g="$identify",f="$groupidentify",h="amplitude_lastEventId",m="amplitude_lastEventTime",v="amplitude_lastIdentifyId",y="amplitude_lastSequenceNumber",C="amplitude_sessionId",P="amplitude_deviceId",b="amplitude_optOut",S="amplitude_userId",n="amplitude_cookie_test",r="revenue_amount",a="$productId",o="$quantity",l="$price",c="$revenueType",d="amp_device_id",A=function(e){for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):(127<i&&i<2048?t+=String.fromCharCode(i>>6|192):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128)),t+=String.fromCharCode(63&i|128))}return t},T=function(e){for(var t="",n=0,i=0,r=0,a=0;n<e.length;)(i=e.charCodeAt(n))<128?(t+=String.fromCharCode(i),n++):191<i&&i<224?(r=e.charCodeAt(n+1),t+=String.fromCharCode((31&i)<<6|63&r),n+=2):(r=e.charCodeAt(n+1),a=e.charCodeAt(n+2),t+=String.fromCharCode((15&i)<<12|(63&r)<<6|63&a),n+=3);return t},E={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){try{if(window.btoa&&window.atob)return window.btoa(unescape(encodeURIComponent(e)))}catch(e){}return E._encode(e)},_encode:function(e){var t,n,i,r,a,o,s,l="",c=0;for(e=A(e);c<e.length;)r=(t=e.charCodeAt(c++))>>2,a=(3&t)<<4|(n=e.charCodeAt(c++))>>4,o=(15&n)<<2|(i=e.charCodeAt(c++))>>6,s=63&i,isNaN(n)?o=s=64:isNaN(i)&&(s=64),l=l+E._keyStr.charAt(r)+E._keyStr.charAt(a)+E._keyStr.charAt(o)+E._keyStr.charAt(s);return l},decode:function(e){try{if(window.btoa&&window.atob)return decodeURIComponent(escape(window.atob(e)))}catch(e){}return E._decode(e)},_decode:function(e){var t,n,i,r,a,o,s="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)t=E._keyStr.indexOf(e.charAt(l++))<<2|(r=E._keyStr.indexOf(e.charAt(l++)))>>4,n=(15&r)<<4|(a=E._keyStr.indexOf(e.charAt(l++)))>>2,i=(3&a)<<6|(o=E._keyStr.indexOf(e.charAt(l++))),s+=String.fromCharCode(t),64!==a&&(s+=String.fromCharCode(n)),64!==o&&(s+=String.fromCharCode(i));return s=T(s)}},I=e(function(e,n){return(n=n||{}).parse=function(e){var t=document.createElement("a");return t.href=e,{href:t.href,host:t.host||location.host,port:"0"===t.port||""===t.port?function(e){switch(e){case"http:":return 80;case"https:":return 443;default:return location.port}}(t.protocol):t.port,hash:t.hash,hostname:t.hostname||location.hostname,pathname:"/"!=t.pathname.charAt(0)?"/"+t.pathname:t.pathname,protocol:t.protocol&&":"!=t.protocol?t.protocol:location.protocol,search:t.search,query:t.search.slice(1)}},n.isAbsolute=function(e){return 0==e.indexOf("//")||!!~e.indexOf("://")},n.isRelative=function(e){return!n.isAbsolute(e)},n.isCrossDomain=function(e){e=n.parse(e);var t=n.parse(window.location.href);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol},n});function w(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function k(e,t,n){switch(arguments.length){case 3:case 2:return function(e,t,n){n=n||{};var i=B(e)+"="+B(t);null==t&&(n.maxage=-1);n.maxage&&(n.expires=new Date(+new Date+n.maxage));n.path&&(i+="; path="+n.path);n.domain&&(i+="; domain="+n.domain);n.expires&&(i+="; expires="+n.expires.toUTCString());n.secure&&(i+="; secure");document.cookie=i}(e,t,n);case 1:return function(e){return N()[e]}(e);default:return N()}}var D=e(function(e,l){function t(e){var i;function s(){if(s.enabled){var r=s,e=+new Date,t=e-(i||e);r.diff=t,r.prev=i,r.curr=e,i=e;for(var a=new Array(arguments.length),n=0;n<a.length;n++)a[n]=arguments[n];a[0]=l.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var o=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;o++;var n=l.formatters[t];if("function"==typeof n){var i=a[o];e=n.call(r,i),a.splice(o,1),o--}return e}),l.formatArgs.call(r,a),(s.log||l.log||console.log.bind(console)).apply(r,a)}}return s.namespace=e,s.enabled=l.enabled(e),s.useColors=l.useColors(),s.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return l.colors[Math.abs(n)%l.colors.length]}(e),s.destroy=n,"function"==typeof l.init&&l.init(s),l.instances.push(s),s}function n(){var e=l.instances.indexOf(this);return-1!==e&&(l.instances.splice(e,1),!0)}return l=l||{},(l=e.exports=t.debug=t.default=t).coerce=function(e){return e instanceof Error?e.stack||e.message:e},l.disable=function(){l.enable("")},l.enable=function(e){var t;l.save(e),l.names=[],l.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?l.skips.push(new RegExp("^"+e.substr(1)+"$")):l.names.push(new RegExp("^"+e+"$")));for(t=0;t<l.instances.length;t++){var r=l.instances[t];r.enabled=l.enabled(r.namespace)}},l.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=l.skips.length;t<n;t++)if(l.skips[t].test(e))return!1;for(t=0,n=l.names.length;t<n;t++)if(l.names[t].test(e))return!0;return!1},l.humanize=i,l.instances=[],l.names=[],l.skips=[],l.formatters={},l}),O=e(function(e,a){function t(){var e;try{e=a.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}return a=a||{},(a=e.exports=D).log=function(){return"object"===("undefined"==typeof console?"undefined":_typeof2(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},a.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+a.humanize(this.diff),!t)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(r=i))}),e.splice(r,0,n)},a.save=function(e){try{null==e?a.storage.removeItem("debug"):a.storage.debug=e}catch(e){}},a.load=t,a.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},a.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),a.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],a.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},a.enable(t()),a})("cookie");function N(){var e;try{e=document.cookie}catch(e){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e.stack||e),{}}return function(e){var t,n={},i=e.split(/ *; */);if(""==i[0])return n;for(var r=0;r<i.length;++r)t=i[r].split("="),n[M(t[0])]=M(t[1]);return n}(e)}function B(t){try{return encodeURIComponent(t)}catch(e){O("error `encode(%o)` - %o",t,e)}}function M(t){try{return decodeURIComponent(t)}catch(e){O("error `decode(%o)` - %o",t,e)}}function L(e){switch(j.call(e)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===e?"null":void 0===e?"undefined":e!=e?"nan":e&&1===e.nodeType?"element":"undefined"!=typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)?"buffer":void 0===(e=e.valueOf?e.valueOf():Object.prototype.valueOf.apply(e))?"undefined":V(e)}function R(e){var t=L(e);if("object"!==t)return K.error("Error: invalid properties format. Expecting Javascript object, received "+t+", ignoring"),{};if(Object.keys(e).length>s)return K.error("Error: too many properties (more than 1000), ignoring"),{};var n={};for(var i in e)if(e.hasOwnProperty(i)){var r=i,a=L(r);"string"!==a&&(r=String(r),K.warn("WARNING: Non-string property key, received type "+a+', coercing to string "'+r+'"'));var o=J(r,e[i]);null!==o&&(n[r]=o)}return n}function x(e){var t="";return re.domain&&(t="."===re.domain.charAt(0)?re.domain.substring(1):re.domain),e+t}var U,F=e(function(e,s){s=s||{};var a=I.parse;function t(e){for(var t=s.cookie,n=s.levels(e),i=0;i<n.length;++i){var r="__tld__",a=n[i],o={domain:"."+a};if(t(r,1,o),t(r))return t(r,null,o),a}return""}return t.levels=function(e){var t=a(e).hostname.split("."),n=t[t.length-1],i=[];if(4===t.length&&n===parseInt(n,10))return i;if(t.length<=1)return i;for(var r=t.length-2;0<=r;--r)i.push(t.slice(r).join("."));return i},t.cookie=k,s=e.exports=t}),V="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},j=Object.prototype.toString,q={DISABLE:0,ERROR:1,WARN:2,INFO:3},H=q.WARN,K={error:function(e){q.ERROR<=H&&Y(e)},warn:function(e){q.WARN<=H&&Y(e)},info:function(e){q.INFO<=H&&Y(e)}},Y=function(e){try{console.log("[Amplitude] "+e)}catch(e){}},G=function(e){return"string"===L(e)&&e.length>t?e.substring(0,t):e},W=["null","nan","undefined","function","arguments","regexp","element"],J=function e(t,n){var i=L(n);if(-1!==W.indexOf(i))K.warn('WARNING: Property key "'+t+'" with invalid value type '+i+", ignoring"),n=null;else if("error"===i)n=String(n),K.warn('WARNING: Property key "'+t+'" with value type error, coercing to '+n);else if("array"===i){for(var r=[],a=0;a<n.length;a++){var o=n[a],s=L(o);"array"!==s&&"object"!==s?r.push(e(t,o)):K.warn("WARNING: Cannot have "+s+" nested in an array property value, skipping")}n=r}else"object"===i&&(n=R(n));return n},z=function(e,t){var n=L(t);if("string"===n)return t;if("date"===n||"number"===n||"boolean"===n)return t=String(t),K.warn("WARNING: Non-string groupName, received type "+n+', coercing to string "'+t+'"'),t;if("array"===n){for(var i=[],r=0;r<t.length;r++){var a=t[r],o=L(a);"array"!==o&&"object"!==o?"string"===o?i.push(a):"date"!==o&&"number"!==o&&"boolean"!==o||(a=String(a),K.warn("WARNING: Non-string groupName, received type "+o+', coercing to string "'+a+'"'),i.push(a)):K.warn("WARNING: Skipping nested "+o+" in array groupName")}return i}K.warn("WARNING: Non-string groupName, received type "+n+". Please use strings or array of strings for groupName")},Q=function(e){H=q[e]||H},X=K,$=function(e){return!e||0===e.length},Z=function(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?void 0:decodeURIComponent(n[1].replace(/\+/g," "))},ee=function e(t){if("array"===L(t))for(var n=0;n<t.length;n++)t[n]=e(t[n]);else if("object"===L(t))for(var i in t)t.hasOwnProperty(i)&&(t[i]=e(t[i]));else t=G(t);return t},te=function(e){var t=L(e);if("object"!==t)return K.error("Error: invalid groups format. Expecting Javascript object, received "+t+", ignoring"),{};var n={};for(var i in e)if(e.hasOwnProperty(i)){var r=i,a=L(r);"string"!==a&&(r=String(r),K.warn("WARNING: Non-string groupType, received type "+a+', coercing to string "'+r+'"'));var o=z(r,e[i]);null!==o&&(n[r]=o)}return n},ne=function(e,t,n){return L(e)===n||(K.error("Invalid "+t+" input type. Expected "+n+" but received "+L(e)),!1)},ie=R,re={expirationDays:void 0,domain:void 0},ae=function(e){try{for(var t=x(e)+"=",n=document.cookie.split(";"),i=null,r=0;r<n.length;r++){for(var a=n[r];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t)){i=a.substring(t.length,a.length);break}}return i?JSON.parse(E.decode(i)):null}catch(e){return null}},oe=function(e,t){try{return se(x(e),E.encode(JSON.stringify(t)),re),!0}catch(e){return!1}},se=function(e,t,n){var i=null!==t?n.expirationDays:-1;if(i){var r=new Date;r.setTime(r.getTime()+24*i*60*60*1e3),i=r}var a=e+"="+t;i&&(a+="; expires="+i.toUTCString()),a+="; path=/",n.domain&&(a+="; domain="+n.domain),document.cookie=a},le=function(e){try{return se(x(e),null,re),!0}catch(e){return!1}},ce={reset:function(){re={expirationDays:void 0,domain:void 0}},options:function(e){if(0===arguments.length)return re;e=e||{},re.expirationDays=e.expirationDays;var t=$(e.domain)?"."+F(window.location.href):e.domain,n=Math.random();re.domain=t,oe("amplitude_test",n);var i=ae("amplitude_test");i&&i===n||(t=null),le("amplitude_test"),re.domain=t},get:ae,set:oe,remove:le};if(function(){var e,t=new Date;try{return window.localStorage.setItem(t,t),e=window.localStorage.getItem(t)===String(t),window.localStorage.removeItem(t),e}catch(e){}return!1}())U=window.localStorage;else if(window.globalStorage)try{U=window.globalStorage[window.location.hostname]}catch(e){}else{var ue=document.createElement("div"),de="localStorage";ue.style.display="none",document.getElementsByTagName("head")[0].appendChild(ue),ue.addBehavior&&(ue.addBehavior("#default#userdata"),U={length:0,setItem:function(e,t){ue.load(de),ue.getAttribute(e)||this.length++,ue.setAttribute(e,t),ue.save(de)},getItem:function(e){return ue.load(de),ue.getAttribute(e)},removeItem:function(e){ue.load(de),ue.getAttribute(e)&&this.length--,ue.removeAttribute(e),ue.save(de)},clear:function(){ue.load(de);for(var e,t=0;e=ue.XMLDocument.documentElement.attributes[t++];)ue.removeAttribute(e.name);ue.save(de),this.length=0},key:function(e){return ue.load(de),ue.XMLDocument.documentElement.attributes[e]}},ue.load(de),U.length=ue.XMLDocument.documentElement.attributes.length)}function pe(){this.storage=null}var ge=U=U||{length:0,setItem:function(e,t){},getItem:function(e){},removeItem:function(e){},clear:function(){},key:function(e){}};pe.prototype._cookiesEnabled=function(){var e,t=String(new Date);try{return ce.set(n,t),e=ce.get(n)===t,ce.remove(n),e}catch(e){}return!1},pe.prototype.getStorage=function(){if(null!==this.storage)return this.storage;if(this._cookiesEnabled())this.storage=ce;else{var n="amp_cookiestore_";this.storage={_options:{expirationDays:void 0,domain:void 0},reset:function(){this._options={expirationDays:void 0,domain:void 0}},options:function(e){return 0===arguments.length||(e=e||{},this._options.expirationDays=e.expirationDays||this._options.expirationDays,this._options.domain=e.domain||this._options.domain||window.location.hostname),this._options},get:function(e){try{return JSON.parse(ge.getItem(n+e))}catch(e){}return null},set:function(e,t){try{return ge.setItem(n+e,JSON.stringify(t)),!0}catch(e){}return!1},remove:function(e){try{ge.removeItem(n+e)}catch(e){return!1}}}}return this.storage};function fe(e,t){function n(e,t,n,i){return Z(e,t)||Z(n,i)}function i(e,t){$(t)||(u[e]=t)}var r=e?"?"+e.split(".").slice(-1)[0].replace(/\|/g,"&"):"",a=n("utm_source",t,"utmcsr",r),o=n("utm_medium",t,"utmcmd",r),s=n("utm_campaign",t,"utmccn",r),l=n("utm_term",t,"utmctr",r),c=n("utm_content",t,"utmcct",r),u={};return i("utm_source",a),i("utm_medium",o),i("utm_campaign",s),i("utm_term",l),i("utm_content",c),u}function he(){this.userPropertiesOperations={},this.properties=[]}var _e="$clearAll";he.prototype.add=function(e,t){return"number"===L(t)||"string"===L(t)?this._addOperation("$add",e,t):X.error("Unsupported type for value: "+L(t)+", expecting number or string"),this},he.prototype.append=function(e,t){return this._addOperation("$append",e,t),this},he.prototype.clearAll=function(){return 0<Object.keys(this.userPropertiesOperations).length?this.userPropertiesOperations.hasOwnProperty(_e)||X.error("Need to send $clearAll on its own Identify object without any other operations, skipping $clearAll"):this.userPropertiesOperations[_e]="-",this},he.prototype.prepend=function(e,t){return this._addOperation("$prepend",e,t),this},he.prototype.set=function(e,t){return this._addOperation("$set",e,t),this},he.prototype.setOnce=function(e,t){return this._addOperation("$setOnce",e,t),this},he.prototype.unset=function(e){return this._addOperation("$unset",e,"-"),this},he.prototype._addOperation=function(e,t,n){this.userPropertiesOperations.hasOwnProperty(_e)?X.error("This identify already contains a $clearAll operation, skipping operation "+e):-1===this.properties.indexOf(t)?(this.userPropertiesOperations.hasOwnProperty(e)||(this.userPropertiesOperations[e]={}),this.userPropertiesOperations[e][t]=n,this.properties.push(t)):X.error('User property "'+t+'" already used in this identify, skipping operation '+e)};var me=e(function(e){function d(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function s(e,t,n,i,r,a){return d(function(e,t){return e<<t|e>>>32-t}(d(d(t,e),d(i,a)),r),n)}function p(e,t,n,i,r,a,o){return s(t&n|~t&i,e,t,r,a,o)}function g(e,t,n,i,r,a,o){return s(t&i|n&~i,e,t,r,a,o)}function f(e,t,n,i,r,a,o){return s(t^n^i,e,t,r,a,o)}function h(e,t,n,i,r,a,o){return s(n^(t|~i),e,t,r,a,o)}function l(e,t){var n,i,r,a,o;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var s=1732584193,l=-271733879,c=-1732584194,u=271733878;for(n=0;n<e.length;n+=16)l=h(l=h(l=h(l=h(l=f(l=f(l=f(l=f(l=g(l=g(l=g(l=g(l=p(l=p(l=p(l=p(r=l,c=p(a=c,u=p(o=u,s=p(i=s,l,c,u,e[n],7,-680876936),l,c,e[n+1],12,-389564586),s,l,e[n+2],17,606105819),u,s,e[n+3],22,-1044525330),c=p(c,u=p(u,s=p(s,l,c,u,e[n+4],7,-176418897),l,c,e[n+5],12,1200080426),s,l,e[n+6],17,-1473231341),u,s,e[n+7],22,-45705983),c=p(c,u=p(u,s=p(s,l,c,u,e[n+8],7,1770035416),l,c,e[n+9],12,-1958414417),s,l,e[n+10],17,-42063),u,s,e[n+11],22,-1990404162),c=p(c,u=p(u,s=p(s,l,c,u,e[n+12],7,1804603682),l,c,e[n+13],12,-40341101),s,l,e[n+14],17,-1502002290),u,s,e[n+15],22,1236535329),c=g(c,u=g(u,s=g(s,l,c,u,e[n+1],5,-165796510),l,c,e[n+6],9,-1069501632),s,l,e[n+11],14,643717713),u,s,e[n],20,-373897302),c=g(c,u=g(u,s=g(s,l,c,u,e[n+5],5,-701558691),l,c,e[n+10],9,38016083),s,l,e[n+15],14,-660478335),u,s,e[n+4],20,-405537848),c=g(c,u=g(u,s=g(s,l,c,u,e[n+9],5,568446438),l,c,e[n+14],9,-1019803690),s,l,e[n+3],14,-187363961),u,s,e[n+8],20,1163531501),c=g(c,u=g(u,s=g(s,l,c,u,e[n+13],5,-1444681467),l,c,e[n+2],9,-51403784),s,l,e[n+7],14,1735328473),u,s,e[n+12],20,-1926607734),c=f(c,u=f(u,s=f(s,l,c,u,e[n+5],4,-378558),l,c,e[n+8],11,-2022574463),s,l,e[n+11],16,1839030562),u,s,e[n+14],23,-35309556),c=f(c,u=f(u,s=f(s,l,c,u,e[n+1],4,-1530992060),l,c,e[n+4],11,1272893353),s,l,e[n+7],16,-155497632),u,s,e[n+10],23,-1094730640),c=f(c,u=f(u,s=f(s,l,c,u,e[n+13],4,681279174),l,c,e[n],11,-358537222),s,l,e[n+3],16,-722521979),u,s,e[n+6],23,76029189),c=f(c,u=f(u,s=f(s,l,c,u,e[n+9],4,-640364487),l,c,e[n+12],11,-421815835),s,l,e[n+15],16,530742520),u,s,e[n+2],23,-995338651),c=h(c,u=h(u,s=h(s,l,c,u,e[n],6,-198630844),l,c,e[n+7],10,1126891415),s,l,e[n+14],15,-1416354905),u,s,e[n+5],21,-57434055),c=h(c,u=h(u,s=h(s,l,c,u,e[n+12],6,1700485571),l,c,e[n+3],10,-1894986606),s,l,e[n+10],15,-1051523),u,s,e[n+1],21,-2054922799),c=h(c,u=h(u,s=h(s,l,c,u,e[n+8],6,1873313359),l,c,e[n+15],10,-30611744),s,l,e[n+6],15,-1560198380),u,s,e[n+13],21,1309151649),c=h(c,u=h(u,s=h(s,l,c,u,e[n+4],6,-145523070),l,c,e[n+11],10,-1120210379),s,l,e[n+2],15,718787259),u,s,e[n+9],21,-343485551),s=d(s,i),l=d(l,r),c=d(c,a),u=d(u,o);return[s,l,c,u]}function c(e){var t,n="",i=32*e.length;for(t=0;t<i;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function u(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var i=8*e.length;for(t=0;t<i;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function i(e){var t,n,i="0123456789abcdef",r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+=i.charAt(t>>>4&15)+i.charAt(15&t);return r}function n(e){return unescape(encodeURIComponent(e))}function r(e){return function(e){return c(l(u(e),8*e.length))}(n(e))}function a(e,t){return function(e,t){var n,i,r=u(e),a=[],o=[];for(a[15]=o[15]=void 0,16<r.length&&(r=l(r,8*e.length)),n=0;n<16;n+=1)a[n]=909522486^r[n],o[n]=1549556828^r[n];return i=l(a.concat(u(t)),512+8*t.length),c(l(o.concat(i),640))}(n(e),n(t))}function t(e,t,n){return t?n?a(t,e):function(e,t){return i(a(e,t))}(t,e):n?r(e):function(e){return i(r(e))}(e)}var o;o=_,e.exports?e.exports=t:o.md5=t});function ve(){this.__data__=[],this.size=0}var ye=function(e,t){return e===t||e!=e&&t!=t};var Ce=function(e,t){for(var n=e.length;n--;)if(ye(e[n][0],t))return n;return-1},Pe=Array.prototype.splice;function be(e){var t=this.__data__,n=Ce(t,e);return!(n<0)&&(n==t.length-1?t.pop():Pe.call(t,n,1),--this.size,!0)}function Se(e){var t=this.__data__,n=Ce(t,e);return n<0?void 0:t[n][1]}function Ae(e){return-1<Ce(this.__data__,e)}function Te(e,t){var n=this.__data__,i=Ce(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}function Ee(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Ee.prototype.clear=ve,Ee.prototype.delete=be,Ee.prototype.get=Se,Ee.prototype.has=Ae,Ee.prototype.set=Te;var Ie=Ee;function we(){this.__data__=new Ie,this.size=0}function ke(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function De(e){return this.__data__.get(e)}function Oe(e){return this.__data__.has(e)}var Ne="object"==_typeof2(_)&&_&&_.Object===Object&&_,Be="object"==("undefined"==typeof self?"undefined":_typeof2(self))&&self&&self.Object===Object&&self,Me=Ne||Be||Function("return this")(),Le=Me.Symbol,Re=Object.prototype,xe=Re.hasOwnProperty,Ue=Re.toString,Fe=Le?Le.toStringTag:void 0;var Ve=function(e){var t=xe.call(e,Fe),n=e[Fe];try{var i=!(e[Fe]=void 0)}catch(e){}var r=Ue.call(e);return i&&(t?e[Fe]=n:delete e[Fe]),r},je=Object.prototype.toString;var qe=function(e){return je.call(e)},He=Le?Le.toStringTag:void 0;var Ke=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":He&&He in Object(e)?Ve(e):qe(e)};var Ye=function(e){var t=_typeof2(e);return null!=e&&("object"==t||"function"==t)};var Ge,We=function(e){if(!Ye(e))return!1;var t=Ke(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Je=Me["__core-js_shared__"],ze=(Ge=/[^.]+$/.exec(Je&&Je.keys&&Je.keys.IE_PROTO||""))?"Symbol(src)_1."+Ge:"";var Qe=function(e){return!!ze&&ze in e},Xe=Function.prototype.toString;var $e=function(e){if(null!=e){try{return Xe.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Ze=/^\[object .+?Constructor\]$/,et=Function.prototype,tt=Object.prototype,nt=et.toString,it=tt.hasOwnProperty,rt=RegExp("^"+nt.call(it).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var at=function(e){return!(!Ye(e)||Qe(e))&&(We(e)?rt:Ze).test($e(e))};var ot=function(e,t){return null==e?void 0:e[t]};var st=function(e,t){var n=ot(e,t);return at(n)?n:void 0},lt=st(Me,"Map"),ct=st(Object,"create");function ut(){this.__data__=ct?ct(null):{},this.size=0}function dt(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var pt=Object.prototype.hasOwnProperty;function gt(e){var t=this.__data__;if(ct){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return pt.call(t,e)?t[e]:void 0}var ft=Object.prototype.hasOwnProperty;function ht(e){var t=this.__data__;return ct?void 0!==t[e]:ft.call(t,e)}function _t(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ct&&void 0===t?"__lodash_hash_undefined__":t,this}function mt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}mt.prototype.clear=ut,mt.prototype.delete=dt,mt.prototype.get=gt,mt.prototype.has=ht,mt.prototype.set=_t;var vt=mt;var yt=function(e){var t=_typeof2(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Ct=function(e,t){var n=e.__data__;return yt(t)?n["string"==typeof t?"string":"hash"]:n.map};function Pt(e){var t=Ct(this,e).delete(e);return this.size-=t?1:0,t}function bt(e){return Ct(this,e).get(e)}function St(e){return Ct(this,e).has(e)}function At(e,t){var n=Ct(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}function Tt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Tt.prototype.clear=function(){this.size=0,this.__data__={hash:new vt,map:new(lt||Ie),string:new vt}},Tt.prototype.delete=Pt,Tt.prototype.get=bt,Tt.prototype.has=St,Tt.prototype.set=At;var Et=Tt;function It(e,t){var n=this.__data__;if(n instanceof Ie){var i=n.__data__;if(!lt||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Et(i)}return n.set(e,t),this.size=n.size,this}function wt(e){var t=this.__data__=new Ie(e);this.size=t.size}wt.prototype.clear=we,wt.prototype.delete=ke,wt.prototype.get=De,wt.prototype.has=Oe,wt.prototype.set=It;var kt=wt,Dt=function(){try{var e=st(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var Ot=function(e,t,n){"__proto__"==t&&Dt?Dt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var Nt=function(e,t,n){(void 0===n||ye(e[t],n))&&(void 0!==n||t in e)||Ot(e,t,n)};var Bt=function(l){return function(e,t,n){for(var i=-1,r=Object(e),a=n(e),o=a.length;o--;){var s=a[l?o:++i];if(!1===t(r[s],s,r))break}return e}}(),Mt=e(function(e,t){var n=(t=t||{})&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,r=i&&i.exports===n?Me.Buffer:void 0,a=r?r.allocUnsafe:void 0;return e.exports=function(e,t){if(t)return e.slice();var n=e.length,i=a?a(n):new e.constructor(n);return e.copy(i),i},t}),Lt=Me.Uint8Array;var Rt=function(e){var t=new e.constructor(e.byteLength);return new Lt(t).set(new Lt(e)),t};var xt=function(e,t){var n=t?Rt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var Ut=function(e,t){var n=-1,i=e.length;for(t=t||Array(i);++n<i;)t[n]=e[n];return t},Ft=Object.create;function Vt(){}var jt=function(e){if(!Ye(e))return{};if(Ft)return Ft(e);Vt.prototype=e;var t=new Vt;return Vt.prototype=void 0,t};var qt=function(t,n){return function(e){return t(n(e))}},Ht=qt(Object.getPrototypeOf,Object),Kt=Object.prototype;var Yt=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Kt)};var Gt=function(e){return"function"!=typeof e.constructor||Yt(e)?{}:jt(Ht(e))};var Wt=function(e){return null!=e&&"object"==_typeof2(e)};var Jt=function(e){return Wt(e)&&"[object Arguments]"==Ke(e)},zt=Object.prototype,Qt=zt.hasOwnProperty,Xt=zt.propertyIsEnumerable,$t=Jt(function(){return arguments}())?Jt:function(e){return Wt(e)&&Qt.call(e,"callee")&&!Xt.call(e,"callee")},Zt=Array.isArray;var en=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991};var tn=function(e){return null!=e&&en(e.length)&&!We(e)};var nn=function(e){return Wt(e)&&tn(e)};function rn(){return!1}var an=e(function(e,t){var n=(t=t||{})&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,r=i&&i.exports===n?Me.Buffer:void 0,a=(r?r.isBuffer:void 0)||rn;return e.exports=a,t}),on=Function.prototype,sn=Object.prototype,ln=on.toString,cn=sn.hasOwnProperty,un=ln.call(Object);var dn=function(e){if(!Wt(e)||"[object Object]"!=Ke(e))return!1;var t=Ht(e);if(null===t)return!0;var n=cn.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ln.call(n)==un},pn={};pn["[object Float32Array]"]=pn["[object Float64Array]"]=pn["[object Int8Array]"]=pn["[object Int16Array]"]=pn["[object Int32Array]"]=pn["[object Uint8Array]"]=pn["[object Uint8ClampedArray]"]=pn["[object Uint16Array]"]=pn["[object Uint32Array]"]=!0,pn["[object Arguments]"]=pn["[object Array]"]=pn["[object ArrayBuffer]"]=pn["[object Boolean]"]=pn["[object DataView]"]=pn["[object Date]"]=pn["[object Error]"]=pn["[object Function]"]=pn["[object Map]"]=pn["[object Number]"]=pn["[object Object]"]=pn["[object RegExp]"]=pn["[object Set]"]=pn["[object String]"]=pn["[object WeakMap]"]=!1;function gn(e){return Wt(e)&&en(e.length)&&!!pn[Ke(e)]}var fn=function(t){return function(e){return t(e)}},hn=e(function(e,t){var n=(t=t||{})&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,r=i&&i.exports===n&&Ne.process,a=function(){try{return r&&r.binding&&r.binding("util")}catch(e){}}();return e.exports=a,t}),_n=hn&&hn.isTypedArray,mn=_n?fn(_n):gn,vn=Object.prototype.hasOwnProperty;var yn=function(e,t,n){var i=e[t];vn.call(e,t)&&ye(i,n)&&(void 0!==n||t in e)||Ot(e,t,n)};var Cn=function(e,t,n,i){var r=!n;n=n||{};for(var a=-1,o=t.length;++a<o;){var s=t[a],l=i?i(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),r?Ot(n,s,l):yn(n,s,l)}return n};var Pn=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i},bn=/^(?:0|[1-9]\d*)$/;var Sn=function(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||bn.test(e))&&-1<e&&e%1==0&&e<t},An=Object.prototype.hasOwnProperty;var Tn=function(e,t){var n=Zt(e),i=!n&&$t(e),r=!n&&!i&&an(e),a=!n&&!i&&!r&&mn(e),o=n||i||r||a,s=o?Pn(e.length,String):[],l=s.length;for(var c in e)!t&&!An.call(e,c)||o&&("length"==c||r&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Sn(c,l))||s.push(c);return s};var En=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},In=Object.prototype.hasOwnProperty;var wn=function(e){if(!Ye(e))return En(e);var t=Yt(e),n=[];for(var i in e)("constructor"!=i||!t&&In.call(e,i))&&n.push(i);return n};var kn=function(e){return tn(e)?Tn(e,!0):wn(e)};var Dn=function(e){return Cn(e,kn(e))};var On=function(e,t,n,i,r,a,o){var s=e[n],l=t[n],c=o.get(l);if(c)Nt(e,n,c);else{var u=a?a(s,l,n+"",e,t,o):void 0,d=void 0===u;if(d){var p=Zt(l),g=!p&&an(l),f=!p&&!g&&mn(l);u=l,p||g||f?u=Zt(s)?s:nn(s)?Ut(s):g?Mt(l,!(d=!1)):f?xt(l,!(d=!1)):[]:dn(l)||$t(l)?$t(u=s)?u=Dn(s):(!Ye(s)||i&&We(s))&&(u=Gt(l)):d=!1}d&&(o.set(l,u),r(u,l,i,a,o),o.delete(l)),Nt(e,n,u)}};var Nn=function i(r,a,o,s,l){r!==a&&Bt(a,function(e,t){if(Ye(e))l=l||new kt,On(r,a,t,o,i,s,l);else{var n=s?s(r[t],e,t+"",r,a,l):void 0;void 0===n&&(n=e),Nt(r,t,n)}},kn)};function Bn(e){return e}var Mn=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},Ln=Math.max;var Rn=function(a,o,s){return o=Ln(void 0===o?a.length-1:o,0),function(){for(var e=arguments,t=-1,n=Ln(e.length-o,0),i=Array(n);++t<n;)i[t]=e[o+t];t=-1;for(var r=Array(o+1);++t<o;)r[t]=e[t];return r[o]=s(i),Mn(a,this,r)}};var xn=function(e){return function(){return e}},Un=Dt?function(e,t){return Dt(e,"toString",{configurable:!0,enumerable:!1,value:xn(t),writable:!0})}:Bn,Fn=Date.now;var Vn=function(n){var i=0,r=0;return function(){var e=Fn(),t=16-(e-r);if(r=e,0<t){if(800<=++i)return arguments[0]}else i=0;return n.apply(void 0,arguments)}}(Un);var jn=function(e,t){return Vn(Rn(e,t,Bn),e+"")};var qn=function(e,t,n){if(!Ye(n))return!1;var i=_typeof2(t);return!!("number"==i?tn(n)&&Sn(t,n.length):"string"==i&&t in n)&&ye(n[t],e)};var Hn=function(s){return jn(function(e,t){var n=-1,i=t.length,r=1<i?t[i-1]:void 0,a=2<i?t[2]:void 0;for(r=3<s.length&&"function"==typeof r?(i--,r):void 0,a&&qn(t[0],t[1],a)&&(r=i<3?void 0:r,i=1),e=Object(e);++n<i;){var o=t[n];o&&s(e,o,n,r)}return e})},Kn=Hn(function(e,t,n){Nn(e,t,n)});var Yn=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function Gn(e){switch(_typeof2(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function Wn(n,i,r,e){return i=i||"&",r=r||"=",null===n&&(n=void 0),"object"===_typeof2(n)?Jn(zn(n),function(e){var t=encodeURIComponent(Gn(e))+r;return Yn(n[e])?Jn(n[e],function(e){return t+encodeURIComponent(Gn(e))}).join(i):t+encodeURIComponent(Gn(n[e]))}).join(i):e?encodeURIComponent(Gn(e))+r+encodeURIComponent(Gn(n)):""}function Jn(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var zn=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t};function Qn(e,t,n,i){t=t||"&",n=n||"=";var r={};if("string"!=typeof e||0===e.length)return r;var a=/\+/g;e=e.split(t);var o=1e3;i&&"number"==typeof i.maxKeys&&(o=i.maxKeys);var s,l,c=e.length;0<o&&o<c&&(c=o);for(var u=0;u<c;++u){var d,p,g,f,h=e[u].replace(a,"%20"),_=h.indexOf(n);p=0<=_?(d=h.substr(0,_),h.substr(_+1)):(d=h,""),g=decodeURIComponent(d),f=decodeURIComponent(p),s=r,l=g,Object.prototype.hasOwnProperty.call(s,l)?Yn(r[g])?r[g].push(f):r[g]=[r[g],f]:r[g]=f}return r}function Xn(e,t){this.url=e,this.data=t||{}}var $n={encode:Wn,stringify:Wn,decode:Qn,parse:Qn};Xn.prototype.send=function(e){if(!!window.XDomainRequest){var t=new window.XDomainRequest;t.open("POST",this.url,!0),t.onload=function(){e(200,t.responseText)},t.onerror=function(){"Request Entity Too Large"===t.responseText?e(413,t.responseText):e(500,t.responseText)},t.ontimeout=function(){},t.onprogress=function(){},t.send($n.stringify(this.data))}else{var n=new XMLHttpRequest;n.open("POST",this.url,!0),n.onreadystatechange=function(){4===n.readyState&&e(n.status,n.responseText)},n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.send($n.stringify(this.data))}};function Zn(){this._price=null,this._productId=null,this._quantity=1,this._revenueType=null,this._properties=null}Zn.prototype.setProductId=function(e){return"string"!==L(e)?X.error("Unsupported type for productId: "+L(e)+", expecting string"):$(e)?X.error("Invalid empty productId"):this._productId=e,this},Zn.prototype.setQuantity=function(e){return"number"!==L(e)?X.error("Unsupported type for quantity: "+L(e)+", expecting number"):this._quantity=parseInt(e),this},Zn.prototype.setPrice=function(e){return"number"!==L(e)?X.error("Unsupported type for price: "+L(e)+", expecting number"):this._price=e,this},Zn.prototype.setRevenueType=function(e){return"string"!==L(e)?X.error("Unsupported type for revenueType: "+L(e)+", expecting string"):this._revenueType=e,this},Zn.prototype.setEventProperties=function(e){return"object"!==L(e)?X.error("Unsupported type for eventProperties: "+L(e)+", expecting object"):this._properties=ie(e),this},Zn.prototype._isValidRevenue=function(){return"number"===L(this._price)||(X.error("Invalid revenue, need to set price field"),!1)},Zn.prototype._toJSONObject=function(){var e="object"===L(this._properties)?this._properties:{};return null!==this._productId&&(e[a]=this._productId),null!==this._quantity&&(e[o]=this._quantity),null!==this._price&&(e[l]=this._price),null!==this._revenueType&&(e[c]=this._revenueType),e};function ei(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,ei)}var ti=e(function(S,A){return A=A||{},function(r,d){function a(e,t){if(!(this instanceof a))return new a(e,t).getResult();var n=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),i=t?m.extend(C,t):C;return this.getBrowser=function(){var e=v.rgx.apply(this,i.browser);return e.major=m.major(e.version),e},this.getCPU=function(){return v.rgx.apply(this,i.cpu)},this.getDevice=function(){return v.rgx.apply(this,i.device)},this.getEngine=function(){return v.rgx.apply(this,i.engine)},this.getOS=function(){return v.rgx.apply(this,i.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this}var p="function",g="undefined",f="object",e="model",t="name",n="type",i="vendor",o="version",s="architecture",l="console",c="mobile",u="tablet",h="smarttv",_="wearable",m={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"===_typeof2(e)?e.split(".")[0]:d}},v={rgx:function(){for(var e,t,n,i,r,a,o,s=0,l=arguments;s<l.length&&!a;){var c=l[s],u=l[s+1];if(_typeof2(e)===g)for(i in e={},u)u.hasOwnProperty(i)&&(_typeof2(r=u[i])===f?e[r[0]]=d:e[r]=d);for(t=n=0;t<c.length&&!a;)if(a=c[t++].exec(this.getUA()))for(i=0;i<u.length;i++)o=a[++n],_typeof2(r=u[i])===f&&0<r.length?2==r.length?_typeof2(r[1])==p?e[r[0]]=r[1].call(this,o):e[r[0]]=r[1]:3==r.length?_typeof2(r[1])!==p||r[1].exec&&r[1].test?e[r[0]]=o?o.replace(r[1],r[2]):d:e[r[0]]=o?r[1].call(this,o,r[2]):d:4==r.length&&(e[r[0]]=o?r[3].call(this,o.replace(r[1],r[2])):d):e[r]=o||d;s+=2}return e},str:function(e,t){for(var n in t)if(_typeof2(t[n])===f&&0<t[n].length){for(var i=0;i<t[n].length;i++)if(m.has(t[n][i],e))return"?"===n?d:n}else if(m.has(t[n],e))return"?"===n?d:n;return e}},y={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},name:{"Opera Mobile":"Opera Mobi","IE Mobile":"IEMobile"}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},name:{"Windows Phone":"Windows Phone OS"}}}},C={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[t,o],[/(OPiOS)[\/\s]+([\w\.]+)/i],[[t,"Opera Mini"],o],[/\s(opr)\/([\w\.]+)/i],[[t,"Opera"],o],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[t,o],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[t,"IE"],o],[/(edge)\/((\d+)?[\w\.]+)/i],[t,o],[/(yabrowser)\/([\w\.]+)/i],[[t,"Yandex"],o],[/(comodo_dragon)\/([\w\.]+)/i],[[t,/_/g," "],o],[/((?:android.+)crmo|crios)\/([\w\.]+)/i,/android.+(chrome)\/([\w\.]+)\s+(?:mobile\s?safari)/i],[[t,"Chrome Mobile"],o],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[t,o],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[[t,"UCBrowser"],o],[/(dolfin)\/([\w\.]+)/i],[[t,"Dolphin"],o],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[o,[t,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[o,[t,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[o,[t,"Facebook"]],[/fxios\/([\w\.-]+)/i],[o,[t,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[o,[t,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[o,t],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[t,[o,v.str,y.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[t,o],[/(blackberry)\\s?\/([\w\.]+)/i],[[t,"BlackBerry"],o],[/(navigator|netscape)\/([\w\.-]+)/i],[[t,"Netscape"],o],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[t,o]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[s,"amd64"]],[/(ia32(?=;))/i],[[s,m.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[s,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[s,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[s,/ower/,"",m.lowerize]],[/(sun4\w)[;\)]/i],[[s,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[s,m.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[e,i,[n,u]],[/applecoremedia\/[\w\.]+ \((ipad)/],[e,[i,"Apple"],[n,u]],[/(apple\s{0,1}tv)/i],[[e,"Apple TV"],[i,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[i,e,[n,u]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[e,[i,"Amazon"],[n,u]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[e,v.str,y.device.amazon.model],[i,"Amazon"],[n,c]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[e,i,[n,c]],[/\((ip[honed|\s\w*]+);/i],[e,[i,"Apple"],[n,c]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[i,e,[n,c]],[/\(bb10;\s(\w+)/i],[e,[i,"BlackBerry"],[n,c]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[e,[i,"Asus"],[n,u]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[i,"Sony"],[e,"Xperia Tablet"],[n,u]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[i,"Sony"],[e,"Xperia Phone"],[n,c]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[i,e,[n,l]],[/android.+;\s(shield)\sbuild/i],[e,[i,"Nvidia"],[n,l]],[/(playstation\s[34portablevi]+)/i],[e,[i,"Sony"],[n,l]],[/(sprint\s(\w+))/i],[[i,v.str,y.device.sprint.vendor],[e,v.str,y.device.sprint.model],[n,c]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[i,e,[n,u]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[i,[e,/_/g," "],[n,c]],[/(nexus\s9)/i],[e,[i,"HTC"],[n,u]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[e,[i,"Microsoft"],[n,l]],[/(kin\.[onetw]{3})/i],[[e,/\./g," "],[i,"Microsoft"],[n,c]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],[e,[i,"Motorola"],[n,c]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[e,[i,"Motorola"],[n,u]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[i,"Samsung"],e,[n,u]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[i,"Samsung"],e,[n,c]],[/(samsung);smarttv/i],[i,e,[n,h]],[/\(dtv[\);].+(aquos)/i],[e,[i,"Sharp"],[n,h]],[/sie-(\w+)*/i],[e,[i,"Siemens"],[n,c]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[i,"Nokia"],e,[n,c]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[e,[i,"Acer"],[n,u]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[i,"LG"],e,[n,u]],[/(lg) netcast\.tv/i],[i,e,[n,h]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[e,[i,"LG"],[n,c]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[e,[i,"Lenovo"],[n,u]],[/linux;.+((jolla));/i],[i,e,[n,c]],[/((pebble))app\/[\d\.]+\s/i],[i,e,[n,_]],[/android.+;\s(glass)\s\d/i],[e,[i,"Google"],[n,_]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[e,/_/g," "],[i,"Xiaomi"],[n,c]],[/\s(tablet)[;\/\s]/i,/\s(mobile)[;\/\s]/i],[[n,m.lowerize],i,e]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[o,[t,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[t,o],[/rv\:([\w\.]+).*(gecko)/i],[o,t]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[t,o],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[[t,v.str,y.os.windows.name],[o,v.str,y.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[t,"Windows"],[o,v.str,y.os.windows.version]],[/\((bb)(10);/i],[[t,"BlackBerry"],o],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[t,o],[/(symbian\s?o?s?|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[t,"Symbian"],o],[/\((series40);/i],[t],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[t,"Firefox OS"],o],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[[t,"Linux"],o],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[t,"Chromium OS"],o],[/(sunos)\s?([\w\.]+\d)*/i],[[t,"Solaris"],o],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[[t,"Linux"],o],[/(iphone)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[t,"iPhone"],[o,/_/g,"."]],[/(ipad)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[t,"iPad"],[o,/_/g,"."]],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[t,"iOS"],[o,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[t,"Mac"],[o,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[t,o]]};a.VERSION="0.7.10",a.BROWSER={NAME:t,MAJOR:"major",VERSION:o},a.CPU={ARCHITECTURE:s},a.DEVICE={MODEL:e,VENDOR:i,TYPE:n,CONSOLE:l,MOBILE:c,SMARTTV:h,TABLET:u,WEARABLE:_,EMBEDDED:"embedded"},a.ENGINE={NAME:t,VERSION:o},a.OS={NAME:t,VERSION:o},S.exports&&(A=S.exports=a),A.UAParser=a;var P=r.jQuery||r.Zepto;if(_typeof2(P)!==g){var b=new a;P.ua=b.getResult(),P.ua.get=function(){return b.getUA()},P.ua.set=function(e){b.setUA(e);var t=b.getResult();for(var n in t)P.ua[n]=t[n]}}}("object"===("undefined"==typeof window?"undefined":_typeof2(window))?window:_),A}),ni={apiEndpoint:"api.amplitude.com",batchEvents:!1,cookieExpiration:3650,cookieName:"amplitude_id",deviceIdFromUrlParam:!1,domain:"",eventUploadPeriodMillis:3e4,eventUploadThreshold:30,forceHttps:!0,includeGclid:!1,includeReferrer:!1,includeUtm:!1,language:{language:navigator&&(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)||void 0}.language,logLevel:"WARN",optOut:!1,platform:"Web",savedMaxCount:1e3,saveEvents:!0,saveParamsReferrerOncePerSession:!0,sessionTimeout:18e5,trackingOptions:{city:!0,country:!0,device_model:!0,dma:!0,ip_address:!0,language:!0,os_name:!0,os_version:!0,platform:!0,region:!0,version_name:!0},unsentKey:"amplitude_unsent",unsentIdentifyKey:"amplitude_unsent_identify",uploadBatchSize:100};function ii(e){this._instanceName=$(e)?p:e.toLowerCase(),this._legacyStorageSuffix=this._instanceName===p?"":"_"+this._instanceName,this._unsentEvents=[],this._unsentIdentifys=[],this._ua=new ti(navigator.userAgent).getResult(),this.options=Kn({},ni),this.cookieStorage=(new pe).getStorage(),this._q=[],this._sending=!1,this._updateScheduled=!1,this._eventId=0,this._identifyId=0,this._lastEventTime=null,this._newSession=!1,this._sequenceNumber=0,this._sessionId=null,this._userAgent=navigator&&navigator.userAgent||null}ii.prototype.Identify=he,ii.prototype.Revenue=Zn,ii.prototype.init=function(e,t,n,i){if("string"!==L(e)||$(e))X.error("Invalid apiKey. Please re-initialize with a valid apiKey");else try{this.options.apiKey=e,this._storageSuffix="_"+e+this._legacyStorageSuffix,ri(this.options,n),"string"===L(this.options.logLevel)&&Q(this.options.logLevel);var r=pi(this);if(this._apiPropertiesTrackingOptions=0<Object.keys(r).length?{tracking_options:r}:{},this.cookieStorage.options({expirationDays:this.options.cookieExpiration,domain:this.options.domain}),this.options.domain=this.cookieStorage.options().domain,this._instanceName===p&&ai(this),oi(this),this.options.deviceId="object"===L(n)&&"string"===L(n.deviceId)&&!$(n.deviceId)&&n.deviceId||this.options.deviceIdFromUrlParam&&this._getDeviceIdFromUrlParam(this._getUrlParams())||this.options.deviceId||ei()+"R",this.options.userId="string"===L(t)&&!$(t)&&t||"number"===L(t)&&t.toString()||this.options.userId||null,this.options.saveEvents){this._unsentEvents=this._loadSavedUnsentEvents(this.options.unsentKey),this._unsentIdentifys=this._loadSavedUnsentEvents(this.options.unsentIdentifyKey);for(var a=0;a<this._unsentEvents.length;a++){var o=this._unsentEvents[a].event_properties,s=this._unsentEvents[a].groups;this._unsentEvents[a].event_properties=ie(o),this._unsentEvents[a].groups=te(s)}for(var l=0;l<this._unsentIdentifys.length;l++){var c=this._unsentIdentifys[l].user_properties,u=this._unsentIdentifys[l].groups;this._unsentIdentifys[l].user_properties=ie(c),this._unsentIdentifys[l].groups=te(u)}}var d=(new Date).getTime();this._sessionId&&this._lastEventTime&&!(d-this._lastEventTime>this.options.sessionTimeout)||(this._newSession=!0,this._sessionId=d,this.options.saveParamsReferrerOncePerSession&&this._trackParamsAndReferrer()),this.options.saveParamsReferrerOncePerSession||this._trackParamsAndReferrer(),this._lastEventTime=d,li(this),this._sendEventsIfReady()}catch(e){X.error(e)}finally{"function"===L(i)&&i(this)}},ii.prototype._trackParamsAndReferrer=function(){this.options.includeUtm&&this._initUtmData(),this.options.includeReferrer&&this._saveReferrer(this._getReferrer()),this.options.includeGclid&&this._saveGclid(this._getUrlParams())};var ri=function i(r,a){if("object"===L(a)){var e=function(e){if(r.hasOwnProperty(e)){var t=a[e],n=L(r[e]);ne(t,e+" option",n)&&("boolean"===n?r[e]=!!t:"string"===n&&!$(t)||"number"===n&&0<t?r[e]=t:"object"===n&&i(r[e],t))}};for(var t in a)a.hasOwnProperty(t)&&e(t)}};ii.prototype.runQueuedFunctions=function(){for(var e=0;e<this._q.length;e++){var t=this[this._q[e][0]];"function"===L(t)&&t.apply(this,this._q[e].slice(1))}this._q=[]},ii.prototype._apiKeySet=function(e){return!$(this.options.apiKey)||(X.error("Invalid apiKey. Please set a valid apiKey with init() before calling "+e),!1)},ii.prototype._loadSavedUnsentEvents=function(e){var t=this._getFromStorage(ge,e),n=this._parseSavedUnsentEventsString(t,e),i=this._getFromStorageLegacy(ge,e),r=this._parseSavedUnsentEventsString(i,e).concat(n);return this._removeFromLegacyStorage(ge,e),this._setInStorage(ge,e,JSON.stringify(r)),r},ii.prototype._removeFromLegacyStorage=function(e,t){e.removeItem(t+this._legacyStorageSuffix)},ii.prototype._parseSavedUnsentEventsString=function(e,t){if($(e))return[];if("string"===L(e))try{var n=JSON.parse(e);if("array"===L(n))return n}catch(e){}return X.error("Unable to load "+t+" events. Restart with a new empty queue."),[]},ii.prototype.isNewSession=function(){return this._newSession},ii.prototype.getSessionId=function(){return this._sessionId},ii.prototype.nextEventId=function(){return this._eventId++,this._eventId},ii.prototype.nextIdentifyId=function(){return this._identifyId++,this._identifyId},ii.prototype.nextSequenceNumber=function(){return this._sequenceNumber++,this._sequenceNumber},ii.prototype._unsentCount=function(){return this._unsentEvents.length+this._unsentIdentifys.length},ii.prototype._sendEventsIfReady=function(e){return 0!==this._unsentCount()&&(this.options.batchEvents?this._unsentCount()>=this.options.eventUploadThreshold?(this.sendEvents(e),!0):(this._updateScheduled||(this._updateScheduled=!0,setTimeout(function(){this._updateScheduled=!1,this.sendEvents()}.bind(this),this.options.eventUploadPeriodMillis)),!1):(this.sendEvents(e),!0))},ii.prototype._getFromStorage=function(e,t){return e.getItem(t+this._storageSuffix)},ii.prototype._getFromStorageLegacy=function(e,t){return e.getItem(t+this._legacyStorageSuffix)},ii.prototype._setInStorage=function(e,t,n){e.setItem(t+this._storageSuffix,n)};var ai=function(e){var t=e.cookieStorage.get(e.options.cookieName+e._storageSuffix);if("object"!==L(t)&&(t=e.cookieStorage.get(e.options.cookieName+e._legacyStorageSuffix),!("object"===L(t)&&t.deviceId&&t.sessionId&&t.lastEventTime))){var n=function(e){var t=ge.getItem(e);return ge.removeItem(e),t},i="string"===L(e.options.apiKey)&&"_"+e.options.apiKey.slice(0,6)||"",r=n(P+i),a=n(S+i),o=n(b+i);null!=o&&(o="true"===String(o));var s=parseInt(n(C)),l=parseInt(n(m)),c=parseInt(n(h)),u=parseInt(n(v)),d=parseInt(n(y)),p=function(e){return"object"===L(t)&&t[e]};e.options.deviceId=p("deviceId")||r,e.options.userId=p("userId")||a,e._sessionId=p("sessionId")||s||e._sessionId,e._lastEventTime=p("lastEventTime")||l||e._lastEventTime,e._eventId=p("eventId")||c||e._eventId,e._identifyId=p("identifyId")||u||e._identifyId,e._sequenceNumber=p("sequenceNumber")||d||e._sequenceNumber,e.options.optOut=o||!1,t&&void 0!==t.optOut&&null!==t.optOut&&(e.options.optOut="true"===String(t.optOut)),li(e)}},oi=function(e){var t=e.cookieStorage.get(e.options.cookieName+e._storageSuffix);if("object"===L(t))si(e,t);else{var n=e.cookieStorage.get(e.options.cookieName+e._legacyStorageSuffix);"object"===L(n)&&(e.cookieStorage.remove(e.options.cookieName+e._legacyStorageSuffix),si(e,n))}},si=function(e,t){t.deviceId&&(e.options.deviceId=t.deviceId),t.userId&&(e.options.userId=t.userId),null!==t.optOut&&void 0!==t.optOut&&(e.options.optOut=t.optOut),t.sessionId&&(e._sessionId=parseInt(t.sessionId)),t.lastEventTime&&(e._lastEventTime=parseInt(t.lastEventTime)),t.eventId&&(e._eventId=parseInt(t.eventId)),t.identifyId&&(e._identifyId=parseInt(t.identifyId)),t.sequenceNumber&&(e._sequenceNumber=parseInt(t.sequenceNumber))},li=function(e){e.cookieStorage.set(e.options.cookieName+e._storageSuffix,{deviceId:e.options.deviceId,userId:e.options.userId,optOut:e.options.optOut,sessionId:e._sessionId,lastEventTime:e._lastEventTime,eventId:e._eventId,identifyId:e._identifyId,sequenceNumber:e._sequenceNumber})};ii.prototype._initUtmData=function(e,t){e=e||this._getUrlParams(),t=t||this.cookieStorage.get("__utmz");var n=fe(t,e);ci(this,n)};var ci=function(e,t){if("object"===L(t)&&0!==Object.keys(t).length){var n=new he;for(var i in t)t.hasOwnProperty(i)&&(n.setOnce("initial_"+i,t[i]),n.set(i,t[i]));e.identify(n)}};ii.prototype._getReferrer=function(){return document.referrer},ii.prototype._getUrlParams=function(){return location.search},ii.prototype._saveGclid=function(e){var t=Z("gclid",e);$(t)||ci(this,{gclid:t})},ii.prototype._getDeviceIdFromUrlParam=function(e){return Z(d,e)},ii.prototype._getReferringDomain=function(e){if($(e))return null;var t=e.split("/");return 3<=t.length?t[2]:null},ii.prototype._saveReferrer=function(e){if(!$(e)){var t={referrer:e,referring_domain:this._getReferringDomain(e)};ci(this,t)}},ii.prototype.saveEvents=function(){try{this._setInStorage(ge,this.options.unsentKey,JSON.stringify(this._unsentEvents))}catch(e){}try{this._setInStorage(ge,this.options.unsentIdentifyKey,JSON.stringify(this._unsentIdentifys))}catch(e){}},ii.prototype.setDomain=function(e){if(ne(e,"domain","string"))try{this.cookieStorage.options({domain:e}),this.options.domain=this.cookieStorage.options().domain,oi(this),li(this)}catch(e){X.error(e)}},ii.prototype.setUserId=function(e){try{this.options.userId=null!=e&&""+e||null,li(this)}catch(e){X.error(e)}},ii.prototype.setGroup=function(e,t){if(this._apiKeySet("setGroup()")&&ne(e,"groupType","string")&&!$(e)){var n={};n[e]=t;var i=(new he).set(e,t);this._logEvent(g,null,null,i.userPropertiesOperations,n,null,null,null)}},ii.prototype.setOptOut=function(e){if(ne(e,"enable","boolean"))try{this.options.optOut=e,li(this)}catch(e){X.error(e)}},ii.prototype.setSessionId=function(e){if(ne(e,"sessionId","number"))try{this._sessionId=e,li(this)}catch(e){X.error(e)}},ii.prototype.resetSessionId=function(){this.setSessionId((new Date).getTime())},ii.prototype.regenerateDeviceId=function(){this.setDeviceId(ei()+"R")},ii.prototype.setDeviceId=function(e){if(ne(e,"deviceId","string"))try{$(e)||(this.options.deviceId=""+e,li(this))}catch(e){X.error(e)}},ii.prototype.setUserProperties=function(e){if(this._apiKeySet("setUserProperties()")&&ne(e,"userProperties","object")){var t=ee(ie(e));if(0!==Object.keys(t).length){var n=new he;for(var i in t)t.hasOwnProperty(i)&&n.set(i,t[i]);this.identify(n)}}},ii.prototype.clearUserProperties=function(){if(this._apiKeySet("clearUserProperties()")){var e=new he;e.clearAll(),this.identify(e)}};function ui(e,t){for(var n=0;n<t._q.length;n++){var i=e[t._q[n][0]];"function"===L(i)&&i.apply(e,t._q[n].slice(1))}return e}ii.prototype.identify=function(e,t){if(this._apiKeySet("identify()"))if("object"===L(e)&&e.hasOwnProperty("_q")&&(e=ui(new he,e)),e instanceof he){if(0<Object.keys(e.userPropertiesOperations).length)return this._logEvent(g,null,null,e.userPropertiesOperations,null,null,null,t);"function"===L(t)&&t(0,"No request sent",{reason:"No user property operations"})}else X.error("Invalid identify input type. Expected Identify object but saw "+L(e)),"function"===L(t)&&t(0,"No request sent",{reason:"Invalid identify input type"});else"function"===L(t)&&t(0,"No request sent",{reason:"API key is not set"})},ii.prototype.groupIdentify=function(e,t,n,i){if(this._apiKeySet("groupIdentify()"))if(ne(e,"group_type","string")&&!$(e))if(null!=t)if("object"===L(n)&&n.hasOwnProperty("_q")&&(n=ui(new he,n)),n instanceof he){if(0<Object.keys(n.userPropertiesOperations).length)return this._logEvent(f,null,null,null,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t),n.userPropertiesOperations,null,i);"function"===L(i)&&i(0,"No request sent",{reason:"No group property operations"})}else X.error("Invalid identify input type. Expected Identify object but saw "+L(n)),"function"===L(i)&&i(0,"No request sent",{reason:"Invalid identify input type"});else"function"===L(i)&&i(0,"No request sent",{reason:"Invalid group name"});else"function"===L(i)&&i(0,"No request sent",{reason:"Invalid group type"});else"function"===L(i)&&i(0,"No request sent",{reason:"API key is not set"})},ii.prototype.setVersionName=function(e){ne(e,"versionName","string")&&(this.options.versionName=e)},ii.prototype._logEvent=function(e,t,n,i,r,a,o,s){if(oi(this),e)if(this.options.optOut)"function"===L(s)&&s(0,"No request sent",{reason:"optOut is set to true"});else try{var l;l=e===g||e===f?this.nextIdentifyId():this.nextEventId();var c=this.nextSequenceNumber(),u="number"===L(o)?o:(new Date).getTime();this._sessionId&&this._lastEventTime&&!(u-this._lastEventTime>this.options.sessionTimeout)||(this._sessionId=u),this._lastEventTime=u,li(this),i=i||{};var d=Kn({},this._apiPropertiesTrackingOptions);n=Kn(d,n||{}),t=t||{},r=r||{},a=a||{};var p={device_id:this.options.deviceId,user_id:this.options.userId,timestamp:u,event_id:l,session_id:this._sessionId||-1,event_type:e,version_name:di(this,"version_name")&&this.options.versionName||null,platform:di(this,"platform")?this.options.platform:null,os_name:di(this,"os_name")&&this._ua.browser.name||null,os_version:di(this,"os_version")&&this._ua.browser.major||null,device_model:di(this,"device_model")&&this._ua.os.name||null,language:di(this,"language")?this.options.language:null,api_properties:n,event_properties:ee(ie(t)),user_properties:ee(ie(i)),uuid:ei(),library:{name:"amplitude-js",version:"4.5.2"},sequence_number:c,groups:ee(te(r)),group_properties:ee(ie(a)),user_agent:this._userAgent};return e===g||e===f?(this._unsentIdentifys.push(p),this._limitEventsQueued(this._unsentIdentifys)):(this._unsentEvents.push(p),this._limitEventsQueued(this._unsentEvents)),this.options.saveEvents&&this.saveEvents(),this._sendEventsIfReady(s)||"function"!==L(s)||s(0,"No request sent",{reason:"No events to send or upload queued"}),l}catch(e){X.error(e)}else"function"===L(s)&&s(0,"No request sent",{reason:"Missing eventType"})};var di=function(e,t){return!!e.options.trackingOptions[t]},pi=function(e){for(var t=["city","country","dma","ip_address","region"],n={},i=0;i<t.length;i++){var r=t[i];di(e,r)||(n[r]=!1)}return n};ii.prototype._limitEventsQueued=function(e){e.length>this.options.savedMaxCount&&e.splice(0,e.length-this.options.savedMaxCount)},ii.prototype.logEvent=function(e,t,n){return this.logEventWithTimestamp(e,t,null,n)},ii.prototype.logEventWithTimestamp=function(e,t,n,i){return this._apiKeySet("logEvent()")?ne(e,"eventType","string")?$(e)?("function"===L(i)&&i(0,"No request sent",{reason:"Missing eventType"}),-1):this._logEvent(e,t,null,null,null,null,n,i):("function"===L(i)&&i(0,"No request sent",{reason:"Invalid type for eventType"}),-1):("function"===L(i)&&i(0,"No request sent",{reason:"API key not set"}),-1)},ii.prototype.logEventWithGroups=function(e,t,n,i){return this._apiKeySet("logEventWithGroups()")?ne(e,"eventType","string")?this._logEvent(e,t,null,null,n,null,null,i):("function"===L(i)&&i(0,"No request sent",{reason:"Invalid type for eventType"}),-1):("function"===L(i)&&i(0,"No request sent",{reason:"API key not set"}),-1)};function gi(e){return!isNaN(parseFloat(e))&&isFinite(e)}ii.prototype.logRevenueV2=function(e){if(this._apiKeySet("logRevenueV2()"))if("object"===L(e)&&e.hasOwnProperty("_q")&&(e=ui(new Zn,e)),e instanceof Zn){if(e&&e._isValidRevenue())return this.logEvent(r,e._toJSONObject())}else X.error("Invalid revenue input type. Expected Revenue object but saw "+L(e))},ii.prototype.logRevenue=function(e,t,n){return this._apiKeySet("logRevenue()")&&gi(e)&&(void 0===t||gi(t))?this._logEvent(r,{},{productId:n,special:"revenue_amount",quantity:t||1,price:e},null,null,null,null,null):-1},ii.prototype.removeEvents=function(e,t){fi(this,"_unsentEvents",e),fi(this,"_unsentIdentifys",t)};var fi=function(e,t,n){if(!(n<0)){for(var i=[],r=0;r<e[t].length;r++)e[t][r].event_id>n&&i.push(e[t][r]);e[t]=i}};ii.prototype.sendEvents=function(n){if(this._apiKeySet("sendEvents()"))if(this.options.optOut)"function"===L(n)&&n(0,"No request sent",{reason:"optOut is set to true"});else if(0!==this._unsentCount())if(this._sending)"function"===L(n)&&n(0,"No request sent",{reason:"Request already in progress"});else{this._sending=!0;var e=(this.options.forceHttps?"https":"https:"===window.location.protocol?"https":"http")+"://"+this.options.apiEndpoint+"/",i=Math.min(this._unsentCount(),this.options.uploadBatchSize),t=this._mergeEventsAndIdentifys(i),r=t.maxEventId,a=t.maxIdentifyId,o=JSON.stringify(t.eventsToSend),s=(new Date).getTime(),l={client:this.options.apiKey,e:o,v:u,upload_time:s,checksum:me(u+this.options.apiKey+o+s)},c=this;new Xn(e,l).send(function(e,t){c._sending=!1;try{200===e&&"success"===t?(c.removeEvents(r,a),c.options.saveEvents&&c.saveEvents(),c._sendEventsIfReady(n)||"function"!==L(n)||n(e,t)):413===e?(1===c.options.uploadBatchSize&&c.removeEvents(r,a),c.options.uploadBatchSize=Math.ceil(i/2),c.sendEvents(n)):"function"===L(n)&&n(e,t)}catch(e){}})}else"function"===L(n)&&n(0,"No request sent",{reason:"No events to send"});else"function"===L(n)&&n(0,"No request sent",{reason:"API key not set"})},ii.prototype._mergeEventsAndIdentifys=function(e){for(var t=[],n=0,i=-1,r=0,a=-1;t.length<e;){var o,s=r>=this._unsentIdentifys.length,l=n>=this._unsentEvents.length;if(l&&s){X.error("Merging Events and Identifys, less events and identifys than expected");break}s?i=(o=this._unsentEvents[n++]).event_id:l?a=(o=this._unsentIdentifys[r++]).event_id:!("sequence_number"in this._unsentEvents[n])||this._unsentEvents[n].sequence_number<this._unsentIdentifys[r].sequence_number?i=(o=this._unsentEvents[n++]).event_id:a=(o=this._unsentIdentifys[r++]).event_id,t.push(o)}return{eventsToSend:t,maxEventId:i,maxIdentifyId:a}},ii.prototype.setGlobalUserProperties=function(e){this.setUserProperties(e)},ii.prototype.__VERSION__="4.5.2";var hi=qt(Object.keys,Object),_i=Object.prototype.hasOwnProperty;var mi=function(e){if(!Yt(e))return hi(e);var t=[];for(var n in Object(e))_i.call(e,n)&&"constructor"!=n&&t.push(n);return t};function vi(){this.options=Pi({},ni),this._q=[],this._instances={}}var yi=function(e){return tn(e)?Tn(e):mi(e)},Ci=Object.prototype.hasOwnProperty,Pi=Hn(function(e,t){if(Yt(t)||tn(t))Cn(t,yi(t),e);else for(var n in t)Ci.call(t,n)&&yn(e,n,t[n])});vi.prototype.Identify=he,vi.prototype.Revenue=Zn,vi.prototype.getInstance=function(e){e=$(e)?p:e.toLowerCase();var t=this._instances[e];return void 0===t&&(t=new ii(e),this._instances[e]=t),t},vi.prototype.init=function(e,t,n,i){this.getInstance().init(e,t,n,function(e){this.options=e.options,"function"===L(i)&&i(e)}.bind(this))},vi.prototype.runQueuedFunctions=function(){for(var e=0;e<this._q.length;e++){var t=this[this._q[e][0]];"function"===L(t)&&t.apply(this,this._q[e].slice(1))}for(var n in this._q=[],this._instances)this._instances.hasOwnProperty(n)&&this._instances[n].runQueuedFunctions()},vi.prototype.isNewSession=function(){return this.getInstance().isNewSession()},vi.prototype.getSessionId=function(){return this.getInstance().getSessionId()},vi.prototype.nextEventId=function(){return this.getInstance().nextEventId()},vi.prototype.nextIdentifyId=function(){return this.getInstance().nextIdentifyId()},vi.prototype.nextSequenceNumber=function(){return this.getInstance().nextSequenceNumber()},vi.prototype.saveEvents=function(){this.getInstance().saveEvents()},vi.prototype.setDomain=function(e){this.getInstance().setDomain(e)},vi.prototype.setUserId=function(e){this.getInstance().setUserId(e)},vi.prototype.setGroup=function(e,t){this.getInstance().setGroup(e,t)},vi.prototype.setOptOut=function(e){this.getInstance().setOptOut(e)},vi.prototype.regenerateDeviceId=function(){this.getInstance().regenerateDeviceId()},vi.prototype.setDeviceId=function(e){this.getInstance().setDeviceId(e)},vi.prototype.setUserProperties=function(e){this.getInstance().setUserProperties(e)},vi.prototype.clearUserProperties=function(){this.getInstance().clearUserProperties()},vi.prototype.identify=function(e,t){this.getInstance().identify(e,t)},vi.prototype.setVersionName=function(e){this.getInstance().setVersionName(e)},vi.prototype.logEvent=function(e,t,n){return this.getInstance().logEvent(e,t,n)},vi.prototype.logEventWithGroups=function(e,t,n,i){return this.getInstance().logEventWithGroups(e,t,n,i)},vi.prototype.logRevenueV2=function(e){return this.getInstance().logRevenueV2(e)},vi.prototype.logRevenue=function(e,t,n){return this.getInstance().logRevenue(e,t,n)},vi.prototype.removeEvents=function(e,t){this.getInstance().removeEvents(e,t)},vi.prototype.sendEvents=function(e){this.getInstance().sendEvents(e)},vi.prototype.setGlobalUserProperties=function(e){this.getInstance().setUserProperties(e)},vi.prototype.__VERSION__="4.5.2";var bi=window.amplitude||{},Si=new vi;for(var Ai in Si._q=bi._q||[],bi._iq)bi._iq.hasOwnProperty(Ai)&&(Si.getInstance(Ai)._q=bi._iq[Ai]._q||[]);return Si},"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.amplitude=t()}(),CBC.APP.ANA.LIBRARY.Amplitude=function(){var e=!1,t=!1,n=!1;function i(){if(!CBC.APP.SC.Subscribers.amplitude)return!1;var e=CBC.APP.SC.Subscribers.amplitude,t=e.length;if(!t)return!1;for(var n=0;n<t;n++)"function"==typeof e[t-1].cb&&e.pop().cb();return!0}function r(e){CBC.APP.SC.DEBUG&&"undefined"!=typeof console&&"function"==typeof console.log&&console.log(e)}function a(){e=!0,function(){if(n)return r("Amplitude:Warning: SDK already loaded"),i();n=!0,function(){if(t)return r("Amplitude:Warning: SDK already initialized"),i();var e=null;CBC.APP.SC.UTIL.getCookie("cbc_plus")&&(e=CBC.APP.SC.UTIL.getCookie("cbc_plus"));CBC.APP.SC.UTIL.getCookie("cbc_visitor")?(CBC.APP.SC.UTIL.console("CBC Visitor ID exist"),window.amplitude.getInstance("stats").init("f5b7aa101ec24385b731affd4a2f5ed0",e,{deviceId:CBC.APP.SC.UTIL.getCookie("cbc_visitor"),domain:".cbc.ca"},o)):CBC.APP.SC.UTIL.setCBCVisitorIDPromise(e,o).catch(function(e){CBC.APP.SC.UTIL.console(e)})}()}(window,document)}function o(){t=!0,CBC.APP.ANA.VALIDATORS.Amplitude.executeQueue(),i()}return{turnOn:function(){try{CBC.APP.SC.masterSwitch.switches.amplitude&&a()}catch(e){var t="//www.cbc.ca/network/includes/stats/master-switch.json";CBC.APP.SC.UTIL.makeGETRequest(t,{success:function(e,t){JSON.parse(e.responseText).switches.amplitude&&a()},failure:function(e,t){r("ERROR: Unable to talk to config URL: "+t.failure.uri)}},{success:{uri:t},failure:{uri:t}},0,0,{timeout:2e3,cb:function(){console.log("ERROR: AJAX request for //www.cbc.ca/network/includes/stats/master-switch.json timed out.")}})}},isInitialized:function(){return t},isOn:function(){return e}}}(),CBC.APP.ANA.LIBRARY.FBPIXEL={facebookLibrary:function(){var e,t,n,i,r;e=window,t=document,e.fbq||(n=e.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)},e._fbq||(e._fbq=n),(n.push=n).loaded=!0,n.version="2.0",n.queue=[],(i=t.createElement("script")).async=!0,i.src="https://connect.facebook.net/en_US/fbevents.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(i,r)),fbq.disablePushState=!0,fbq("set","autoConfig",!1,"1023886784662676"),fbq("init","1023886784662676")}},CBC.APP.ANA.LinkTracker=function(){"use strict";function n(e){return e.textContent.replace(/\s/g,"")?e.textContent.replace(/\n/g,"").trim():!("IMG"!==e.tagName||!e.alt.replace(/\s/g,""))&&e.alt.replace(/\n/g,"").trim()}function a(e){if(n(e))return n(e);if(!e.childNodes)return console.log("LinkTracker: LinkName undefined."),"";for(var t=0;t<e.childNodes.length;t++)if(n(e.childNodes[t]))return n(e.childNodes[t])}return{checkClickEvent:function(e){try{var t=e.target,n=CBC.APP.ANA.LinkTracker.bubbleUpProps(t);CBC.APP.ANA.LinkTracker.registerLinkClick(n)}catch(e){console.log(e)}},bubbleUpProps:function(e){for(var t={};e&&"BODY"!==e.nodeName;){for(var n in e.dataset)switch(n){case"featureName":t.dataFeatureName||(t.dataFeatureName=e.dataset.featureName);break;case"featureInstance":t.dataFeatureInstance||(t.dataFeatureInstance=e.dataset.featureInstance);break;case"featurePosition":t.dataFeaturePosition||(t.dataFeaturePosition=e.dataset.featurePosition);break;case"featureValue":t.dataFeatureValue||(t.dataFeatureValue=e.dataset.featureValue);break;default:CBC.APP.SC.UTIL.console("invalid data feature type: "+n)}if(t.linkName||(t.linkName=a(e)),!t.linkPosition&&e.getAttribute("class")){var i=new RegExp(/\bsclt-([a-zA-Z0-9_]+)\b/),r=e.getAttribute("class").match(i);r&&r[1]&&(t.linkPosition=r[1])}e=e.parentElement}return t},registerLinkClick:function(e){var t="DATA_FEATURE_LINKS";window.s_cbc_sitecatalyst.c_w(t,"",1),window.s_cbc_sitecatalyst.c_w("SC_LINKS","",1);var n=void 0===window.s_cbc_sitecatalyst.pageName?"":window.s_cbc_sitecatalyst.pageName,i=void 0===e.linkName?"":e.linkName;try{var r=n.replace(/"/g,'\\"'),a=i.replace(/"/g,'\\"');if(e.linkPosition&&window.s_cbc_sitecatalyst.c_w("SC_LINKS",'{ "pageName": "'+r+'", "linkName": "'+a+'", "concatValue": "'+r+" | "+a+'", "linkPosition": "'+e.linkPosition+'" }',0),e.dataFeatureName||e.dataFeatureInstance||e.dataFeaturePosition||e.dataFeatureValue){var o=[];o.push("{"),o.push('"pageName": "'.concat(r,'"')),e.dataFeatureName&&o.push(', "dataFeatureName": "'.concat(e.dataFeatureName,'"')),e.dataFeatureInstance&&o.push(', "dataFeatureInstance": "'.concat(e.dataFeatureInstance,'"')),e.dataFeaturePosition&&o.push(', "dataFeaturePosition": "'.concat(e.dataFeaturePosition,'"')),e.dataFeatureValue&&o.push(', "dataFeatureValue": "'.concat(e.dataFeatureValue,'"')),o.push("}"),window.s_cbc_sitecatalyst.c_w(t,o.join(""))}}catch(e){console.log(e)}}}}(),function(){"use strict";window._sf_startpt=(new Date).getTime();var n={uid:46236,domain:"cbc.ca",flickerControl:!1,useCanonical:!0,autoDetect:!1,articleBlockSelector:"a.card"},o=!1;document.location.pathname.match(/^\/g\/stats\/ext.html/g)&&(n.path=document.location.href),n.cbc={authors:"",sections:"",title:"",path:"",stringSanitize:function(e){return e.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()\s]/g,"").toLowerCase()},objectToSections:function(e){var t=[];return e.contentarea&&t.push(n.cbc.stringSanitize(e.contentarea)),e.subsection1&&t.push(n.cbc.stringSanitize(e.subsection1)),e.subsection2&&t.push(n.cbc.stringSanitize(e.subsection2)),e.subsection3&&t.push(n.cbc.stringSanitize(e.subsection3)),e.contenttype&&(t.push(n.cbc.stringSanitize(e.contenttype)),"index"===e.contenttype&&(window._sf_async_config.useCanonical=!1)),"string"==typeof CBC.APP.SC.DTM.DATA.syndicate&&t.push(n.cbc.stringSanitize(CBC.APP.SC.DTM.DATA.syndicate)),e.title&&(e.spa||e.syndicate)?this.title=/\s/g.test(e.title)?e.title:e.title.replace(/\-/g," "):this.title=document.title,e.url&&(this.path=e.url),t.join(",")},chartbeatSections:function(){0<Object.keys(CBC.APP.SC.DTM.formatted.chartbeat).length&&(this.sections=n.cbc.objectToSections(CBC.APP.SC.DTM.formatted.chartbeat)),"string"==typeof this.sections&&this.sections.match(/regions/)&&(this.sections=this.sections.replace("radio","news"))},chartbeatAuthors:function(){this.authors="",CBC.APP.SC.DTM.formatted.chartbeat&&(this.authors=void 0!==CBC.APP.SC.DTM.formatted.chartbeat.authors?CBC.APP.SC.DTM.formatted.chartbeat.authors.toLowerCase().replace(/\s/g,"-"):"")},chartbeatTitle:function(e){void 0!==this.title&&""!==this.title||(this.title=e)},chartbeatPath:function(e){void 0!==this.path&&""!==this.path||(this.path=e)},clearMetadata:function(){try{this.sections="",this.authors="",this.title="",this.path=""}catch(e){CBC.APP.SC.DEBUG&&console.log("Error - Chartbeat clearMetadata: "+e)}},setIframeMode:function(e){!!e},addLibrary:function(){var e=document.createElement("script"),t=document.getElementsByTagName("script")[0];e.async=!0,e.src="//static.chartbeat.com/js/chartbeat_mab_image.js",t.parentNode.insertBefore(e,t);var n=document.createElement("script"),i=document.getElementsByTagName("script")[0];if(n.src="//static.chartbeat.com/js/chartbeat_video.js",i.parentNode.insertBefore(n,i),"fia"===window.CBC.APP.SC.DTM.DATA.syndicate){var r=document.createElement("script"),a=document.getElementsByTagName("script")[0];r.src="//static.chartbeat.com/js/chartbeat_fia.js",r.defer=!0,a.parentNode.insertBefore(r,a)}},pageChange:function(){var e,t,n,i,r="",a="";try{if(r=document.title,a=CBC.APP.SC.UTIL.returnURL().replace(/\?.*|#.*/,""),CBC.APP.SC.DTM.formatted.chartbeat&&(r=void 0!==window.CBC.APP.SC.DTM.formatted.chartbeat.title?window.CBC.APP.SC.DTM.formatted.chartbeat.title:document.title,a=void 0!==window.CBC.APP.SC.DTM.formatted.chartbeat.url?window.CBC.APP.SC.DTM.formatted.chartbeat.url:CBC.APP.SC.UTIL.returnURL().replace(/\?.*|#.*/,"")),o&&window._sf_async_config.cbc.clearMetadata(),window._sf_async_config.cbc.chartbeatAuthors(),window._sf_async_config.cbc.chartbeatSections(),window._sf_async_config.cbc.chartbeatPath(a),window._sf_async_config.cbc.chartbeatTitle(r),e=this.authors,t=this.sections,n=this.path,i=this.title,o){if(void 0===window.pSUPERFLY||"function"!=typeof window.pSUPERFLY.virtualPage)return!1;window.pSUPERFLY.virtualPage({authors:e,sections:t,path:n,title:i})}else window._sf_async_config.authors=e,window._sf_async_config.sections=t,window._sf_async_config.title=i,window._sf_async_config.path=n,window._sf_async_config.cbc.addLibrary(),o=!0;return CBC.APP.SC.DEBUG&&console.log("Chartbeat - location: "+a+" title: "+r),!0}catch(e){return CBC.APP.SC.DEBUG&&console.log("Error - ChartbeatSPA: "+e),!1}}},window._sf_async_config||(window._sf_async_config=n)}(),function(){"use strict";if(!Object.keys(CBC.APP.PubSub).length){var e=function(){function i(e,t,n){_classCallCheck(this,i),this.subscribers=e||{},this.queuedEvents=t||[],this.isOn=n||!1}return _createClass(i,[{key:"turnOn",value:function(){if(this.isOn=!0,this.queuedEvents.length)for(var e=0;e<this.queuedEvents.length;e++)this.publish(this.queuedEvents[e].event,this.queuedEvents[e].payload),this.queuedEvents.splice(e,1)}},{key:"turnOff",value:function(){this.isOn=!1}},{key:"isOn",value:function(){return this.isOn}},{key:"publish",value:function(t,n){t in this.subscribers?this.subscribers[t].slice().forEach(function(e){try{e(t,n)}catch(e){console.error(e.message)}}):this.isOn||this.queuedEvents.push({event:t,payload:n})}},{key:"subscribe",value:function(e,t){return e in this.subscribers||(this.subscribers[e]=[]),this.subscribers[e].some(function(e){if(t===e)return!0})?(console.log("callback already exists for event:",e,t),!1):(this.subscribers[e].push(t),!0)}},{key:"unsubscribe",value:function(e,i){e in this.subscribers&&this.subscribers[e].some(function(e,t,n){if(i===e)return n.splice(t,1),!0})}}]),i}();CBC.APP.PubSub=new e}}(),CBC.APP.ANA.VARS=CBC.APP.ANA.VARS||{},CBC.APP.ANA.VARS.sessionID="",CBC.APP.ANA.VARS.sessionTimeOut=0,CBC.APP.SC.EventTracker=function(){"use strict";var i=!1,r=[],a=[];function o(){if(!CBC.APP.SC.Subscribers.eventtracker)return!1;var e=CBC.APP.SC.Subscribers.eventtracker,t=e.length;if(!t)return!1;for(var n=0;n<t;n++)"function"==typeof e[t-1].cb&&e.pop().cb();return!0}function s(e){CBC.APP.SC.DEBUG&&"undefined"!=typeof console&&"function"==typeof console.log&&console.log(e)}function n(e,t){if("string"!=typeof e)return s("EventTracker - Warning: did not send an event name: "+e),!1;if("object"!==_typeof2(t))return s("EventTracker - Warning: event properties must be sent as an object: "+t),!1;if(!i)return a.push([e,t]),s("EventTracker - Warning: not turned on but the tracked events have been queued: "+e+" "+t),!1;if(!function(e){var t=e.toUpperCase();return Boolean(r[t])}(e))return s("EventTracker - Warning: not a valid event: "+e),!1;if("START WEB SESSION"!==e.toUpperCase())if(window.navigator.cookieEnabled){var n=CBC.APP.SC.UTIL.getCookie("cbc-session");CBC.APP.SC.EventTracker.checkStartWebSession(n,!0)}else CBC.APP.SC.EventTracker.checkStartWebSession("",!1);return function(e,t){(function(){var e="";if(e=/cbc\.ca$/.test(window.document.domain)?".cbc.ca":void 0,CBC.APP.SC.UTIL.getCookie("cbc-session")){var t=CBC.APP.SC.UTIL.getCookie("cbc-session");CBC.APP.SC.UTIL.setCookie("cbc-session",t,1/48,e)}else CBC.APP.SC.UTIL.setCookie("cbc-session",CBC.APP.SC.UTIL.getEpochTime(),1/48,e)})(),CBC.APP.PubSub.publish(e.toUpperCase(),t)}(e,t),t}function l(){CBC.APP.ANA.LIBRARY.Amplitude.turnOn(),i=!0,function(){if(a.length){for(var e=0;e<a.length;e++)n(a[e][0],a[e][1]);a=[]}}()}return{trackEvent:function(e,t){return n(e,t)},checkStartWebSession:function(e,t){if(t)return e?(s("checkStartWebSession: current session in progress."),!1):(s('checkStartWebSession: new session - firing "START WEB SESSION"'),window.CBC.APP.SC.EventTracker.trackEvent("START WEB SESSION",{}),!0);s("checkStartWebSession: (cookies disabled) - tracking in memory.");var n=CBC.APP.SC.UTIL.getEpochTime();return CBC.APP.ANA.VARS.sessionTimeOut+18e5<n?(s('checkStartWebSession: (cookies disabled) new session - firing "START WEB SESSION"'),CBC.APP.ANA.VARS.sessionID=n.toString(),CBC.APP.ANA.VARS.sessionTimeOut=n,window.CBC.APP.SC.EventTracker.trackEvent("START WEB SESSION",{}),!0):(s("checkStartWebSession: (cookies disabled) - current session in progress."),CBC.APP.ANA.VARS.sessionTimeOut=n,!1)},getValidEvents:function(){return r},isOn:function(){return i},turnOn:function(){try{r=CBC.APP.SC.masterSwitch.amplitude.eventshash,l(),o()}catch(e){var t="//www.cbc.ca/network/includes/stats/master-switch.json";CBC.APP.SC.UTIL.makeGETRequest(t,{success:function(e,t){var n=JSON.parse(e.responseText);r=n.amplitude.eventshash,l(),o()},failure:function(e,t){s("ERROR: Unable to talk to config URL: "+t.failure.uri)}},{success:{uri:t},failure:{uri:t}},0,0,{timeout:2e3,cb:function(){console.log("ERROR: AJAX request for //www.cbc.ca/network/includes/stats/master-switch.json timed out.")}})}}}}(),CBC.APP.SC.Subscribers.eventtracker=CBC.APP.SC.Subscribers.eventtracker||[],CBC.APP.SC.EventTracker.turnOn(),window.conductricsDataLayer=window.conductricsDataLayer||[],Object.keys(CBC.APP.AB).length||(CBC.APP.AB={Experiments:{ids:[],variants:[],getUserTests:function(){return"function"==typeof CBC.APP.SC.UTIL.getUserTests?CBC.APP.SC.UTIL.getUserTests():void 0}},setUserPropertyExperiments:function(){if(!CBC.APP.SC.UTIL.getDoNotTrackValue()){var e="stats_experiment_ids",t="stats_experiment_variants",n="experiment.id",i="experiment.variant",r=window.CBC.APP.SC.UTIL.getCookie("stats_experiment_ids"),a=window.CBC.APP.SC.UTIL.getCookie("stats_experiment_variants");if(r&&"undefined"!==r&&a&&"undefined"!==a){if(r!==JSON.stringify(this.Experiments.ids)){var o=[];if(this.Experiments.ids.forEach(function(e){-1==r.indexOf(e)&&o.push(e)}),o.length){var s=window.CBC.APP.SC.UTIL.uniqueArray(JSON.parse(r).concat(this.Experiments.ids));window.CBC.APP.SC.UTIL.setCookie(e,JSON.stringify(s)),window.CBC.APP.ANA.FORMATTERS.Amplitude.mUP("append",n,o)}}if(a!==JSON.stringify(this.Experiments.variants)){var l=[];if(this.Experiments.variants.forEach(function(e){-1==a.indexOf(e)&&l.push(e)}),l.length){var c=window.CBC.APP.SC.UTIL.uniqueArray(JSON.parse(a).concat(this.Experiments.variants));window.CBC.APP.SC.UTIL.setCookie(t,JSON.stringify(c)),window.CBC.APP.ANA.FORMATTERS.Amplitude.mUP("append",i,l)}}}else window.CBC.APP.SC.UTIL.setCookie(e,JSON.stringify(this.Experiments.ids)),window.CBC.APP.ANA.FORMATTERS.Amplitude.mUP("append",n,this.Experiments.ids),window.CBC.APP.SC.UTIL.setCookie(t,JSON.stringify(this.Experiments.variants)),window.CBC.APP.ANA.FORMATTERS.Amplitude.mUP("append",i,this.Experiments.variants)}},init:function(){turnOnAmplitude();try{CBC.APP.SC.masterSwitch.switches.conductrics&&(CBC.APP.AB.conductrics_api=new window.Conductrics.ClientApi)}catch(e){var t="//www.cbc.ca/network/includes/stats/master-switch.json";CBC.APP.SC.UTIL.makeGETRequest(t,{success:function(e,t){JSON.parse(e.responseText).switches.conductrics&&(CBC.APP.AB.conductrics_api=new window.Conductrics.ClientApi)},failure:function(e,t){console.log("ERROR: Unable to talk to config URL: ".concat(t.failure.uri))}},{success:{uri:t},failure:{uri:t}})}},Testing:{getDecision:function(n,e,t,i){if(CBC.APP.SC.UTIL.getCookie("ab_test_override")){var r=CBC.APP.SC.UTIL.getCookie("ab_test_override").split(":"),a=r[0],o=r[1];if(a===n)return console.log("Overriding Conductrics A/B test "+n+" to decision "+o),i({status:200,data:{sels:_defineProperty2({},n,o)}}),!0}if(CBC.APP.AB.conductrics_api){var s={a:n};return e&&(s.c=e),t&&(s.n=t),i&&CBC.APP.AB.conductrics_api.exec([s],function(e,t){t.sels[n]&&(-1===CBC.APP.AB.Experiments.ids.indexOf(n)&&CBC.APP.AB.Experiments.ids.push(n),-1===CBC.APP.AB.Experiments.variants.indexOf(n+"|"+t.sels[n])&&CBC.APP.AB.Experiments.variants.push(n+"|"+t.sels[n]),CBC.APP.AB.setUserPropertyExperiments()),i({status:e?500:200,data:t})}),!0}return!1},sendGoal:function(e,t,n){if(CBC.APP.AB.conductrics_api){var i={g:e};t&&(i.v=t);var r=n||function(){};return CBC.APP.AB.conductrics_api.exec([i],function(e,t){r({status:e?500:200,data:t})}),!0}return!1},viewStateChange:function(e,t){return!!CBC.APP.AB.conductrics_api&&(window.conductricsDataLayer.push({conductrics_vstate:e}),t?window.conductricsDataLayer.push({event:e,DATA:t}):window.conductricsDataLayer.push({event:e}),!0)}}}),function(e,t,n,i){(n=e.createElement(t)).type="text/java"+t,n.src="//cdn-cbc-v3.conductrics.com/ac-zNSqTXgWDt/v3/agent-api/js/f-vBLHMPIjsJ/dt-j8cr9H0FLuClP05ufJyktE9whuke2M?apikey=api-tmcIKLoOJOCyesvewQIB",n.onload=CBC.APP.AB.init,(i=e.getElementsByTagName(t)[0])&&i.parentNode.insertBefore(n,i),setTimeout(turnOnAmplitude,5e3)}(document,"script"),CBC.APP.readJS=function(){"use strict";return{init:function(){var e,t=!1,n=!1,i=[],m={resetConfigStatus:function(){return m.status={strict:!1,spa:!1,debug:{console:!1,overlay:!1,overlays:{}},timeInterval:1.5,activity:{scrollDepth:0,maxVertical:0,timeOnPage:0,timeInUnknownState:0,timeInView:0,scrolled:!1,dnp:0,vpp:0,pollingPoints:0,readingPoints:0,increment:100,read:!1,averageReadSpeed:5,totalTime:0,initialTime:0},thresholds:{viewport:25,domNode:30,minVertical:50,readingPoint:400,domPolling:100,minTimeInView:3,maxTimeInView:20,scrollDepth:0,percentagePoint:30}},!0},getConfig:function(){return m.status},setConfig:function(){return!t&&("undefined"==typeof readJSConfig?(m.console("Error: Cannot find Read JS config object readJSConfig"),!1):("boolean"==typeof readJSConfig.spa&&(m.status.spa=readJSConfig.spa),"boolean"==typeof readJSConfig.strict&&(m.status.strict=readJSConfig.strict),readJSConfig.debug&&("boolean"==typeof readJSConfig.debug.console&&(m.status.debug.console=readJSConfig.debug.console),"boolean"==typeof readJSConfig.debug.overlay&&(m.status.debug.overlay=readJSConfig.debug.overlay)),"number"==typeof readJSConfig.timeInterval&&(m.status.timeInterval=readJSConfig.timeInterval),readJSConfig.activity&&("number"==typeof readJSConfig.activity.increment&&(m.status.activity.increment=readJSConfig.activity.increment),"number"==typeof readJSConfig.activity.averageReadSpeed&&(m.status.activity.averageReadSpeed=readJSConfig.activity.averageReadSpeed)),readJSConfig.thresholds&&("number"==typeof readJSConfig.thresholds.viewport&&(m.status.thresholds.viewport=readJSConfig.thresholds.viewport),"number"==typeof readJSConfig.thresholds.domNode&&(m.status.thresholds.domNode=readJSConfig.thresholds.domNode),"number"==typeof readJSConfig.thresholds.readingPoint&&(m.status.thresholds.readingPoint=readJSConfig.thresholds.readingPoint),"number"==typeof readJSConfig.thresholds.domPolling&&(m.status.thresholds.domPolling=readJSConfig.thresholds.domPolling),"number"==typeof readJSConfig.thresholds.timeInView&&(m.status.thresholds.timeInView=readJSConfig.thresholds.timeInView),"number"==typeof readJSConfig.thresholds.minTimeInView&&(m.status.thresholds.minTimeInView=readJSConfig.thresholds.minTimeInView),"number"==typeof readJSConfig.thresholds.maxTimeInView&&(m.status.thresholds.maxTimeInView=readJSConfig.thresholds.maxTimeInView),"number"==typeof readJSConfig.thresholds.minVertical&&(m.status.thresholds.minVertical=readJSConfig.thresholds.minVertical),"number"==typeof readJSConfig.thresholds.percentagePoint&&(m.status.thresholds.percentagePoint=readJSConfig.thresholds.percentagePoint)),"string"!=typeof readJSConfig.el?(m.console("ERROR: readJS.setConfig() expected a string representation of css selector"),!1):"function"==typeof readJSConfig.cb||(m.console("ERROR: readJS.setConfig() expected a callback function"),!1)))},setInitialTime:function(){return m.status.activity.initialTime=(new Date).getTime(),m.status.activity.initialTime},calculateTotalTime:function(){if(m.status.activity.initialTime){var e=(new Date).getTime(),t=m.status.activity.totalTime;m.status.activity.totalTime=parseInt(t)+parseInt(e)-parseInt(m.status.activity.initialTime),m.status.activity.initialTime=0}return 0<m.status.activity.totalTime?m.status.activity.totalTime:(m.console("ERROR: readJS.calculateTotalTime() - initial time not set"),!1)},initialize:function(e){return"function"!=typeof e?(m.console("ERROR: readJS.initialize() expected a callback function"),!1):(m.callback=e,readJSConfig.el?(m.setInitialTime(),t=!0,m.stopPolling(),m.readingWorker=window.setInterval(m.checkActivity,1e3*m.status.timeInterval),i.push(m.readingWorker),m.console("readJS: starting interval ID",m.readingWorker),m.inDebugMode(),!0):(m.console("ERROR: readJS.initialize() expected a dom node to inspect"),!1))},getIntervals:function(){return i},checkActivity:function(){var e=m.status.timeInterval;m.status.activity.timeOnPage+=e,m.status.activity.timeInUnknownState+=e,m.status.activity.readingPoints+=e,m.detectForScroll(),m.endConditionsChecked()},endConditionsChecked:function(){return!!m.isUpdateRequired()&&(m.calculateCoordinates(),m.addPoints(),m.hasRead(),!0)},detectForScroll:function(){return!!m.status.activity.scrolled&&(m.status.activity.scrolled=!1,m.reactivate(),m.console("detected scroll:",m.status.activity.timeOnPage," seconds"),!0)},console:(e=function(){return!!m.status.debug.console&&(console.log(m.readingWorker,arguments),!0)},r.toString=function(){return e.toString()},r),getText:function(e){try{for(var t="",n=e.childNodes.length,i=0;i<n;i++){var r=e.childNodes[i];8!==r.nodeType&&(t+=1!==r.nodeType?r.nodeValue:m.getText(r))}return t.replace(/[\t\n\r]+/g,"").replace(/\s+/g," ").trim()}catch(e){return m.console(e),!1}},calculateCoordinates:function(){if(m.domNode){var e=m.inView(m.domNode);return m.console("dom_node_inview_percent",e.dom_node_inview_percent,"dom_node_viewport_percent",e.dom_node_viewport_percent),!0}return m.console("ERROR: could not find the story body"),!1},hasRead:function(){return!!m.status.activity.read||(m.status.activity.scrollDepth<m.status.thresholds.scrollDepth?(m.console("Has not read yet because user didn't pass scrollDepth threshold"),m.report(),!1):m.status.strict&&m.status.activity.dnp<m.status.thresholds.domNode?(m.console("STRICT MODE: not enough of dom node is in view"),m.report(),!1):m.status.activity.readingPoints<=m.status.thresholds.readingPoint?(m.report(),!1):m.status.activity.timeInView<m.status.thresholds.timeInView?(m.report(),!1):(m.status.activity.read=!0,m.callback(m.calculateTotalTime()),m.removeListeners(),m.console("readJS: the user has read the article",m.status.activity.readingPoints),m.stopPolling(),!0))},stopPolling:function(){m.readingWorker&&(window.clearInterval(m.readingWorker),m.console("readJS: ending interval ID",m.readingWorker),delete m.readingWorker)},report:function(){m.console("readingPoints: "+m.status.activity.readingPoints,"timeInView: "+m.status.activity.timeInView,m.status.thresholds.readingPoint,m.status.thresholds.timeInView)},addPoints:function(){return!!m.inViewport(m.domNode)&&(m.status.activity.dnp>m.status.thresholds.domNode&&(m.status.activity.readingPoints+=m.status.activity.increment),m.status.activity.vpp>m.status.thresholds.viewport&&(m.status.activity.readingPoints+=m.status.activity.increment),m.status.activity.readingPoints)},isUpdateRequired:function(){return m.status.activity.pollingPoints+=100*Math.pow(.9,m.status.activity.timeInUnknownState),m.status.activity.pollingPoints>=m.status.thresholds.domPolling&&(m.console("readJS: analyzing the DOM at",m.status.activity.timeOnPage," seconds",m.status.activity.pollingPoints),!(m.status.activity.pollingPoints=0))},reactivate:function(){m.console("readJS: reactivating refresh rate"),m.status.activity.timeInUnknownState=0,m.status.activity.pollingPoints+=m.status.activity.increment},inDebugMode:function(){m.status.debug.overlay&&(m.scrollDataOverlay=document.createElement("DIV"),m.scrollDataOverlay.style.position="fixed",m.scrollDataOverlay.style.bottom="2em",m.scrollDataOverlay.style.right="2em",m.scrollDataOverlay.style.zIndex=1e4,m.scrollDataOverlay.id="scrollinfo",document.body.appendChild(m.scrollDataOverlay),m.showScrollInfo())},inViewport:function(e){var t=e.getBoundingClientRect();return 0<t.bottom&&0<t.right&&t.left<window.innerWidth&&t.top<window.innerHeight},showScrollInfo:function(){return!!m.status.debug.overlay&&(document.getElementById("scrollinfo").innerHTML=m.status.activity.scrollDepth,!0)},getScrollInfo:function(){var e=document.body.scrollTop?document.body.scrollTop:document.documentElement.scrollTop,t=Math.abs(e)+window.innerHeight;return t>m.status.activity.scrollDepth&&(m.status.activity.scrollDepth=t),!0},removeDomNode:function(e){var t=document.getElementById(e);return!!t&&(t.parentNode.removeChild(t),!(t=null))},removeOverlays:function(){m.removeDomNode("viewport_inview"),m.removeDomNode("overlap_inview"),m.removeDomNode("domnode_inview")},getVisibilityProperties:function(){var e,t;return void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),{hiddenProp:e,eventName:t}},handleVisibilityChange:function(){var e=m.getVisibilityProperties().hiddenProp;document[e]?(m.console("readJS: pausing after detecting focus to another tab"),m.stopPolling(),m.calculateTotalTime()):(m.console("readJS: reinitializing after detecting tab is in focus"),m.initialize(m.callback))},inView:function(e){var t,n,i;m.domNode=e;var r={tl:[],br:[]};r.tl[0]=Math.abs(document.body.scrollLeft||document.documentElement.scrollLeft),r.tl[1]=Math.abs(document.body.scrollTop||document.documentElement.scrollTop),r.br[0]=r.tl[0]+window.innerWidth,r.br[1]=r.tl[1]+window.innerHeight,r.width=window.innerWidth,r.height=window.innerHeight,r.area=r.width*r.height,m.status.debug.overlay&&(m.status.debug.overlays.vui||((n=document.createElement("DIV")).id="viewport_inview",n.style.position="absolute",n.style.background="green",n.style.opacity="0.5",n.style.zIndex=9999,document.body.appendChild(n),m.status.debug.overlays.vui=n),(n=m.status.debug.overlays.vui).style.left=r.tl[0]+"px",n.style.top=r.tl[1]+"px",n.style.width=r.width+"px",n.style.height=r.height+"px");var a={tl:[],br:[]},o=e.getBoundingClientRect(),s=void 0===window.scrollX?parseInt(window.pageXOffset,10):parseInt(window.scrollX,10),l=void 0===window.scrollY?parseInt(window.pageYOffset,10):parseInt(window.scrollY,10);if(a.tl[0]=o.left+s,a.tl[1]=o.top+l,a.br[0]=a.tl[0]+o.width,a.br[1]=a.tl[1]+o.height,m.getScrollInfo(),m.status.thresholds.scrollDepth=Math.abs(a.tl[1])+o.height*m.status.thresholds.minVertical/100,m.status.debug.overlay&&(m.status.debug.overlays.dui||((t=document.createElement("DIV")).id="domnode_inview",t.style.position="absolute",t.style.background="blue",t.style.opacity="0.5",t.style.zIndex=9999,document.body.appendChild(t),m.status.debug.overlays.dui=t),(t=m.status.debug.overlays.dui).style.left=a.tl[0]+"px",t.style.top=a.tl[1]+"px",t.style.width=o.width+"px",t.style.height=o.height+"px"),!m.inViewport(m.domNode))return{dom_node_inview_percent:0,dom_node_viewport_percent:0};var c={tl:[],br:[]};c.tl[0]=a.tl[0]>=r.tl[0]?a.tl[0]:r.tl[0],c.tl[1]=a.tl[1]>=r.tl[1]?a.tl[1]:r.tl[1],c.br[0]=a.br[0]<=r.br[0]?a.br[0]:r.br[0],c.br[1]=a.br[1]<=r.br[1]?a.br[1]:r.br[1];var u=Math.abs(c.tl[0]-c.br[0]),d=Math.abs(c.tl[1]-c.br[1]),p=Math.abs((a.tl[0]-a.br[0])*(a.tl[1]-a.br[1])),g=Math.abs(u*d),f=g/p*100,h=g/r.area*100;m.status.debug.overlay&&(m.status.debug.overlays.oui||((i=document.createElement("DIV")).id="overlap_inview",document.body.appendChild(i),i.style.position="absolute",i.style.background="red",i.style.opacity="0.5",i.style.zIndex=9999,m.status.debug.overlays.oui=i),(i=m.status.debug.overlays.oui).style.left=c.tl[0]+"px",i.style.top=c.tl[1]+"px",i.style.width=u+"px",i.style.height=d+"px");var _={dom_node_inview_percent:m.status.activity.dnp=f,dom_node_viewport_percent:m.status.activity.vpp=h};return m.status.strict&&(f<m.status.thresholds.domNode||h<m.status.thresholds.viewport)||(m.status.activity.timeInView+=m.status.timeInterval),_},handleScroll:function(){m.status.activity.scrolled=!0,m.showScrollInfo()},handleClick:function(){m.status.activity.readingPoints+=m.status.activity.increment,m.reactivate()},handleLoad:function(){m.domNode=document.querySelector(readJSConfig.el),m.setTimeInViewThreshold(),m.domNode.addEventListener("click",m.handleClick),m.calculateCoordinates()},setTimeInViewThreshold:function(){if("number"==typeof m.status.thresholds.timeInView)return!1;var e=m.getText(m.domNode).split(" ").length,t=m.status.activity.averageReadSpeed;return m.status.thresholds.timeInView=Math.floor(e*(m.status.thresholds.percentagePoint/100)/t),m.status.thresholds.minTimeInView>m.status.thresholds.timeInView?m.status.thresholds.timeInView=m.status.thresholds.minTimeInView:m.status.thresholds.timeInView>m.status.thresholds.maxTimeInView&&(m.status.thresholds.timeInView=m.status.thresholds.maxTimeInView),!0},removeListeners:function(){window.removeEventListener("scroll",m.handleScroll),window.removeEventListener("load",m.handleLoad),void 0!==m.domNode&&m.domNode.removeEventListener("click",m.handleClick),document.removeEventListener(m.getVisibilityProperties().eventName,m.handleVisibilityChange,!1)},isOn:function(){return t},turnOff:function(){return!!t&&(m.removeListeners(),m.console("readJS: stopping midway"),m.stopPolling(),m.removeOverlays(),m.status.activity.read=!1,!(t=!1))},turnOn:function(){return!t&&(m.resetConfigStatus(),m.setConfig(),n&&!readJSConfig.spa?(m.console("ERROR: Not a SPA. Cannot turnOn() again on the same web page"),!1):"undefined"==typeof readJSConfig?(m.console("ERROR: Could not find callback and/or domNode css selector in window.readJSConfig"),!1):"string"!=typeof readJSConfig.el?(m.console("ERROR: Could not find domNode css selector in window.readJSConfig"),!1):"function"!=typeof readJSConfig.cb?(m.console("ERROR: Could not find callback function in window.readJSConfig"),!1):(window.addEventListener("scroll",m.handleScroll),document.addEventListener(m.getVisibilityProperties().eventName,m.handleVisibilityChange,!1),m.status.spa?m.handleLoad():window.addEventListener("load",m.handleLoad),m.initialize(readJSConfig.cb),t=!0,n||(m.handleVisibilityChange(),n=!0),!0))}};function r(){return e.apply(this,arguments)}window.readJS=m},checkLoad:function(){void 0===window.readJS&&CBC.APP.readJS.init(),void 0!==window.readJSConfig&&!0!==window.readJSConfig.spa?(window.readJS.isOn&&window.readJS.resetConfigStatus(),window.readJS.turnOn()):void 0!==window.readJS&&window.readJS.resetConfigStatus()}}}(),function(){"use strict";var e={FATAL:"fatal",ERROR:"error",WARN:"warn",INFO:"info",DEBUG:"debug",TRACE:"trace"},a={OFF:"OFF",FATAL:e.FATAL,ERROR:e.ERROR,WARN:e.WARN,INFO:e.INFO,DEBUG:e.DEBUG,TRACE:e.TRACE,ALL:"ALL"},o=[e.FATAL,e.ERROR,e.WARN,e.INFO,e.DEBUG,e.TRACE],n=function(){function r(e){_classCallCheck(this,r);var t=0;t=(e=e||a.OFF)===a.OFF?0:e===a.ALL?o.length:o.indexOf(e)+1;for(var n=0;n<o.length;n++){var i=o[n];this[i]=n<t?this._log.bind(this,i):function(){}}}return _createClass(r,[{key:"_log",value:function(e,t){var n=this;e=e||"";var i=t;if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);i=t.replace(/{(\d+)}/g,function(e,t){return t in r?n._stringify(r[t]):e})}else i=this._stringify(t);console.log("DMP: ".concat(e.toUpperCase(),": ").concat(i))}},{key:"_stringify",value:function(e){var t=this;return e&&e.toString===Object.prototype.toString?JSON.stringify(e):Array.isArray(e)?"[".concat(e.map(function(e){return t._stringify(e)}).join(","),"]"):""+e}}]),r}();n.LEVEL=a,n.CHANNEL=e;var i=function(){function r(e,t){var n=e.logger,i=e.pubSub;_classCallCheck(this,r),this._logger=n,this._pubSub=i,this._hostname=t||"",this._pageViewCount=0,this._hasInited=!1,this._hasReceivedAudiences=!1,this._audienceCallbacks=[]}return _createClass(r,[{key:"getClientId",value:function(){var e=10205;return"cbcmusic.ca"===this._hostname.replace(/.+?(?=cbc)/,"")&&(e=10907),e}},{key:"isInitialized",value:function(){return!!(this.LOTCC&&this.LOTCC.page&&this.LOTCC.collect)}},{key:"init",value:function(){this.isInitialized()||this._hasInited||(this.loadScript(),this._hasInited=!0)}},{key:"loadScript",value:function(){var n=this;if(!this._hasInited){var t=this.getClientId(),e=this.createScriptElement();e.src="https://tags.crwdcntrl.net/lt/c/".concat(t,"/lt.min.js"),e.async=!0;var i=window["lotame_".concat(t)]||{};i=Object.assign({cmd:[]},i,{data:{},config:{clientId:t,audienceLocalStorage:!0,onTagReady:function(e){n._logger.debug(" tag loaded for {0}",t)},onProfileReady:function(e){var t=n._parseAudiences(e.getAudiences());n._profileId=e.getProfileId(),n._audienceCallbacks.forEach(function(e){try{e(t)}catch(e){n._logger.error(e)}}),n._audienceCallbacks=[],n._pubSub.publish("loadedAudiences",t),n._hasReceivedAudiences=!0,n._logger.debug(" profile ready for {0}",n.profileId)}}}),window["lotame_".concat(t)]=i,this.injectScriptElement(e)}}},{key:"_parseAudiences",value:function(e){return Array.isArray(e)?e.map(function(e){return{id:e}}):(this._logger.error("expected audiences to be an array, received {0}",_typeof2(e)),[])}},{key:"injectScriptElement",value:function(e){if(e){var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}}},{key:"createScriptElement",value:function(){return document.createElement("script")}},{key:"sendBehaviours",value:function(e,t){var n=this,i=t&&this.pageViewCount;t&&this._pageViewCount++;var r={behaviors:e.reduce(function(e,t){var n=t.type,i=t.value;return e[n]||(e[n]=[]),e[n].push(i),e},{})};i?this.LOTCC.cmd.push(function(){n.LOTCC.page(r)}):this.LOTCC.cmd.push(function(){n.LOTCC.collect(r)})}},{key:"pageViewCount",get:function(){return this._pageViewCount}},{key:"LOTCC",get:function(){return window["lotame_".concat(this.getClientId())]}},{key:"profileId",get:function(){return this._profileId}},{key:"audiences",get:function(){var t=this;return new Promise(function(e){if(t._hasReceivedAudiences)return e(t._parseAudiences(t.LOTCC.getAudiences()));t._audienceCallbacks.push(e)})}}]),r}();!function(){window.CBC=window.CBC||{};var e=window.CBC;e.APP=e.APP||{},e.APP.DMP=e.APP.DMP||{};var t=new n(window.CBC.APP.SC.DEBUG?n.LEVEL.DEBUG:n.LEVEL.ERROR);e.APP.DMP.LOGGER=t,e.APP.DMP.LOTAME=new i({logger:t,pubSub:e.APP.PubSub},window.location.hostname),/\/(kids|kidsnews|kidscbc2|kidsfantasyhockey)(\/|$)/.test(window.location.href.toLowerCase())?t.debug("Not initializing DMP on CBC Kids or Kids News"):e.APP.DMP.LOTAME.init()}()}(),function(){"use strict";var e=document.getElementsByTagName("script")[0],t=document.createElement("script");t.id="adblockers-test-js",t.src="//www.cbc.ca/g/stats/js/ads.js",e&&e.parentNode.insertBefore(t,e)}(),!CBC)var CBC={};CBC.APP||(CBC.APP={}),CBC.APP.SC||(CBC.APP.SC={}),CBC.APP.SC.DTM||(CBC.APP.SC.DTM={}),CBC.APP.SC.DTM.DATA||(CBC.APP.SC.DTM.DATA={}),CBC.APP.SC.Pillar||(CBC.APP.SC.Pillar={}),CBC.APP.SC.VideoHeartbeatVars||(CBC.APP.SC.VideoHeartbeatVars={Conf:{marketingCloudId:"951720B3535680CB0A490D45@AdobeOrg",trackingServer:"metrics.cbc.ca",trackingServerSecure:"smetrics.cbc.ca",visitorNamespace:"cbcca",dpid:"cbc-dpid",dpuuid:"cbc-dpuuid",charSet:"UTF-8",heartbeatServer:"cbcca.hb.omtrdc.net",publisher:"951720B3535680CB0A490D45@AdobeOrg",playerSuffix:{s:":singleplayer",m:":multipleplayers"},varDefault:"nan",audioVideoDefault:"video",totalchaptersDefault:1},Player:{channel:"cbc-videoheartbeat-channel",ovp:"cbc-videoheartbeat-ovp",sdk:null,quietMode:!1,ssl:!0,debugLogging:!1,consoleLogging:!1,pagevars:{pageName:"cbc-videoheartbeat-pagename",prop60:"cbc-videoheartbeat-web",prop63:"web",prop64:"",s_account:"adobeheartbeatdevcbc"},videoid:"cbc-videoheartbeat-videoid",videoname:"cbc-videoheartbeat-videoname",videoplayername:"cbc-videoheartbeat-playername",videolength:86400,videostreamtype:"on-demand",videoplayhead:0,chaptername:"cbc-videoheartbeat-chaptername",chapterlength:18e3,chapterstarttime:0,chapterposition:1,adbreakposition:1,adbreakname:"unknown",adbreakstarttime:0,adlength:30,adid:"cbc-videoheartbeat-adid",adposition:1,cbcContextVideo:{},playerContextVideo:{},cbcContextChapter:{},playerContextChapter:{},customContextGenerate:{}}}),window.CBC||(window.CBC={}),CBC.APP||(CBC.APP={}),CBC.APP.SC||(CBC.APP.SC={}),CBC.APP.SC.VideoHeartbeat||(CBC.APP.SC.VideoHeartbeat=function(){"use strict";var c={},i=ADB.va.MediaHeartbeat,r=ADB.va.MediaHeartbeatConfig,a=ADB.va.MediaHeartbeatDelegate,u={VIDEO_LOAD:"_onLoad",VIDEO_UNLOAD:"_onUnload",PLAY:"_onPlay",PAUSE:"_onPause",COMPLETE:"_onComplete",DESTROY:"_destroy",SEEK_START:"_onSeekStart",SEEK_COMPLETE:"_onSeekComplete",CHAPTER_START:"_onChapterStart",CHAPTER_SKIP:"_onChapterSkip",CHAPTER_COMPLETE:"_onChapterComplete",ADBREAK_START:"_onAdBreakStart",ADBREAK_COMPLETE:"_onAdBreakComplete",AD_START:"_onAdStart",AD_COMPLETE:"_onAdComplete",BUFFER_START:"_onBufferStart",BUFFER_COMPLETE:"_onBufferComplete"},d="12",p="11",g="13",o="23",f="00",s="11",l="12",h="13",_="21",m="00",v={AdPosition:{PREROLL:"a1",MIDROLL:"a2",POSTROLL:"a3",OVERLAY:"a4",SPECIAL:"a5"},ContentType:{AD:"ad",CONTENT:"ct"},VideoState:{UNPLAYED:"s1",PLAYED:"s2",STOPPED:"s3",COMPLETED:"s4"}},y=6e4,C=CBC.APP.SC.VideoHeartbeatVars.Conf,P=CBC.APP.SC.VideoHeartbeatVars.Player,n={},b="",S={};function A(e){n=window.CBC.APP.SC.VideoHeartbeat.getPlayers(),b=Object.keys(n)[0],(S=n[b]).vars.cbStrategy=S.vars.cbStrategy||{};var t=S.vars.cbStrategy;t.isReady=!1,t.title="",t.videoPath="",t.adPosition="",t.contentType=v.ContentType.CONTENT,t.totalDuration=0,t.videoState=v.VideoState.UNPLAYED,t.startTime=-1,t.playerType="",t.startPlayTime=-1,t.adPlayTime=-1,t.thumbnailPath=""}A.prototype.getStrategyName=function(){return"CBV"},A.prototype.isReady=function(){return S.vars.cbStrategy.isReady},A.prototype.getTitle=function(){return S.vars.cbStrategy.title},A.prototype.getVideoPath=function(){return S.vars.cbStrategy.videoPath},A.prototype.getThumbnailPath=function(){return""},A.prototype.getContentType=function(){return S.vars.cbStrategy.contentType},A.prototype.getAdPosition=function(){return S.vars.cbStrategy.adPosition},A.prototype.getTotalDuration=function(){return S.vars.cbStrategy.totalDuration},A.prototype.getState=function(){return S.vars.cbStrategy.videoState},A.prototype.getCurrentPlayTime=function(){return 1e3*S.vars.playhead},A.prototype.getBitrate=function(){return-1},A.prototype.getThumbnailPath=function(){return""},A.prototype.getPlayerType=function(){return S.vars.cbStrategy.playerType},A.prototype.getViewStartTime=function(){if(-1===S.vars.cbStrategy.startTime)return-1;var e=(new Date).getTime()-S.vars.cbStrategy.startTime;return 0<e?e:-1},A.prototype.getViewPlayTime=function(){if(-1===S.vars.cbStrategy.startPlayTime)return-1;var e=(new Date).getTime()-S.vars.cbStrategy.startPlayTime;return 0<e?e:-1},A.prototype.getViewAdPlayTime=function(){if(-1===S.vars.cbStrategy.adPlayTime)return-1;var e=(new Date).getTime()-S.vars.cbStrategy.adPlayTime;return 0<e?e:-1},A.verify=function(e){return!0};function T(){this._events={}}function E(e){var t="";return window.Detectizr&&("osVersion"===e&&window.Detectizr.os&&window.Detectizr.os.version&&(t=window.Detectizr.os.version),"os"===e&&window.Detectizr.os&&window.Detectizr.os.name&&(t=window.Detectizr.os.name)),t}function I(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t}function w(e){var t=e;return"string"==typeof e&&(t=e.trim().toLowerCase().replace(/ /g,"-")),t}function k(e){var t=e;if("string"==typeof e)t=w(e);else if("object"===_typeof2(e))for(var n in e)"string"==typeof e[n]?t[n]=w(e[n]):"object"===_typeof2(e[n])&&k(e[n]);return t}function D(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e}function O(e){P.debugLogging&&console.log(e)}function N(e,t){var n=!1;return t?void 0!==e&&"object"===_typeof2(e)&&0<I(c)&&(n=!0):void 0!==e&&""!==e&&null!==e&&(n=!0),n}function B(e,t){return""!==e&&(e+="|"),N(t)?e+=t:e+=C.varDefault,e}function M(){var e=window.location.href,t=e.indexOf("#");-1!==t&&(e=e.substring(0,t));var n=e.indexOf("?");return-1!==n&&(e=e.substring(0,n)),e}function L(t){void 0!==t&&Object.keys(t).forEach(function(e){""===t[e]&&delete t[e]})}function R(e){var t=e;return void 0===t&&(t=M()),!!t.match(/\.radio-canada\.ca/gi)}function x(e){return e||C.audioVideoDefault}function U(e,t){var n=t;switch(c[e].videoPlayer._videoInfo.streamType){case"vod":n="on-demand";break;case"live":n="live";break;case"linear":n="linear"}return n}function F(e,t){try{return Boolean(CBC.APP.SC.metadataWhitelist.metadata.whitelist.feature[e][t])}catch(e){return!1}}function V(e){var t=["name","value","instance"];for(var n in t)e[t[n]]&&!F(t[n],e[t[n]])&&delete e[t[n]];e.position&&(new RegExp("^[0-9]*$").test(e.position)||delete e.position);return e}T.prototype.addEventListener=function(e,t,n){e&&t&&(n=n||window,this._events[e]=this._events[e]||[],this._events[e].push({cb:t,ctx:n}))},T.prototype.removeEventListener=function(e,t,n){if(e&&t){n=n||window;var i,r,a=!1;for(r in this._events)if(e===r){a=!0;break}if(a){for(i=this._events[r].length-1;0<=i;i--){var o=this._events[r][i];t===o.cb&&n===o.ctx&&this._events[r].splice(i,1)}this._events[r].length||delete this._events[r]}}},T.prototype.dispatchEvent=function(e){var t,n;if(e)for(t in this._events)if(this._events.hasOwnProperty(t)&&e===t){var i=this._events[t].slice(0),r=i.length;for(n=0;n<r;n++)i[n].cb.call(i[n].ctx);break}};var j=function e(t){return(e.prototype._instance=e.prototype._instance||{})[t]||(e.prototype._instance[t]=new T),e.prototype._instance[t]};function q(){return!(!window.Raygun||"function"!=typeof window.Raygun.send)&&(window.Raygun.send(arguments),!0)}function H(e){CBC.APP.SC.VideoHeartbeatVars.Player.consoleLogging&&console.error(e)}function K(e,t){try{O("updatePlayHead:::"+e),O(t);var n=0;if(t&&t.playhead&&(n=t.playhead),c[e]&&c[e].videoPlayer&&c[e].videoPlayer._videoInfo&&c[e].vars){var i=c[e].vars.cbcContextVideo;if(c[e].videoPlayer._videoInfo.playhead=n,c[e].vars.playhead=n,"video"===i.audiovideo)if(i._doNotFireWatchedEvent=i._doNotFireWatchedEvent||!1,"on-demand"===i.liveondemand){if(!i._doNotFireWatchedEvent&&n>Math.floor(.75*c[e].videoPlayer._videoInfo.length))i._doNotFireWatchedEvent=!0,O("User has seeked past 75% of the video length. Therefore, WATCHED event will not ever fire for this video.");else if(!i._doNotFireWatchedEvent&&window.CBC.APP.SC.EventTracker&&c[e].videoPlayer._videoInfo.length&&n==Math.floor(.75*c[e].videoPlayer._videoInfo.length)){i._doNotFireWatchedEvent=!0,window.CBC.APP.SC.EventTracker.isOn()||window.CBC.APP.SC.EventTracker.turnOn();var r=z(c[e],"WATCHED");O("CBC_EventTracker: FIRING WATCHED EVENT"),O(r),CBC.APP.SC.EventTracker.trackEvent("WATCHED",r)}}else{var a=CBC.APP.SC.VideoHeartbeat.getCurrentTime();if(!i._doNotFireWatchedEvent&&a-i._timeMainContentStreamStarted-i._accumulatedPauseTime-i._accumulatedBufferTime>=y){i._doNotFireWatchedEvent=!0,window.CBC.APP.SC.EventTracker.isOn()||window.CBC.APP.SC.EventTracker.turnOn();var o=z(c[e],"WATCHED");O("CBC_EventTracker: FIRING WATCHED EVENT"),O(o),CBC.APP.SC.EventTracker.trackEvent("WATCHED",o)}}else if("audio"===i.audiovideo&&(i._doNotFireListenedEvent=i._doNotFireListenedEvent||!1,"on-demand"===i.liveondemand))if(!i._doNotFireListenedEvent&&n>Math.floor(.75*c[e].videoPlayer._videoInfo.length))i._doNotFireListenedEvent=!0,O("User has seeked past 75% of the video length. Therefore, LISTENED event will not ever fire for this video.");else if(!i._doNotFireListenedEvent&&window.CBC.APP.SC.EventTracker&&c[e].videoPlayer._videoInfo.length&&n==Math.floor(.75*c[e].videoPlayer._videoInfo.length)){i._doNotFireListenedEvent=!0,window.CBC.APP.SC.EventTracker.isOn()||window.CBC.APP.SC.EventTracker.turnOn();var s=z(c[e],"LISTENED");O("CBC_EventTracker: FIRING LISTENED EVENT"),O(s),CBC.APP.SC.EventTracker.trackEvent("LISTENED",s)}return!0}return H("error_id:6, method: updatePlayHead(player_id:"+e+", param:"+t+"), player_list:"+c),q({},{error_id:6,player_id:e,player_list:c}),!1}catch(e){return H(e),q(e),!1}}function Y(e,t){try{return O("videoPause:::"+e),O(t),c[e]&&c[e].videoPlayer&&"function"==typeof c[e].videoPlayer._onPause?(K(e,t),c[e].videoPlayer._onPause(e,t),!0):(H("error_id:8, method: videoPause(player_id:"+e+", param:"+t+"), player_list:"+c),q({},{error_id:8,player_id:e,player_list:c}),!1)}catch(e){return H(e),q(e),!1}}function G(e,t){try{return O("videoUnload:::"+e),O(t),c[e]&&c[e].videoPlayer&&"function"==typeof c[e].videoPlayer._videoUnload?(c[e].videoPlayer._videoUnload(e,t),!0):(H("error_id:4, method: videoUnload(player_id:"+e+", param:"+t+"), player_list:"+c),q({},{error_id:4,player_id:e,player_list:c}),!1)}catch(e){return H(e),q(e),!1}}function W(e){try{return O("destroy:::"+e),c[e]&&c[e].videoPlayer&&"function"==typeof c[e].videoPlayer._destroy?(G(e),c[e].videoPlayer._destroy(e),!0):(H("error_id:5, method: destroy(player_id:"+e+"), player_list:"+c),q({},{error_id:5,player_id:e,player_list:c}),!1)}catch(e){return H(e),q(e),!1}}function J(e,t){var n="",i=c[e].vars.cbcContextVideo,r=c[e].vars.customContextGenerate.showval;return n=B(n=B(n=B(n=B(n=B(n,i.contentarea),r),i.streamtitle),i.seasonnumber),i.episodenumber),"music"!==i.contentarea&&"radio"!==i.contentarea&&t&&N(c[e].videoPlayer._chapterInfo.position)&&i.totalchapters&&(n=B(n,c[e].videoPlayer._chapterInfo.position+"of"+i.totalchapters)),n=B(n=B(n,Math.floor(c[e].videoPlayer._videoInfo.length)),i.type),i.audiovideo=x(i.audiovideo),n=B(n,i.audiovideo),i.liveondemand=U(e,i.liveondemand),n=B(n,i.liveondemand)}function z(e,t){var n=e.vars,i=n.cbcContextVideo||{},r=n.customContextGenerate||{},a=window.CBC&&CBC.APP&&CBC.APP.SC&&CBC.APP.SC.DTM&&CBC.APP.SC.DTM.DATA&&CBC.APP.SC.DTM.DATA.pillar?CBC.APP.SC.DTM.DATA.pillar:"",o={content:{media:{audiovideo:i.audiovideo||i.mediaType||"",liveondemand:i.liveondemand||r.copy_videostreamtype||"",type:i.type||i.contentType||"",genre:i.genre||"",show:i.show||i.broadcastType||"",sport:i.sport||"",region:i.region||"",publishedtime:i.airdate||i.publishedTime||"",seasonnumber:i.seasonnumber&&"nan"!==i.seasonnumber?i.seasonnumber:"",episodenumber:i.episodenumber&&"nan"!==i.episodenumber?i.episodenumber:"",length:r.copy_videolength?r.copy_videolength:""},area:i.contentarea||"",cms:i.source||"",id:i.uid,tier:i.contenttier||"",title:i.streamtitle||i.title||"",url:CBC.APP.SC.DTM.formatted.amplitude.url||document.location.href},referrer:{},app:{name:r.appname,pillar:i.pillar||a||"legacy"}};CBC.APP.SC.DTM.formatted.amplitude.referrer.url&&(o.referrer.url=CBC.APP.SC.DTM.formatted.amplitude.referrer.url),i.sponsorname&&(o.sponsor={},o.sponsor.name=i.sponsorname),i.partnername&&(o.content.partner={},o.content.partner.name=i.partnername),CBC.APP.SC.LOCALGEO&&CBC.APP.SC.LOCALGEO.geo&&CBC.APP.SC.LOCALGEO.geo.timezone&&(o.device={},o.device.geo={},o.device.geo.timezone=CBC.APP.SC.LOCALGEO.geo.timezone),i.keywords&&(o.content.keywords={},o.content.keywords.tags=i.keywords),i.feature&&(o.feature=V(i.feature));var s=CBC.APP.SC.UTIL.getReferringDepartmentStatus();return""===s[t]&&("STREAMED"!==t&&("WATCHED"!==t&&"LISTENED"!==t||s.STREAMED!==o.content.id)||(CBC.APP.SC.UTIL.setReferringDepartmentStatus(t,o.content.id),o.referrer.department={},o.referrer.department.level1=CBC.APP.SC.DTM.formatted.amplitude.referrer.department.level1||"",o.referrer.department.level2=CBC.APP.SC.DTM.formatted.amplitude.referrer.department.level2||"",o.referrer.department.level3=CBC.APP.SC.DTM.formatted.amplitude.referrer.department.level3||"",Object.keys(o.referrer.department).forEach(function(e){""===o.referrer.department[e]&&delete o.referrer.department[e]}))),Object.keys(o.content.media).forEach(function(e){""===o.content.media[e]&&delete o.content.media[e]}),Object.keys(o.content).forEach(function(e){""===o.content[e]&&delete o.content[e]}),o}function Q(e){var t=c[e].vars.cbcContextVideo;N(t.seasonnumber)&&/^(S|s)?[0-9]+$/.test(t.seasonnumber)?(t.seasonnumber.toString(),1===t.seasonnumber.length?t.seasonnumber="s0"+t.seasonnumber:"s"!==t.seasonnumber.charAt(0)&&(t.seasonnumber="s"+t.seasonnumber)):t.seasonnumber=C.varDefault,N(t.episodenumber)&&/^(E|e)?[0-9]+$/.test(t.episodenumber)?(t.episodenumber.toString(),1===t.episodenumber.length?t.episodenumber="e0"+t.episodenumber:"e"!==t.episodenumber.charAt(0)&&(t.episodenumber="e"+t.episodenumber)):t.episodenumber=C.varDefault}function X(e,t){O("setCustomContextGenerate"),c[e].vars.customContextGenerate||(c[e].vars.customContextGenerate={});var n,i,r=c[e].vars,a=c[e].vars.customContextGenerate;function o(){var e=r.cbcContextVideo.show;return N(e)&&"(not specified)"!==e&&e!==C.varDefault||(N(r.cbcContextVideo.genre)&&(e=r.cbcContextVideo.genre),N(r.cbcContextVideo.sport)&&(e=r.cbcContextVideo.sport),N(r.cbcContextVideo.region)&&(e=r.cbcContextVideo.region)),e}if("startvideo"===t){N(r.cbcContextVideo,!0)?(N(r.cbcContextVideo.airDate)&&!N(r.cbcContextVideo.airdate)&&(r.cbcContextVideo.airdate=r.cbcContextVideo.airDate,delete r.cbcContextVideo.airDate),N(r.cbcContextVideo.airdate)&&(a.daysince=function(e){if(!N(e)||e===C.varDefault)return!1;var t=e.split("-");if(!N(t[0])||!N(t[1])||!N(t[2]))return!1;var n=new Date,i=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0),r=new Date(Number(t[0]),Number(t[1])-1,Number(t[2]),0,0,0,0),a=Math.ceil((i.getTime()-r.getTime())/864e5);return 0===++a&&(a="0"),a}(r.cbcContextVideo.airdate)),a.showval=o()):r.cbcContextVideo=P.cbcContextVideo,a.playercounter=(null===(i=function(e){for(var t=escape(e)+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return unescape(r.substring(t.length,r.length))}return null}(n="cbcvideoheartbeatplayer"))&&(i=0),i=parseInt(i),function(e,t,n){var i;void 0===n&&(n=30);var r=new Date;r.setTime(r.getTime()+60*n*1e3),i="; expires="+r.toGMTString(),document.cookie=escape(e)+"="+escape(t)+i+"; path=/"}(n,++i),i),a.osversion=E("osVersion"),a.os=E("os"),a.videourl=M(),a.videolang="en",R()&&(a.videolang="fr"),a.videopage=r.pagevars.pageName,a.appname=r.pagevars.prop60,a.webornative=r.pagevars.prop63,a.appversion=r.pagevars.prop64;var s=CBC.APP.SC.UTIL.getCookie("cbc_plus");s&&(a.cbcplus=s)}return a.servertime=function(){var e=new Date;return("0"+e.getHours()).slice(-2)+("0"+e.getMinutes()).slice(-2)}(),a.offset=-(new Date).getTimezoneOffset()/60,a.daytype=function(){var e=(new Date).getDay();return 0===e||6===e?"weekend":"weekday"}(),a.dayofweek=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][(new Date).getDay()],a.hour=function(){var e=new Date;return("0"+e.getHours()).slice(-2)+(30<e.getMinutes()?"30":"00")}(),a.pillar=function(e){CBC.APP.SC.Pillar=CBC.APP.SC.Pillar||{},0===Object.getOwnPropertyNames(CBC.APP.SC.Pillar).length&&(CBC.APP.SC.Pillar={pillar:{available:["feed","listen","watch"],url:{default:"nan","cbc.ca/listen":"listen","cbcmusic.ca":"listen","watch.cbc.ca":"watch","gem.cbc.ca":"watch"}}});var t=CBC.APP.SC.Pillar.pillar,n=M();if(e&&(n=e),CBC.APP.SC.DTM.DATA.pillar&&-1<t.available.indexOf(CBC.APP.SC.DTM.DATA.pillar))return CBC.APP.SC.DTM.DATA.pillar;for(var i=t.url.default,r=Object.keys(t.url),a=0;a<r.length;a++){var o=r[a];if(t.url.hasOwnProperty(o)&&-1<n.indexOf(o)){i=t.url[o];break}}return i}(),k(a),{setShowVal:o,formatCbcContextVars:Q}}function $(e,t){var n={playhead:0};console.log("timerStop: hbid="+e+", playhead="+c[e].vars.playhead),N(c[e].vars.playhead)&&(n.playhead=c[e].vars.playhead),N(c[e].vars.customContextGenerate.timerset)&&(window.clearInterval(t),c[e].vars.customContextGenerate.timerset="",Y(e,n),G(e,n),W(e))}function Z(e){var t=c[e].videoPlayer;if(!t)throw new Error("Illegal argument. Player reference cannot be null.");this._player=t,this._playerID=e,this._heartbeat=c[e].heartbeat,this._initialPlay=!1}Z.prototype._onLoad=function(){O("CBC_VideoAnalyticsProvider: VIDEO_LOAD");var e=c[this._playerID].vars,t={};e.customContextGenerate.copy_videoid=c[this._playerID].videoPlayer._videoInfo.id,e.customContextGenerate.copy_videoname=c[this._playerID].videoPlayer._videoInfo.name,e.customContextGenerate.copy_videoplayername=c[this._playerID].videoPlayer._videoInfo.playerName,e.customContextGenerate.copy_videolength=Math.floor(c[this._playerID].videoPlayer._videoInfo.length),e.customContextGenerate.copy_videostreamtype=c[this._playerID].videoPlayer._videoInfo.streamType,D(t,e.customContextGenerate),e.cbcContextVideo.keywords&&(e.cbcContextVideo.keywords=function(e){if("string"==typeof e)return e.split(",").map(function(e){if(e.trim())return"media:"+e.trim().replace(/[\s+]+/g,"-").toLowerCase().replace(/[^0-9A-za-z_\-$.]/g,"")}).filter(function(e){return void 0!==e})}(e.cbcContextVideo.keywords)),N(e.cbcContextVideo,!0)&&(k(e.cbcContextVideo),D(t,e.cbcContextVideo)),N(e.playerContextVideo,!0)&&(k(e.playerContextVideo),D(t,e.playerContextVideo)),t["a.media.season"]=e.cbcContextVideo.seasonnumber,t["a.media.episode"]=e.cbcContextVideo.episodenumber,t.keywords=e.cbcContextVideo.keywords,this._heartbeat.trackSessionStart(this._player.getVideoInfo(),t),e.customContextGenerate.timerset=function(e,t,n){var i=0,r="";return console.log("timerStart: hbid="+e+", videoid="+t),"live"===n&&"news|the-national|the-national-live|nan|nan|-1|full-program|video|live"===t&&(r=window.setInterval(function(){10800<=(i+=60)&&$(e,r)},6e4)),r}(this._playerID,c[this._playerID].videoPlayer._videoInfo.id,c[this._playerID].videoPlayer._videoInfo.streamType)},Z.prototype._onPlay=function(){O("CBC_VideoAnalyticsProvider: PLAY");var e=c[this._playerID].vars.cbcContextVideo;if(!this._initialPlay&&window.CBC.APP.SC.EventTracker){window.CBC.APP.SC.EventTracker.isOn()||window.CBC.APP.SC.EventTracker.turnOn(),this._initialPlay=!0,e._timeMainContentStreamStarted=CBC.APP.SC.VideoHeartbeat.getCurrentTime(),e._accumulatedBufferTime=0,e._timeBufferStarted=0,e._accumulatedPauseTime=0,e._timePauseStarted=0;var t=z(c[this._playerID],"STREAMED");O("CBC_EventTracker: FIRING STREAMED EVENT"),CBC.APP.SC.EventTracker.trackEvent("STREAMED",t)}else e._timePauseStarted&&(e._accumulatedPauseTime+=CBC.APP.SC.VideoHeartbeat.getCurrentTime()-e._timePauseStarted,e._timePauseStarted=0);this._heartbeat.trackPlay()},Z.prototype._onChapterStart=function(){O("CBC_VideoAnalyticsProvider: CHAPTER_START");var e=c[this._playerID].vars,t={};e.customContextGenerate.copy_chaptername=c[this._playerID].videoPlayer._chapterInfo.name,e.customContextGenerate.copy_chapterlength=c[this._playerID].videoPlayer._chapterInfo.length,e.customContextGenerate.copy_chapterstarttime=c[this._playerID].videoPlayer._chapterInfo.startTime,e.customContextGenerate.copy_chapterposition=c[this._playerID].videoPlayer._chapterInfo.position,D(t,e.customContextGenerate),N(e.cbcContextChapter,!0)&&(k(e.cbcContextChapter),D(t,e.cbcContextChapter)),N(e.playerContextChapter,!0)&&(k(e.playerContextChapter),D(t,e.playerContextChapter)),this._heartbeat.trackEvent(i.Event.ChapterStart,this._player.getChapterInfo(),t)},Z.prototype._onUnload=function(){O("CBC_VideoAnalyticsProvider: VIDEO_UNLOAD"),this._heartbeat.trackSessionEnd(),N(c[this._playerID].vars.customContextGenerate.timerset)&&$(this._playerID,c[this._playerID].vars.customContextGenerate.timerset)},Z.prototype._destroy=function(){O("CBC_VideoAnalyticsProvider: DESTROY");var e=c[this._playerID];this._player&&(/^(rcbcconsole|player-audio)/.test(e.vars.videoplayername)&&this._onUnload(),this._heartbeat=null,this._player=null,function(e){O("uninstall event listeners");var t=c[e].analyticsProvider;for(var n in u)if(u.hasOwnProperty(n)){var i=u[n];"function"==typeof t[i]&&new j(e).removeEventListener(i,t[i],t)}}(this._playerID)),e.vars.videoid="",e.vars.videoname="",e.vars.videolength="",e.vars.videostreamtype="",e.vars.videoplayhead=0,e.vars.chaptername="",e.vars.chapterlength=0,e.vars.chapterstarttime=0,e.vars.chapterposition=1,e.vars.customContextGenerate={},e.vars.cbcContextVideo={},e.vars.playerContextVideo={},e.vars.cbcContextChapter={},e.vars.playerContextChapter={}},Z.prototype._onPause=function(){O("CBC_VideoAnalyticsProvider: PAUSE"),c[this._playerID].vars.cbcContextVideo._timePauseStarted=CBC.APP.SC.VideoHeartbeat.getCurrentTime(),this._heartbeat.trackPause()},Z.prototype._onChapterSkip=function(){O("CBC_VideoAnalyticsProvider: CHAPTER_SKIP"),this._heartbeat.trackEvent(i.Event.ChapterSkip)},Z.prototype._onChapterComplete=function(){O("CBC_VideoAnalyticsProvider: CHAPTER_COMPLETE"),this._heartbeat.trackEvent(i.Event.ChapterComplete)},Z.prototype._onComplete=function(){O("CBC_VideoAnalyticsProvider: COMPLETE"),this._heartbeat.trackComplete()},Z.prototype._onSeekStart=function(){O("CBC_VideoAnalyticsProvider: SEEK_START"),this._heartbeat.trackEvent(i.Event.SeekStart)},Z.prototype._onSeekComplete=function(){O("CBC_VideoAnalyticsProvider: SEEK_COMPLETE"),this._heartbeat.trackEvent(i.Event.SeekComplete)},Z.prototype._onAdBreakStart=function(){O("CBC_VideoAnalyticsProvider: ADBREAK_START"),this._heartbeat.trackEvent(i.Event.AdBreakStart,this._player.getAdBreakInfo())},Z.prototype._onAdBreakComplete=function(){O("CBC_VideoAnalyticsProvider: ADBREAK_COMPLETE"),this._heartbeat.trackEvent(i.Event.AdBreakComplete)},Z.prototype._onAdStart=function(){O("CBC_VideoAnalyticsProvider: AD_START"),this._heartbeat.trackEvent(i.Event.AdStart,this._player.getAdInfo())},Z.prototype._onAdComplete=function(){O("CBC_VideoAnalyticsProvider: AD_COMPLETE"),this._heartbeat.trackEvent(i.Event.AdComplete)},Z.prototype._onBufferStart=function(){O("CBC_VideoAnalyticsProvider: BUFFER_START"),c[this._playerID].vars.cbcContextVideo._timeBufferStarted=CBC.APP.SC.VideoHeartbeat.getCurrentTime(),this._heartbeat.trackEvent(i.Event.BufferStart)},Z.prototype._onBufferComplete=function(){O("CBC_VideoAnalyticsProvider: BUFFER_COMPLETE");var e=c[this._playerID].vars.cbcContextVideo;e._timeBufferStarted&&(e._accumulatedBufferTime+=CBC.APP.SC.VideoHeartbeat.getCurrentTime()-e._timeBufferStarted,e._timeBufferStarted=0),this._heartbeat.trackEvent(i.Event.BufferComplete)};function ee(){this._videoInfo=null,this._chapterInfo=null,this._adBreakInfo=null,this._adInfo=null,this._isLoaded=!1}return ee.prototype.getVideoInfo=function(){return i.createMediaObject(this._videoInfo.name,this._videoInfo.id,this._videoInfo.length,this._videoInfo.streamType)},ee.prototype.getChapterInfo=function(){return i.createChapterObject(this._chapterInfo.name,this._chapterInfo.position,this._chapterInfo.length,this._chapterInfo.startTime)},ee.prototype.getAdBreakInfo=function(){return i.createAdBreakObject(this._adBreakInfo.name,this._adBreakInfo.position,this._adBreakInfo.startTime)},ee.prototype.getAdInfo=function(){return i.createAdObject(this._adInfo.name,this._adInfo.id,this._adInfo.position,this._adInfo.length)},ee.prototype._videoLoad=function(e,t){O("CBC_VideoPlayer: _videoLoad"),this._videoInfo={},"your-stream-will-begin-playing-after-this-message"!==w(t.cbcContextVideo.streamtitle)&&(this._isLoaded=!0),X(e,"startvideo"),N(t,!0)?(N(t.cbcContextVideo,!0)&&Q(e),this._videoInfo.streamType=N(t.streamType)?t.streamType:P.videostreamtype,"vod"!==this._videoInfo.streamType&&"live"!==this._videoInfo.streamType&&"linear"!==this._videoInfo.streamType&&(this._videoInfo.streamType="vod",O("CBC_VideoPlayer: invalid stream type "+this._videoInfo.streamType),q({},{error_id:17,msg:"invalid stream type set"})),N(t.length)||"live"!==this._videoInfo.streamType?N(t.length)&&!isNaN(t.length)?this._videoInfo.length=Number(t.length):this._videoInfo.length=P.videolength:this._videoInfo.length=-1,N(t.id)?this._videoInfo.id=k(t.id):N(c[e].vars.cbcContextVideo,!0)?this._videoInfo.id=k(J(e,!1)):this._videoInfo.id=P.videoid,this._videoInfo.name=N(t.name)?k(t.name):this._videoInfo.id):(this._videoInfo.id=P.videoid,this._videoInfo.name=this._videoInfo.id,this._videoInfo.length=P.videolength,this._videoInfo.streamType=P.videostreamtype),this._videoInfo.playerName=c[e].vars.videoplayername,c[e].vars.playhead||(c[e].vars.playhead=N(t.playhead)&&!isNaN(t.playhead)?Number(t.playhead):P.videoplayhead),this._videoInfo.playhead=c[e].vars.playhead;var n=t.cbcContextVideo,i=n&&n.audiovideo?n.audiovideo:"audio";if(c[e].vars.comScore&&!/audio/.test(i)){c[e].vars.streamSense||(c[e].vars.streamSense={});var r=c[e].vars.streamSense;r.cbcStreamingTag=new ns_.StreamingTag({customerC2:"16433048"}),r.isPlaying=0,r.metadata=function(){var e="*null";return{ns_st_ci:e,ns_st_cl:e,ns_st_st:e,ns_st_pu:e,ns_st_pr:e,ns_st_ep:e,ns_st_sn:e,ns_st_en:e,ns_st_ge:e,ns_st_ti:e,ns_st_ia:1,ns_st_ce:1,ns_st_ddt:e,ns_st_tdt:e,c3:R()?"Radio-Canada":"CBC",c4:e,c6:e}}();var a=r.metadata;a.ns_st_ci=this._videoInfo.id,R()&&(a.c6=this._videoInfo.id),a.ns_st_cl=Number(1e3*this._videoInfo.length),n&&(a.ns_st_pr=n.show?n.show:"*null",a.ns_st_ep=n.streamtitle?n.streamtitle:"*null",a.ns_st_sn=n.seasonnumber&&"nan"!==n.seasonnumber?n.seasonnumber.toString():"*null",a.ns_st_en=n.episodenumber&&"nan"!==n.episodenumber?n.episodenumber.toString():"*null",a.ns_st_ge=n.genre?n.genre:"*null",a.ns_st_ce=n.type?Number(/^(full-program|full program|episode|full-event|event-coverage)/.test(n.type.toLowerCase())):1,a.ns_st_ddt=n.airdate?n.airdate:"*null",a.ns_st_tdt=n.airdate?n.airdate:"*null");var o=f;"live"===this._videoInfo.streamType?(o=g,a.ns_st_cl=0):o=599<this._videoInfo.length?d:p,n.type&&"user-generated"===n.type.toLowerCase()&&(o=(Number(o)+10).toString()),r.mediaType=o}c[e].vars.cbStrategy=c[e].vars.cbStrategy||{};var s=c[e].vars.cbStrategy,l=t.cbcContextVideo;c[e].vars.customContextGenerate;s.isReady=!0,s.title=l.streamtitle||"",s.videoPath=l.uid||"",s.contentType=v.ContentType.CONTENT,s.totalDuration=Number(1e3*this._videoInfo.length),s.videoState=v.VideoState.UNPLAYED,s.startTime=(new Date).getTime(),new j(e).dispatchEvent(u.VIDEO_LOAD)},ee.prototype._onPlay=function(e,t){if(O("CBC_VideoPlayer: _onPlay"),c[e].vars.comScore){var n=c[e].vars.streamSense;n&&!n.isPlaying&&n.metadata&&n.mediaType&&(n.isPlaying=1,n.cbcStreamingTag.playVideoContentPart(n.metadata,n.mediaType))}var i=c[e].vars.cbStrategy;i.videoState=v.VideoState.PLAYED,-1===i.startPlayTime&&(i.startPlayTime=(new Date).getTime()),new j(e).dispatchEvent(u.PLAY)},ee.prototype._startChapter=function(e,t){O("CBC_VideoPlayer: _startChapter"),null!==this._chapterInfo&&new j(e).dispatchEvent(u.CHAPTER_SKIP),this._chapterInfo={},X(e,"startChapter"),N(t,!0)?(N(t.length)||"live"!==this._videoInfo.streamType?N(t.length)&&!isNaN(t.length)?this._chapterInfo.length=Number(t.length):this._chapterInfo.length=P.videolength:this._chapterInfo.length=-1,this._chapterInfo.startTime=N(t.startTime)&&!isNaN(t.startTime)?Number(t.startTime):Number(P.chapterstarttime),this._chapterInfo.position=N(t.position)?Number(t.position):Number(P.chapterposition),N(t.name)?this._chapterInfo.name=k(t.name):N(c[e].vars.cbcContextVideo,!0)?this._chapterInfo.name=k(function(e,t){var n="",i=c[e].vars.cbcContextVideo,r=t.cbcContextChapter;return n="music"===c[e].vars.cbcContextVideo.contentarea?B(n=B(n=B(n=B(n=B(n,i.contentarea),r.author),r.chaptertitle),x(i.audiovideo)),t.length):"radio"===c[e].vars.cbcContextVideo.contentarea?(n=B(n=B(n=B(n=B(n=B(n=B(n=B(n=B(n,i.contentarea),r.show),i.streamtitle),i.seasonnumber),i.episodenumber),t.position),Math.floor(c[e].videoPlayer._videoInfo.length)),i.type),i.audiovideo=x(i.audiovideo),n=B(n,i.audiovideo),i.liveondemand=U(e,i.liveondemand),B(n,i.liveondemand)):(console.log("calling generate concatid"),J(e,!0))}(e,t)):this._chapterInfo.name=P.chaptername):(this._chapterInfo.name=P.chaptername,this._chapterInfo.length=Number(P.chapterlength),this._chapterInfo.startTime=Number(P.chapterstarttime),this._chapterInfo.position=Number(P.chapterposition)),new j(e).dispatchEvent(u.CHAPTER_START)},ee.prototype._completeChapter=function(e,t){O("CBC_VideoPlayer: _completeChapter"),new j(e).dispatchEvent(u.CHAPTER_COMPLETE),this._chapterInfo=null},ee.prototype._onPause=function(e,t){if(O("CBC_VideoPlayer: _onPause"),c[e].vars.comScore){var n=c[e].vars.streamSense;n&&n.isPlaying&&n.metadata&&n.mediaType&&(n.isPlaying=0,n.cbcStreamingTag.stop())}c[e].vars.cbStrategy=c[e].vars.cbStrategy||{},c[e].vars.cbStrategy.videoState=v.VideoState.STOPPED,new j(e).dispatchEvent(u.PAUSE)},ee.prototype._onSeekStart=function(e,t){O("CBC_VideoPlayer: _onSeekStart"),new j(e).dispatchEvent(u.SEEK_START)},ee.prototype._onSeekComplete=function(e,t){O("CBC_VideoPlayer: _onSeekComplete"),new j(e).dispatchEvent(u.SEEK_COMPLETE)},ee.prototype._onComplete=function(e,t){if(O("CBC_VideoPlayer: _onComplete"),c[e].vars.comScore){var n=c[e].vars.streamSense;n&&n.isPlaying&&n.metadata&&n.mediaType&&(n.isPlaying=0,n.cbcStreamingTag.stop())}c[e].vars.cbStrategy=c[e].vars.cbStrategy||{},c[e].vars.cbStrategy.videoState=v.VideoState.COMPLETED,new j(e).dispatchEvent(u.COMPLETE),this._videoUnload(e,t)},ee.prototype._videoUnload=function(e,t){if(O("CBC_VideoPlayer: _videoUnload"),this._isLoaded=!1,c[e].vars.comScore){var n=c[e].vars.streamSense;n&&n.isPlaying&&n.metadata&&n.mediaType&&(n.isPlaying=0,n.cbcStreamingTag.stop())}new j(e).dispatchEvent(u.VIDEO_UNLOAD)},ee.prototype._destroy=function(e){if(O("CBC_VideoPlayer: _destroy"),c[e].vars.comScore){var t=c[e].vars.streamSense;t&&t.isPlaying&&t.metadata&&t.mediaType&&(t.isPlaying=0,t.cbcStreamingTag.stop()),t&&(t.cbcStreamingTag&&(t.cbcStreamingTag=null),t.metadata&&(t.metadata=null),t.mediaType&&(t.mediaType=null))}new j(e).dispatchEvent(u.DESTROY),this._videoUnload(e)},ee.prototype._adBreakStart=function(e,t){O("CBC_VideoPlayer: _adBreakStart"),this._adBreakInfo={},N(t,!0)?(this._adBreakInfo.position=Number(t.position),this._adBreakInfo.name=t.name?t.name.toLowerCase():"unknown",/^(pre|post|mid)-roll/.test(this._adBreakInfo.name)||(this._adBreakInfo.name="unknown"),this._adBreakInfo.startTime=Number(t.playhead)):(this._adBreakInfo.position=Number(P.adbreakposition),this._adBreakInfo.name=P.adbreakname,this._adBreakInfo.startTime=Number(P.adbreakstarttime)),this._adBreakInfo.playerName=c[e].vars.videoplayername;var n=c[e].vars.cbStrategy;-1===n.adPlayTime&&(n.adPlayTime="pre-roll"===t.name?(new Date).getTime():-1),n.adPosition=/^(pre|post|mid)-roll/i.test(t.name)?"":v.AdPosition[t.name.toUpperCase().replace(/[-|\d]/g,"")],n.contentType=v.ContentType.AD,new j(e).dispatchEvent(u.ADBREAK_START)},ee.prototype._adBreakComplete=function(e,t){O("CBC_VideoPlayer: _adBreakComplete");var n=c[e].vars.cbStrategy;n.adPosition="",n.contentType=v.ContentType.CONTENT,new j(e).dispatchEvent(u.ADBREAK_COMPLETE),this._adBreakInfo=null},ee.prototype._adStart=function(e,t){if(O("CBC_VideoPlayer: _adStart"),this._adInfo={},N(t,!0)?(this._adInfo.length=Number(t.length),this._adInfo.id=t.id,this._adInfo.position=Number(t.position),t.name?this._adInfo.name=k(t.name):this._adInfo.name=P.adbreakname):(this._adInfo.length=Number(P.adlength),this._adInfo.id=P.adid,this._adInfo.position=Number(P.adposition),this._adInfo.name=P.adbreakname),c[e].vars.comScore){var n=c[e].vars.streamSense;if(n&&n.isPlaying&&n.metadata&&n.mediaType&&(n.isPlaying=0,n.cbcStreamingTag.stop()),n&&n.metadata){var i=l;if(n.mediaType===g||n.mediaType===o)i=_;else switch(this._adBreakInfo.name){case"pre-roll":i=s;break;case"post-roll":i=h;break;case"unknown":i=m}var r={};r.ns_st_cl=Number(1e3*this._adInfo.length),n.isPlaying=1,n.cbcStreamingTag.playVideoAdvertisement(r,i)}}new j(e).dispatchEvent(u.AD_START)},ee.prototype._adComplete=function(e,t){if(O("CBC_VideoPlayer: _adComplete"),c[e].vars.comScore){var n=c[e].vars.streamSense;n&&n.isPlaying&&n.metadata&&n.mediaType&&(n.isPlaying=0,n.cbcStreamingTag.stop())}new j(e).dispatchEvent(u.AD_COMPLETE),this._adInfo=null},ee.prototype._onBufferStart=function(e,t){new j(e).dispatchEvent(u.BUFFER_START)},ee.prototype._onBufferComplete=function(e,t){new j(e).dispatchEvent(u.BUFFER_COMPLETE)},CBC.APP.SC.VideoHeartbeatVars.Player.debugLogging&&function(){if(window.RaygunObject&&window.rg4js)return O("Failed to add Raygun because it is already on this page");window.RaygunObject="rg4js",window.rg4js=function(){window.rg4js.o||(window.rg4js.o=[]),window.rg4js.o.push(arguments)},function(e,t,n){var i=document.createElement("script");i.type="text/javascript",n&&(i.async=!0),i.readyState?i.onreadystatechange=function(){"loaded"!==i.readyState&&"complete"!==i.readyState||(i.onreadystatechange=null,t&&t())}:i.onload=function(){t&&t()},i.src=e,document.getElementsByTagName("head")[0].appendChild(i)}("//cdn.raygun.io/raygun4js/raygun.min.js",function(){window.rg4js("apiKey","H9V/FGTUxylDlTlCwqG8jw=="),window.rg4js("enableCrashReporting",!0)},!0)}(),{init:function(e){try{O("init"),O(e),void 0===window.CBC.APP.SC.VideoHeartbeat.cbStratInit&&(window.CBC.APP.SC.VideoHeartbeat.cbStratInit=!1);var t="vhb"+Math.floor(99999*Math.random());if(c[t]={vars:{}},N(e,!0)){N(e.config,!0)&&(N(e.config.marketingCloudId)&&(C.marketingCloudId=e.config.marketingCloudId),N(e.config.trackingServer)&&(C.trackingServer=e.config.trackingServer),N(e.config.trackingServerSecure)&&(C.trackingServerSecure=e.config.trackingServerSecure),N(e.config.heartbeatServer)&&(C.heartbeatServer=e.config.heartbeatServer),N(e.config.visitorNamespace)&&(C.visitorNamespace=e.config.visitorNamespace),N(e.config.publisher)&&(C.publisher=e.config.publisher)),c[t].vars.videoplayername=N(e.playerName)?k(e.playerName):P.videoplayername,N(e.channel)?c[t].vars.channel=k(e.channel):N(e.playerName)?c[t].vars.channel=k(e.playerName)+"-channel":c[t].vars.channel=P.channel,c[t].vars.ovp=N(e.ovp)?k(e.ovp):P.ovp,c[t].vars.sdk=N(e.sdk)?k(e.sdk):P.sdk,c[t].vars.quietMode=N(e.quietMode)?e.quietMode:P.quietMode,c[t].vars.ssl=N(e.ssl)?e.ssl:P.ssl,c[t].vars.debugLogging=N(e.debugLogging)?e.debugLogging:P.debugLogging,P.debugLogging=c[t].vars.debugLogging,function(){for(var e in c)N(c[e].vars.videoplayername)&&(c[e].vars.videoplayername.indexOf(C.playerSuffix.s)<0&&c[e].vars.videoplayername.indexOf(C.playerSuffix.m)<0&&(c[e].vars.videoplayername+=C.playerSuffix.s),1<I(c)&&(c[e].vars.videoplayername=c[e].vars.videoplayername.replace(C.playerSuffix.s,C.playerSuffix.m)))}(),c[t].vars.comScore=!!N(e.comScore)&&e.comScore,function(e){var t=e;return void 0===t&&(t=M()),!!t.match(/\.cbcmusic\.ca/gi)||!!t.match(/\.cbc\.ca\/listen/gi)}(document.location.href)&&(c[t].vars.comScore=!1),c[t].vars.cbStrategy=c[t].vars.cbStrategy||{};var n=c[t].vars.cbStrategy;window.CBC.APP.SC.VideoHeartbeat.cbStratInit||(window._cbv_strategies=window._cbv_strategies||[],window._cbv_strategies.push(A),window.CBC.APP.SC.VideoHeartbeat.cbStratInit=!0),window._cbv=window._cbv||[],window._cbv.push(c[t]),N(e.playerName,!0)&&(n.playerType=c[t].vars.videoplayername)}return t}catch(e){return H(e),q(e),!1}},destroy:W,videoLoad:function(e,t){if(!c[e]||c[e].videoPlayer&&/^(rcbcconsole|player-audio)/.test(c[e].vars.videoplayername)&&c[e].videoPlayer._isLoaded)H("Video has already been loaded.");else try{if(L(t.cbcContextVideo),O("videoLoad:::"+e),O(t),N(c[e],!0)){if(N(c[e].videoPlayer,!0)&&"function"==typeof c[e].videoPlayer._destroy&&c[e].videoPlayer._destroy(e),N(c[e].vars.pagevars,!0)||function(e,t){c[e].vars.pagevars={},N(t.pagevars,!0)?(c[e].vars.pagevars.pageName=N(t.pagevars.pageName)?k(t.pagevars.pageName):P.pagevars.pageName,c[e].vars.pagevars.prop60=N(t.pagevars.prop60)?k(t.pagevars.prop60):P.pagevars.prop60,c[e].vars.pagevars.prop63=N(t.pagevars.prop63)?k(t.pagevars.prop63):P.pagevars.page63,c[e].vars.pagevars.prop64=N(t.pagevars.prop64)?k(t.pagevars.prop64):P.pagevars.page64,c[e].vars.pagevars.s_account=N(t.pagevars.s_account)?k(t.pagevars.s_account):P.pagevars.s_account):N(window.s_cbc_sitecatalyst,!0)?(c[e].vars.pagevars.pageName=N(window.s_cbc_sitecatalyst.pageName)?k(window.s_cbc_sitecatalyst.pageName):P.pagevars.pageName,c[e].vars.pagevars.prop60=N(window.s_cbc_sitecatalyst.prop60)?k(window.s_cbc_sitecatalyst.prop60):P.pagevars.prop60,c[e].vars.pagevars.prop63=N(window.s_cbc_sitecatalyst.prop63)?k(window.s_cbc_sitecatalyst.prop63):P.pagevars.prop63,c[e].vars.pagevars.prop64=N(window.s_cbc_sitecatalyst.prop64)?k(window.s_cbc_sitecatalyst.prop64):P.pagevars.prop64,window.s_account&&(window.s_cbc_sitecatalyst.s_account=window.s_account),c[e].vars.pagevars.s_account=N(window.s_cbc_sitecatalyst.s_account)?window.s_cbc_sitecatalyst.s_account:P.pagevars.s_account):c[e].vars.pagevars=P.pagevars}(e,t),c[e].videoPlayer=new ee,c[e].appMeasurement=function(e){var t=Visitor.getInstance(C.marketingCloudId,{trackingServer:C.trackingServer,trackingServerSecure:C.trackingServerSecure});t.setCustomerIDs({userId:{id:C.dpid},puuid:{id:C.dpuuid}});var n=c[e].vars.pagevars.s_account;window.s_cbc_sitecatalyst&&window.s_cbc_sitecatalyst instanceof AppMeasurement&&(n=window.s_cbc_sitecatalyst.account);var i=new AppMeasurement(n);return i.visitor=t,i.trackingServer=C.trackingServer,i.trackingServerSecure=C.trackingServerSecure,i.account=n,i.visitorNamespace=C.visitorNamespace,i.charSet=C.charSet,i}(e),c[e].heartbeat=function(e){var t=new r;t.trackingServer=C.heartbeatServer,t.playerName=c[e].vars.videoplayername,t.channel=c[e].vars.channel,t.debugLogging=!1,t.appVersion=c[e].vars.sdk,t.ssl=c[e].vars.ssl,t.ovp=c[e].vars.ovp;var n=new a;return n.getCurrentPlaybackTime=function(){return c[e].vars.playhead},new i(n,t,c[e].appMeasurement)}(e),c[e].analyticsProvider=new Z(e),t.cbcContextVideo.sponsorname)window.CBC.APP.SC.UTIL.getMetadataWhitelist().metadata.whitelist.sponsor.name[t.cbcContextVideo.sponsorname]||delete t.cbcContextVideo.sponsorname;if(t.cbcContextVideo.partnername)window.CBC.APP.SC.UTIL.getMetadataWhitelist().metadata.whitelist.partner.name[t.cbcContextVideo.partnername]||delete t.cbcContextVideo.partnername;return t.cbcContextVideo.feature&&(t.cbcContextVideo.feature=V(t.cbcContextVideo.feature)),"your-stream-will-begin-playing-after-this-message"!==w(t.cbcContextVideo.streamtitle)&&function(e){O("install event listeners");var t=c[e].analyticsProvider;for(var n in u)if(u.hasOwnProperty(n)){var i=u[n];"function"==typeof t[i]&&new j(e).addEventListener(i,t[i],t)}}(e),N(t.cbcContextVideo,!0)&&(c[e].vars.cbcContextVideo=JSON.parse(JSON.stringify(t.cbcContextVideo))),N(t.playerContextVideo,!0)&&(c[e].vars.playerContextVideo=JSON.parse(JSON.stringify(t.playerContextVideo))),c[e].videoPlayer&&"function"==typeof c[e].videoPlayer._videoLoad?(c[e].videoPlayer._videoLoad(e,t),!0):(H("error_id:2, method: videoLoad(player_id:"+e+", param:"+t+"), player_list:"+c),q({},{error_id:2,player_id:e,player_list:c}),!1)}return H("error_id:3, method: videoLoad(player_id:"+e+", param:"+t+"), player_list:"+c),q({},{error_id:3,player_id:e,player_list:c}),!1}catch(e){return H(e),q(e),!1}},videoComplete:function(e,t){try{return O("videoComplete:::"+e),O(t),c[e]&&c[e].videoPlayer&&"function"==typeof c[e].videoPlayer._onComplete?(c[e].videoPlayer._onComplete(e,t),!0):(H("error_id:1, method: videoComplete(player_id:"+e+", param:"+t+"), player_list:"+c),q({},{error_id:1,player_id:e,player_list:c}),!1)}catch(e){return H(e),q(e),!1}},videoUnload:G,videoPlay:function(e,t){try{return O("videoPlay:::"+e),O(t),c[e]&&c[e].videoPlayer&&"function"==typeof c[e].videoPlayer._onPlay?(K(e,t),c[e].videoPlayer._onPlay(e,t),!0):(H("error_id:7, method: videoPlay(player_id:"+e+", param:"+t+"), player_list:"+c),q({},{error_id:7,player_id:e,player_list:c}),!1)}catch(e){return H(e),q(e),!1}},videoPause:Y,adBreakStart:function(e,t){try{return O("adBreakStart:::"+e),O(t),c[e]&&c[e].videoPlayer&&"function"==typeof c[e].videoPlayer._adBreakStart?(c[e].videoPlayer._adBreakStart(e,t),!0):(H("error_id:13, method: adBreakStart(player_id:"+e+", param:"+t+"), player_list:"+c),q({},{error_id:13,player_id:e,player_list:c}),!1)}catch(e){return H(e),q(e),!1}},adBreakComplete:function(e,t){try{return O("adBreakComplete:::"+e),O(t),c[e]&&c[e].videoPlayer&&"function"==typeof c[e].videoPlayer._adBreakComplete?(K(e,t),c[e].videoPlayer._adBreakComplete(e,t),!0):(H("error_id:14, method: adBreakComplete(player_id:"+e+", param:"+t+"), player_list:"+c),q({},{error_id:14,player_id:e,player_list:c}),!1)}catch(e){return H(e),q(e),!1}},adStart:function(e,t){try{return O("adStart:::"+e),O(t),c[e]&&c[e].videoPlayer&&"function"==typeof c[e].videoPlayer._adStart?(c[e].videoPlayer._adStart(e,t),!0):(H("error_id:15, method: adStart(player_id:"+e+", param:"+t+"), player_list:"+c),q({},{error_id:15,player_id:e,player_list:c}),!1)}catch(e){return H(e),q(e),!1}},adComplete:function(e,t){try{return O("adComplete:::"+e),O(t),c[e]&&c[e].videoPlayer&&"function"==typeof c[e].videoPlayer._adComplete?(c[e].videoPlayer._adComplete(e,t),!0):(H("error_id:16, method: adComplete(player_id:"+e+", param:"+t+"), player_list:"+c),q({},{error_id:16,player_id:e,player_list:c}),!1)}catch(e){return H(e),q(e),!1}},chapterStart:function(e,t){try{return L(t.cbcContextChapter),O("chapterStart:::"+e),O(t),c[e]&&c[e].videoPlayer&&"function"==typeof c[e].videoPlayer._startChapter?(N(t.cbcContextChapter,!0)&&(c[e].vars.cbcContextChapter=JSON.parse(JSON.stringify(t.cbcContextChapter))),N(t.playerContextChapter,!0)&&(c[e].vars.playerContextChapter=JSON.parse(JSON.stringify(t.playerContextChapter))),c[e].videoPlayer._startChapter(e,t),!0):(H("error_id:9, method: chapterStart(player_id:"+e+", param:"+t+"), player_list:"+c),q({},{error_id:9,player_id:e,player_list:c}),!1)}catch(e){return H(e),q(e),!1}},chapterComplete:function(e,t){try{return O("chapterComplete:::"+e),O(t),c[e]&&c[e].videoPlayer&&"function"==typeof c[e].videoPlayer._completeChapter?(K(e,t),c[e].videoPlayer._completeChapter(e,t),!0):(H("error_id:10, method: chapterComplete(player_id:"+e+", param:"+t+"), player_list:"+c),q({},{error_id:10,player_id:e,player_list:c}),!1)}catch(e){return H(e),q(e),!1}},seekStart:function(e,t){try{return O("seekStart:::"+e),O(t),c[e]&&c[e].videoPlayer&&"function"==typeof c[e].videoPlayer._onSeekStart?(K(e,t),c[e].videoPlayer._onSeekStart(e,t),!0):(H("error_id:11, method: seekStart(player_id:"+e+", param:"+t+"), player_list:"+c),q({},{error_id:11,player_id:e,player_list:c}),!1)}catch(e){return H(e),q(e),!1}},seekComplete:function(e,t){try{return O("seekComplete:::"+e),O(t),c[e]&&c[e].videoPlayer&&"function"==typeof c[e].videoPlayer._onSeekComplete?(K(e,t),c[e].videoPlayer._onSeekComplete(e,t),!0):(H("error_id:12, method: seekComplete(player_id:"+e+", param:"+t+"), player_list:"+c),q({},{error_id:12,player_id:e,player_list:c}),!1)}catch(e){return H(e),q(e),!1}},updatePlayHead:K,bufferStart:function(e,t){try{return O("bufferStart:::"+e),O(t),c[e]&&c[e].videoPlayer&&"function"==typeof c[e].videoPlayer._onBufferStart?(c[e].videoPlayer._onBufferStart(e,t),!0):(H("error_id:17, method: bufferStart(player_id:"+e+", param:"+t+"), player_list:"+c),q({},{error_id:17,player_id:e,player_list:c}),!1)}catch(e){return H(e),q(e),!1}},bufferComplete:function(e,t){try{return O("bufferComplete:::"+e),O(t),c[e]&&c[e].videoPlayer&&"function"==typeof c[e].videoPlayer._onBufferComplete?(c[e].videoPlayer._onBufferComplete(e,t),!0):(H("error_id:18, method: bufferComplete(player_id:"+e+", param:"+t+"), player_list:"+c),q({},{error_id:18,player_id:e,player_list:c}),!1)}catch(e){return H(e),q(e),!1}},getPlayers:function(){return c},isFrench:R,adobeLogging:function(e,t){t?(c[e].heartbeat._playerPlugin._logger.enable(),c[e].heartbeat._ahPlugin._logger.enable(),c[e].heartbeat._aaPlugin._logger.enable(),c[e].heartbeat._logger.enable()):(c[e].heartbeat._playerPlugin._logger.disable(),c[e].heartbeat._ahPlugin._logger.disable(),c[e].heartbeat._aaPlugin._logger.disable(),c[e].heartbeat._logger.disable())},getCurrentTime:function(){return(new Date).getTime()}}}());