(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{136:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return flip}));var _easing_index_mjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(21),_internal_index_mjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0);function flip(node,animation,params){const style=getComputedStyle(node),transform="none"===style.transform?"":style.transform,scaleX=animation.from.width/node.clientWidth,scaleY=animation.from.height/node.clientHeight,dx=(animation.from.left-animation.to.left)/scaleX,dy=(animation.from.top-animation.to.top)/scaleY,d=Math.sqrt(dx*dx+dy*dy),{delay:delay=0,duration:duration=(d=>120*Math.sqrt(d)),easing:easing=_easing_index_mjs__WEBPACK_IMPORTED_MODULE_0__.b}=params;return{delay:delay,duration:Object(_internal_index_mjs__WEBPACK_IMPORTED_MODULE_1__.I)(duration)?duration(d):duration,easing:easing,css:(_t,u)=>`transform: ${transform} translate(${u*dx}px, ${u*dy}px);`}}},147:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[exports],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(exports){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}Object.defineProperty(exports,"__esModule",{value:!0});var l=!1;if("undefined"!=typeof window){var e={get passive(){l=!0}};window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}function d(t){return u.some((function(e){return!(!e.options.allowTouchMove||!e.options.allowTouchMove(t))}))}function c(e){var t=e||window.event;return!!d(t.target)||1<t.touches.length||(t.preventDefault&&t.preventDefault(),!1)}function o(){setTimeout((function(){void 0!==m&&(document.body.style.paddingRight=m,m=void 0),void 0!==f&&(document.body.style.overflow=f,f=void 0)}))}var a="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&1<window.navigator.maxTouchPoints),u=[],s=!1,v=-1,f=void 0,m=void 0;exports.disableBodyScroll=function(r,e){if(a){if(!r)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(r&&!u.some((function(e){return e.targetElement===r}))){var t={targetElement:r,options:e||{}};u=[].concat(i(u),[t]),r.ontouchstart=function(e){1===e.targetTouches.length&&(v=e.targetTouches[0].clientY)},r.ontouchmove=function(e){var t,o,n,i;1===e.targetTouches.length&&(o=r,i=(t=e).targetTouches[0].clientY-v,d(t.target)||(o&&0===o.scrollTop&&0<i||(n=o)&&n.scrollHeight-n.scrollTop<=n.clientHeight&&i<0?c(t):t.stopPropagation()))},s||(document.addEventListener("touchmove",c,l?{passive:!1}:void 0),s=!0)}}else{n=e,setTimeout((function(){if(void 0===m){var e=!!n&&!0===n.reserveScrollBarGap,t=window.innerWidth-document.documentElement.clientWidth;e&&0<t&&(m=document.body.style.paddingRight,document.body.style.paddingRight=t+"px")}void 0===f&&(f=document.body.style.overflow,document.body.style.overflow="hidden")}));var o={targetElement:r,options:e||{}};u=[].concat(i(u),[o])}var n},exports.clearAllBodyScrollLocks=function(){a?(u.forEach((function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null})),s&&(document.removeEventListener("touchmove",c,l?{passive:!1}:void 0),s=!1),u=[],v=-1):(o(),u=[])},exports.enableBodyScroll=function(t){if(a){if(!t)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");t.ontouchstart=null,t.ontouchmove=null,u=u.filter((function(e){return e.targetElement!==t})),s&&0===u.length&&(document.removeEventListener("touchmove",c,l?{passive:!1}:void 0),s=!1)}else(u=u.filter((function(e){return e.targetElement!==t}))).length||o()}})?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},284:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return main_ScrollZoom}));var mat2d_namespaceObject={};__webpack_require__.r(mat2d_namespaceObject),__webpack_require__.d(mat2d_namespaceObject,"create",(function(){return create})),__webpack_require__.d(mat2d_namespaceObject,"clone",(function(){return clone})),__webpack_require__.d(mat2d_namespaceObject,"copy",(function(){return copy})),__webpack_require__.d(mat2d_namespaceObject,"identity",(function(){return identity})),__webpack_require__.d(mat2d_namespaceObject,"fromValues",(function(){return fromValues})),__webpack_require__.d(mat2d_namespaceObject,"set",(function(){return set})),__webpack_require__.d(mat2d_namespaceObject,"invert",(function(){return invert})),__webpack_require__.d(mat2d_namespaceObject,"determinant",(function(){return determinant})),__webpack_require__.d(mat2d_namespaceObject,"multiply",(function(){return multiply})),__webpack_require__.d(mat2d_namespaceObject,"rotate",(function(){return rotate})),__webpack_require__.d(mat2d_namespaceObject,"scale",(function(){return mat2d_scale})),__webpack_require__.d(mat2d_namespaceObject,"translate",(function(){return translate})),__webpack_require__.d(mat2d_namespaceObject,"fromRotation",(function(){return fromRotation})),__webpack_require__.d(mat2d_namespaceObject,"fromScaling",(function(){return fromScaling})),__webpack_require__.d(mat2d_namespaceObject,"fromTranslation",(function(){return fromTranslation})),__webpack_require__.d(mat2d_namespaceObject,"str",(function(){return str})),__webpack_require__.d(mat2d_namespaceObject,"frob",(function(){return frob})),__webpack_require__.d(mat2d_namespaceObject,"add",(function(){return add})),__webpack_require__.d(mat2d_namespaceObject,"subtract",(function(){return subtract})),__webpack_require__.d(mat2d_namespaceObject,"multiplyScalar",(function(){return multiplyScalar})),__webpack_require__.d(mat2d_namespaceObject,"multiplyScalarAndAdd",(function(){return multiplyScalarAndAdd})),__webpack_require__.d(mat2d_namespaceObject,"exactEquals",(function(){return exactEquals})),__webpack_require__.d(mat2d_namespaceObject,"equals",(function(){return mat2d_equals})),__webpack_require__.d(mat2d_namespaceObject,"mul",(function(){return mul})),__webpack_require__.d(mat2d_namespaceObject,"sub",(function(){return sub}));var vec2_namespaceObject={};function smoothify(fn){let timer=null;return(...args)=>{null!=timer&&(cancelAnimationFrame(timer),timer=null),timer=requestAnimationFrame(()=>{timer=null,fn(...args)})}}function defaultObserver(element,callback){return null!=window.ResizeObserver?function(element,callback){const observer=new ResizeObserver(function(closure){let first=!0;return()=>{first?first=!1:closure()}}(smoothify(callback)));return observer.observe(element),()=>observer.disconnect()}(element,callback):function(_,callback){const event=["resize",smoothify(callback)];return window.addEventListener(...event),()=>window.removeEventListener(...event)}(0,callback)}__webpack_require__.r(vec2_namespaceObject),__webpack_require__.d(vec2_namespaceObject,"create",(function(){return vec2_create})),__webpack_require__.d(vec2_namespaceObject,"clone",(function(){return vec2_clone})),__webpack_require__.d(vec2_namespaceObject,"fromValues",(function(){return vec2_fromValues})),__webpack_require__.d(vec2_namespaceObject,"copy",(function(){return vec2_copy})),__webpack_require__.d(vec2_namespaceObject,"set",(function(){return vec2_set})),__webpack_require__.d(vec2_namespaceObject,"add",(function(){return vec2_add})),__webpack_require__.d(vec2_namespaceObject,"subtract",(function(){return vec2_subtract})),__webpack_require__.d(vec2_namespaceObject,"multiply",(function(){return vec2_multiply})),__webpack_require__.d(vec2_namespaceObject,"divide",(function(){return divide})),__webpack_require__.d(vec2_namespaceObject,"ceil",(function(){return ceil})),__webpack_require__.d(vec2_namespaceObject,"floor",(function(){return floor})),__webpack_require__.d(vec2_namespaceObject,"min",(function(){return min})),__webpack_require__.d(vec2_namespaceObject,"max",(function(){return max})),__webpack_require__.d(vec2_namespaceObject,"round",(function(){return round})),__webpack_require__.d(vec2_namespaceObject,"scale",(function(){return vec2_scale})),__webpack_require__.d(vec2_namespaceObject,"scaleAndAdd",(function(){return scaleAndAdd})),__webpack_require__.d(vec2_namespaceObject,"distance",(function(){return distance})),__webpack_require__.d(vec2_namespaceObject,"squaredDistance",(function(){return squaredDistance})),__webpack_require__.d(vec2_namespaceObject,"length",(function(){return vec2_length})),__webpack_require__.d(vec2_namespaceObject,"squaredLength",(function(){return squaredLength})),__webpack_require__.d(vec2_namespaceObject,"negate",(function(){return negate})),__webpack_require__.d(vec2_namespaceObject,"inverse",(function(){return inverse})),__webpack_require__.d(vec2_namespaceObject,"normalize",(function(){return normalize})),__webpack_require__.d(vec2_namespaceObject,"dot",(function(){return dot})),__webpack_require__.d(vec2_namespaceObject,"cross",(function(){return cross})),__webpack_require__.d(vec2_namespaceObject,"lerp",(function(){return lerp})),__webpack_require__.d(vec2_namespaceObject,"random",(function(){return random})),__webpack_require__.d(vec2_namespaceObject,"transformMat2",(function(){return transformMat2})),__webpack_require__.d(vec2_namespaceObject,"transformMat2d",(function(){return transformMat2d})),__webpack_require__.d(vec2_namespaceObject,"transformMat3",(function(){return transformMat3})),__webpack_require__.d(vec2_namespaceObject,"transformMat4",(function(){return transformMat4})),__webpack_require__.d(vec2_namespaceObject,"rotate",(function(){return vec2_rotate})),__webpack_require__.d(vec2_namespaceObject,"angle",(function(){return angle})),__webpack_require__.d(vec2_namespaceObject,"zero",(function(){return zero})),__webpack_require__.d(vec2_namespaceObject,"str",(function(){return vec2_str})),__webpack_require__.d(vec2_namespaceObject,"exactEquals",(function(){return vec2_exactEquals})),__webpack_require__.d(vec2_namespaceObject,"equals",(function(){return vec2_equals})),__webpack_require__.d(vec2_namespaceObject,"len",(function(){return len})),__webpack_require__.d(vec2_namespaceObject,"sub",(function(){return vec2_sub})),__webpack_require__.d(vec2_namespaceObject,"mul",(function(){return vec2_mul})),__webpack_require__.d(vec2_namespaceObject,"div",(function(){return div})),__webpack_require__.d(vec2_namespaceObject,"dist",(function(){return vec2_dist})),__webpack_require__.d(vec2_namespaceObject,"sqrDist",(function(){return sqrDist})),__webpack_require__.d(vec2_namespaceObject,"sqrLen",(function(){return sqrLen})),__webpack_require__.d(vec2_namespaceObject,"forEach",(function(){return forEach}));class Bounds{constructor(element,resizeCallback,resizeMethod=defaultObserver){this.element=element,this.resizeCallback=resizeCallback,this.updateDimensions(!0),this.cleanup=resizeMethod(element,()=>this.updateDimensions())}destroy(){null!=this.cleanup&&this.cleanup()}updateDimensions(init=!1){this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,init||null==this.resizeCallback||this.resizeCallback(this.width,this.height)}}var ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,RANDOM=Math.random;Math.PI;function create(){var out=new ARRAY_TYPE(6);return ARRAY_TYPE!=Float32Array&&(out[1]=0,out[2]=0,out[4]=0,out[5]=0),out[0]=1,out[3]=1,out}function clone(a){var out=new ARRAY_TYPE(6);return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out}function copy(out,a){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out}function identity(out){return out[0]=1,out[1]=0,out[2]=0,out[3]=1,out[4]=0,out[5]=0,out}function fromValues(a,b,c,d,tx,ty){var out=new ARRAY_TYPE(6);return out[0]=a,out[1]=b,out[2]=c,out[3]=d,out[4]=tx,out[5]=ty,out}function set(out,a,b,c,d,tx,ty){return out[0]=a,out[1]=b,out[2]=c,out[3]=d,out[4]=tx,out[5]=ty,out}function invert(out,a){var aa=a[0],ab=a[1],ac=a[2],ad=a[3],atx=a[4],aty=a[5],det=aa*ad-ab*ac;return det?(det=1/det,out[0]=ad*det,out[1]=-ab*det,out[2]=-ac*det,out[3]=aa*det,out[4]=(ac*aty-ad*atx)*det,out[5]=(ab*atx-aa*aty)*det,out):null}function determinant(a){return a[0]*a[3]-a[1]*a[2]}function multiply(out,a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5];return out[0]=a0*b0+a2*b1,out[1]=a1*b0+a3*b1,out[2]=a0*b2+a2*b3,out[3]=a1*b2+a3*b3,out[4]=a0*b4+a2*b5+a4,out[5]=a1*b4+a3*b5+a5,out}function rotate(out,a,rad){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],s=Math.sin(rad),c=Math.cos(rad);return out[0]=a0*c+a2*s,out[1]=a1*c+a3*s,out[2]=a0*-s+a2*c,out[3]=a1*-s+a3*c,out[4]=a4,out[5]=a5,out}function mat2d_scale(out,a,v){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],v0=v[0],v1=v[1];return out[0]=a0*v0,out[1]=a1*v0,out[2]=a2*v1,out[3]=a3*v1,out[4]=a4,out[5]=a5,out}function translate(out,a,v){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],v0=v[0],v1=v[1];return out[0]=a0,out[1]=a1,out[2]=a2,out[3]=a3,out[4]=a0*v0+a2*v1+a4,out[5]=a1*v0+a3*v1+a5,out}function fromRotation(out,rad){var s=Math.sin(rad),c=Math.cos(rad);return out[0]=c,out[1]=s,out[2]=-s,out[3]=c,out[4]=0,out[5]=0,out}function fromScaling(out,v){return out[0]=v[0],out[1]=0,out[2]=0,out[3]=v[1],out[4]=0,out[5]=0,out}function fromTranslation(out,v){return out[0]=1,out[1]=0,out[2]=0,out[3]=1,out[4]=v[0],out[5]=v[1],out}function str(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"}function frob(a){return Math.hypot(a[0],a[1],a[2],a[3],a[4],a[5],1)}function add(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out[2]=a[2]+b[2],out[3]=a[3]+b[3],out[4]=a[4]+b[4],out[5]=a[5]+b[5],out}function subtract(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out[2]=a[2]-b[2],out[3]=a[3]-b[3],out[4]=a[4]-b[4],out[5]=a[5]-b[5],out}function multiplyScalar(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out[2]=a[2]*b,out[3]=a[3]*b,out[4]=a[4]*b,out[5]=a[5]*b,out}function multiplyScalarAndAdd(out,a,b,scale){return out[0]=a[0]+b[0]*scale,out[1]=a[1]+b[1]*scale,out[2]=a[2]+b[2]*scale,out[3]=a[3]+b[3]*scale,out[4]=a[4]+b[4]*scale,out[5]=a[5]+b[5]*scale,out}function exactEquals(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]}function mat2d_equals(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5];return Math.abs(a0-b0)<=1e-6*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=1e-6*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=1e-6*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=1e-6*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=1e-6*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=1e-6*Math.max(1,Math.abs(a5),Math.abs(b5))}Math.hypot||(Math.hypot=function(){for(var y=0,i=arguments.length;i--;)y+=arguments[i]*arguments[i];return Math.sqrt(y)});var mul=multiply,sub=subtract;function vec2_create(){var out=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(out[0]=0,out[1]=0),out}function vec2_clone(a){var out=new ARRAY_TYPE(2);return out[0]=a[0],out[1]=a[1],out}function vec2_fromValues(x,y){var out=new ARRAY_TYPE(2);return out[0]=x,out[1]=y,out}function vec2_copy(out,a){return out[0]=a[0],out[1]=a[1],out}function vec2_set(out,x,y){return out[0]=x,out[1]=y,out}function vec2_add(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out}function vec2_subtract(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out}function vec2_multiply(out,a,b){return out[0]=a[0]*b[0],out[1]=a[1]*b[1],out}function divide(out,a,b){return out[0]=a[0]/b[0],out[1]=a[1]/b[1],out}function ceil(out,a){return out[0]=Math.ceil(a[0]),out[1]=Math.ceil(a[1]),out}function floor(out,a){return out[0]=Math.floor(a[0]),out[1]=Math.floor(a[1]),out}function min(out,a,b){return out[0]=Math.min(a[0],b[0]),out[1]=Math.min(a[1],b[1]),out}function max(out,a,b){return out[0]=Math.max(a[0],b[0]),out[1]=Math.max(a[1],b[1]),out}function round(out,a){return out[0]=Math.round(a[0]),out[1]=Math.round(a[1]),out}function vec2_scale(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out}function scaleAndAdd(out,a,b,scale){return out[0]=a[0]+b[0]*scale,out[1]=a[1]+b[1]*scale,out}function distance(a,b){var x=b[0]-a[0],y=b[1]-a[1];return Math.hypot(x,y)}function squaredDistance(a,b){var x=b[0]-a[0],y=b[1]-a[1];return x*x+y*y}function vec2_length(a){var x=a[0],y=a[1];return Math.hypot(x,y)}function squaredLength(a){var x=a[0],y=a[1];return x*x+y*y}function negate(out,a){return out[0]=-a[0],out[1]=-a[1],out}function inverse(out,a){return out[0]=1/a[0],out[1]=1/a[1],out}function normalize(out,a){var x=a[0],y=a[1],len=x*x+y*y;return len>0&&(len=1/Math.sqrt(len)),out[0]=a[0]*len,out[1]=a[1]*len,out}function dot(a,b){return a[0]*b[0]+a[1]*b[1]}function cross(out,a,b){var z=a[0]*b[1]-a[1]*b[0];return out[0]=out[1]=0,out[2]=z,out}function lerp(out,a,b,t){var ax=a[0],ay=a[1];return out[0]=ax+t*(b[0]-ax),out[1]=ay+t*(b[1]-ay),out}function random(out,scale){scale=scale||1;var r=2*RANDOM()*Math.PI;return out[0]=Math.cos(r)*scale,out[1]=Math.sin(r)*scale,out}function transformMat2(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[2]*y,out[1]=m[1]*x+m[3]*y,out}function transformMat2d(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[2]*y+m[4],out[1]=m[1]*x+m[3]*y+m[5],out}function transformMat3(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[3]*y+m[6],out[1]=m[1]*x+m[4]*y+m[7],out}function transformMat4(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[4]*y+m[12],out[1]=m[1]*x+m[5]*y+m[13],out}function vec2_rotate(out,a,b,rad){var p0=a[0]-b[0],p1=a[1]-b[1],sinC=Math.sin(rad),cosC=Math.cos(rad);return out[0]=p0*cosC-p1*sinC+b[0],out[1]=p0*sinC+p1*cosC+b[1],out}function angle(a,b){var x1=a[0],y1=a[1],x2=b[0],y2=b[1],mag=Math.sqrt(x1*x1+y1*y1)*Math.sqrt(x2*x2+y2*y2),cosine=mag&&(x1*x2+y1*y2)/mag;return Math.acos(Math.min(Math.max(cosine,-1),1))}function zero(out){return out[0]=0,out[1]=0,out}function vec2_str(a){return"vec2("+a[0]+", "+a[1]+")"}function vec2_exactEquals(a,b){return a[0]===b[0]&&a[1]===b[1]}function vec2_equals(a,b){var a0=a[0],a1=a[1],b0=b[0],b1=b[1];return Math.abs(a0-b0)<=1e-6*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=1e-6*Math.max(1,Math.abs(a1),Math.abs(b1))}var vec,len=vec2_length,vec2_sub=vec2_subtract,vec2_mul=vec2_multiply,div=divide,vec2_dist=distance,sqrDist=squaredDistance,sqrLen=squaredLength,forEach=(vec=vec2_create(),function(a,stride,offset,count,fn,arg){var i,l;for(stride||(stride=2),offset||(offset=0),l=count?Math.min(count*stride+offset,a.length):a.length,i=offset;i<l;i+=stride)vec[0]=a[i],vec[1]=a[i+1],fn(vec,vec,arg),a[i]=vec[0],a[i+1]=vec[1];return a});function closeEnough(x,y,epsilon=1e-6){return Math.abs(x-y)<epsilon}class transform_Transform{constructor(bounds,domCallback){this.matrix=mat2d_namespaceObject.create(),this.callback=null,this.domCallback=domCallback,this.viewport=[bounds.width,bounds.height],this.runCallback=!0,this.bounds=null,this.scaleOffset=[0,0]}updateBounds(bounds){this.viewport=bounds}ensureBounds(){if(null==this.bounds)return;let dx=0,dy=0;const[x1,y1]=this.unproject([0,0]),[x2,y2]=this.unproject(this.bounds[0]),width=x2-x1,boundsWidth=this.bounds[1][0],height=y2-y1,boundsHeight=this.bounds[1][1];if(width<boundsWidth)x1<0?dx=x1:x2>boundsWidth&&(dx=x2-boundsWidth);else{dx=x1+(x2-x1)/2-boundsWidth/2}height<boundsHeight?y1<0?dy=y1:y2>boundsHeight&&(dy=y2-boundsHeight):dy=y1,closeEnough(dx,0)&&closeEnough(dy,0)||mat2d_namespaceObject.translate(this.matrix,this.matrix,[dx,dy])}updateMatrix(matrix){this.matrix=matrix,this.ensureBounds(),null!=this.callback&&this.runCallback&&this.callback(),null!=this.domCallback&&this.domCallback()}project(point){const result=[0,0];return vec2_namespaceObject.transformMat2d(result,point,this.matrix),result}unproject(point){const result=[0,0],inverted=mat2d_namespaceObject.create();return mat2d_namespaceObject.invert(inverted,this.matrix),vec2_namespaceObject.transformMat2d(result,point,inverted),result}setScaleOffset(dx,dy){this.scaleOffset=[dx,dy]}scale(cx,cy,factor){this.matrix[0]*factor<.2?factor=.2/this.matrix[0]:this.matrix[0]*factor>8&&(factor=8/this.matrix[0]);const[dx,dy]=this.unproject([cx-this.scaleOffset[0],cy-this.scaleOffset[1]]);mat2d_namespaceObject.translate(this.matrix,this.matrix,[dx,dy]),mat2d_namespaceObject.scale(this.matrix,this.matrix,[factor,factor]),mat2d_namespaceObject.translate(this.matrix,this.matrix,[-dx,-dy]),this.updateMatrix(this.matrix)}fitTransform(centerPoint,width,height){const vw=this.viewport[0],vh=this.viewport[1],scaleFactor=Math.min(vw/width,vh/height),matrix=mat2d_namespaceObject.create();return mat2d_namespaceObject.translate(matrix,matrix,[vw/2,vh/2]),mat2d_namespaceObject.scale(matrix,matrix,[scaleFactor,scaleFactor]),mat2d_namespaceObject.translate(matrix,matrix,[-centerPoint[0],-centerPoint[1]]),matrix}fitPercents(leftPerc,topPerc,widthPerc,heightPerc,boundsWidth,boundsHeight){const x1=leftPerc*boundsWidth,y1=topPerc*boundsHeight,width=widthPerc*boundsWidth,height=heightPerc*boundsHeight;this.updateMatrix(this.fitTransform([x1+width/2,y1+height/2],width,height))}}function getRelativeCoordinates(event,referenceElement){const position_x=event.pageX,position_y=event.pageY,offset={left:referenceElement.offsetLeft,top:referenceElement.offsetTop};let reference=referenceElement.offsetParent;for(;reference;)offset.left+=reference.offsetLeft,offset.top+=reference.offsetTop,reference=reference.offsetParent;return{x:position_x-offset.left,y:position_y-offset.top}}function events_distance(pinchEvent){const dx=pinchEvent.touches[1].pageX-pinchEvent.touches[0].pageX,dy=pinchEvent.touches[1].pageY-pinchEvent.touches[0].pageY;return Math.sqrt(dx*dx+dy*dy)}class events_Events{constructor(element,container,containerBounds,bounds,transform){this.element=element,this.container=container,this.bounds=bounds,this.transform=transform,this.prevScale=1,this.blockTouchEvents=!1,this.prevTouchDistance=null,this.tappedTwice=!1,this.updateScrollPositions(),this.containerWidth=containerBounds[0],this.containerHeight=containerBounds[1],this.updateBounds(),this.matrixInitiatedScroll=!1,this.events=[[["scroll"],()=>this.scroll()],[["wheel"],e=>this.wheel(e)],[["gesturestart"],()=>this.gesturestart()],[["gesturechange"],e=>this.gesturechange(e)],[["gestureend"],()=>this.gestureend()],[["touchstart"],e=>this.touchstart(e)],[["touchmove"],e=>this.touchmove(e)],[["touchend"],e=>this.touchend(e)]],this.setContainer=smoothify((width,height,left,top)=>{this.scrollPositions={left:left,top:top,width:width,height:height},closeEnough(width,this.container.offsetWidth)&&closeEnough(height,this.container.offsetHeight)||(this.container.style.width=width+"px",this.container.style.height=height+"px"),closeEnough(left,this.element.scrollLeft)||(this.matrixInitiatedScroll=!0,this.element.scrollLeft=left),closeEnough(top,this.scrollPositions.scrollTop)||(this.matrixInitiatedScroll=!0,this.element.scrollTop=top)}),this.transform.callback=()=>this.transformCallback(),this.events.forEach(event=>{event[0].forEach(eventType=>{this.element.addEventListener(eventType,event[1],{passive:!1})})}),this.updateTransformPositions()}updateBounds(){this.transform.bounds=[[this.bounds.width,this.bounds.height],[this.containerWidth,this.containerHeight]]}destroy(){this.events.forEach(event=>{event[0].forEach(eventType=>{this.element.removeEventListener(eventType,event[1],{passive:!1})})})}transformCallback(){const topLeft=this.transform.project([0,0]),bottomRight=this.transform.project([this.containerWidth,this.containerHeight]),width=bottomRight[0]-topLeft[0],height=bottomRight[1]-topLeft[1];this.setContainer(width,height,-topLeft[0],-topLeft[1])}scroll(){this.matrixInitiatedScroll?this.matrixInitiatedScroll=!1:(this.updateScrollPositions(),this.updateTransformPositions())}scrollTo(position){this.matrixInitiatedScroll=!1,this.element.scrollTop=position}scaleTo(scale){this.transform.scale(this.bounds.width/2,0,scale/this.transform.matrix[0])}updateTransformPositions(runCallback=!1){const topPerc=this.scrollPositions.top/this.scrollPositions.height,heightPerc=this.bounds.height/this.scrollPositions.height;let leftPerc=this.scrollPositions.left/this.scrollPositions.width;const widthPerc=this.bounds.width/this.scrollPositions.width;widthPerc>1&&(leftPerc-=(widthPerc-1)/2),runCallback||(this.transform.runCallback=!1),this.transform.fitPercents(leftPerc,topPerc,widthPerc,heightPerc,this.containerWidth,this.containerHeight),runCallback||(this.transform.runCallback=!0)}wheel(e){if(e.ctrlKey&&!this.visualScaleCheck()){e.preventDefault();let{x:x,y:y}=getRelativeCoordinates(e,this.element);const deltaY=function(e){var f,o=e,d=o.detail,w=15*-o.deltaY||o.wheelDelta||o.wheelDeltaY;return d=(d=d?w&&(f=w/d)?d/f:-d/1.35:w/120)<1?d<-1?(-Math.pow(d,2)-224)/225:d:(Math.pow(d,2)+224)/225,Math.min(Math.max(d/2,-1),1)}(e);0==deltaY||this.transform.scale(x,y,Math.exp(.15*deltaY))}}gesturestart(){this.blockTouchEvents=!0,this.prevScale=1}gesturechange(e){if(this.visualScaleCheck())return;const scale=e.scale/this.prevScale,{x:x,y:y}=getRelativeCoordinates(e,this.element);this.transform.scale(x,y,scale),this.prevScale=e.scale}gestureend(){this.blockTouchEvents=!1}visualScaleCheck(){return null!=window.visualViewport&&window.visualViewport.scale>1}touchstart(e){if(e.touches.length>=2){if(this.visualScaleCheck())return;e.stopImmediatePropagation(),e.preventDefault(),this.blockTouchEvents||2!=e.touches.length||(this.prevTouchDistance=events_distance(e))}}touchmove(e){if(e.touches.length>=2){if(this.visualScaleCheck())return;if(e.stopImmediatePropagation(),e.preventDefault(),!this.blockTouchEvents&&null!=this.prevTouchDistance&&2==e.touches.length){const dist=events_distance(e),scale=dist/this.prevTouchDistance,{x:x,y:y}=getRelativeCoordinates({pageX:((pinchEvent=e).touches[0].pageX+pinchEvent.touches[1].pageX)/2,pageY:(pinchEvent.touches[0].pageY+pinchEvent.touches[1].pageY)/2},this.element);this.transform.scale(x,y,scale),this.prevTouchDistance=dist}}var pinchEvent}touchend(e){if(0==e.touches.length&&1==e.changedTouches.length)return this.tappedTwice?void e.preventDefault():(this.tappedTwice=!0,setTimeout(()=>this.tappedTwice=!1,300),!1)}updateScrollPositions(){this.scrollPositions={left:this.element.scrollLeft,top:this.element.scrollTop,width:this.container.scrollWidth,height:this.container.scrollHeight}}}class main_ScrollZoom{constructor(element,options){this.element=element,this.options=options,this.bounds=new Bounds(this.element),this.componentId=0,this.components=(this.options.components||[]).map(x=>({...x,id:this.componentId++})),this.rendered={},this.renderedComponents={},this.containerWidth=this.options.width||500,this.containerHeight=this.options.height||500,this.changeCallback=this.options.changeCallback,this.container=document.createElement("div"),this.container.style.width=this.containerWidth+"px",this.container.style.height=this.containerHeight+"px",this.container.style.position="relative",this.container.style.margin="0 auto",this.element.appendChild(this.container),this.transform=new transform_Transform(this.bounds,()=>this.domCallback()),this.domCallback(),this.events=new events_Events(this.element,this.container,[this.containerWidth,this.containerHeight],this.bounds,this.transform),this.bounds.resizeCallback=(w,h)=>this.resizeBounds(w,h)}destroy(){this.bounds.destroy(),this.events.destroy();for(let i=0;i<this.components.length;i++){const component=this.components[i];this.destroyComponent(component)}}resizeBounds(w,h){this.transform.updateBounds([w,h]),this.events.updateBounds(),this.transform.updateMatrix(this.transform.matrix)}resizeContainer(w,h){this.containerWidth=w,this.containerHeight=h,this.events.containerWidth=w,this.events.containerHeight=h,this.events.updateBounds(),this.events.transformCallback()}destroyComponent(component){const id=component.id,rendered=this.rendered[id];if(null!=rendered){const destroyFn=component.component.destroy;return null!=destroyFn&&destroyFn(rendered),rendered.remove(),delete this.rendered[id],delete this.renderedComponents[id],!0}return!1}triggerChange(){null!=this.changeCallback&&this.changeCallback()}domCallback(){let changed=!1;for(let i=0;i<this.components.length;i++){const component=this.components[i],scrollOrigin=this.transform.project([0,0]),topLeft=this.transform.project([component.x,component.y]),bottomRight=this.transform.project([component.x+component.width,component.y+component.height]),scrollExtreme=this.transform.project([this.containerWidth,this.containerHeight]),hidden=bottomRight[0]<0||topLeft[0]>this.bounds.width||bottomRight[1]<0||topLeft[1]>this.bounds.height,position={x:topLeft[0]-scrollOrigin[0],y:topLeft[1]-scrollOrigin[1],width:bottomRight[0]-topLeft[0],height:bottomRight[1]-topLeft[1],docWidth:scrollExtreme[0]-scrollOrigin[0],docHeight:scrollExtreme[1]-scrollOrigin[1]};if(hidden)this.destroyComponent(component)&&(changed=!0);else if(null==this.rendered[component.id]){const elem=component.component.render(position);this.rendered[component.id]=elem,this.renderedComponents[component.id]=component,this.element.children[0].appendChild(elem),changed=!0}else{const elem=this.rendered[component.id];component.component.update(elem,position)}}changed&&this.triggerChange();const canvas=this.options.debugCanvas,width=this.options.width,height=this.options.height;if(null!=canvas){const ctx=canvas.getContext("2d");ctx.clearRect(-width/.5,-height/.5,width/.5*2,height/.5*2),ctx.restore(),ctx.save(),ctx.scale(.5,.5),ctx.translate(.5*width,.5*height);const topLeft=this.transform.unproject([0,0]),bottomRight=this.transform.unproject([this.bounds.width,this.bounds.height]);ctx.strokeRect(topLeft[0],topLeft[1],bottomRight[0]-topLeft[0],bottomRight[1]-topLeft[1]),ctx.fillStyle="rgba(0, 0, 0, 0.02)",ctx.strokeRect(topLeft[0],topLeft[1],bottomRight[0]-topLeft[0],bottomRight[1]-topLeft[1]);for(let i=0;i<this.components.length;i++){const component=this.components[i],topLeft=[component.x,component.y],bottomRight=[component.x+component.width,component.y+component.height];ctx.fillStyle="rgba(0, 0, 0, 0.08)",ctx.fillRect(topLeft[0],topLeft[1],bottomRight[0]-topLeft[0],bottomRight[1]-topLeft[1])}}}scrollTo(position){this.events.scrollTo(position)}scaleTo(scale){this.events.scaleTo(scale)}}}}]);